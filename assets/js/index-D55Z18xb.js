import{j as e}from"./utils-DSBVV_PW.js";import{a as x}from"./vendor-DoALFvsH.js";import{u as q,e as W}from"./main-Dcvo2fQ5.js";import{I as c,l as $,aL as V,K as F,Q as O,aI as Q,b7 as G,aK as A,aX as J,aj as X,b8 as U,n as N,b9 as Y,c as H,ay as Z,ba as M,bb as K,t as ee,bc as se}from"./errors-jP3Ij2gK.js";import{a2 as te,a3 as L,a4 as ae}from"./login-C1ujRpW7.js";import"./data-73RVSc-N.js";import"./ui-DETUEJ2B.js";const re=({loading:s,lastUpdated:i,onRefresh:r})=>e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-600",children:"Cliniio Intelligence"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Predictive analytics and strategic insights for clinical operations"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:r,disabled:s,className:`px-4 py-2 rounded-lg transition-colors flex items-center ${s?"bg-gray-400 cursor-not-allowed":"bg-[#4ECDC4] hover:bg-[#3DB8B0] text-white"}`,children:[e.jsx(c,{path:$,size:1.2,className:`mr-2 ${s?"animate-spin":""}`}),s?"Refreshing...":"Refresh"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated:"," ",i?new Date(i).toLocaleString():"Never"]})]})]})});function ie({activeTab:s,onTabChange:i}){const r=[{id:"overview",label:"Overview",icon:V},{id:"forecasting",label:"Forecasting",icon:F},{id:"risks",label:"Risk Analysis",icon:O},{id:"actions",label:"Actions",icon:Q},{id:"insights",label:"Insights",icon:G},{id:"integrations",label:"Integrations",icon:A}];return e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:r.map(t=>e.jsxs("button",{onClick:()=>i(t.id),style:{padding:"0.5rem 1rem",border:"none",borderRadius:"0.5rem",background:s===t.id?"#eee":"white",cursor:"pointer",boxShadow:s===t.id?"0 2px 4px rgba(0,0,0,0.1)":"none",display:"flex",alignItems:"center",gap:"0.5rem",color:"#374151"},children:[e.jsx(c,{path:t.icon,size:1}),t.label]},t.id))})}function le({summary:s}){var i,r,t,n,g,h,l;const a=s;function o(){var d;return(d=a==null?void 0:a.risks)==null?void 0:d.some(m=>m.level==="high")}function y(){var d,m;return(m=(d=a==null?void 0:a.actions)==null?void 0:d.filter(R=>R.urgency==="high"))!=null?m:[]}function p(d){switch(d.toLowerCase()){case"critical":return"border-red-500 bg-red-50";case"high":return"border-orange-500 bg-orange-50";case"medium":return"border-yellow-500 bg-yellow-50";case"low":return"border-green-500 bg-green-50";default:return"border-gray-500 bg-gray-50"}}function k(d){switch(d.toLowerCase()){case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}function S(d){}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(c,{path:F,size:1.5,className:"text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Forecasts Active"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(((i=a==null?void 0:a.toolReplacement)==null?void 0:i.length)||0)+(((r=a==null?void 0:a.autoclaveCapacity)==null?void 0:r.length)||0)+(((t=a==null?void 0:a.supplyDepletion)==null?void 0:t.length)||0)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(c,{path:O,size:1.5,className:"text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Risk Level"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 capitalize",children:((n=a==null?void 0:a.auditRisk)==null?void 0:n.riskLevel)||"No data"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(c,{path:J,size:1.5,className:"text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Monthly Savings"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",(((g=a==null?void 0:a.efficiencyROI)==null?void 0:g.estimatedLaborSavings)||0).toLocaleString()]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(c,{path:X,size:1.5,className:"text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Training Gaps"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((l=(h=a==null?void 0:a.trainingGaps)==null?void 0:h.usersWithGaps)==null?void 0:l.length)||0})]})]})})]}),o()&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{path:U,size:1.5,className:"text-red-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"High Priority Alerts"}),e.jsxs("p",{className:"text-sm text-red-700 mt-1",children:[y().length," urgent actions require immediate attention"]})]}),e.jsx("button",{onClick:()=>void 0,className:"ml-auto bg-red-100 text-red-800 px-3 py-2 rounded-md text-sm font-medium hover:bg-red-200",children:"View Actions"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Forecasts"}),a!=null&&a.supplyDepletion&&a.supplyDepletion.length>0?e.jsx("div",{className:"space-y-3",children:a.supplyDepletion.slice(0,3).map((d,m)=>e.jsx("div",{className:`p-3 rounded-lg border-l-4 ${p(d.reorderUrgency)}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:d.itemName}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Depletes in"," ",Math.ceil((new Date(d.depletionDate).getTime()-Date.now())/(1e3*60*60*24))," ","days"]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${k(d.reorderUrgency)}`,children:d.reorderUrgency})]})},m))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No supply depletion forecasts available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data will appear here once inventory items are added"})]})]}),a!=null&&a.toolTurnoverUtilization&&a.toolTurnoverUtilization.length>0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:$,size:1.5,className:"text-blue-600 mr-2"}),"Tool Turnover & Utilization"]}),e.jsx("div",{className:"space-y-4",children:a.toolTurnoverUtilization.slice(0,3).map((d,m)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:d.toolName}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Batch: ",d.toolBatchId]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${d.performanceScore>=90?"bg-green-100 text-green-800":d.performanceScore>=80?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["Score: ",d.performanceScore]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Daily Cycles:"}),e.jsx("div",{className:"text-gray-900",children:d.dailyCycleCount})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Turnover Rate:"}),e.jsxs("div",{className:"text-gray-900",children:[d.turnoverRate.toFixed(1),"x/day"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Efficiency:"}),e.jsxs("div",{className:"text-gray-900",children:[d.utilizationEfficiency,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Idle Time:"}),e.jsxs("div",{className:"text-gray-900",children:[d.idleTimePercentage,"%"]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Peak Hours:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:d.peakUsageHours.join(", ")})]}),e.jsxs("div",{className:"text-sm mt-1",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Optimization:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:d.recommendedOptimization})]})]})]},m))})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No tool utilization data available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data will appear here once sterilization cycles are completed"})]})})]})}function ne({summary:s}){const i=t=>{switch(t){case"low":return"border-green-500 bg-green-50";case"medium":return"border-yellow-500 bg-yellow-50";case"high":return"border-orange-500 bg-orange-50";case"critical":return"border-red-500 bg-red-50";default:return"border-gray-500 bg-gray-50"}},r=t=>{switch(t){case"low":return"border-green-500 bg-green-50";case"medium":return"border-yellow-500 bg-yellow-50";case"high":return"border-orange-500 bg-orange-50";case"critical":return"border-red-500 bg-red-50";default:return"border-gray-500 bg-gray-50"}};return s?e.jsxs("div",{className:"space-y-6",children:[s.toolReplacement&&s.toolReplacement.length>0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:F,size:1.5,className:"text-blue-600 mr-2"}),"Tool Replacement Forecasts"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.toolReplacement.map((t,n)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:t.toolName}),e.jsxs("span",{className:"text-sm text-gray-500",children:["ID: ",t.toolBatchId]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Current Lifecycle:"}),e.jsxs("span",{className:"text-sm font-medium",children:[t.currentLifecycle,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"End of Life:"}),e.jsx("span",{className:"text-sm font-medium",children:new Date(t.predictedEndOfLife).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Reorder Date:"}),e.jsx("span",{className:"text-sm font-medium",children:new Date(t.recommendedReorderDate).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Confidence:"}),e.jsxs("span",{className:"text-sm font-medium",children:[Math.round(t.confidence*100),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Estimated Cost:"}),e.jsxs("span",{className:"text-sm font-medium",children:["$",(t.estimatedCost||0).toLocaleString()]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("p",{className:"text-xs text-gray-600",children:["Supplier: ",t.supplierSuggestion]})})]},n))})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No tool replacement forecasts available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data will appear here once sterilization cycles are completed"})]})}),s.autoclaveCapacity&&s.autoclaveCapacity.length>0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:Y,size:1.5,className:"text-orange-600 mr-2"}),"Autoclave Capacity Planning"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.autoclaveCapacity.map((t,n)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:["Autoclave ",t.autoclaveId]}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.currentLoadPercentage>90?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:[t.currentLoadPercentage,"% Load"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Queue Length:"}),e.jsxs("span",{className:"text-sm font-medium",children:[t.queueLength," items"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Overload Date:"}),e.jsx("span",{className:"text-sm font-medium",children:new Date(t.predictedOverloadDate).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Recommended Action:"}),e.jsx("span",{className:"text-sm font-medium capitalize",children:t.recommendedAction.replace("_"," ")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Timeline:"}),e.jsx("span",{className:"text-sm font-medium",children:t.timeline})]})]})]},n))})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No autoclave capacity data available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data will appear here once autoclave cycles are completed"})]})}),s.supplyDepletion&&s.supplyDepletion.length>0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:H,size:1.5,className:"text-red-600 mr-2"}),"Supply Depletion Forecasts"]}),e.jsx("div",{className:"space-y-3",children:s.supplyDepletion.map((t,n)=>e.jsx("div",{className:`p-4 rounded-lg border-l-4 ${r(t.reorderUrgency)}`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:t.itemName}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i(t.reorderUrgency)}`,children:t.reorderUrgency})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Current Stock:"}),e.jsx("span",{className:"ml-2 font-medium",children:t.currentStock})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Depletion Date:"}),e.jsx("span",{className:"ml-2 font-medium",children:new Date(t.depletionDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Reorder Date:"}),e.jsx("span",{className:"ml-2 font-medium",children:new Date(t.recommendedReorderDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Cost Trend:"}),e.jsx("span",{className:"ml-2 font-medium capitalize",children:t.costTrend})]})]})]})})},n))})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No supply depletion forecasts available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data will appear here once inventory items are added"})]})})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No forecasting data available"})]})})}function ce({summary:s}){var i,r,t,n,g,h,l,a,o,y,p,k,S,d,m,R,z;const D=f=>{switch(f){case"low":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-orange-100 text-orange-800";case"critical":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return s?e.jsxs("div",{className:"space-y-6",children:[s.auditRisk?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:O,size:1.5,className:"text-red-600 mr-2"}),"Audit Risk Assessment"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-20 h-20 rounded-full ${D(((i=s.auditRisk)==null?void 0:i.riskLevel)||"medium")} mb-3`,children:e.jsx("span",{className:"text-2xl font-bold",children:((r=s.auditRisk)==null?void 0:r.overallRiskScore)||85})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Overall Risk Score"}),e.jsxs("p",{className:`text-sm font-medium capitalize ${D(((t=s.auditRisk)==null?void 0:t.riskLevel)||"medium")}`,children:[((n=s.auditRisk)==null?void 0:n.riskLevel)||"medium"," Risk"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-orange-100 text-orange-600 mb-3",children:e.jsx("span",{className:"text-2xl font-bold",children:((g=s.auditRisk)==null?void 0:g.incompleteCycles)||2})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Incomplete Cycles"}),e.jsx("p",{className:"text-sm text-orange-600",children:"This Week"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-yellow-100 text-yellow-600 mb-3",children:e.jsx("span",{className:"text-2xl font-bold",children:((l=(h=s.auditRisk)==null?void 0:h.riskFactors)==null?void 0:l.length)||2})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Risk Factors"}),e.jsx("p",{className:"text-sm text-yellow-600",children:"Identified"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Risk Factors"}),e.jsx("div",{className:"space-y-3",children:(a=s.auditRisk)!=null&&a.riskFactors&&s.auditRisk.riskFactors.length>0?s.auditRisk.riskFactors.map((f,v)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:f.factor}),e.jsx("p",{className:"text-sm text-gray-600",children:f.description})]}),e.jsxs("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-800",children:["Severity: ",f.severity]})]},v)):e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No risk factors identified"})})]})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No audit risk data available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data will appear here once sterilization cycles are completed"})]})}),s.theftLoss?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:H,size:1.5,className:"text-orange-600 mr-2"}),"Theft & Loss Analysis"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-orange-100 text-orange-600 mb-2",children:e.jsxs("span",{className:"text-xl font-bold",children:[s.theftLoss.estimatedLossPercentage||0,"%"]})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Estimated Loss"}),e.jsxs("p",{className:"text-lg font-bold text-orange-600",children:["$",((o=s.theftLoss.estimatedLossValue)==null?void 0:o.toLocaleString())||"0"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Flagged Items:"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:(y=s.theftLoss)!=null&&y.flaggedItems&&s.theftLoss.flaggedItems.length>0?s.theftLoss.flaggedItems.map((f,v)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(c,{path:U,size:.8,className:"text-orange-500 mr-2"}),f]},v)):e.jsx("li",{className:"text-gray-500",children:"No flagged items"})})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Risk Factors:"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:(p=s.theftLoss)!=null&&p.riskFactors&&s.theftLoss.riskFactors.length>0?s.theftLoss.riskFactors.map((f,v)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(c,{path:N,size:.8,className:"text-blue-500 mr-2"}),f]},v)):e.jsx("li",{className:"text-gray-500",children:"No risk factors identified"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Incident Summary:"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:["Flagged Items:"," ",((S=(k=s.theftLoss)==null?void 0:k.flaggedItems)==null?void 0:S.length)||0]}),e.jsxs("p",{children:["Risk Factors:"," ",((m=(d=s.theftLoss)==null?void 0:d.riskFactors)==null?void 0:m.length)||0]}),e.jsxs("p",{children:["Recommended Actions:"," ",((z=(R=s.theftLoss)==null?void 0:R.recommendedActions)==null?void 0:z.length)||0]})]})]})]})})]})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No theft/loss data available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data will appear here once inventory tracking is implemented"})]})})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No risk analysis data available"})]})})}function de({summary:s,optimizationTips:i=[]}){var r,t,n;const g=()=>s!=null&&s.actions?s.actions.filter(l=>l.urgency==="high"):[],h=i||[];return s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:U,size:1.5,className:"text-red-600 mr-2"}),"Urgent Actions Required"]}),e.jsxs("div",{className:"space-y-4",children:[g().map((l,a)=>e.jsx("div",{className:"border-l-4 border-red-500 bg-red-50 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-900",children:l.title}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:l.description})]}),e.jsx("button",{className:"bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-red-700",children:"Take Action"})]})},a)),g().length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No urgent actions required at this time"})]})]}),s.trainingGaps?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(c,{path:Z,size:1.5,className:"text-blue-600 mr-2"}),"Training & Knowledge Gaps"]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((t=(r=s.trainingGaps)==null?void 0:r.usersWithGaps)==null?void 0:t.length)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Gaps"})]})]}),(n=s.trainingGaps)!=null&&n.usersWithGaps&&s.trainingGaps.usersWithGaps.length>0?e.jsx("div",{className:"space-y-4",children:s.trainingGaps.usersWithGaps.map((l,a)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:l.userName||"Unknown User"}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:["ID: ",l.userId]}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Training Required"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"font-medium text-gray-700",children:"Knowledge Gaps:"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:l.recommendedTraining&&l.recommendedTraining.length>0?l.recommendedTraining.map((o,y)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(c,{path:M,size:.8,className:"mr-2"}),o]},y)):e.jsx("li",{className:"text-gray-500",children:"No specific gaps identified"})})]})]},a))}):e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No training gaps identified"})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No training data available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data will appear here once staff assessments are completed"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:K,size:1.5,className:"text-purple-600 mr-2"}),"Optimization Tips"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map((l,a)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:l.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l.difficulty==="easy"?"bg-green-100 text-green-800":l.difficulty==="medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:l.difficulty})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:l.description}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Current:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:l.currentState})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Action:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:l.recommendedAction})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Expected:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:l.expectedOutcome})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Effort:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:l.estimatedEffort})]})]})]},a))})]})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No action items data available"})]})})}function oe({summary:s,recommendations:i=[],optimizationTips:r=[],insightsSummary:t}){const n=a=>{switch(a.toLowerCase()){case"high":return"border-red-500 bg-red-50";case"medium":return"border-yellow-500 bg-yellow-50";case"low":return"border-green-500 bg-green-50";default:return"border-gray-500 bg-gray-50"}},g=t||{totalRecommendations:0,criticalItems:0,estimatedSavings:0,estimatedTimeSavings:0},h=i||[],l=r||[];return s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(c,{path:G,size:2,className:"text-blue-600 mr-3"}),e.jsx("h3",{className:"text-xl font-bold text-blue-900",children:"Actionable Insights Summary"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:g.totalRecommendations}),e.jsx("div",{className:"text-sm text-blue-700",children:"Total Recommendations"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:g.criticalItems}),e.jsx("div",{className:"text-sm text-red-700",children:"Critical Items"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",g.estimatedSavings.toLocaleString()]}),e.jsx("div",{className:"text-sm text-green-700",children:"Estimated Savings"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[g.estimatedTimeSavings,"h"]}),e.jsx("div",{className:"text-sm text-purple-700",children:"Time Savings"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:ee,size:1.5,className:"text-green-600 mr-2"}),"Smart Recommendations"]}),e.jsx("div",{className:"space-y-4",children:h.slice(0,5).map((a,o)=>e.jsxs("div",{className:`p-4 rounded-lg border ${n(a.priority)}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:a.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:a.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:["Timeline: ",a.timeline]}),e.jsxs("span",{className:"text-gray-500",children:["Confidence: ",Math.round(a.confidence*100),"%"]}),e.jsxs("span",{className:"text-gray-500",children:["Category: ",a.category]})]}),a.impact.costSavings&&e.jsx("div",{className:"mt-2 text-sm",children:e.jsxs("span",{className:"text-green-600 font-medium",children:["💰 Potential savings: $",a.impact.costSavings.toLocaleString()]})})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${n(a.priority)}`,children:a.priority})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Action Items:"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:a.actionItems.slice(0,3).map((y,p)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(c,{path:M,size:.8,className:"text-blue-500 mr-2"}),y]},p))})]})]},o))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:K,size:1.5,className:"text-purple-600 mr-2"}),"Optimization Tips"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map((a,o)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:a.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a.difficulty==="easy"?"bg-green-100 text-green-800":a.difficulty==="medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:a.difficulty})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:a.description}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Current:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:a.currentState})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Action:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:a.recommendedAction})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Expected:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:a.expectedOutcome})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Effort:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:a.estimatedEffort})]})]})]},o))})]})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No insights data available"})]})})}function me({summary:s,integrationMetrics:i}){const r={knowledgeHubArticles:24,activeSuppliers:8,recentAuditActions:12,integrationHealth:87,lastSync:new Date().toISOString()},t=i||r;return s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:A,size:1.5,className:"text-blue-600 mr-2"}),"Integration Health"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.knowledgeHubArticles}),e.jsx("div",{className:"text-sm text-blue-700",children:"Knowledge Hub Articles"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:t.activeSuppliers}),e.jsx("div",{className:"text-sm text-green-700",children:"Active Suppliers"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:t.recentAuditActions}),e.jsx("div",{className:"text-sm text-purple-700",children:"Recent Audit Actions"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-900",children:[t.integrationHealth,"%"]}),e.jsx("div",{className:"text-sm text-orange-700",children:"Integration Health"})]})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-600",children:["Last sync:"," ",t.lastSync?new Date(t.lastSync).toLocaleString():"Never"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Integration Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center",children:[e.jsx(c,{path:se,size:1.2,className:"mr-2"}),"Sync Knowledge Hub"]}),e.jsxs("button",{className:"bg-gray-400 text-gray-600 px-4 py-2 rounded-lg cursor-not-allowed flex items-center justify-center opacity-60",disabled:!0,children:[e.jsx(c,{path:A,size:1.2,className:"mr-2"}),"Supplier Database Sync",e.jsx("span",{className:"ml-2 text-xs bg-gray-500 text-white px-2 py-1 rounded-full",children:"Coming Soon"})]})]})]})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No integration data available"})]})})}var xe=Object.defineProperty,ge=Object.defineProperties,he=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,ue=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,E=(s,i,r)=>i in s?xe(s,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[i]=r,C=(s,i)=>{for(var r in i||(i={}))ue.call(i,r)&&E(s,r,i[r]);if(P)for(var r of P(i))pe.call(i,r)&&E(s,r,i[r]);return s},T=(s,i)=>ge(s,he(i)),_=(s,i,r)=>new Promise((t,n)=>{var g=a=>{try{l(r.next(a))}catch(o){n(o)}},h=a=>{try{l(r.throw(a))}catch(o){n(o)}},l=a=>a.done?t(a.value):Promise.resolve(a.value).then(g,h);l((r=r.apply(s,i)).next())});const B={ttl:300*1e3,maxSize:50};class je{constructor(i=B){this.cache=new Map,this.config=i}set(i,r,t){if(this.cleanup(),this.cache.size>=this.config.maxSize){const n=this.cache.keys().next().value;n&&this.cache.delete(n)}this.cache.set(i,{data:r,timestamp:Date.now(),ttl:t||this.config.ttl})}get(i){const r=this.cache.get(i);return r?Date.now()-r.timestamp>r.ttl?(this.cache.delete(i),null):r.data:null}has(i){const r=this.cache.get(i);return r?Date.now()-r.timestamp>r.ttl?(this.cache.delete(i),!1):!0:!1}clear(){this.cache.clear()}cleanup(){const i=Date.now();for(const[r,t]of this.cache.entries())i-t.timestamp>t.ttl&&this.cache.delete(r)}}const ye=(s={},i)=>{const t=x.useRef(new je(C(C({},B),i))).current,[n,g]=x.useState({summary:null,loading:!1,error:null,updated_at:null,confidence:0}),h=x.useMemo(()=>`forecasting_${JSON.stringify(s||{})}`,[s]),l=x.useMemo(()=>te.getInstance(),[]),a=x.useMemo(()=>t.has(h),[t,h]),o=x.useMemo(()=>n.summary?{toolReplacement:n.summary.toolReplacement||[],autoclaveCapacity:n.summary.autoclaveCapacity||[],inventoryInflation:n.summary.inventoryInflation||[],clinicalStaffing:n.summary.clinicalStaffing||null,adminStaffing:n.summary.adminStaffing||null,theftLoss:n.summary.theftLoss||null,supplyDepletion:n.summary.supplyDepletion||[],toolTurnoverUtilization:n.summary.toolTurnoverUtilization||[],auditRisk:n.summary.auditRisk||null,trainingGaps:n.summary.trainingGaps||null,efficiencyROI:n.summary.efficiencyROI||null}:null,[n.summary]),y=x.useCallback((j=!1)=>_(null,null,function*(){if(!j&&a){const u=t.get(h);if(u){g({summary:u,loading:!1,error:null,updated_at:u.lastUpdated,confidence:u.confidence});return}}g(u=>T(C({},u),{loading:!0,error:null}));try{const u=yield l.getIntelligenceSummary(s,j);t.set(h,u),g({summary:u,loading:!1,error:null,updated_at:u.lastUpdated,confidence:u.confidence})}catch(u){g(b=>T(C({},b),{loading:!1,error:u instanceof Error?u.message:"Failed to fetch intelligence data"}))}}),[s,l,t,h,a]),p=x.useCallback((j,u,b)=>_(null,null,function*(){const w=`${h}_${b}`;if(t.has(w))return t.get(w);try{const I=yield u();return t.set(w,I),I}catch(I){throw console.error(`Error fetching ${j}:`,I),I}}),[t,h]),k=x.useCallback(()=>_(null,null,function*(){return p("tool replacement forecast",()=>l.getToolReplacementForecast(s),"tool_replacement")}),[p,l,s]),S=x.useCallback(()=>_(null,null,function*(){return p("autoclave capacity forecast",()=>l.getAutoclaveCapacityForecast(s),"autoclave_capacity")}),[p,l,s]),d=x.useCallback(()=>_(null,null,function*(){return p("tool turnover utilization",()=>l.getToolTurnoverUtilization(s),"tool_turnover")}),[p,l,s]),m=x.useCallback(()=>_(null,null,function*(){return p("audit risk score",()=>l.getAuditRiskScore(s),"audit_risk")}),[p,l,s]),R=x.useCallback(()=>_(null,null,function*(){return p("supply depletion forecast",()=>l.getSupplyDepletionForecast(s),"supply_depletion")}),[p,l,s]),z=x.useMemo(()=>{if(!o)return!1;const{auditRisk:j,supplyDepletion:u}=o;return(j==null?void 0:j.riskLevel)==="high"||(j==null?void 0:j.riskLevel)==="critical"||u.some(b=>b.reorderUrgency==="critical")},[o]),D=x.useMemo(()=>{var j,u;if(!o)return[];const b=[],w=o.supplyDepletion.filter(I=>I.reorderUrgency==="critical");return w.length>0&&b.push({type:"critical_supply",message:`${w.length} critical supplies need immediate reorder`,items:w}),(((j=o.auditRisk)==null?void 0:j.riskLevel)==="high"||((u=o.auditRisk)==null?void 0:u.riskLevel)==="critical")&&b.push({type:"audit_risk",message:"High audit risk detected - immediate action required",riskScore:o.auditRisk}),b},[o]),f=x.useCallback(()=>{t.clear(),g(j=>T(C({},j),{updated_at:null}))},[t]),v=x.useCallback(()=>_(null,null,function*(){t.clear(),yield y(!0)}),[y,t]);return x.useEffect(()=>{s.facilityId&&y()},[s.facilityId,y]),T(C({},n),{lastUpdated:n.updated_at,individualForecasts:o,isCached:a,cacheKey:h,refreshData:v,clearCache:f,fetchIntelligenceSummary:y,getToolReplacementForecast:k,getAutoclaveCapacityForecast:S,getToolTurnoverUtilization:d,getAuditRiskScore:m,getSupplyDepletionForecast:R,hasHighRiskItems:z,getUrgentActions:D})};var Ne=(s,i,r)=>new Promise((t,n)=>{var g=a=>{try{l(r.next(a))}catch(o){n(o)}},h=a=>{try{l(r.throw(a))}catch(o){n(o)}},l=a=>a.done?t(a.value):Promise.resolve(a.value).then(g,h);l((r=r.apply(s,i)).next())});function _e(){const[s,i]=x.useState("overview"),[r,t]=x.useState([]),[n,g]=x.useState([]),[h,l]=x.useState(null),[a,o]=x.useState([]),[y,p]=x.useState(null),{getCurrentFacilityId:k}=q(),S=k(),d=x.useMemo(()=>({facilityId:S||""}),[S]),{summary:m,loading:R,lastUpdated:z,refreshData:D}=ye(d);x.useEffect(()=>{m&&Ne(null,null,function*(){try{const j=yield L.generateRecommendations(m),u=yield L.generateOptimizationTips(m),b=yield L.generateRiskAlerts(m),w=yield L.getActionableInsights(m);t(j||[]),g(u||[]),o(b||[]),p(w||null),ae.getIntegrationMetrics().then(l)}catch(j){console.error("Error generating insights:",j)}})},[m]);function f(v){switch(v){case"forecasting":return e.jsx(ne,{summary:m});case"risks":return e.jsx(ce,{summary:m});case"actions":return e.jsx(de,{summary:m,recommendations:r,optimizationTips:n});case"insights":return e.jsx(oe,{summary:m,recommendations:r,optimizationTips:n,insightsSummary:y});case"integrations":return e.jsx(me,{summary:m,integrationMetrics:h});case"overview":return e.jsx(le,{summary:m,actionableInsights:a});default:return null}}return e.jsx(W,{children:e.jsxs("div",{style:{padding:"2rem"},children:[e.jsx(re,{loading:R,lastUpdated:z,onRefresh:D}),e.jsx(ie,{activeTab:s,onTabChange:i}),e.jsx("div",{style:{marginTop:"1rem"},children:f(s)})]})})}export{_e as default};
