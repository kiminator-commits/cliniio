const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/PolicyEditor-Pspjnpex.js","assets/js/react-vendor-DBfrHuQ-.js","assets/js/data-vendor-4okv28M8.js","assets/js/components-BtXJbSH9.js","assets/js/services-JA4N6ZXe.js","assets/js/inventory-pages-yK5D55FD.js","assets/js/ui-vendor-BmV1twT8.js","assets/css/ui-vendor-DJSy8M6b.css","assets/js/utils-vendor-BtegoRPv.js","assets/js/vendor-BY7xYAL4.js","assets/js/knowledgehub-pages-DX_b2YG9.js","assets/css/components-B4OH_j2L.css","assets/js/settings-pages-CyhDoqVN.js"])))=>i.map(i=>d[i]);
import{r as p,j as e,I as x,P as ne,b as cs,u as ds}from"./react-vendor-DBfrHuQ-.js";import{aU as Z,J as le,b1 as tt,b as J,ah as Ht,af as Q,E as Le,b2 as us,j as be,a5 as q,a8 as Ie,u as ms,b3 as ps,F as oe,T as ye,b4 as xs,ag as st,r as je,c as ae,A as hs,b5 as gs,m as fs,i as Me,b6 as Yt,b7 as Kt,b8 as dt,aK as bs,a6 as ys,S as $e,Q as vs,o as js,aQ as ve,aV as Qt,C as Wt,D as Re,l as ut,b9 as Ns,ba as ke,a1 as Cs,a3 as rt,a2 as Zt,bb as Xt,a as mt,aM as at,aP as Ae,q as ws,aZ as Ss}from"./ui-vendor-BmV1twT8.js";import{s as B,ac as _s,g as Jt,_ as es,S as Es}from"./components-BtXJbSH9.js";import{ar as ze,as as V,at as Se,au as ce,av as Ue,aw as Ge,ax as Ds,ay as Ps,az as _e}from"./vendor-BY7xYAL4.js";import{aJ as Os,aK as Ts,aL as Ve,aM as ks,aN as As,aO as Is,aP as $s,aQ as Rs}from"./services-JA4N6ZXe.js";import{u as Ls,a as Ms,b as zs}from"./settings-pages-CyhDoqVN.js";var Us=Object.defineProperty,Fs=Object.defineProperties,qs=Object.getOwnPropertyDescriptors,pt=Object.getOwnPropertySymbols,Bs=Object.prototype.hasOwnProperty,Gs=Object.prototype.propertyIsEnumerable,xt=(t,r,s)=>r in t?Us(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,P=(t,r)=>{for(var s in r||(r={}))Bs.call(r,s)&&xt(t,s,r[s]);if(pt)for(var s of pt(r))Gs.call(r,s)&&xt(t,s,r[s]);return t},$=(t,r)=>Fs(t,qs(r));const Vs={contentType:"course",selectedContentType:"course",activeTab:"content",courseStep:1,courseData:{id:"",title:"",description:"",objectives:[""],prerequisites:[""],linkedPrerequisites:[],modules:[],assessments:[],estimatedDuration:0,difficulty:"beginner",tags:[],isPublished:!1,settings:{difficulty:"beginner",estimatedDuration:0,tags:"",allowRetakes:!0,certificateOnCompletion:!0}},policyData:{},procedureData:{},smsData:{},pathwayData:{},textFormattingData:{},tableData:{},mediaData:{},currentContent:void 0,aiSuggestions:[],mediaLibrary:[],isDirty:!1,isSaving:!1,validationErrors:{}};function Hs(t,r){switch(r.type){case"SET_SELECTED_CONTENT_TYPE":return $(P({},t),{selectedContentType:r.payload});case"SET_ACTIVE_TAB":return $(P({},t),{activeTab:r.payload});case"SET_COURSE_STEP":return $(P({},t),{courseStep:r.payload});case"SET_COURSE_DATA":return $(P({},t),{courseData:r.payload});case"UPDATE_COURSE_FIELD":return $(P({},t),{courseData:P(P({},t.courseData),r.payload)});case"ADD_MODULE":return $(P({},t),{courseData:$(P({},t.courseData),{modules:[...t.courseData.modules,r.payload]})});case"ADD_LESSON":return $(P({},t),{courseData:$(P({},t.courseData),{modules:t.courseData.modules.map(s=>s.id===r.payload.moduleId?$(P({},s),{lessons:[...s.lessons,r.payload.lesson]}):s)})});case"ADD_ASSESSMENT":return $(P({},t),{courseData:$(P({},t.courseData),{assessments:[...t.courseData.assessments,r.payload]})});case"UPDATE_MODULE":return $(P({},t),{courseData:$(P({},t.courseData),{modules:t.courseData.modules.map(s=>s.id===r.payload.moduleId?P(P({},s),r.payload.updates):s)})});case"UPDATE_LESSON":return $(P({},t),{courseData:$(P({},t.courseData),{modules:t.courseData.modules.map(s=>s.id===r.payload.moduleId?$(P({},s),{lessons:s.lessons.map(n=>n.id===r.payload.lessonId?P(P({},n),r.payload.updates):n)}):s)})});case"UPDATE_ASSESSMENT":return $(P({},t),{courseData:$(P({},t.courseData),{assessments:t.courseData.assessments.map(s=>s.id===r.payload.assessmentId?P(P({},s),r.payload.updates):s)})});case"REMOVE_MODULE":return $(P({},t),{courseData:$(P({},t.courseData),{modules:t.courseData.modules.filter(s=>s.id!==r.payload)})});case"REMOVE_LESSON":return $(P({},t),{courseData:$(P({},t.courseData),{modules:t.courseData.modules.map(s=>s.id===r.payload.moduleId?$(P({},s),{lessons:s.lessons.filter(n=>n.id!==r.payload.lessonId)}):s)})});case"REMOVE_ASSESSMENT":return $(P({},t),{courseData:$(P({},t.courseData),{assessments:t.courseData.assessments.filter(s=>s.id!==r.payload)})});case"BULK_CREATE_COURSE_STRUCTURE":{const{modules:s,lessonsPerModule:n,assessments:i}=r.payload,l=Date.now(),d=Array.from({length:s},(a,c)=>{const b=`module-${l}-${c}`;return{id:b,title:`Module ${c+1}`,description:`Module ${c+1} description`,lessons:Array.from({length:n},(j,m)=>({id:`lesson-${l}-${c}-${m}`,title:`Lesson ${m+1}`,content:`Lesson ${m+1} content`,order:m,moduleId:b,estimatedDuration:15,isRequired:!1,type:"text"})),order:c,isRequired:!1,estimatedDuration:n*15}}),o=Array.from({length:i},(a,c)=>({id:`assessment-${Date.now()}-${c}`,title:`Assessment ${c+1}`,questions:[],passingScore:70,isRequired:!1}));return $(P({},t),{courseData:$(P({},t.courseData),{modules:d,assessments:o})})}case"SET_AI_SUGGESTIONS":return $(P({},t),{aiSuggestions:r.payload});case"UPDATE_CONTENT":return $(P({},t),{currentContent:t.currentContent?P(P({},t.currentContent),r.payload):r.payload});case"ADD_MEDIA":return $(P({},t),{mediaLibrary:[...t.mediaLibrary||[],r.payload]});case"REMOVE_MEDIA":return $(P({},t),{mediaLibrary:(t.mediaLibrary||[]).filter(s=>s.id!==r.payload)});default:return t}}const ts=p.createContext(void 0);function Ys({children:t}){const[r,s]=p.useReducer(Hs,Vs),n=p.useCallback(i=>{s({type:"SET_SELECTED_CONTENT_TYPE",payload:i})},[s]);return e.jsx(ts.Provider,{value:{state:r,dispatch:s,createNewContent:n},children:t})}function ee(){const t=p.useContext(ts);if(t===void 0)throw new Error("useContentBuilder must be used within a ContentBuilderProvider");return t}function de(){const{dispatch:t}=ee(),r=p.useCallback(v=>{t({type:"SET_SELECTED_CONTENT_TYPE",payload:v})},[t]),s=p.useCallback(v=>{t({type:"SET_ACTIVE_TAB",payload:v})},[t]),n=p.useCallback(v=>{t({type:"SET_COURSE_STEP",payload:v})},[t]),i=p.useCallback(v=>{t({type:"UPDATE_COURSE_FIELD",payload:v})},[t]),l=p.useCallback(()=>{const v={id:`module-${Date.now()}`,title:`Module ${Date.now()}`,description:"",lessons:[],order:Date.now(),isRequired:!1,estimatedDuration:30};t({type:"ADD_MODULE",payload:v})},[t]),d=p.useCallback(v=>{const N={id:`lesson-${Date.now()}`,title:`Lesson ${Date.now()}`,content:"",order:Date.now(),moduleId:v,estimatedDuration:15,isRequired:!1,type:"text"};t({type:"ADD_LESSON",payload:{moduleId:v,lesson:N}})},[t]),o=p.useCallback(()=>{const v={id:`assessment-${Date.now()}`,title:`Assessment ${Date.now()}`,questions:[],passingScore:70,isRequired:!1};t({type:"ADD_ASSESSMENT",payload:v})},[t]),a=p.useCallback((v,N)=>{t({type:"UPDATE_MODULE",payload:{moduleId:v,updates:N}})},[t]),c=p.useCallback((v,N,h)=>{t({type:"UPDATE_LESSON",payload:{moduleId:v,lessonId:N,updates:h}})},[t]),b=p.useCallback((v,N)=>{t({type:"UPDATE_ASSESSMENT",payload:{assessmentId:v,updates:N}})},[t]),j=p.useCallback(v=>{t({type:"REMOVE_MODULE",payload:v})},[t]),m=p.useCallback((v,N)=>{t({type:"REMOVE_LESSON",payload:{moduleId:v,lessonId:N}})},[t]),g=p.useCallback(v=>{t({type:"REMOVE_ASSESSMENT",payload:v})},[t]),y=p.useCallback((v,N,h)=>{t({type:"BULK_CREATE_COURSE_STRUCTURE",payload:{modules:v,lessonsPerModule:N,assessments:h}})},[t]);return{setSelectedContentType:r,setActiveTab:s,setCourseStep:n,updateCourseField:i,addModule:l,addLesson:d,addAssessment:o,updateModule:a,updateLesson:c,updateAssessment:b,removeModule:j,removeLesson:m,removeAssessment:g,bulkCreateCourseStructure:y}}const Fe=ze({title:V().min(1,"Title is required").max(200,"Title must be less than 200 characters").trim(),description:V().min(1,"Description is required").max(500,"Description must be less than 500 characters").trim(),content:V().min(1,"Content is required").max(1e4,"Content must be less than 10,000 characters")}),Ks=Fe.extend({policyVersion:V().min(1,"Policy version is required").regex(/^\d+\.\d+$/,"Version must be in format X.Y (e.g., 1.0)"),policyType:Ue(["general","safety","compliance","operational"],{errorMap:()=>({message:"Please select a valid policy type"})}),requiresSignature:ce(),signatureDeadline:Se().min(1,"Deadline must be at least 1 day").max(365,"Deadline cannot exceed 365 days").optional(),acknowledgmentStatement:V().min(10,"Acknowledgment statement must be at least 10 characters").max(500,"Acknowledgment statement must be less than 500 characters").optional()}),Qs=Fe.extend({isRequired:ce(),reviewAnnually:ce(),estimatedDuration:Se().min(1,"Duration must be at least 1 minute").max(480,"Duration cannot exceed 8 hours (480 minutes)"),difficulty:Ue(["beginner","intermediate","advanced"],{errorMap:()=>({message:"Please select a valid difficulty level"})}),department:V().min(1,"Department is required").max(100,"Department must be less than 100 characters"),responsiblePerson:V().min(1,"Responsible person is required").max(100,"Responsible person must be less than 100 characters")}),Ws=Fe.extend({chemicalName:V().min(1,"Chemical name is required").max(200,"Chemical name must be less than 200 characters"),casNumber:V().min(1,"CAS number is required").regex(/^\d{1,7}-\d{2}-\d$/,"CAS number must be in format XXXX-XX-X"),hazardClass:Ue(["1","2","3","4","5","6","7","8","9"],{errorMap:()=>({message:"Please select a valid hazard class"})}),storageRequirements:V().min(1,"Storage requirements are required").max(500,"Storage requirements must be less than 500 characters"),handlingInstructions:V().min(1,"Handling instructions are required").max(1e3,"Handling instructions must be less than 1,000 characters"),emergencyProcedures:V().min(1,"Emergency procedures are required").max(1e3,"Emergency procedures must be less than 1,000 characters")}),Zs=Fe.extend({pathwayDueDate:V().min(1,"Due date is required").refine(t=>new Date(t)>new Date,"Due date must be in the future"),issueCertificate:ce(),requireFinalQuiz:ce(),quizQuestionCount:Se().min(1,"Quiz must have at least 1 question").max(50,"Quiz cannot have more than 50 questions"),quizPassingRate:Se().min(50,"Passing rate must be at least 50%").max(100,"Passing rate cannot exceed 100%"),quizTimeLimit:Se().min(5,"Time limit must be at least 5 minutes").max(180,"Time limit cannot exceed 3 hours (180 minutes)")}),xn=ze({fontFamily:V().min(1,"Font family is required"),fontSize:Ue(["text-xs","text-sm","text-base","text-lg","text-xl"],{errorMap:()=>({message:"Please select a valid font size"})}),textColor:V().min(1,"Text color is required")}),hn=ze({headers:Ge(V().min(1,"Header cannot be empty")).min(1,"Table must have at least one column").max(10,"Table cannot have more than 10 columns"),data:Ge(Ge(V())).min(1,"Table must have at least one row").max(50,"Table cannot have more than 50 rows")}),gn=ze({pdfFile:Ds(File).nullable(),isRecording:ce(),pdfUploading:ce()});Ps("type",[Ks.extend({type:_e("policy")}),Qs.extend({type:_e("procedure")}),Ws.extend({type:_e("sms")}),Zs.extend({type:_e("pathway")})]);var ss=(t,r,s)=>new Promise((n,i)=>{var l=a=>{try{o(s.next(a))}catch(c){i(c)}},d=a=>{try{o(s.throw(a))}catch(c){i(c)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((s=s.apply(t,r)).next())});function Xs(t){return ss(this,null,function*(){try{const{data:r,error:s}=yield B.from("knowledge_hub_content").select("id, title, description, difficulty_level, estimated_duration, department, tags").eq("is_active",!0).eq("status","published").or(`title.ilike.%${t}%,description.ilike.%${t}%`).limit(10);return s?(console.error("Error searching courses:",s),[]):r||[]}catch(r){return console.error("Error in searchCourses:",r),[]}})}function Js(t){return ss(this,null,function*(){try{const{data:r,error:s}=yield B.from("knowledge_hub_content").select("id, title, description, difficulty_level, estimated_duration, department, tags").eq("id",t).eq("is_active",!0).eq("status","published").single();return s?(console.error("Error fetching course:",s),null):r}catch(r){return console.error("Error in getCourseById:",r),null}})}var He=(t,r,s)=>new Promise((n,i)=>{var l=a=>{try{o(s.next(a))}catch(c){i(c)}},d=a=>{try{o(s.throw(a))}catch(c){i(c)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((s=s.apply(t,r)).next())});const er=({value:t,onChange:r,onRemove:s,placeholder:n="Search for a course..."})=>{const[i,l]=p.useState(""),[d,o]=p.useState([]),[a,c]=p.useState(!1),[b,j]=p.useState(!1),[m,g]=p.useState(null),y=p.useRef(),v=p.useRef(null);p.useEffect(()=>{t&&!m&&He(null,null,function*(){try{const u=yield Js(t);u&&(g(u),l(u.title))}catch(u){console.error("Error fetching course details:",u)}})},[t,m]),p.useEffect(()=>{const C=u=>{v.current&&!v.current.contains(u.target)&&j(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const N=C=>He(null,null,function*(){if(l(C),j(!0),y.current&&clearTimeout(y.current),C.length<2){o([]);return}y.current=setTimeout(()=>He(null,null,function*(){c(!0);try{const u=yield Xs(C);o(u)}catch(u){console.error("Search error:",u),o([])}finally{c(!1)}}),300)}),h=C=>{g(C),r(C.id),l(C.title),j(!1),o([])},f=()=>{g(null),l(""),r(""),o([])},_=C=>{if(C<60)return`${C}m`;const u=Math.floor(C/60),w=C%60;return w===0?`${u}h`:`${u}h ${w}m`};return m?e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[e.jsx(x,{path:Z,size:1.2,className:"text-blue-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-blue-900",children:m.title}),e.jsxs("div",{className:"text-sm text-blue-700 flex items-center space-x-4",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(x,{path:le,size:.8}),e.jsx("span",{children:_(m.estimated_duration)})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(x,{path:tt,size:.8}),e.jsx("span",{className:"capitalize",children:m.difficulty_level})]})]})]}),e.jsx("button",{onClick:s,className:"p-1 text-blue-600 hover:bg-blue-100 rounded","aria-label":"Remove course",children:e.jsx(x,{path:J,size:1})})]}):e.jsxs("div",{className:"relative",ref:v,children:[e.jsxs("div",{className:"relative",children:[e.jsx(x,{path:Ht,size:1,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:i,onChange:C=>N(C.target.value),onFocus:()=>j(!0),className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:n}),i&&e.jsx("button",{onClick:f,className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600",children:e.jsx(x,{path:J,size:1})})]}),b&&(i.length>=2||a)&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",children:a?e.jsxs("div",{className:"p-4 text-center text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#4ECDC4] mx-auto mb-2"}),"Searching..."]}):d.length>0?e.jsx("div",{className:"py-2",children:d.map(C=>e.jsxs("button",{onClick:()=>h(C),className:"w-full text-left p-3 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none",children:[e.jsx("div",{className:"font-medium text-gray-900",children:C.title}),e.jsx("div",{className:"text-sm text-gray-600 line-clamp-2",children:C.description}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center space-x-3 mt-1",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(x,{path:le,size:.8}),e.jsx("span",{children:_(C.estimated_duration)})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(x,{path:tt,size:.8}),e.jsx("span",{className:"capitalize",children:C.difficulty_level})]})]})]},C.id))}):i.length>=2?e.jsxs("div",{className:"p-4 text-center text-gray-500",children:['No courses found matching "',i,'"']}):null})]})};var tr=(t,r,s)=>new Promise((n,i)=>{var l=a=>{try{o(s.next(a))}catch(c){i(c)}},d=a=>{try{o(s.throw(a))}catch(c){i(c)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((s=s.apply(t,r)).next())});const sr=({courseTitle:t,courseDescription:r,prerequisites:s,linkedPrerequisites:n,difficulty:i,onObjectiveSelect:l,isVisible:d,onClose:o})=>{const[a,c]=p.useState([]),[b,j]=p.useState(!1),[m,g]=p.useState(!1),[y,v]=p.useState(new Set),N=()=>tr(null,null,function*(){if(!t.trim()&&!r.trim()){alert("Please add a course title and description first to generate smart suggestions.");return}j(!0);try{const C=yield Os.generateLearningObjectives({title:t,description:r,prerequisites:s.filter(u=>u.trim()),linkedPrerequisites:n,difficulty:i});c(C),g(!0)}catch(C){console.error("Error generating suggestions:",C),alert("Failed to generate AI suggestions. Please try again.")}finally{j(!1)}}),h=C=>{l(C.objective),v(u=>new Set([...u,C.objective]))},f=C=>({remember:"text-blue-600 bg-blue-50",understand:"text-green-600 bg-green-50",apply:"text-yellow-600 bg-yellow-50",analyze:"text-orange-600 bg-orange-50",evaluate:"text-red-600 bg-red-50",create:"text-purple-600 bg-purple-50"})[C]||"text-gray-600 bg-gray-50",_=C=>({remember:"Recall facts and basic concepts",understand:"Explain ideas or concepts",apply:"Use information in new situations",analyze:"Draw connections among ideas",evaluate:"Justify a stand or decision",create:"Produce new or original work"})[C]||"Learning objective";return d?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{path:Q,size:1,className:"text-purple-600"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Smart Learning Objectives"})]}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"✕"})]}),!m&&e.jsxs("div",{className:"text-center py-6",children:[e.jsx(x,{path:Q,size:2,className:"text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Get AI-powered suggestions for learning objectives based on your course details"}),e.jsx("button",{onClick:N,disabled:b,className:"inline-flex items-center gap-2 px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#45b8b3] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:b?e.jsxs(e.Fragment,{children:[e.jsx(x,{path:Le,size:.8,className:"animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{path:Q,size:.8,className:"text-purple-600"}),"Generate Smart Suggestions"]})})]}),m&&a.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(x,{path:us,size:.8,className:"text-blue-500"}),e.jsx("p",{className:"text-sm text-gray-600",children:"AI-generated suggestions based on your course details. Click to add to your objectives."})]}),a.map((C,u)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-3 hover:border-[#4ECDC4] transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-900 font-medium mb-2",children:C.objective}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f(C.bloomsLevel)}`,children:C.bloomsLevel.charAt(0).toUpperCase()+C.bloomsLevel.slice(1)}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Confidence: ",Math.round(C.confidence*100),"%"]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Why this fits:"})," ",C.reasoning]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.jsx("strong",{children:"Bloom's Level:"})," ",_(C.bloomsLevel)]})]}),e.jsx("button",{onClick:()=>h(C),disabled:y.has(C.objective),className:`flex items-center gap-1 px-3 py-1 rounded-md text-sm font-medium transition-colors ${y.has(C.objective)?"bg-green-100 text-green-700 cursor-not-allowed":"bg-[#4ECDC4] text-white hover:bg-[#45b8b3]"}`,children:y.has(C.objective)?e.jsxs(e.Fragment,{children:[e.jsx(x,{path:be,size:.6}),"Added"]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{path:q,size:.6}),"Add"]})})]})},u)),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:e.jsx("button",{onClick:N,disabled:b,className:"text-sm text-[#4ECDC4] hover:text-[#45b8b3] font-medium transition-colors",children:b?"Generating...":"Generate New Suggestions"})})]}),m&&a.length===0&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-gray-600 mb-3",children:"No suggestions generated. Try updating your course details and generate again."}),e.jsx("button",{onClick:N,disabled:b,className:"text-[#4ECDC4] hover:text-[#45b8b3] font-medium transition-colors",children:"Try Again"})]})]}):null},rr=()=>{const{state:t}=ee(),{updateCourseField:r}=de(),{courseData:s}=t,[n,i]=p.useState("text"),[l,d]=p.useState(!1),o=(h,f)=>{const _=[...s.objectives||[]];_[h]=f,r({objectives:_})},a=h=>{const f=(s.objectives||[]).filter((_,C)=>C!==h);r({objectives:f})},c=()=>{r({objectives:[...s.objectives||[],""]})},b=(h,f)=>{const _=[...s.prerequisites||[]];_[h]=f,r({prerequisites:_})},j=h=>{const f=(s.prerequisites||[]).filter((_,C)=>C!==h);r({prerequisites:f})},m=()=>{r({prerequisites:[...s.prerequisites||[],""]})},g=(h,f)=>{const _=[...s.linkedPrerequisites||[]];_[h]=f,r({linkedPrerequisites:_})},y=h=>{const f=(s.linkedPrerequisites||[]).filter((_,C)=>C!==h);r({linkedPrerequisites:f})},v=()=>{r({linkedPrerequisites:[...s.linkedPrerequisites||[],""]})},N=h=>{const f=s.objectives||[""],_=f.findIndex(C=>!C.trim());if(_>=0){const C=[...f];C[_]=h,r({objectives:C})}else r({objectives:[...f,h]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Course Overview"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"course-title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Title *"}),e.jsx("input",{id:"course-title",type:"text",value:s.title,onChange:h=>r({title:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter course title..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"course-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Description *"}),e.jsx("textarea",{id:"course-description",rows:4,value:s.description,onChange:h=>r({description:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Describe what learners will gain from this course..."})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Prerequisites"}),e.jsxs("div",{className:"flex space-x-1 mb-4 p-1 bg-gray-100 rounded-lg",children:[e.jsx("button",{onClick:()=>i("text"),className:`flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors ${n==="text"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Text Prerequisites"}),e.jsx("button",{onClick:()=>i("linked"),className:`flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors ${n==="linked"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Library Courses"})]}),n==="text"&&e.jsxs("div",{className:"space-y-3",children:[(s.prerequisites||[]).map((h,f)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:`course-prereq-${f}`,type:"text",value:h,onChange:_=>b(f,_.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:`Prerequisite ${f+1}...`}),(s.prerequisites||[]).length>1&&e.jsx("button",{onClick:()=>j(f),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(x,{path:Ie,size:1})})]},f)),e.jsxs("button",{onClick:m,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(x,{path:q,size:1,className:"mr-2"}),"Add Text Prerequisite"]})]}),n==="linked"&&e.jsxs("div",{className:"space-y-3",children:[(s.linkedPrerequisites||[]).map((h,f)=>e.jsx("div",{children:e.jsx(er,{value:h,onChange:_=>g(f,_),onRemove:()=>y(f),placeholder:"Search for a course in the library..."})},f)),e.jsxs("button",{onClick:v,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(x,{path:q,size:1,className:"mr-2"}),"Add Library Course"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{htmlFor:"course-objectives",className:"block text-sm font-medium text-gray-700",children:"Learning Objectives"}),e.jsxs("button",{onClick:()=>d(!l),className:"inline-flex items-center gap-2 px-3 py-1 text-sm text-[#4ECDC4] hover:text-[#45b8b3] font-medium transition-colors",children:[e.jsx(x,{path:Q,size:.7,className:"text-purple-600"}),l?"Hide":"Get"," AI Suggestions"]})]}),e.jsx(sr,{courseTitle:s.title,courseDescription:s.description,prerequisites:s.prerequisites||[],linkedPrerequisites:s.linkedPrerequisites||[],difficulty:s.difficulty,onObjectiveSelect:N,isVisible:l,onClose:()=>d(!1)}),(s.objectives||[]).map((h,f)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{id:`course-objective-${f}`,type:"text",value:h,onChange:_=>o(f,_.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:`Learning objective ${f+1}...`}),(s.objectives||[]).length>1&&e.jsx("button",{onClick:()=>a(f),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(x,{path:Ie,size:1})})]},f)),e.jsxs("button",{onClick:c,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(x,{path:q,size:1,className:"mr-2"}),"Add Objective"]})]})]})};var ar=Object.defineProperty,nr=Object.defineProperties,ir=Object.getOwnPropertyDescriptors,ht=Object.getOwnPropertySymbols,lr=Object.prototype.hasOwnProperty,or=Object.prototype.propertyIsEnumerable,gt=(t,r,s)=>r in t?ar(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,Ye=(t,r)=>{for(var s in r||(r={}))lr.call(r,s)&&gt(t,s,r[s]);if(ht)for(var s of ht(r))or.call(r,s)&&gt(t,s,r[s]);return t},Ke=(t,r)=>nr(t,ir(r)),cr=(t,r,s)=>new Promise((n,i)=>{var l=a=>{try{o(s.next(a))}catch(c){i(c)}},d=a=>{try{o(s.throw(a))}catch(c){i(c)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((s=s.apply(t,r)).next())});const dr=()=>{const{state:t}=ee(),{updateCourseField:r,bulkCreateCourseStructure:s,setCourseStep:n}=de(),{courseData:i}=t,[l,d]=p.useState(null),[o,a]=p.useState(!1),[c,b]=p.useState({modules:3,lessonsPerModule:2,assessments:1}),j=()=>cr(null,null,function*(){if(!i.title.trim()&&!i.description.trim()){alert("Please add a course title and description first to get AI suggestions.");return}a(!0);try{yield new Promise(v=>setTimeout(v,1500));const y={modules:i.title.toLowerCase().includes("comprehensive")?5:3,lessonsPerModule:i.difficulty==="beginner"?2:3,assessments:i.difficulty==="beginner"?1:2,reasoning:`Based on your "${i.title}" course and ${i.difficulty} difficulty level, we recommend this structure for optimal learning outcomes.`,confidence:.85};d(y)}catch(y){console.error("Error generating AI suggestion:",y),alert("Failed to generate AI suggestion. Please try again.")}finally{a(!1)}}),m=()=>{l&&(b({modules:l.modules,lessonsPerModule:l.lessonsPerModule,assessments:l.assessments}),s(l.modules,l.lessonsPerModule,l.assessments),r({estimatedDuration:l.modules*l.lessonsPerModule*30+l.assessments*15}),n(3))},g=()=>{s(c.modules,c.lessonsPerModule,c.assessments),r({estimatedDuration:c.modules*c.lessonsPerModule*30+c.assessments*15}),n(3)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Plan Your Course Structure"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Get AI help to plan your course structure, or design it yourself if you know what you want."})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-25 to-blue-25 border border-purple-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(x,{path:Q,size:1.2,className:"text-purple-500"}),e.jsx("h5",{className:"text-base font-semibold text-gray-800",children:"Option 1: Get Help"})]}),l?e.jsx("div",{className:"bg-white rounded-lg p-3 border border-purple-100",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h6",{className:"font-medium text-gray-800 mb-2 text-sm",children:"AI Recommendation"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:l.reasoning}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[e.jsxs("div",{className:"text-center p-2 bg-purple-25 rounded-md border border-purple-100",children:[e.jsx("div",{className:"text-lg font-bold text-purple-500",children:l.modules}),e.jsx("div",{className:"text-xs text-purple-500",children:"Modules"})]}),e.jsxs("div",{className:"text-center p-2 bg-blue-25 rounded-md border border-blue-100",children:[e.jsx("div",{className:"text-lg font-bold text-blue-500",children:l.lessonsPerModule}),e.jsx("div",{className:"text-xs text-blue-500",children:"Lessons/Module"})]}),e.jsxs("div",{className:"text-center p-2 bg-green-25 rounded-md border border-green-100",children:[e.jsx("div",{className:"text-lg font-bold text-green-500",children:l.assessments}),e.jsx("div",{className:"text-xs text-green-500",children:"Assessments"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[e.jsx(x,{path:ms,size:.6}),"Confidence: ",Math.round(l.confidence*100),"%"]})]}),e.jsxs("button",{onClick:m,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-colors text-sm",children:[e.jsx(x,{path:be,size:.7}),"Apply"]})]})}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Get intelligent suggestions for your course structure based on your title, description, and objectives."}),e.jsx("button",{onClick:j,disabled:o,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-purple-500 text-white rounded-md hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:o?e.jsxs(e.Fragment,{children:[e.jsx(x,{path:le,size:.8,className:"animate-spin"}),"Analyzing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{path:Q,size:.8}),"Get AI Suggestion"]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-25 to-green-25 border border-blue-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(x,{path:ps,size:1.2,className:"text-blue-500"}),e.jsx("h5",{className:"text-base font-semibold text-gray-800",children:"Option 2: Self-Guided"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"modules-input",className:"block text-xs font-medium text-gray-600 mb-1",children:"Number of Modules"}),e.jsx("input",{id:"modules-input",type:"number",min:"1",max:"10",value:c.modules,onChange:y=>b(v=>Ke(Ye({},v),{modules:parseInt(y.target.value)||1})),className:"w-full px-2 py-1.5 border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lessons-input",className:"block text-xs font-medium text-gray-600 mb-1",children:"Lessons per Module"}),e.jsx("input",{id:"lessons-input",type:"number",min:"1",max:"10",value:c.lessonsPerModule,onChange:y=>b(v=>Ke(Ye({},v),{lessonsPerModule:parseInt(y.target.value)||1})),className:"w-full px-2 py-1.5 border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"assessments-input",className:"block text-xs font-medium text-gray-600 mb-1",children:"Number of Assessments"}),e.jsx("input",{id:"assessments-input",type:"number",min:"0",max:"10",value:c.assessments,onChange:y=>b(v=>Ke(Ye({},v),{assessments:parseInt(y.target.value)||0})),className:"w-full px-2 py-1.5 border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-md p-2",children:[e.jsx("span",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Estimated Course Duration"}),e.jsxs("div",{className:"text-sm font-semibold text-gray-800",children:["~",c.modules*c.lessonsPerModule*30+c.assessments*15," ","minutes"]})]}),e.jsx("div",{}),e.jsx("div",{className:"flex items-end justify-end",children:e.jsxs("button",{onClick:g,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-colors text-sm",children:[e.jsx(x,{path:be,size:.7}),"Apply Custom Structure"]})})]})]})]})},ur=({modules:t,expandedModules:r,onToggleModuleExpansion:s,onUpdateModule:n,onUpdateLesson:i,onOpenLessonEditor:l,onLessonReorder:d})=>{const[o,a]=p.useState(!1),c=(m,g)=>{m.dataTransfer.setData("text/plain",g)},b=m=>{m.preventDefault()},j=(m,g,y)=>{m.preventDefault();const v=m.dataTransfer.getData("text/plain");if(v===y)return;const N=t.find(_=>_.id===g);if(!N)return;const h=N.lessons.findIndex(_=>_.id===v),f=N.lessons.findIndex(_=>_.id===y);h!==-1&&f!==-1&&d(g,h,f)};return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"mb-4 cursor-pointer flex items-center justify-between",onClick:()=>a(!o),onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),a(!o))},tabIndex:0,role:"button","aria-label":"Toggle Step 2: Build Content",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Step 2: Build Content"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Create modules and lessons for your course"})]}),o&&e.jsx("div",{className:"flex items-center gap-2",children:t.length>0?e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(x,{path:be,size:1}),e.jsxs("span",{className:"text-xs font-medium",children:[t.length," Module",t.length!==1?"s":""]})]}):e.jsxs("div",{className:"flex items-center gap-1 text-red-500",children:[e.jsx(x,{path:J,size:1}),e.jsx("span",{className:"text-xs font-medium",children:"No Modules"})]})})]}),e.jsx(x,{path:o?oe:ye,size:1,className:"text-gray-400"})]}),!o&&e.jsx(e.Fragment,{children:t.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(x,{path:Z,size:3,className:"mx-auto text-gray-300 mb-4"}),e.jsx("p",{children:"No course structure found. Please go back to Step 2 to plan your course."})]}):e.jsx("div",{className:"space-y-4",children:t.map((m,g)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("button",{onClick:()=>s(m.id),className:"text-left hover:text-blue-600 transition-colors",children:e.jsx(x,{path:r.has(m.id)?oe:ye,size:.8,className:"text-gray-400"})}),e.jsx("input",{type:"text",value:m.title||`Module ${g+1}`,onChange:y=>n(m.id,{title:y.target.value}),className:"font-medium text-gray-900 border-none focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] rounded px-2 py-1 bg-transparent hover:bg-gray-50",placeholder:`Module ${g+1}`})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[m.lessons.length," lesson",m.lessons.length!==1?"s":""]})]}),r.has(m.id)&&m.lessons.length>0&&e.jsx("div",{className:"ml-6 space-y-2",children:m.lessons.map((y,v)=>e.jsxs("div",{draggable:!0,onDragStart:N=>c(N,y.id),onDragOver:b,onDrop:N=>j(N,m.id,y.id),className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>l(y.id),onKeyDown:N=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),l(y.id))},tabIndex:0,role:"button","aria-label":`Open lesson editor for ${y.title||`Lesson ${v+1}`}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"cursor-grab hover:cursor-grabbing p-1 text-gray-400 hover:text-gray-600",children:e.jsx(x,{path:xs,size:.8})}),e.jsx(x,{path:Z,size:.8,className:"text-gray-400"}),e.jsx("input",{type:"text",value:y.title||`Lesson ${v+1}`,onChange:N=>{i(m.id,y.id,{title:N.target.value})},className:"text-sm font-medium text-gray-700 border-none focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] rounded px-2 py-1 bg-transparent hover:bg-gray-100",placeholder:`Lesson ${v+1}`,onClick:N=>N.stopPropagation(),onFocus:N=>N.stopPropagation()})]}),e.jsx("div",{className:"flex items-center gap-2",children:y.content&&y.content.toString().trim()?e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"Content Added"}):e.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full",children:"No Content"})})]},y.id))})]},m.id))})})]})},mr=({lessonData:t,courseTitle:r,onUpdateLesson:s,onAddModule:n,onAddLesson:i})=>{const[l,d]=p.useState(null),o=()=>{if(!t)return;const h=[];if(t.title&&(h.push(`📝 **Enhanced Title**: "${t.title}" → "${a(t.title)}"`),h.push(`🎯 **Learning Objective**: "${c(t.title)}"`)),t.description&&h.push(`📖 **Expanded Description**: "${t.description}" → "${b(t.description)}"`),t.sections.length>0){const f=t.sections[0];f.content?h.push(`✨ **Content Enhancement**: "${f.content.substring(0,50)}..." → "${j(f.content,t.title)}"`):h.push(`🚀 **Starter Content**: "${m(t.title)}"`)}else h.push(`📚 **Lesson Structure**: ${g()}`);d(h)},a=h=>{const f=[`Master ${h}: Complete Guide`,`${h} - Essential Skills & Techniques`,`Advanced ${h}: From Beginner to Expert`,`${h} Fundamentals & Best Practices`,`Professional ${h}: Industry Insights`];return f[Math.floor(Math.random()*f.length)]},c=h=>{const f=[`By the end of this lesson, you will understand the core principles of ${h}`,`Learn practical techniques and strategies for mastering ${h}`,`Develop comprehensive knowledge and skills in ${h}`,`Gain hands-on experience with ${h} through real-world examples`,`Master the fundamentals and advanced concepts of ${h}`];return f[Math.floor(Math.random()*f.length)]},b=h=>{const f=[`${h} This comprehensive lesson covers essential concepts, practical applications, and industry best practices.`,`${h} Learn through interactive examples, case studies, and hands-on exercises designed for real-world success.`,`${h} Discover proven strategies, common pitfalls to avoid, and expert tips for mastering this topic.`,`${h} Perfect for both beginners and experienced professionals looking to enhance their skills.`];return f[Math.floor(Math.random()*f.length)]},j=(h,f)=>{const _=[`# ${f}

${h}

## Key Takeaways
• Point 1
• Point 2
• Point 3

## Next Steps
Continue building on these foundations...`,`${h}

## Practical Examples
Here are real-world applications...

## Common Mistakes to Avoid
1. Mistake 1
2. Mistake 2

## Expert Tips
• Tip 1
• Tip 2`,`${h}

## Summary
This lesson covered...

## Practice Exercise
Try this activity to reinforce your learning...

## Additional Resources
Explore these materials for deeper understanding...`];return _[Math.floor(Math.random()*_.length)]},m=h=>{const f=[`# Welcome to ${h}

This lesson will guide you through the essential concepts and practical applications of ${h}.

## What You'll Learn
• Fundamental principles
• Key techniques
• Real-world applications

## Getting Started
Let's begin with the basics...`,`# Introduction to ${h}

${h} is a fundamental concept that forms the foundation for advanced learning in this field.

## Learning Objectives
• Understand core concepts
• Apply basic techniques
• Build practical skills

## Lesson Overview
We'll cover...`,`# ${h} Essentials

In this comprehensive lesson, you'll discover everything you need to know about ${h}.

## Topics Covered
• Basic concepts
• Intermediate techniques
• Advanced applications

## Your Learning Journey
Start here and build your expertise...`];return f[Math.floor(Math.random()*f.length)]},g=()=>{const h=[`📋 **Recommended Structure**:
1. Introduction & Overview
2. Core Concepts
3. Practical Examples
4. Hands-on Exercise
5. Summary & Next Steps`,`🏗️ **Content Framework**:
• Opening Hook
• Learning Objectives
• Main Content (3-4 sections)
• Practice Activities
• Assessment Questions
• Conclusion`,`📚 **Lesson Flow**:
• Warm-up Activity
• Theory & Concepts
• Real-world Applications
• Interactive Practice
• Knowledge Check
• Future Learning Path`];return h[Math.floor(Math.random()*h.length)]},y=()=>{if(!r){alert("Please enter a course title first to generate structure suggestions.");return}const h=r.toLowerCase();let f=[];h.includes("beginner")||h.includes("fundamental")||h.includes("basic")?f=[{title:"Getting Started",lessons:[{title:"Introduction to the Topic",description:"Basic concepts and overview"},{title:"Essential Tools and Setup",description:"Required software and environment"},{title:"First Steps",description:"Your first practical exercise"}]},{title:"Core Concepts",lessons:[{title:"Understanding the Basics",description:"Fundamental principles"},{title:"Key Techniques",description:"Essential methods and approaches"},{title:"Common Patterns",description:"Frequently used solutions"}]},{title:"Practical Application",lessons:[{title:"Real-World Examples",description:"Case studies and scenarios"},{title:"Hands-on Projects",description:"Build something practical"},{title:"Troubleshooting",description:"Common issues and solutions"}]}]:h.includes("advanced")||h.includes("expert")||h.includes("professional")?f=[{title:"Advanced Theory",lessons:[{title:"Complex Concepts",description:"Advanced theoretical knowledge"},{title:"Advanced Techniques",description:"Sophisticated methods"},{title:"Performance Optimization",description:"Speed and efficiency"}]},{title:"Professional Skills",lessons:[{title:"Industry Best Practices",description:"Professional standards"},{title:"Advanced Problem Solving",description:"Complex scenarios"},{title:"Expert Tips and Tricks",description:"Pro-level insights"}]},{title:"Mastery and Beyond",lessons:[{title:"Cutting-Edge Trends",description:"Latest developments"},{title:"Innovation and Creativity",description:"Pushing boundaries"},{title:"Teaching Others",description:"Sharing your expertise"}]}]:f=[{title:"Foundation",lessons:[{title:"Introduction and Overview",description:"Course overview and objectives"},{title:"Basic Concepts",description:"Fundamental principles"},{title:"Getting Started",description:"First practical steps"}]},{title:"Core Learning",lessons:[{title:"Main Concepts",description:"Key learning areas"},{title:"Practical Examples",description:"Real-world applications"},{title:"Interactive Practice",description:"Hands-on exercises"}]},{title:"Advanced Topics",lessons:[{title:"Complex Scenarios",description:"Advanced applications"},{title:"Best Practices",description:"Industry standards"},{title:"Next Steps",description:"Future learning path"}]}],f.forEach((_,C)=>{const u=`module-${Date.now()}-${C}`;n({title:_.title}),_.lessons.forEach(w=>{i(u,{title:w.title,description:w.description,estimatedDuration:15,isRequired:!0})})}),alert(`Generated ${f.length} modules with ${f.reduce((_,C)=>_+C.lessons.length,0)} lessons!`)},v=()=>{if(!r){alert("Please enter a course title first to generate content ideas.");return}const f=["📚 **Interactive Quizzes**: Add knowledge checks throughout lessons","🎯 **Learning Objectives**: Clear goals for each lesson","💡 **Case Studies**: Real-world examples and scenarios","🛠️ **Hands-on Exercises**: Practical activities and projects","📊 **Progress Tracking**: Visual indicators of learning progress","🔗 **Additional Resources**: Links to further reading and tools","📝 **Summary Points**: Key takeaways at the end of each lesson","❓ **Discussion Questions**: Topics for group discussion","🎬 **Video Demonstrations**: Screen recordings and tutorials","📋 **Checklists**: Step-by-step guides and procedures"].join(`

`);if(t&&t.sections.length>0){const _=[...t.sections],C=_[0];C&&C.type==="text"&&(C.content=`# Content Ideas for ${r}

${f}

## How to Use These Ideas

1. **Review each suggestion** and determine relevance to your course
2. **Prioritize** based on your learning objectives
3. **Integrate** into your lesson structure
4. **Customize** to fit your specific topic and audience
5. **Test** with learners to ensure effectiveness`,s({sections:_}),alert("Content ideas have been added to your current lesson!"))}else alert("Please open a lesson first to add content ideas.")},N=h=>{let f="";h.includes("📝 **Enhanced Title**")?f=`# Preview: ${h.split('→ "')[1].split('"')[0]}

This enhanced title is more engaging and descriptive, making it clear what learners will gain from this lesson.`:h.includes("🎯 **Learning Objective**")?f=`# Learning Objective Preview

**New Objective:**
${h.split('→ "')[1].split('"')[0]}

This objective clearly defines what learners will accomplish by the end of the lesson.`:h.includes("✨ **Content Enhancement**")||h.includes("🚀 **Starter Content**")?f=`# Content Preview

**Enhanced Content:**

${h.split('→ "')[1].split('"')[0]}

This enhanced content provides a more comprehensive and structured learning experience.`:h.includes("📚 **Lesson Structure**")&&(f=`# Structure Preview

**Recommended Lesson Structure:**

1. **Introduction & Overview** - Set the context and learning goals
2. **Core Concepts** - Explain fundamental principles
3. **Practical Examples** - Show real-world applications
4. **Hands-on Exercise** - Provide interactive practice
5. **Summary & Next Steps** - Reinforce learning and guide future study

This structure follows proven learning principles and ensures comprehensive coverage.`),f&&alert(`Preview:

${f}

Click "Use this suggestion" to apply it to your lesson.`)};return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(x,{path:Q,size:1.5,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI Content Assistant"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get intelligent suggestions for your course content and structure"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("button",{onClick:o,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(x,{path:st,size:.8}),"Get AI Suggestions"]}),e.jsxs("button",{onClick:y,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[e.jsx(x,{path:Q,size:.8}),"Generate Course Structure"]}),e.jsxs("button",{onClick:v,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[e.jsx(x,{path:st,size:.8}),"Content Ideas"]})]}),l&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"AI Suggestions:"}),l.map((h,f)=>e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-800",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsx("div",{className:"flex-1 whitespace-pre-line",children:h}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>N(h),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:"Preview"})})]})},f))]})]})},pr=({lessonData:t})=>{const r=()=>{if(!t)return;const s=[];let n=0,i=0;if(t.title){i+=20;let a=0;t.title.length>5&&(a+=5),t.title.length<50&&(a+=5),t.title.includes(":")&&(a+=5),(t.title.includes("Guide")||t.title.includes("Complete")||t.title.includes("Essential"))&&(a+=5),n+=a,s.push(`📝 **Title Quality**: ${a}/20 - ${a>=15?"Excellent":a>=10?"Good":"Needs improvement"}`)}if(t.description){i+=20;let a=0;t.description.length>20&&(a+=5),t.description.length<200&&(a+=5),(t.description.includes("learn")||t.description.includes("understand"))&&(a+=5),(t.description.includes("practical")||t.description.includes("hands-on"))&&(a+=5),n+=a,s.push(`📖 **Description Quality**: ${a}/20 - ${a>=15?"Excellent":a>=10?"Good":"Needs improvement"}`)}if(t.sections.length>0){i+=40;let a=0;t.sections.forEach(c=>{c.content&&c.content.length>100&&(a+=8),c.content&&c.content.includes("#")&&(a+=8),c.content&&c.content.includes("•")&&(a+=8),c.content&&c.content.includes("##")&&(a+=8)}),n+=Math.min(a,40),s.push(`📚 **Content Quality**: ${Math.min(a,40)}/40 - ${a>=30?"Excellent":a>=20?"Good":"Needs improvement"}`)}i+=20;let l=0;t.sections.length>=3&&(l+=10),t.sections.length>=5&&(l+=10),n+=l,s.push(`🏗️ **Structure Quality**: ${l}/20 - ${l>=15?"Excellent":l>=10?"Good":"Needs improvement"}`);const d=Math.round(n/i*100);let o="F";d>=90?o="A":d>=80?o="B":d>=70?o="C":d>=60&&(o="D"),s.unshift(`🎯 **Overall Quality Score**: ${n}/${i} (${d}%) - Grade: ${o}`),d<70&&s.push(`
💡 **Improvement Suggestions**:
• Add more detailed content to sections
• Include learning objectives
• Add practical examples and exercises
• Structure content with clear headings
• Include summary points and takeaways`),alert(`Content Quality Report:

${s.join(`
`)}`)};return t?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(x,{path:je,size:1.5,className:"text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Content Quality Validator"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Analyze and score your lesson content quality"})]})]}),e.jsxs("button",{onClick:r,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[e.jsx(x,{path:ae,size:.8}),"Validate Content Quality"]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"What We Check:"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Title clarity and engagement"}),e.jsx("li",{children:"• Description completeness"}),e.jsx("li",{children:"• Content structure and formatting"}),e.jsx("li",{children:"• Section organization"}),e.jsx("li",{children:"• Overall lesson completeness"})]})]})]}):null};var xr=(t,r,s)=>new Promise((n,i)=>{var l=a=>{try{o(s.next(a))}catch(c){i(c)}},d=a=>{try{o(s.throw(a))}catch(c){i(c)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((s=s.apply(t,r)).next())});function hr(t,r={}){const{delay:s=2e3,enabled:n=!0,onSave:i,onSaveSuccess:l,onSaveError:d}=r,[o,a]=p.useState(!1),[c,b]=p.useState(null),[j,m]=p.useState("idle"),[g,y]=p.useState(null),v=p.useRef(null),N=p.useRef(t),h=p.useCallback(()=>xr(null,null,function*(){if(!(!n||!i||t===N.current))try{a(!0),m("saving"),y(null),yield i(t),N.current=t,b(new Date),m("saved"),a(!1),l==null||l(),setTimeout(()=>{m("idle")},3e3)}catch(_){const C=_ instanceof Error?_:new Error("Save failed");y(C),m("error"),a(!1),d==null||d(C),setTimeout(()=>{m("idle"),y(null)},5e3)}}),[t,n,i,l,d]),f=p.useCallback(()=>{m("idle"),y(null)},[]);return p.useEffect(()=>{if(!(!n||!i))return v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{h()},s),()=>{v.current&&clearTimeout(v.current)}},[t,s,n,i,h]),p.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),{isSaving:o,lastSaved:c,saveStatus:j,error:g,triggerSave:h,resetSaveStatus:f}}const gr=({status:t,lastSaved:r,className:s=""})=>{const i=(()=>{switch(t){case"saving":return{icon:Le,text:"Saving...",color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"};case"saved":return{icon:je,text:"Saved",color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200"};case"error":return{icon:ae,text:"Save failed",color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200"};default:return{icon:hs,text:"Ready",color:"text-gray-500",bgColor:"bg-gray-50",borderColor:"border-gray-200"}}})(),l=t==="saving";return t==="idle"?null:e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-2 rounded-lg border ${i.bgColor} ${i.borderColor} ${s}`,children:[e.jsx(x,{path:i.icon,size:.8,className:`${i.color} ${l?"animate-spin":""}`}),e.jsx("span",{className:`text-sm font-medium ${i.color}`,children:i.text}),r&&t==="saved"&&e.jsx("span",{className:"text-xs text-gray-500",children:r.toLocaleTimeString()})]})};var fr=(t,r,s)=>new Promise((n,i)=>{var l=a=>{try{o(s.next(a))}catch(c){i(c)}},d=a=>{try{o(s.throw(a))}catch(c){i(c)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((s=s.apply(t,r)).next())});const br=({value:t,onChange:r,onSave:s,placeholder:n="Enter your content here...",className:i="",showSaveStatus:l=!0})=>{const d=p.useRef(null),o=p.useCallback(()=>{d.current&&r(d.current.innerHTML)},[r]),{lastSaved:a,saveStatus:c}=hr(t,{delay:2e3,enabled:!!s,onSave:s||(()=>fr(null,null,function*(){})),onSaveError:b=>{console.error("Autosave failed:",b)}});return e.jsxs("div",{className:`${i}`,children:[l&&s&&e.jsx("div",{className:"mb-3 flex justify-end",children:e.jsx(gr,{status:c,lastSaved:a})}),e.jsx("div",{ref:d,contentEditable:!0,dangerouslySetInnerHTML:{__html:t},onInput:o,className:"h-full min-h-[300px] p-4 focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent text-gray-900","data-placeholder":n,style:{fontFamily:"Inter, system-ui, sans-serif",fontSize:"16px",lineHeight:"1.6"}})]})};var yr=Object.defineProperty,vr=Object.defineProperties,jr=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertySymbols,Nr=Object.prototype.hasOwnProperty,Cr=Object.prototype.propertyIsEnumerable,bt=(t,r,s)=>r in t?yr(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,Qe=(t,r)=>{for(var s in r||(r={}))Nr.call(r,s)&&bt(t,s,r[s]);if(ft)for(var s of ft(r))Cr.call(r,s)&&bt(t,s,r[s]);return t},We=(t,r)=>vr(t,jr(r)),wr=(t,r,s)=>new Promise((n,i)=>{var l=a=>{try{o(s.next(a))}catch(c){i(c)}},d=a=>{try{o(s.throw(a))}catch(c){i(c)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((s=s.apply(t,r)).next())});const Sr=({onFileUpload:t,acceptedTypes:r=["image/*","video/*",".pdf",".doc",".docx",".ppt",".pptx"],maxFileSize:s=50,maxFiles:n=10,className:i=""})=>{const[l,d]=p.useState(!1),[o,a]=p.useState([]),c=p.useRef(null),b=u=>u.type.startsWith("image/")?"image":u.type.startsWith("video/")?"video":"document",j=u=>{switch(u){case"image":return Kt;case"video":return Yt;case"document":return Me}},m=u=>{if(u===0)return"0 Bytes";const w=1024,D=["Bytes","KB","MB","GB"],E=Math.floor(Math.log(u)/Math.log(w));return parseFloat((u/Math.pow(w,E)).toFixed(2))+" "+D[E]},g=u=>new Promise((w,D)=>{let E=0;const T=setInterval(()=>{E+=Math.random()*20,E>=100?(E=100,clearInterval(T),Math.random()>.1?(a(M=>M.map(U=>U.id===u.id?We(Qe({},U),{status:"success",progress:100}):U)),w()):(a(M=>M.map(U=>U.id===u.id?We(Qe({},U),{status:"error",progress:0,error:"Upload failed"}):U)),D(new Error("Upload failed")))):a(M=>M.map(U=>U.id===u.id?We(Qe({},U),{progress:E}):U))},100)}),y=p.useCallback(u=>wr(null,null,function*(){const w=T=>{var M;if(T.size>s*1024*1024)return`File size exceeds ${s}MB limit`;const U="."+((M=T.name.split(".").pop())==null?void 0:M.toLowerCase());return r.some(Y=>Y.includes("*")?T.type.startsWith(Y.replace("*","")):Y===U)?null:"File type not supported"},D=Array.from(u);if(o.length+D.length>n){alert(`Maximum ${n} files allowed`);return}const E=[];for(const T of D){const M=w(T);if(M){alert(`${T.name}: ${M}`);continue}const U={id:`file-${Date.now()}-${Math.random()}`,file:T,type:b(T),url:URL.createObjectURL(T),status:"uploading",progress:0};E.push(U)}if(E.length!==0){a(T=>[...T,...E]);for(const T of E)try{yield g(T)}catch(M){console.error("Upload failed:",M)}t([...o,...E])}}),[o,n,t,r,s]),v=p.useCallback(u=>{u.preventDefault(),d(!1),u.dataTransfer.files&&y(u.dataTransfer.files)},[y]),N=p.useCallback(u=>{u.preventDefault(),d(!0)},[]),h=p.useCallback(u=>{u.preventDefault(),d(!1)},[]),f=p.useCallback(u=>{u.target.files&&y(u.target.files)},[y]),_=u=>{a(w=>{const D=w.filter(E=>E.id!==u);return t(D),D})},C=()=>{var u;(u=c.current)==null||u.click()};return e.jsxs("div",{className:`space-y-4 ${i}`,children:[e.jsxs("div",{onDrop:v,onDragOver:N,onDragLeave:h,onClick:C,onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),C())},role:"button",tabIndex:0,className:`
          border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all
          ${l?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}
        `,children:[e.jsx(x,{path:gs,size:3,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drop files here or click to upload"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Support for images, videos, and documents up to ",s,"MB"]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 text-xs text-gray-400",children:r.map((u,w)=>e.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded",children:u},w))})]}),e.jsx("input",{ref:c,type:"file",multiple:!0,accept:r.join(","),onChange:f,className:"hidden"}),o.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Uploaded Files"}),e.jsx("div",{className:"space-y-2",children:o.map(u=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(x,{path:j(u.type),size:1.2,className:"text-gray-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:u.file.name}),e.jsx("p",{className:"text-xs text-gray-500",children:m(u.file.size)}),u.status==="uploading"&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"bg-gray-200 rounded-full h-1",children:e.jsx("div",{className:"bg-blue-600 h-1 rounded-full transition-all duration-300",style:{width:`${u.progress}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Uploading... ",Math.round(u.progress),"%"]})]}),u.status==="error"&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:u.error||"Upload failed"})]}),e.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[u.status==="uploading"&&e.jsx(x,{path:Le,size:.8,className:"text-blue-500 animate-spin"}),u.status==="success"&&e.jsx(x,{path:je,size:.8,className:"text-green-500"}),u.status==="error"&&e.jsx(x,{path:fs,size:.8,className:"text-red-500"}),e.jsx("button",{onClick:w=>{w.stopPropagation(),_(u.id)},className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(x,{path:J,size:.8})})]})]},u.id))})]})]})};var _r=Object.defineProperty,Er=Object.defineProperties,Dr=Object.getOwnPropertyDescriptors,yt=Object.getOwnPropertySymbols,Pr=Object.prototype.hasOwnProperty,Or=Object.prototype.propertyIsEnumerable,vt=(t,r,s)=>r in t?_r(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,X=(t,r)=>{for(var s in r||(r={}))Pr.call(r,s)&&vt(t,s,r[s]);if(yt)for(var s of yt(r))Or.call(r,s)&&vt(t,s,r[s]);return t},se=(t,r)=>Er(t,Dr(r));const Tr=({lessonData:t,onUpdateLesson:r,onClose:s})=>{var n,i,l,d;const[o,a]=p.useState(t.sections.length>0?t.sections[0].id:null),[c,b]=p.useState(!1),[j,m]=p.useState("text"),[g,y]=p.useState(!1),v=()=>{const u={id:`section-${Date.now()}`,type:j,content:"",order:t.sections.length},w=[...t.sections,u];r({sections:w}),a(u.id),b(!1)},N=(u,w)=>{const D=t.sections.map(E=>E.id===u?X(X({},E),w):E);r({sections:D})},h=u=>{const w=t.sections.filter(D=>D.id!==u).map((D,E)=>se(X({},D),{order:E}));if(r({sections:w}),o===u)if(w.length===0)a(null);else if(w.length===1)a(w[0].id);else{const D=t.sections.findIndex(T=>T.id===u),E=D>=w.length?w.length-1:D;a(w[E].id)}},f=u=>{switch(u){case"text":return dt;case"image":return Kt;case"video":return Yt;case"file":return Me;case"link":return bs;default:return dt}},_=u=>{switch(u){case"text":return"bg-blue-100 text-blue-600";case"image":return"bg-green-100 text-green-600";case"video":return"bg-purple-100 text-purple-600";case"file":return"bg-orange-100 text-orange-600";case"link":return"bg-indigo-100 text-indigo-600";default:return"bg-gray-100 text-gray-600"}},C=u=>{var w,D,E,T,M,U,te,Y;switch(u.type){case"text":return e.jsx(br,{value:u.content,onChange:S=>N(u.id,{content:S}),placeholder:"Start writing your lesson content..."});case"image":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:((w=u.metadata)==null?void 0:w.url)||"",onChange:S=>N(u.id,{metadata:se(X({},u.metadata),{url:S.target.value})}),placeholder:"Image URL",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"text",value:((D=u.metadata)==null?void 0:D.alt)||"",onChange:S=>N(u.id,{metadata:se(X({},u.metadata),{alt:S.target.value})}),placeholder:"Alt text for accessibility",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"text",value:((E=u.metadata)==null?void 0:E.caption)||"",onChange:S=>N(u.id,{metadata:se(X({},u.metadata),{caption:S.target.value})}),placeholder:"Image caption (optional)",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("button",{onClick:()=>y(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(x,{path:q,size:.8}),"Upload Image"]})})]});case"video":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:((T=u.metadata)==null?void 0:T.url)||"",onChange:S=>N(u.id,{metadata:se(X({},u.metadata),{url:S.target.value})}),placeholder:"Video URL",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"number",value:((M=u.metadata)==null?void 0:M.duration)||"",onChange:S=>N(u.id,{metadata:se(X({},u.metadata),{duration:parseInt(S.target.value)||0})}),placeholder:"Duration in seconds",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("button",{onClick:()=>y(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[e.jsx(x,{path:q,size:.8}),"Upload Video"]})})]});case"file":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:((U=u.metadata)==null?void 0:U.url)||"",onChange:S=>N(u.id,{metadata:se(X({},u.metadata),{url:S.target.value})}),placeholder:"File URL",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"text",value:((te=u.metadata)==null?void 0:te.size)||"",onChange:S=>N(u.id,{metadata:se(X({},u.metadata),{size:S.target.value})}),placeholder:"File size (e.g., 2.5 MB)",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("button",{onClick:()=>y(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-colors",children:[e.jsx(x,{path:q,size:.8}),"Upload File"]})})]});case"link":return e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:((Y=u.metadata)==null?void 0:Y.url)||"",onChange:S=>N(u.id,{metadata:se(X({},u.metadata),{url:S.target.value})}),placeholder:"Link URL",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"text",value:u.content,onChange:S=>N(u.id,{content:S.target.value}),placeholder:"Link text",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]});default:return null}};return e.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{path:Z,size:1.5,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600",children:"Editing lesson content"})]})]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(x,{path:q,size:1.5,className:"rotate-45"})})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Content Sections"}),e.jsxs("button",{onClick:()=>b(!0),className:"w-full inline-flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(x,{path:q,size:.8}),"Add Section"]})]}),c&&e.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Add New Section"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("select",{value:j,onChange:u=>m(u.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"image",children:"Image"}),e.jsx("option",{value:"video",children:"Video"}),e.jsx("option",{value:"file",children:"File"}),e.jsx("option",{value:"link",children:"Link"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:v,className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm",children:"Add"}),e.jsx("button",{onClick:()=>b(!1),className:"flex-1 px-3 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors text-sm",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[t.sections.map((u,w)=>e.jsx("div",{className:`p-3 rounded-lg border-2 cursor-pointer transition-all ${o===u.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>a(u.id),onKeyDown:D=>{(D.key==="Enter"||D.key===" ")&&(D.preventDefault(),a(u.id))},tabIndex:0,role:"button","aria-label":`Select ${u.type} section ${w+1}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-md ${_(u.type)}`,children:e.jsx(x,{path:f(u.type),size:.8})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:u.type}),e.jsxs("span",{className:"text-xs text-gray-500",children:["#",w+1]})]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:u.content||"No content"})]}),e.jsx("button",{onClick:D=>{D.stopPropagation(),h(u.id)},className:"p-1 text-red-400 hover:text-red-600",title:"Delete section",children:e.jsx(x,{path:Ie,size:.8})})]})},u.id)),t.sections.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(x,{path:Z,size:2,className:"mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-sm",children:"No content sections yet"}),e.jsx("p",{className:"text-xs",children:'Click "Add Section" to get started'})]})]})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:o&&t.sections.find(u=>u.id===o)?e.jsx("div",{className:"flex-1 p-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:`p-2 rounded-md ${_(((n=t.sections.find(u=>u.id===o))==null?void 0:n.type)||"text")}`,children:e.jsx(x,{path:f(((i=t.sections.find(u=>u.id===o))==null?void 0:i.type)||"text"),size:1})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 capitalize",children:[(l=t.sections.find(u=>u.id===o))==null?void 0:l.type," ","Section"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Edit your"," ",(d=t.sections.find(u=>u.id===o))==null?void 0:d.type," ","content"]})]})]}),C(t.sections.find(u=>u.id===o))]})})}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(x,{path:Z,size:3,className:"mx-auto text-gray-300 mb-4"}),e.jsx("p",{children:"Select a section to start editing"})]})})})]}),g&&e.jsx(Sr,{onFileUpload:u=>{if(u.length>0&&o){const w=u[0];N(o,{metadata:{url:w.url}})}y(!1)}})]})};var kr=Object.defineProperty,jt=Object.getOwnPropertySymbols,Ar=Object.prototype.hasOwnProperty,Ir=Object.prototype.propertyIsEnumerable,Nt=(t,r,s)=>r in t?kr(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,Ct=(t,r)=>{for(var s in r||(r={}))Ar.call(r,s)&&Nt(t,s,r[s]);if(jt)for(var s of jt(r))Ir.call(r,s)&&Nt(t,s,r[s]);return t};const $r=()=>{const{state:t}=ee(),{updateLesson:r,addModule:s,addLesson:n,updateCourseField:i,updateModule:l}=de(),{courseData:d}=t,{closeDrawer:o}=_s(),[a,c]=p.useState(null),[b,j]=p.useState(null),[m,g]=p.useState(new Set),[y,v]=p.useState(!1);p.useEffect(()=>{o()},[o]);const N=p.useCallback(u=>{const w=d.modules.flatMap(D=>D.lessons).find(D=>D.id===u);if(w){const D=w.content&&typeof w.content=="string"?[{id:"1",type:"text",content:w.content,order:0}]:[];j({id:w.id,title:w.title||`Lesson ${w.id}`,description:w.description||"",sections:D,estimatedDuration:w.estimatedDuration||15,isRequired:w.isRequired||!1}),c(u)}},[d.modules]),h=u=>{const w=new Set(m);w.has(u)?w.delete(u):w.add(u),g(w)},f=(u,w,D)=>{const E=d.modules.find(U=>U.id===u);if(!E)return;const T=[...E.lessons],[M]=T.splice(w,1);T.splice(D,0,M),l(u,{lessons:T})},_=u=>{if(!b)return;const w=Ct(Ct({},b),u);j(w);const D=d.modules.find(E=>E.lessons.some(T=>T.id===b.id));if(D){const E=w.sections.map(T=>T.content).join(`

`);r(D.id,b.id,{title:w.title,content:E,estimatedDuration:w.estimatedDuration,isRequired:w.isRequired})}},C=()=>{c(null),j(null)};return a&&b?e.jsx(Tr,{lessonData:b,onUpdateLesson:_,onClose:C}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("div",{className:"mb-4 cursor-pointer flex items-center justify-between",onClick:()=>v(!y),onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),v(!y))},tabIndex:0,role:"button","aria-label":"Toggle Step 1: Course Information",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Step 1: Course Information"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Set your course title and description"})]})})}),!y&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"course-title-step3",className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Title *"}),e.jsx("input",{id:"course-title-step3",type:"text",value:d.title,onChange:u=>i({title:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter your course title..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"course-description-step3",className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Description *"}),e.jsx("textarea",{id:"course-description-step3",rows:2,value:d.description,onChange:u=>i({description:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Describe what learners will gain from this course..."})]})]})]}),e.jsx(mr,{lessonData:b,courseTitle:d.title,onUpdateLesson:_,onAddModule:s,onAddLesson:n}),e.jsx(pr,{lessonData:b}),e.jsx(ur,{modules:d.modules,expandedModules:m,onToggleModuleExpansion:h,onUpdateModule:l,onUpdateLesson:(u,w,D)=>{r(u,w,D)},onOpenLessonEditor:N,onLessonReorder:f})]})})},Rr=({collapsedSections:t,toggleSection:r})=>{const{state:s}=ee(),{courseData:n}=s,[i,l]=p.useState([]);return p.useEffect(()=>{(()=>{var o;const a=[];if(!n.title||n.title.trim().length<5?a.push({field:"title",status:"error",message:"Course title must be at least 5 characters long"}):n.title.length>100?a.push({field:"title",status:"warning",message:"Course title is quite long, consider shortening it"}):a.push({field:"title",status:"valid",message:"Course title is appropriate length"}),!n.description||n.description.trim().length<20?a.push({field:"description",status:"error",message:"Course description must be at least 20 characters long"}):n.description.length>500?a.push({field:"description",status:"warning",message:"Course description is quite long, consider shortening it"}):a.push({field:"description",status:"valid",message:"Course description is appropriate length"}),n.modules.length===0)a.push({field:"modules",status:"error",message:"Course must have at least one module"});else{const c=n.modules.reduce((b,j)=>b+j.lessons.length,0);c===0?a.push({field:"lessons",status:"error",message:"Course must have at least one lesson"}):c<3?a.push({field:"lessons",status:"warning",message:"Consider adding more lessons for a comprehensive course"}):a.push({field:"lessons",status:"valid",message:`Course has ${c} lessons across ${n.modules.length} modules`})}(o=n.settings)!=null&&o.difficulty?a.push({field:"difficulty",status:"valid",message:`Difficulty level: ${n.settings.difficulty}`}):a.push({field:"difficulty",status:"error",message:"Difficulty level must be set"}),n.assessments&&n.assessments.length>0?a.push({field:"assessments",status:"valid",message:`Course has ${n.assessments.length} assessment(s)`}):a.push({field:"assessments",status:"warning",message:"Consider adding assessments to evaluate learning"}),l(a)})()},[n]),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"p-4 cursor-pointer flex items-center justify-between hover:bg-gray-50",onClick:()=>r("review"),onKeyDown:d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),r("review"))},role:"button",tabIndex:0,"aria-expanded":!t.review,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{path:Z,size:1.2,className:"text-blue-600"}),e.jsx("h5",{className:"text-lg font-medium text-gray-900",children:"Course Review & Validation"})]}),e.jsx(x,{path:t.review?oe:ye,size:1,className:"text-gray-400"})]}),!t.review&&e.jsx("div",{className:"border-t border-gray-200 p-4 space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map((d,o)=>e.jsxs("div",{className:`p-3 rounded-lg border ${d.status==="valid"?"bg-green-50 border-green-200":d.status==="warning"?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(x,{path:d.status==="valid"?be:d.status==="warning"?ae:J,size:.8,className:d.status==="valid"?"text-green-600":d.status==="warning"?"text-yellow-600":"text-red-600"}),e.jsx("span",{className:`text-sm font-medium capitalize ${d.status==="valid"?"text-green-800":d.status==="warning"?"text-yellow-800":"text-red-800"}`,children:d.field})]}),e.jsx("p",{className:`text-xs ${d.status==="valid"?"text-green-700":d.status==="warning"?"text-yellow-700":"text-red-700"}`,children:d.message})]},o))})})]})};var Lr=Object.defineProperty,Mr=Object.defineProperties,zr=Object.getOwnPropertyDescriptors,wt=Object.getOwnPropertySymbols,Ur=Object.prototype.hasOwnProperty,Fr=Object.prototype.propertyIsEnumerable,St=(t,r,s)=>r in t?Lr(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,ue=(t,r)=>{for(var s in r||(r={}))Ur.call(r,s)&&St(t,s,r[s]);if(wt)for(var s of wt(r))Fr.call(r,s)&&St(t,s,r[s]);return t},me=(t,r)=>Mr(t,zr(r));const qr=({collapsedSections:t,toggleSection:r,publishSettings:s,setPublishSettings:n})=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"p-4 cursor-pointer flex items-center justify-between hover:bg-gray-50",onClick:()=>r("settings"),onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),r("settings"))},role:"button",tabIndex:0,"aria-expanded":!t.settings,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{path:ys,size:1.2,className:"text-purple-600"}),e.jsx("h5",{className:"text-lg font-medium text-gray-900",children:"Publishing Settings & Access Controls"})]}),e.jsx(x,{path:t.settings?oe:ye,size:1,className:"text-gray-400"})]}),!t.settings&&e.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"course-visibility",className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Visibility"}),e.jsxs("select",{id:"course-visibility",value:s.isPublic?"public":"private",onChange:i=>n(l=>me(ue({},l),{isPublic:i.target.value==="public"})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",children:[e.jsx("option",{value:"public",children:"Public - Visible to all users"}),e.jsx("option",{value:"private",children:"Private - Invitation only"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"enrollment-requirements",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enrollment Requirements"}),e.jsxs("select",{id:"enrollment-requirements",value:s.requireEnrollment?"required":"optional",onChange:i=>n(l=>me(ue({},l),{requireEnrollment:i.target.value==="required"})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",children:[e.jsx("option",{value:"optional",children:"Optional - Users can start immediately"}),e.jsx("option",{value:"required",children:"Required - Approval needed"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-900",children:"Access Controls"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{id:"allow-guest-access",type:"checkbox",checked:s.allowGuestAccess,onChange:i=>n(l=>me(ue({},l),{allowGuestAccess:i.target.checked})),className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Allow guest access"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{id:"auto-archive",type:"checkbox",checked:s.autoArchive,onChange:i=>n(l=>me(ue({},l),{autoArchive:i.target.checked})),className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Auto-archive after completion"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"enrollment-start-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enrollment Start Date"}),e.jsx("input",{id:"enrollment-start-date",type:"date",value:s.enrollmentStartDate,onChange:i=>n(l=>me(ue({},l),{enrollmentStartDate:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"enrollment-end-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enrollment End Date"}),e.jsx("input",{id:"enrollment-end-date",type:"date",value:s.enrollmentEndDate,onChange:i=>n(l=>me(ue({},l),{enrollmentEndDate:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent"})]})]})]})]});var Br=Object.defineProperty,Gr=Object.defineProperties,Vr=Object.getOwnPropertyDescriptors,_t=Object.getOwnPropertySymbols,Hr=Object.prototype.hasOwnProperty,Yr=Object.prototype.propertyIsEnumerable,Et=(t,r,s)=>r in t?Br(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,Ne=(t,r)=>{for(var s in r||(r={}))Hr.call(r,s)&&Et(t,s,r[s]);if(_t)for(var s of _t(r))Yr.call(r,s)&&Et(t,s,r[s]);return t},Ce=(t,r)=>Gr(t,Vr(r));const Kr=({collapsedSections:t,toggleSection:r,seoSettings:s,setSeoSettings:n})=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"p-4 cursor-pointer flex items-center justify-between hover:bg-gray-50",onClick:()=>r("seo"),onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),r("seo"))},role:"button",tabIndex:0,"aria-expanded":!t.seo,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{path:Ht,size:1.2,className:"text-indigo-600"}),e.jsx("h5",{className:"text-lg font-medium text-gray-900",children:"Course Metadata & SEO Options"})]}),e.jsx(x,{path:t.seo?oe:ye,size:1,className:"text-gray-400"})]}),!t.seo&&e.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"meta-title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Title"}),e.jsx("input",{id:"meta-title",type:"text",value:s.metaTitle,onChange:i=>n(l=>Ce(Ne({},l),{metaTitle:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"SEO-optimized title (50-60 characters)"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.metaTitle.length,"/60 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"meta-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Description"}),e.jsx("textarea",{id:"meta-description",value:s.metaDescription,onChange:i=>n(l=>Ce(Ne({},l),{metaDescription:i.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"SEO-optimized description (150-160 characters)"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.metaDescription.length,"/160 characters"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"keywords",className:"block text-sm font-medium text-gray-700 mb-2",children:"Keywords"}),e.jsx("input",{id:"keywords",type:"text",value:s.keywords,onChange:i=>n(l=>Ce(Ne({},l),{keywords:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter keywords separated by commas"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"canonical-url",className:"block text-sm font-medium text-gray-700 mb-2",children:"Canonical URL"}),e.jsx("input",{id:"canonical-url",type:"url",value:s.canonicalUrl,onChange:i=>n(l=>Ce(Ne({},l),{canonicalUrl:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"https://example.com/course"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"og-image",className:"block text-sm font-medium text-gray-700 mb-2",children:"Open Graph Image"}),e.jsx("input",{id:"og-image",type:"url",value:s.ogImage,onChange:i=>n(l=>Ce(Ne({},l),{ogImage:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"https://example.com/image.jpg"})]})]})]})]}),Qr=({collapsedSections:t,toggleSection:r,generatePreview:s})=>{var n,i;const{state:l}=ee(),{courseData:d}=l;return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"p-4 cursor-pointer flex items-center justify-between hover:bg-gray-50",onClick:()=>r("preview"),onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),r("preview"))},role:"button",tabIndex:0,"aria-expanded":!t.preview,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{path:$e,size:1.2,className:"text-green-600"}),e.jsx("h5",{className:"text-lg font-medium text-gray-900",children:"Course Preview & Testing Tools"})]}),e.jsx(x,{path:t.preview?oe:ye,size:1,className:"text-gray-400"})]}),!t.preview&&e.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:s,className:"p-4 border border-blue-200 rounded-lg bg-blue-50 hover:border-blue-300 hover:bg-blue-100 transition-colors text-center",children:[e.jsx(x,{path:$e,size:1.5,className:"mx-auto text-blue-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Preview Course"})]}),e.jsxs("button",{onClick:()=>alert("Student view simulation would open here"),className:"p-4 border border-green-200 rounded-lg bg-green-50 hover:border-green-300 hover:bg-green-100 transition-colors text-center",children:[e.jsx(x,{path:vs,size:1.5,className:"mx-auto text-green-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Student View"})]}),e.jsxs("button",{onClick:()=>alert("Course export options would appear here"),className:"p-4 border border-purple-200 rounded-lg bg-purple-50 hover:border-purple-300 hover:bg-purple-100 transition-colors text-center",children:[e.jsx(x,{path:js,size:1.5,className:"mx-auto text-purple-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Export Course"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-900 mb-3",children:"Quick Stats"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.modules.length}),e.jsx("div",{className:"text-xs text-gray-600",children:"Modules"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.modules.reduce((o,a)=>o+a.lessons.length,0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Lessons"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:((n=d.settings)==null?void 0:n.estimatedDuration)||0}),e.jsx("div",{className:"text-xs text-gray-600",children:"Minutes"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:((i=d.assessments)==null?void 0:i.length)||0}),e.jsx("div",{className:"text-xs text-gray-600",children:"Assessments"})]})]})]})]})]})},Wr=({validationStatus:t,isPublishing:r,handlePublish:s})=>e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(x,{path:ve,size:1.5,className:"text-green-600"}),e.jsx("h5",{className:"text-lg font-medium text-green-900",children:"Ready to Publish?"})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("p",{className:"text-sm text-green-700",children:"Your course has been reviewed and is ready for publication. Here's what will happen:"}),e.jsxs("ul",{className:"text-sm text-green-700 space-y-1 ml-4",children:[e.jsx("li",{children:"• Course will be available in the library"}),e.jsx("li",{children:"• Users can enroll and start learning"}),e.jsx("li",{children:"• Progress tracking will be enabled"}),e.jsx("li",{children:"• Certificates will be issued upon completion"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:s,disabled:t.status==="error"||r,className:`inline-flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-colors ${t.status==="error"||r?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 shadow-lg"}`,children:[e.jsx(x,{path:r?le:ve,size:1.2}),e.jsx("span",{children:r?"Publishing...":"Publish Course Now"})]}),e.jsx("button",{onClick:()=>alert("Course will be saved as draft"),className:"px-4 py-3 text-sm text-gray-600 hover:text-gray-800 underline",children:"Save as Draft"})]})]}),Zr=({validationStatus:t})=>e.jsx("div",{className:`p-4 rounded-lg border ${t.status==="error"?"bg-red-50 border-red-200":t.status==="warning"?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{path:t.status==="error"?ae:t.status==="warning"?ae:je,size:1.2,className:t.status==="error"?"text-red-600":t.status==="warning"?"text-yellow-600":"text-green-600"}),e.jsxs("div",{children:[e.jsx("h5",{className:`font-medium ${t.status==="error"?"text-red-900":t.status==="warning"?"text-yellow-900":"text-green-900"}`,children:t.status==="error"?"Course Cannot Be Published":t.status==="warning"?"Course Ready with Warnings":"Course Ready to Publish"}),e.jsx("p",{className:`text-sm ${t.status==="error"?"text-red-700":t.status==="warning"?"text-yellow-700":"text-green-700"}`,children:t.message})]})]})});var Xr=Object.defineProperty,Jr=Object.defineProperties,ea=Object.getOwnPropertyDescriptors,Dt=Object.getOwnPropertySymbols,ta=Object.prototype.hasOwnProperty,sa=Object.prototype.propertyIsEnumerable,Pt=(t,r,s)=>r in t?Xr(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,ra=(t,r)=>{for(var s in r||(r={}))ta.call(r,s)&&Pt(t,s,r[s]);if(Dt)for(var s of Dt(r))sa.call(r,s)&&Pt(t,s,r[s]);return t},aa=(t,r)=>Jr(t,ea(r)),Ot=(t,r,s)=>new Promise((n,i)=>{var l=a=>{try{o(s.next(a))}catch(c){i(c)}},d=a=>{try{o(s.throw(a))}catch(c){i(c)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((s=s.apply(t,r)).next())});const na=()=>{const{state:t}=ee(),{updateCourseField:r}=de(),{courseData:s}=t,{settings:n}=Ls(),[i,l]=p.useState([]),[d,o]=p.useState(!1),[a,c]=p.useState(!1),[b,j]=p.useState({isPublic:!0,requireEnrollment:!1,allowGuestAccess:!1,maxEnrollments:0,enrollmentStartDate:"",enrollmentEndDate:"",courseStartDate:"",courseEndDate:"",autoArchive:!1,archiveAfterDays:30}),[m,g]=p.useState({metaTitle:s.title||"",metaDescription:s.description||"",keywords:"",canonicalUrl:"",ogImage:"",structuredData:!0}),[y,v]=p.useState({review:!1,settings:!1,seo:!1,access:!1,preview:!1});p.useEffect(()=>{(()=>{var D;const E=[];if(!s.title||s.title.trim().length<5?E.push({field:"title",status:"error",message:"Course title must be at least 5 characters long"}):s.title.length>100?E.push({field:"title",status:"warning",message:"Course title is quite long, consider shortening it"}):E.push({field:"title",status:"valid",message:"Course title is appropriate length"}),!s.description||s.description.trim().length<20?E.push({field:"description",status:"error",message:"Course description must be at least 20 characters long"}):s.description.length>500?E.push({field:"description",status:"warning",message:"Course description is quite long, consider shortening it"}):E.push({field:"description",status:"valid",message:"Course description is appropriate length"}),s.modules.length===0)E.push({field:"modules",status:"error",message:"Course must have at least one module"});else{const T=s.modules.reduce((M,U)=>M+U.lessons.length,0);T===0?E.push({field:"lessons",status:"error",message:"Course must have at least one lesson"}):T<3?E.push({field:"lessons",status:"warning",message:"Consider adding more lessons for a comprehensive course"}):E.push({field:"lessons",status:"valid",message:`Course has ${T} lessons across ${s.modules.length} modules`})}(D=s.settings)!=null&&D.difficulty?E.push({field:"difficulty",status:"valid",message:`Difficulty level: ${s.settings.difficulty}`}):E.push({field:"difficulty",status:"error",message:"Difficulty level must be set"}),s.assessments&&s.assessments.length>0?E.push({field:"assessments",status:"valid",message:`Course has ${s.assessments.length} assessment(s)`}):E.push({field:"assessments",status:"warning",message:"Consider adding assessments to evaluate learning"}),l(E)})()},[s]);const N=()=>{const w=i.filter(E=>E.status==="error").length,D=i.filter(E=>E.status==="warning").length;return w>0?{status:"error",message:`${w} issues must be resolved`}:D>0?{status:"warning",message:`${D} warnings to consider`}:{status:"valid",message:"Course is ready to publish"}},h=w=>{v(D=>aa(ra({},D),{[w]:!D[w]}))},f=()=>Ot(null,null,function*(){if(N().status==="error"){ne.error("Please resolve all validation errors before publishing");return}o(!0);try{yield new Promise(D=>setTimeout(D,2e3)),r({isPublished:!0}),ne.success("Course published successfully! It is now available in the library.")}catch(D){console.error(D),ne.error("Failed to publish course. Please try again.")}finally{o(!1)}}),_=()=>Ot(null,null,function*(){if(N().status==="error"){ne.error("Please resolve all validation errors before submitting for approval.");return}if(!s.id){ne.error("Course ID not found. Please save the course first.");return}c(!0);try{(yield Ts(s.id,"courses"))?(ne.success("Course submitted for approval! Reviewers will be notified.",{duration:5e3}),r({isPublished:!1})):ne.error("Failed to submit course for approval. Please try again.")}catch(D){console.error("Error submitting for approval:",D),ne.error("Failed to submit course for approval. Please try again.")}finally{c(!1)}}),C=()=>{var w,D;const E={title:s.title,description:s.description,modules:s.modules.length,lessons:s.modules.reduce((T,M)=>T+M.lessons.length,0),duration:((w=s.settings)==null?void 0:w.estimatedDuration)||0,difficulty:((D=s.settings)==null?void 0:D.difficulty)||"beginner"};alert(`Course Preview:

Title: ${E.title}
Description: ${E.description}
Modules: ${E.modules}
Lessons: ${E.lessons}
Duration: ${E.duration} minutes
Difficulty: ${E.difficulty}`)},u=N();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-semibold text-gray-900",children:"Publish & Settings"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Final review and configuration before publishing your course"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:C,className:"inline-flex items-center gap-2 px-4 py-2 border border-blue-200 rounded-lg bg-blue-50 hover:border-blue-300 hover:bg-blue-100 transition-colors",children:[e.jsx(x,{path:$e,size:1,className:"text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-900 text-sm",children:"Preview"})]}),n!=null&&n.requireApproval?e.jsxs("button",{onClick:_,disabled:u.status==="error"||a,className:`inline-flex items-center gap-2 px-6 py-2 rounded-lg font-medium transition-colors ${u.status==="error"||a?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-orange-600 text-white hover:bg-orange-700"}`,children:[e.jsx(x,{path:a?le:je,size:1}),e.jsx("span",{children:a?"Submitting...":"Submit for Approval"})]}):e.jsxs("button",{onClick:f,disabled:u.status==="error"||d,className:`inline-flex items-center gap-2 px-6 py-2 rounded-lg font-medium transition-colors ${u.status==="error"||d?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:[e.jsx(x,{path:d?le:ve,size:1}),e.jsx("span",{children:d?"Publishing...":"Publish Course"})]})]})]}),e.jsx(Zr,{validationStatus:u}),e.jsx(Rr,{collapsedSections:y,toggleSection:h}),e.jsx(qr,{collapsedSections:y,toggleSection:h,publishSettings:b,setPublishSettings:j}),e.jsx(Kr,{collapsedSections:y,toggleSection:h,seoSettings:m,setSeoSettings:g}),e.jsx(Qr,{collapsedSections:y,toggleSection:h,generatePreview:C}),e.jsx(Wr,{validationStatus:u,isPublishing:d,handlePublish:f})]})},rs=({draftId:t})=>{const{state:r}=ee(),{setCourseStep:s}=de(),{courseStep:n}=r;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(x,{path:Qt,size:1.5,className:"text-[#4ECDC4]"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Course Builder"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create an engaging, interactive learning experience"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Course Structure"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Step ",n||1," of 4"]}),e.jsx("div",{className:"flex space-x-1",children:[1,2,3,4].map(i=>e.jsx("div",{className:`w-3 h-3 rounded-full ${i<=(n||1)?"bg-[#4ECDC4]":"bg-gray-300"}`,title:i===1?"Course Overview":i===2?"Course Planning":i===3?"Content Builder":"Publish & Settings"},i))})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>s(Math.max(1,(n||1)-1)),disabled:(n||1)===1,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(x,{path:Wt,size:1,className:"mr-1"}),"Previous"]}),e.jsxs("button",{onClick:()=>s(Math.min(4,(n||1)+1)),disabled:(n||1)===4,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] disabled:opacity-50 disabled:cursor-not-allowed",children:["Next",e.jsx(x,{path:Re,size:1,className:"ml-1"})]})]}),(n||1)===1&&e.jsx(rr,{}),(n||1)===2&&e.jsx(dr,{}),(n||1)===3&&e.jsx($r,{}),(n||1)===4&&e.jsx(na,{})]})]})},ia=Object.freeze(Object.defineProperty({__proto__:null,default:rs},Symbol.toStringTag,{value:"Module"}));var la=Object.defineProperty,oa=Object.defineProperties,ca=Object.getOwnPropertyDescriptors,Tt=Object.getOwnPropertySymbols,da=Object.prototype.hasOwnProperty,ua=Object.prototype.propertyIsEnumerable,kt=(t,r,s)=>r in t?la(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,pe=(t,r)=>{for(var s in r||(r={}))da.call(r,s)&&kt(t,s,r[s]);if(Tt)for(var s of Tt(r))ua.call(r,s)&&kt(t,s,r[s]);return t},xe=(t,r)=>oa(t,ca(r)),At=(t,r,s)=>new Promise((n,i)=>{var l=a=>{try{o(s.next(a))}catch(c){i(c)}},d=a=>{try{o(s.throw(a))}catch(c){i(c)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((s=s.apply(t,r)).next())});const ma=t=>{const[r,s]=p.useState({status:"idle",lastSaved:null,error:null,isDirty:!1}),n=p.useRef(null),i=p.useRef(null),l=p.useRef(!1),{enabled:d,debounceDelay:o=2e3,saveInterval:a=3e4,onSave:c,onError:b,onSuccess:j}=t;p.useEffect(()=>()=>{n.current&&clearTimeout(n.current),i.current&&clearInterval(i.current)},[]);const m=p.useCallback(()=>At(null,null,function*(){if(!(l.current||!d)){l.current=!0,s(h=>xe(pe({},h),{status:"saving",error:null}));try{yield c(),s(h=>xe(pe({},h),{status:"saved",lastSaved:new Date,isDirty:!1,error:null})),j==null||j()}catch(h){const f=h instanceof Error?h.message:"Save failed";s(_=>xe(pe({},_),{status:"error",error:f})),b==null||b(h instanceof Error?h:new Error(f))}finally{l.current=!1}}}),[d,c,b,j]);p.useEffect(()=>{if(!d){i.current&&(clearInterval(i.current),i.current=null);return}return i.current=setInterval(()=>{r.isDirty&&!l.current&&m()},a),()=>{i.current&&(clearInterval(i.current),i.current=null)}},[d,a,r.isDirty,m]);const g=p.useCallback(()=>{d&&(s(h=>xe(pe({},h),{isDirty:!0})),n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{m()},o))},[d,o,m]),y=p.useCallback(()=>At(null,null,function*(){n.current&&(clearTimeout(n.current),n.current=null),yield m()}),[m]),v=p.useCallback(()=>{s(h=>xe(pe({},h),{error:null,status:"idle"}))},[]),N=p.useCallback(()=>{s({status:"idle",lastSaved:null,error:null,isDirty:!1}),n.current&&(clearTimeout(n.current),n.current=null)},[]);return xe(pe({},r),{triggerSave:g,forceSave:y,clearError:v,reset:N})};var Ze=(t,r,s)=>new Promise((n,i)=>{var l=a=>{try{o(s.next(a))}catch(c){i(c)}},d=a=>{try{o(s.throw(a))}catch(c){i(c)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((s=s.apply(t,r)).next())});class Xe{static analyzeSDSCoverage(){return Ze(this,null,function*(){const{data:r,error:s}=yield B.from("inventory_items").select("name, category, manufacturer, quantity, status").eq("status","active").or("category.ilike.%chemical%,category.ilike.%solvent%,category.ilike.%acid%,category.ilike.%base%,category.ilike.%reagent%");if(s)throw new Error("Failed to fetch inventory data");const{data:n,error:i}=yield B.from("sds_sheets").select("title, chemical_name, status, priority, risk_level").eq("status","published");if(i)throw new Error("Failed to fetch SDS sheet data from database");return this.performAnalysis(r||[],n||[])})}static performAnalysis(r,s){const n=this.filterChemicalItems(r),i=this.extractChemicalNames(s),l=this.identifyMissingChemicals(n,i),d=this.generatePriorityRecommendations(l),o=n.length,a=s.length,c=l.length,b=o>0?Math.round((o-c)/o*100):0;return{totalChemicals:o,existingSDSSheets:a,missingSDSSheets:c,coveragePercentage:b,missingChemicals:l,priorityRecommendations:d}}static filterChemicalItems(r){return r.filter(s=>{const n=(s.name||"").toLowerCase(),i=(s.category||"").toLowerCase();return(s.quantity||0)>0&&(n.includes("acid")||n.includes("base")||n.includes("solvent")||n.includes("reagent")||n.includes("chemical")||i.includes("chemical")||i.includes("solvent")||i.includes("reagent"))})}static extractChemicalNames(r){return r.map(s=>(s.chemical_name||s.title||"").trim())}static identifyMissingChemicals(r,s){return r.filter(n=>{var i;const l=((i=n.name)==null?void 0:i.toLowerCase())||"";return!s.some(d=>d.toLowerCase().includes(l)||l.includes(d.toLowerCase()))}).map(n=>{var i;return{name:n.name,category:n.category,manufacturer:(i=n.data)==null?void 0:i.manufacturer,priority:this.calculatePriority(n),reason:this.generateMissingReason(n),estimatedRisk:this.estimateRisk(n)}})}static calculatePriority(r){const s=(r.name||"").toLowerCase(),n=(r.category||"").toLowerCase(),i=r.quantity||0;return i>100||s.includes("acid")||s.includes("base")||s.includes("toxic")||s.includes("hazardous")||n.includes("dangerous")?"high":i>50||s.includes("solvent")||s.includes("reagent")||n.includes("chemical")?"medium":"low"}static generateMissingReason(r){const s=(r.name||"").toLowerCase(),n=(r.category||"").toLowerCase();return(r.quantity||0)>100||s.includes("acid")||s.includes("base")||s.includes("toxic")||s.includes("hazardous")||n.includes("dangerous")?"High-risk chemical with significant quantity - immediate SDS required for safety compliance":s.includes("reagent")||n.includes("chemical")?"Chemical reagent or laboratory chemical - SDS needed for proper handling procedures":"Standard chemical inventory item - SDS recommended for complete safety documentation"}static estimateRisk(r){const s=(r.name||"").toLowerCase(),n=(r.category||"").toLowerCase();return(r.quantity||0)>100||s.includes("acid")||s.includes("base")||s.includes("toxic")||s.includes("hazardous")||n.includes("dangerous")?"high":s.includes("reagent")||n.includes("chemical")?"medium":"low"}static generatePriorityRecommendations(r){return r.sort((s,n)=>{const i={high:3,medium:2,low:1};return i[n.priority]-i[s.priority]}).slice(0,10).map(s=>({chemicalName:s.name,priority:s.priority,reason:s.reason,suggestedAction:`Create SDS sheet for ${s.name}`,estimatedTimeToCreate:this.estimateCreationTime(s)}))}static estimateCreationTime(r){let n=1;return r.priority==="high"?n=1.5:r.priority==="medium"&&(n=1.2),r.estimatedRisk==="high"&&(n+=.3),Math.round(30*n)}static getSummaryStats(){return Ze(this,null,function*(){const r=yield this.analyzeSDSCoverage(),s=r.missingChemicals.filter(i=>i.priority==="high").length,n=r.priorityRecommendations.reduce((i,l)=>i+l.estimatedTimeToCreate,0);return{totalChemicals:r.totalChemicals,coveragePercentage:r.coveragePercentage,highPriorityMissing:s,estimatedTotalTime:n}})}static saveAnalysisResults(r,s){return Ze(this,null,function*(){const{data:n,error:i}=yield B.from("sds_gap_analysis").insert({facility_id:r,total_chemicals:s.totalChemicals,existing_sds_sheets:s.existingSDSSheets,missing_sds_sheets:s.missingSDSSheets,coverage_percentage:s.coveragePercentage,high_priority_missing:s.missingChemicals.filter(l=>l.priority==="high").length,medium_priority_missing:s.missingChemicals.filter(l=>l.priority==="medium").length,low_priority_missing:s.missingChemicals.filter(l=>l.priority==="low").length,estimated_total_time:s.priorityRecommendations.reduce((l,d)=>l+d.estimatedTimeToCreate,0),compliance_score:s.coveragePercentage}).select().single();if(i)throw new Error("Failed to save gap analysis");if(s.priorityRecommendations.length>0){const l=s.priorityRecommendations.map(o=>{const a=s.missingChemicals.find(c=>c.name===o.chemicalName);return{facility_id:r,gap_analysis_id:n.id,chemical_name:o.chemicalName,category:(a==null?void 0:a.category)||"unknown",manufacturer:a==null?void 0:a.manufacturer,priority:o.priority,risk_level:(a==null?void 0:a.estimatedRisk)||"medium",reason:o.reason,suggested_action:o.suggestedAction,estimated_time_to_create:o.estimatedTimeToCreate,ai_confidence_score:.8,ai_reasoning:"AI analysis based on inventory and existing SDS coverage"}}),{error:d}=yield B.from("sds_chemical_recommendations").insert(l);if(d)throw new Error("Failed to save recommendations")}})}}var It=(t,r,s)=>new Promise((n,i)=>{var l=a=>{try{o(s.next(a))}catch(c){i(c)}},d=a=>{try{o(s.throw(a))}catch(c){i(c)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((s=s.apply(t,r)).next())});const pa=()=>{const[t,r]=p.useState(null),[s,n]=p.useState(!1),[i,l]=p.useState(null),d=()=>It(null,null,function*(){n(!0),l(null);try{const a=yield Xe.analyzeSDSCoverage();r(a);try{const{data:{user:c}}=yield B.auth.getUser();c&&(yield Xe.saveAnalysisResults("your-facility-id",a))}catch(c){console.warn("Failed to save analysis to database:",c)}}catch(a){l(a instanceof Error?a.message:"Failed to analyze SDS coverage"),console.error("SDS analysis error:",a)}finally{n(!1)}}),o=()=>It(null,null,function*(){try{return yield Xe.getSummaryStats()}catch(a){return console.error("Error getting summary stats:",a),null}});return p.useEffect(()=>{d()},[]),{analysis:t,loading:s,error:i,analyzeCoverage:d,getSummaryStats:o}},xa=()=>{const{analysis:t,loading:r,error:s,analyzeCoverage:n}=pa();if(r)return e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-blue-700",children:"Analyzing your SDS sheet coverage..."})]});if(s)return e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(x,{path:ae,size:1.2,className:"text-red-600"}),e.jsx("h3",{className:"text-sm font-medium text-red-900",children:"Analysis Error"})]}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:s}),e.jsxs("button",{onClick:n,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx(x,{path:ut,size:1,className:"mr-2"}),"Retry Analysis"]})]});if(!t)return e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-gray-600",children:"No analysis data available"})});const{totalChemicals:i,existingSDSSheets:l,missingSDSSheets:d,coveragePercentage:o,missingChemicals:a,priorityRecommendations:c}=t,b=a.filter(m=>m.priority==="high").length,j=a.filter(m=>m.priority==="medium").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(x,{path:Q,size:1.2,className:"text-blue-600"}),e.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"Safety Data Sheet (SDS) Compliance Assistant"})]}),e.jsx("p",{className:"text-sm text-blue-700",children:"AI-powered analysis of your chemical inventory vs. SDS sheet coverage"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Chemicals"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i})]}),e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(x,{path:ae,size:1.5,className:"text-blue-600"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Coverage"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[o,"%"]})]}),e.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:e.jsx(x,{path:je,size:1.5,className:"text-green-600"})})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Coverage Breakdown"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Existing SDS Sheets"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:l})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Missing SDS Sheets"}),e.jsx("span",{className:"text-sm font-medium text-red-600",children:d})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"High Priority Missing"}),e.jsx("span",{className:"text-sm font-bold text-red-600",children:b})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Medium Priority Missing"}),e.jsx("span",{className:"text-sm font-bold text-orange-600",children:j})]})]})]})]}),c.length>0&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Priority Recommendations"}),e.jsx("div",{className:"space-y-3",children:c.slice(0,5).map((m,g)=>e.jsxs("div",{className:"border-l-4 border-blue-500 pl-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:m.chemicalName}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${m.priority==="high"?"bg-red-100 text-red-800":m.priority==="medium"?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:[m.priority," priority"]})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:m.reason}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{path:le,size:.8,className:"text-gray-400"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Est. ",m.estimatedTimeToCreate," min to create"]})]})]},g))}),c.length>5&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2 text-center",children:["+",c.length-5," more recommendations"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:n,className:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(x,{path:ut,size:1,className:"mr-2"}),"Refresh Analysis"]}),e.jsxs("button",{className:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(x,{path:Q,size:1,className:"mr-2"}),"Get AI Suggestions"]})]})]})},ha=({contentType:t,title:r,description:s,content:n,chemicalName:i,casNumber:l,isRequired:d,reviewAnnually:o,onTitleChange:a,onDescriptionChange:c,onContentChange:b,onChemicalNameChange:j,onCasNumberChange:m,onRequiredChange:g,onReviewAnnuallyChange:y})=>{const v=()=>{switch(t.id){case"policy":return Me;case"procedure":return Z;case"sds":return Ns;default:return Z}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(x,{path:v(),size:1.5,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t.label}),e.jsx("p",{className:"text-sm text-gray-600",children:t.description})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),e.jsx("input",{id:"title",type:"text",value:r,onChange:N=>a(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:`Enter ${t.label.toLowerCase()} title...`})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"is-required",className:"block text-sm font-medium text-gray-700 mb-2",children:"Required"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"is-required",type:"checkbox",checked:d,onChange:N=>g(N.target.checked),className:"h-4 w-4 text-[#4ECDC4] focus:ring-[#4ECDC4] border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is-required",className:"ml-2 text-sm text-gray-700",children:"Mark as required content"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",rows:3,value:s,onChange:N=>c(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:`Describe this ${t.label.toLowerCase()}...`})]}),t.id==="sds"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"chemical-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Chemical Name"}),e.jsx("input",{id:"chemical-name",type:"text",value:i,onChange:N=>j(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter chemical name..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cas-number",className:"block text-sm font-medium text-gray-700 mb-2",children:"CAS Number"}),e.jsx("input",{id:"cas-number",type:"text",value:l,onChange:N=>m(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter CAS number..."})]})]}),(t.id==="policy"||t.id==="procedure")&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"review-annually",className:"block text-sm font-medium text-gray-700 mb-2",children:"Annual Review"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"review-annually",type:"checkbox",checked:o,onChange:N=>y(N.target.checked),className:"h-4 w-4 text-[#4ECDC4] focus:ring-[#4ECDC4] border-gray-300 rounded"}),e.jsx("label",{htmlFor:"review-annually",className:"ml-2 text-sm text-gray-700",children:"Mark for annual review and updates"})]}),o&&e.jsxs("p",{className:"mt-2 text-xs text-blue-600",children:["This ",t.label.toLowerCase()," will be automatically flagged for annual review and compliance checks."]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),e.jsx("textarea",{id:"content",rows:12,value:n,onChange:N=>b(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent font-mono text-sm",placeholder:`Start writing your ${t.label.toLowerCase()} content...`}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Use markdown formatting for better structure and readability."})]})]})};var ga=(t,r,s)=>new Promise((n,i)=>{var l=a=>{try{o(s.next(a))}catch(c){i(c)}},d=a=>{try{o(s.throw(a))}catch(c){i(c)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((s=s.apply(t,r)).next())});const fa=({pdfFile:t,onFileSelect:r,onUpload:s,isUploading:n,facilityId:i})=>{const l=p.useRef(null),d=c=>{var b;const j=(b=c.target.files)==null?void 0:b[0];if(j&&j.type==="application/pdf"){if(j.size>10*1024*1024){alert("File size must be less than 10MB");return}r(j)}else j&&alert("Please select a PDF file")},o=()=>{r(null),l.current&&(l.current.value="")},a=()=>ga(null,null,function*(){t&&(yield s(t))});return i?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{path:ke,size:1.2,className:"text-blue-600"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"PDF Upload"})]}),t?e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{path:ke,size:1.5,className:"text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(t.size/(1024*1024)).toFixed(2)," MB"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:a,disabled:n,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm",children:[e.jsx(x,{path:Cs,size:.8}),n?"Uploading...":"Upload"]}),e.jsx("button",{onClick:o,className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Remove file",children:e.jsx(x,{path:J,size:.8})})]})]})}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[e.jsx("input",{ref:l,type:"file",accept:".pdf",onChange:d,className:"hidden"}),e.jsxs("button",{onClick:()=>{var c;return(c=l.current)==null?void 0:c.click()},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(x,{path:q,size:.8}),"Select PDF File"]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Maximum file size: 10MB. Only PDF files are supported."})]})]}):e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{path:ke,size:1.2,className:"text-yellow-600"}),e.jsx("p",{className:"text-sm text-yellow-800",children:"No facility ID available. Please ensure you are assigned to a facility."})]})})},ba=({onTranscriptUpdate:t,isRecording:r,onRecordingChange:s})=>{const n=p.useRef(null),i=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert("Speech recognition is not supported in this browser. Please use Chrome or Edge.");return}const o=window.SpeechRecognition||window.webkitSpeechRecognition,a=new o;a.continuous=!0,a.interimResults=!0,a.lang="en-US",a.addEventListener("start",()=>{s(!0)}),a.onresult=c=>{let b="";for(let j=c.resultIndex;j<c.results.length;j++){const m=c.results[j][0].transcript;c.results[j].isFinal&&(b+=m)}b&&t(b)},a.onerror=c=>{console.error("Speech recognition error:",c.error),s(!1),c.error==="no-speech"&&alert("No speech detected. Please try again.")},a.onend=()=>{s(!1)},n.current=a,a.start()},l=()=>{n.current&&(n.current.stop(),n.current=null),s(!1)},d=()=>{r?l():i()};return p.useEffect(()=>()=>{n.current&&n.current.stop()},[]),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{path:rt,size:1.2,className:"text-blue-600"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Voice Recording"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:d,className:`inline-flex items-center gap-2 px-4 py-2 rounded-md transition-colors ${r?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[e.jsx(x,{path:r?Zt:rt,size:.8}),r?"Stop Recording":"Start Recording"]}),r&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-red-600 font-medium",children:"Recording..."})]})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:[e.jsx("strong",{children:"How it works:"}),' Click "Start Recording" and speak clearly. Your speech will be automatically transcribed and added to the content field. Click "Stop Recording" when finished.']}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.jsx("strong",{children:"Note:"})," Speech recognition works best in quiet environments with clear pronunciation."]})]})]})},ya=({onInsertTable:t,onClose:r})=>{const[s,n]=p.useState([["","",""],["","",""],["","",""]]),[i,l]=p.useState(["Column 1","Column 2","Column 3"]),d=()=>{l(g=>[...g,`Column ${g.length+1}`]),n(g=>g.map(y=>[...y,""]))},o=g=>{i.length>1&&(l(y=>y.filter((v,N)=>N!==g)),n(y=>y.map(v=>v.filter((N,h)=>h!==g))))},a=()=>{n(g=>[...g,new Array(i.length).fill("")])},c=g=>{s.length>1&&n(y=>y.filter((v,N)=>N!==g))},b=(g,y,v)=>{const N=[...s];N[g][y]=v,n(N)},j=(g,y)=>{const v=[...i];v[g]=y,l(v)},m=()=>{let g=`

`;g+="| "+i.join(" | ")+` |
`,g+="|"+i.map(()=>"---").join("|")+`|
`,s.forEach(y=>{g+="| "+y.map(v=>v||" ").join(" | ")+` |
`}),g+=`
`,t(g),r()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg shadow-lg max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{path:Xt,size:1.2,className:"text-blue-600"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Table Builder"})]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(x,{path:q,size:1.5,className:"rotate-45"})})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("button",{onClick:d,className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(x,{path:q,size:.8}),"Add Column"]}),e.jsxs("button",{onClick:a,className:"inline-flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm",children:[e.jsx(x,{path:q,size:.8}),"Add Row"]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden mb-6",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:e.jsx("h4",{className:"font-medium text-gray-900",children:"Table Preview"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:i.map((g,y)=>e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:g,onChange:v=>j(y,v.target.value),className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.length>1&&e.jsx("button",{onClick:()=>o(y),className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Remove column",children:e.jsx(x,{path:mt,size:.8})})]})},y))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((g,y)=>e.jsxs("tr",{children:[g.map((v,N)=>e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:e.jsx("input",{type:"text",value:v,onChange:h=>b(y,N,h.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter content..."})},N)),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-500",children:s.length>1&&e.jsx("button",{onClick:()=>c(y),className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Remove row",children:e.jsx(x,{path:mt,size:.8})})})]},y))})]})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"How to use:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• Edit column headers to describe your data"}),e.jsx("li",{children:"• Fill in table cells with your content"}),e.jsx("li",{children:"• Add or remove columns and rows as needed"}),e.jsx("li",{children:'• Click "Insert Table" to add it to your content'})]})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:"Cancel"}),e.jsx("button",{onClick:m,className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] border border-transparent rounded-md hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:"Insert Table"})]})]})})},va=({tags:t,onTagsChange:r,content:s,title:n})=>{const[i,l]=p.useState(""),{settings:d}=Ms(),o=p.useMemo(()=>{const m=[],g=(s+" "+n).toLowerCase();return g.includes("safety")&&!t.includes("safety")&&m.push("safety"),g.includes("compliance")&&!t.includes("compliance")&&m.push("compliance"),g.includes("training")&&!t.includes("training")&&m.push("training"),g.includes("procedure")&&!t.includes("procedure")&&m.push("procedure"),g.includes("policy")&&!t.includes("policy")&&m.push("policy"),g.includes("chemical")&&!t.includes("chemical")&&m.push("chemical"),g.includes("hazard")&&!t.includes("hazard")&&m.push("hazard"),g.includes("emergency")&&!t.includes("emergency")&&m.push("emergency"),g.includes("ppe")&&!t.includes("ppe")&&m.push("ppe"),g.includes("equipment")&&!t.includes("equipment")&&m.push("equipment"),g.includes("maintenance")&&!t.includes("maintenance")&&m.push("maintenance"),g.includes("cleaning")&&!t.includes("cleaning")&&m.push("cleaning"),g.includes("disposal")&&!t.includes("disposal")&&m.push("disposal"),g.includes("storage")&&!t.includes("storage")&&m.push("storage"),g.includes("transport")&&!t.includes("transport")&&m.push("transport"),g.includes("inspection")&&!t.includes("inspection")&&m.push("inspection"),g.includes("testing")&&!t.includes("testing")&&m.push("testing"),g.includes("calibration")&&!t.includes("calibration")&&m.push("calibration"),g.includes("documentation")&&!t.includes("documentation")&&m.push("documentation"),g.includes("reporting")&&!t.includes("reporting")&&m.push("reporting"),g.includes("incident")&&!t.includes("incident")&&m.push("incident"),g.includes("investigation")&&!t.includes("investigation")&&m.push("investigation"),g.includes("corrective")&&!t.includes("corrective")&&m.push("corrective"),g.includes("preventive")&&!t.includes("preventive")&&m.push("preventive"),g.includes("risk")&&!t.includes("risk")&&m.push("risk"),g.includes("assessment")&&!t.includes("assessment")&&m.push("assessment"),g.includes("monitoring")&&!t.includes("monitoring")&&m.push("monitoring"),g.includes("supply")&&!t.includes("supply")&&m.push("supply"),g.includes("admin")&&!t.includes("admin")&&m.push("admin"),[...new Set(m)].sort()},[s,n,t]);p.useEffect(()=>{if(!d.autoTagging||!o.length)return;const m=Array.from(new Set([...t,...o]));m.length!==t.length&&r(m)},[d.autoTagging,o,t,r]);const a=m=>{const g=m.toLowerCase();return!(["stuff","things","random","important","good","useful","new","updated","recent","document","file","content","info","data","item","stuff","thing","random","misc","other","general","basic","simple","easy"].includes(g)||m.length<2||g==="policy"||g==="procedure"||g==="course")},c=m=>{m&&!t.includes(m)&&a(m)&&r([...t,m])},b=m=>{r(t.filter((g,y)=>y!==m))},j=()=>{const m=i.trim();m&&!t.includes(m)&&(a(m)?(r([...t,m]),l("")):alert('Please use a more specific and meaningful tag. Avoid generic terms like "stuff", "things", or "important".'))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{path:tt,size:1.2,className:"text-blue-600"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Smart Tagging"})]}),t.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:t.map((m,g)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[m,e.jsx("button",{onClick:()=>b(g),className:"ml-1 text-blue-600 hover:text-blue-800 transition-colors",title:"Remove tag",children:e.jsx(x,{path:J,size:.8})})]},g))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i,onChange:m=>l(m.target.value),onKeyPress:m=>{m.key==="Enter"&&j()},placeholder:"Add a new tag...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent text-sm"}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm",children:e.jsx(x,{path:q,size:.8})})]}),o.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{path:st,size:1,className:"text-yellow-500"}),e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Suggested Tags"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.map((m,g)=>e.jsxs("button",{onClick:()=>c(m),className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm hover:bg-yellow-200 transition-colors",children:["+ ",m]},g))}),e.jsx("p",{className:"text-xs text-gray-500",children:"These tags are automatically suggested based on your content. Click to add them."})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-900 mb-2",children:"Tag Guidelines:"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:'• Use specific, descriptive terms (e.g., "chemical-safety" not "stuff")'}),e.jsx("li",{children:'• Avoid generic words like "important", "good", or "new"'}),e.jsx("li",{children:"• Tags should help others find and categorize your content"}),e.jsx("li",{children:"• Use 2-3 words maximum per tag"})]})]})]})};var ja=Object.defineProperty,Na=Object.defineProperties,Ca=Object.getOwnPropertyDescriptors,$t=Object.getOwnPropertySymbols,wa=Object.prototype.hasOwnProperty,Sa=Object.prototype.propertyIsEnumerable,Rt=(t,r,s)=>r in t?ja(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,Ee=(t,r)=>{for(var s in r||(r={}))wa.call(r,s)&&Rt(t,s,r[s]);if($t)for(var s of $t(r))Sa.call(r,s)&&Rt(t,s,r[s]);return t},De=(t,r)=>Na(t,Ca(r));const Pe={COURSES:"courses",POLICIES:"policies",PROCEDURES:"procedures",SDS_SHEETS:"sds_sheets"},Oe={COURSES:"id, title, description, difficulty, estimated_duration",POLICIES:"id, title, description, policy_type",PROCEDURES:"id, title, description, difficulty",SDS_SHEETS:"id, chemical_name, description, hazard_level"},L={COURSE:"course",POLICY:"policy",PROCEDURE:"procedure",SDS:"sds",ALL:"all"},we={[L.ALL]:"All Types",[L.COURSE]:"Courses",[L.POLICY]:"Policies",[L.PROCEDURE]:"Procedures",[L.SDS]:"SDS Sheets"},fe={[L.COURSE]:"bg-green-100 text-green-800",[L.POLICY]:"bg-blue-100 text-blue-800",[L.PROCEDURE]:"bg-purple-100 text-purple-800",[L.SDS]:"bg-orange-100 text-orange-800"},_a=[{id:1,name:"Foundation",description:"Essential concepts and basics",items:[],order:1},{id:2,name:"Core Learning",description:"Main concepts and practical applications",items:[],order:2},{id:3,name:"Advanced Topics",description:"Complex scenarios and best practices",items:[],order:3}],R={TITLE:"Learning Pathway Builder",AVAILABLE_CONTENT_TITLE:"Available Content",AVAILABLE_CONTENT_DESCRIPTION:"Select content to add to your pathway",PATHWAY_TITLE:"Your Learning Pathway",PATHWAY_DESCRIPTION:"Organized into logical sections for better learning flow",SEARCH_PLACEHOLDER:"Search content...",ADD_BUTTON:"Add",ADD_SECTION_BUTTON:"Add Section",SMART_ORGANIZE_BUTTON:"Smart Organize",ORGANIZING_BUTTON:"Organizing...",NO_ITEMS_MESSAGE:"No items in your pathway yet",NO_ITEMS_INSTRUCTION:"Select content from the left panel to get started",NO_ITEMS_IN_SECTION:"No items in this section",ADD_CONTENT_INSTRUCTION:"Add content from the left panel",NO_CONTENT_FOUND:"No content found matching your criteria",NO_CONTENT_AVAILABLE:"No content available",LOADING_MESSAGE:"Loading available content...",ADD_SECTION_MODAL_TITLE:"Add New Section",SECTION_NAME_LABEL:"Section Name",SECTION_NAME_PLACEHOLDER:"Enter section name...",CANCEL_BUTTON:"Cancel",ADD_SECTION_CONFIRM:"Add Section",SMART_ORGANIZE_MODAL_TITLE:"Smart Organize",SMART_ORGANIZE_DESCRIPTION:"This will reorganize your pathway content automatically using AI. Your current organization will be replaced with an optimized structure.",SMART_ORGANIZE_CONFIRM:"Do you want to continue?",CONTINUE_BUTTON:"Continue",EDIT_SECTION_PROMPT:"Edit section name:"},Ea={SMART_ORGANIZE_DELAY:2e3},Je={CONTENT_TYPE_FILTER:"all",NEW_SECTION_DESCRIPTION:"",EMPTY_ITEMS_ARRAY:[]},re={DIFFICULTY_BADGE:"bg-gray-100 text-gray-800",SECTION_NUMBER:"bg-blue-600 text-white",ITEM_NUMBER:"bg-blue-500 text-white",MOVE_UP:"↑",MOVE_DOWN:"↓",EDIT:"✏️"},Te={COURSE:t=>{var r;return De(Ee({},t),{id:t.id,title:t.title,description:(r=t.data)==null?void 0:r.description,difficulty:t.difficulty,estimated_duration:t.estimated_duration,type:L.COURSE,displayTitle:t.title})},POLICY:t=>{var r;return De(Ee({},t),{id:t.id,title:t.title,description:(r=t.data)==null?void 0:r.description,policy_type:t.policy_type,type:L.POLICY,displayTitle:t.title})},PROCEDURE:t=>{var r;return De(Ee({},t),{id:t.id,title:t.title,description:(r=t.data)==null?void 0:r.description,difficulty:t.difficulty,type:L.PROCEDURE,displayTitle:t.title})},SDS:t=>{var r;return De(Ee({},t),{id:t.id,title:t.chemical_name||t.title,chemical_name:t.chemical_name,description:(r=t.data)==null?void 0:r.description,hazard_level:t.hazard_level,type:L.SDS,displayTitle:t.chemical_name||t.title})}};var Da=Object.defineProperty,Pa=Object.defineProperties,Oa=Object.getOwnPropertyDescriptors,Lt=Object.getOwnPropertySymbols,Ta=Object.prototype.hasOwnProperty,ka=Object.prototype.propertyIsEnumerable,Mt=(t,r,s)=>r in t?Da(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,Aa=(t,r)=>{for(var s in r||(r={}))Ta.call(r,s)&&Mt(t,s,r[s]);if(Lt)for(var s of Lt(r))ka.call(r,s)&&Mt(t,s,r[s]);return t},Ia=(t,r)=>Pa(t,Oa(r));const $a=({pathwaySections:t,selectedPathwayItems:r,onPathwayChange:s,movePathwayItem:n,removeFromPathway:i,removeSection:l})=>e.jsx(e.Fragment,{children:t.length===0&&r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(x,{path:Z,size:3,className:"mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-sm",children:R.NO_ITEMS_MESSAGE}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:R.NO_ITEMS_INSTRUCTION})]}):t.length>0?e.jsx("div",{className:"space-y-6",children:t.map(d=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`inline-flex items-center justify-center w-6 h-6 ${re.SECTION_NUMBER} text-xs font-medium rounded-full`,children:d.order}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900",children:d.name}),d.description&&e.jsx("p",{className:"text-xs text-gray-600",children:d.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{const o=prompt(R.EDIT_SECTION_PROMPT,d.name);if(o!=null&&o.trim()){const a=t.map(c=>c.id===d.id?Ia(Aa({},c),{name:o.trim()}):c);s(a,r)}},className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:"Edit section",children:re.EDIT}),e.jsx("button",{onClick:()=>l(d.id),className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Remove section",children:e.jsx(x,{path:J,size:.8})})]})]})}),e.jsx("div",{className:"p-3 space-y-2",children:d.items.length===0?e.jsxs("div",{className:"text-center py-4 text-gray-400",children:[e.jsx("p",{className:"text-sm",children:R.NO_ITEMS_IN_SECTION}),e.jsx("p",{className:"text-xs",children:R.ADD_CONTENT_INSTRUCTION})]}):r.filter(o=>d.items.includes(o.pathwayId)).map((o,a)=>e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:`inline-flex items-center justify-center w-5 h-5 ${re.ITEM_NUMBER} text-xs font-medium rounded-full`,children:a+1}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${fe[o.type]||fe[L.SDS]}`,children:o.type.charAt(0).toUpperCase()+o.type.slice(1)})]}),e.jsx("h6",{className:"font-medium text-gray-900",children:o.displayTitle}),o.data&&typeof o.data=="object"&&"description"in o.data&&typeof o.data.description=="string"&&e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:o.data.description})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-3",children:[e.jsx("button",{onClick:()=>n(o.pathwayId,"up"),disabled:a===0,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:re.MOVE_UP}),e.jsx("button",{onClick:()=>n(o.pathwayId,"down"),disabled:a===d.items.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:re.MOVE_DOWN}),e.jsx("button",{onClick:()=>i(o.pathwayId),className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Remove from pathway",children:e.jsx(x,{path:J,size:.8})})]})]})},o.pathwayId))})]},d.id))}):e.jsx("div",{className:"space-y-3",children:r.map((d,o)=>e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:`inline-flex items-center justify-center w-6 h-6 ${re.SECTION_NUMBER} text-xs font-medium rounded-full`,children:d.order}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${fe[d.type]||fe[L.SDS]}`,children:d.type.charAt(0).toUpperCase()+d.type.slice(1)})]}),e.jsx("h6",{className:"font-medium text-gray-900",children:d.displayTitle}),d.data&&typeof d.data=="object"&&"description"in d.data&&typeof d.data.description=="string"&&e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:d.data.description})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-3",children:[e.jsx("button",{onClick:()=>n(d.pathwayId,"up"),disabled:o===0,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:re.MOVE_UP}),e.jsx("button",{onClick:()=>n(d.pathwayId,"down"),disabled:o===r.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:re.MOVE_DOWN}),e.jsx("button",{onClick:()=>i(d.pathwayId),className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Remove from pathway",children:e.jsx(x,{path:J,size:.8})})]})]})},d.pathwayId))})}),Ra=({addSection:t,organizePathwaySmartly:r,selectedPathwayItemsLength:s,isOrganizing:n})=>e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:R.PATHWAY_TITLE}),e.jsx("p",{className:"text-sm text-gray-600",children:R.PATHWAY_DESCRIPTION})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:t,className:"inline-flex items-center px-3 py-1.5 border border-blue-300 text-xs font-medium rounded-md text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx(x,{path:q,size:.8,className:"mr-1"}),R.ADD_SECTION_BUTTON]}),e.jsxs("button",{onClick:r,disabled:s===0||n,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx(x,{path:Q,size:.8,className:"mr-1"}),n?R.ORGANIZING_BUTTON:R.SMART_ORGANIZE_BUTTON]})]})]})});var La=Object.defineProperty,Ma=Object.defineProperties,za=Object.getOwnPropertyDescriptors,zt=Object.getOwnPropertySymbols,Ua=Object.prototype.hasOwnProperty,Fa=Object.prototype.propertyIsEnumerable,Ut=(t,r,s)=>r in t?La(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,he=(t,r)=>{for(var s in r||(r={}))Ua.call(r,s)&&Ut(t,s,r[s]);if(zt)for(var s of zt(r))Fa.call(r,s)&&Ut(t,s,r[s]);return t},ge=(t,r)=>Ma(t,za(r)),qa=(t,r,s)=>new Promise((n,i)=>{var l=a=>{try{o(s.next(a))}catch(c){i(c)}},d=a=>{try{o(s.throw(a))}catch(c){i(c)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((s=s.apply(t,r)).next())});const Ba=({contentType:t,onPathwayChange:r,pathwaySections:s,selectedPathwayItems:n})=>{const[i,l]=p.useState([]),[d,o]=p.useState(!1),[a,c]=p.useState(""),[b,j]=p.useState(Je.CONTENT_TYPE_FILTER),[m,g]=p.useState(!1),[y,v]=p.useState(!1),[N,h]=p.useState(!1),[f,_]=p.useState(""),C=p.useCallback(()=>qa(null,null,function*(){if(t.id==="pathway"){o(!0);try{const[S,z,k,I]=yield Promise.all([B.from(Pe.COURSES).select(Oe.COURSES).eq("is_published",!0),B.from(Pe.POLICIES).select(Oe.POLICIES).eq("is_published",!0),B.from(Pe.PROCEDURES).select(Oe.PROCEDURES).eq("is_published",!0),B.from(Pe.SDS_SHEETS).select(Oe.SDS_SHEETS).eq("is_published",!0)]);if(!S.data||!z.data||!k.data||!I.data){l([]);return}const K=[...(S.data||[]).map(G=>Te.COURSE(G)),...(z.data||[]).map(G=>Te.POLICY(G)),...(k.data||[]).map(G=>Te.PROCEDURE(G)),...(I.data||[]).map(G=>Te.SDS(G))];l(K)}catch(S){console.error("Error fetching available content:",S)}finally{o(!1)}}}),[t.id]);p.useEffect(()=>{C()},[C]);const u=()=>i.filter(S=>{const z=S.displayTitle.toLowerCase().includes(a.toLowerCase())||S.data&&typeof S.data=="object"&&"description"in S.data&&typeof S.data.description=="string"&&S.data.description||"".toLowerCase().includes(a.toLowerCase()),k=b===L.ALL||S.type===b;return z&&k}),w=S=>{if(s.length>0){const z=s[0],k=ge(he({},S),{pathwayId:Date.now()+Math.random(),order:(z.items.length||0)+1,sectionId:z.id}),I=[...n,k],K=s.map(G=>G.id===z.id?ge(he({},G),{items:[...G.items,k.pathwayId]}):G);r(K,I)}else{const z=ge(he({},S),{pathwayId:Date.now()+Math.random(),order:n.length+1});r(s,[...n,z])}},D=S=>{const z=n.filter(I=>I.pathwayId!==S),k=s.map(I=>ge(he({},I),{items:I.items.filter(K=>K!==S)}));r(k,z)},E=(S,z)=>{const k=[...n],I=k.findIndex(K=>K.pathwayId===S);z==="up"&&I>0?[k[I],k[I-1]]=[k[I-1],k[I]]:z==="down"&&I<k.length-1&&([k[I],k[I+1]]=[k[I+1],k[I]]),k.forEach((K,G)=>{K.order=G+1}),r(s,k)},T=()=>{v(!0)},M=()=>{if(f.trim()){const S={id:Date.now(),name:f.trim(),description:Je.NEW_SECTION_DESCRIPTION,items:[...Je.EMPTY_ITEMS_ARRAY],order:s.length+1};r([...s,S],n),_(""),v(!1)}},U=S=>{const z=s.filter(k=>k.id!==S);r(z,n)},te=()=>{h(!0)},Y=()=>{g(!0),setTimeout(()=>{const S=_a.map(k=>ge(he({},k),{items:[...k.items]})),z=n.map((k,I)=>{const K=Math.floor(I/n.length*3);return ge(he({},k),{sectionId:S[K].id,order:I+1})});S.forEach(k=>{k.items=z.filter(I=>I.sectionId===k.id).map(I=>I.pathwayId)}),r(S,z),g(!1),h(!1)},Ea.SMART_ORGANIZE_DELAY)};return t.id!=="pathway"?null:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{path:Z,size:1.2,className:"text-blue-600"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:R.TITLE})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:R.AVAILABLE_CONTENT_TITLE}),e.jsx("p",{className:"text-sm text-gray-600",children:R.AVAILABLE_CONTENT_DESCRIPTION})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",placeholder:R.SEARCH_PLACEHOLDER,value:a,onChange:S=>c(S.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("select",{value:b,onChange:S=>j(S.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:L.ALL,children:we[L.ALL]}),e.jsx("option",{value:L.COURSE,children:we[L.COURSE]}),e.jsx("option",{value:L.POLICY,children:we[L.POLICY]}),e.jsx("option",{value:L.PROCEDURE,children:we[L.PROCEDURE]}),e.jsx("option",{value:L.SDS,children:we[L.SDS]})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:d?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:R.LOADING_MESSAGE})]}):u().length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:a||b!==L.ALL?R.NO_CONTENT_FOUND:R.NO_CONTENT_AVAILABLE}):e.jsx("div",{className:"divide-y divide-gray-200",children:u().map(S=>e.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${fe[S.type]||fe[L.SDS]}`,children:S.type.charAt(0).toUpperCase()+S.type.slice(1)}),S.difficulty&&e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${re.DIFFICULTY_BADGE}`,children:S.difficulty})]}),e.jsx("h5",{className:"font-medium text-gray-900 truncate",children:S.displayTitle}),S.data&&typeof S.data=="object"&&"description"in S.data&&typeof S.data.description=="string"&&e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:S.data.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[S.estimated_duration&&e.jsxs("span",{children:["⏱️ ",S.estimated_duration," min"]}),S.hazard_level&&e.jsxs("span",{children:["⚠️ Level ",S.hazard_level]})]})]}),e.jsxs("button",{onClick:()=>w(S),className:"ml-3 flex-shrink-0 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(x,{path:q,size:.8,className:"mr-1"}),R.ADD_BUTTON]})]})},`${S.type}-${S.id}`))})})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsx(Ra,{addSection:T,organizePathwaySmartly:te,selectedPathwayItemsLength:n.length,isOrganizing:m}),e.jsx("div",{className:"p-4",children:e.jsx($a,{pathwaySections:s,selectedPathwayItems:n,onPathwayChange:r,movePathwayItem:E,removeFromPathway:D,removeSection:U})})]})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg shadow-lg max-w-md w-full mx-4",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:R.ADD_SECTION_MODAL_TITLE})}),e.jsxs("div",{className:"p-6",children:[e.jsx("label",{htmlFor:"section-name-input",className:"block text-sm font-medium text-gray-700 mb-2",children:R.SECTION_NAME_LABEL}),e.jsx("input",{id:"section-name-input",type:"text",value:f,onChange:S=>_(S.target.value),placeholder:R.SECTION_NAME_PLACEHOLDER,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",onKeyPress:S=>{S.key==="Enter"&&M()}})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{v(!1),_("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:R.CANCEL_BUTTON}),e.jsx("button",{onClick:M,disabled:!f.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] border border-transparent rounded-md hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4] disabled:opacity-50 disabled:cursor-not-allowed",children:R.ADD_SECTION_CONFIRM})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg shadow-lg max-w-md w-full mx-4",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:R.SMART_ORGANIZE_MODAL_TITLE})}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-sm text-gray-600",children:R.SMART_ORGANIZE_DESCRIPTION}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:R.SMART_ORGANIZE_CONFIRM})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:R.CANCEL_BUTTON}),e.jsx("button",{onClick:Y,className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] border border-transparent rounded-md hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:R.CONTINUE_BUTTON})]})]})})]})};var ie=(t,r,s)=>new Promise((n,i)=>{var l=a=>{try{o(s.next(a))}catch(c){i(c)}},d=a=>{try{o(s.throw(a))}catch(c){i(c)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((s=s.apply(t,r)).next())});const Ga=({contentType:t,draftId:r})=>{const{state:s}=ee(),{setActiveTab:n}=de(),{activeTab:i}=s,{currentUser:l}=Jt(),{settings:d}=zs(),[o,a]=p.useState(""),[c,b]=p.useState(""),[j,m]=p.useState(""),[g,y]=p.useState(""),[v,N]=p.useState(""),[h,f]=p.useState(!1),[_,C]=p.useState(!1),[u,w]=p.useState(null),[D,E]=p.useState(!1),[T,M]=p.useState(!1),[U,te]=p.useState(!1),[Y,S]=p.useState([]),[z,k]=p.useState([]),[I,K]=p.useState([]),G=p.useCallback(()=>ie(null,null,function*(){if(!(!(l!=null&&l.facility_id)||!o.trim()))try{const O={title:`Annual Review Required: ${o}`,description:`This ${t.id==="procedure"?"procedure":"policy"} "${o}" is marked for annual review and updates. Please review the content, verify accuracy, and update as needed to maintain compliance and best practices.`,category:"compliance",difficulty:"medium",estimatedDuration:45,impact:"high",effort:"medium",points:150,aiReasoning:`${t.id==="procedure"?"Procedure":"Policy"} "${o}" requires annual review to ensure content accuracy, regulatory compliance, and alignment with current best practices.`,prerequisites:["Access to content","Understanding of current regulations"],expectedOutcomes:["Content reviewed and updated","Regulatory compliance verified","Best practices alignment confirmed","Documentation updated with review date"],complianceDeadline:new Date(Date.now()+31536e6).toISOString(),facilityId:l.facility_id,assignedTo:l.id,status:"pending",priority:"high",tags:["compliance","annual-review","regulatory"]},{data:A,error:F}=yield B.from("ai_challenge_completions").insert(O).select().single();if(F){console.error("Error creating annual review challenge:",F);return}console.log("Annual review challenge created:",A)}catch(O){console.error("Error creating annual review challenge:",O)}}),[l==null?void 0:l.facility_id,l==null?void 0:l.id,o,t.id]);p.useEffect(()=>{_&&o.trim()&&G()},[_,o,G]);const as=O=>ie(null,null,function*(){E(!0);try{const A=l==null?void 0:l.facility_id;if(!A)throw new Error("No facility ID available. Please ensure you are assigned to a facility.");const F=`sds-sheets/${Date.now()}-${O.name}`,{error:H}=yield B.storage.from("documents").upload(F,O);if(H)throw new Error(`Upload failed: ${H.message}`);const{data:{publicUrl:Be}}=B.storage.from("documents").getPublicUrl(F),os={facility_id:A,title:o||`SDS Sheet - ${g||"Unknown Chemical"}`,description:c,content:j,chemical_name:g,cas_number:v,pdf_file_path:Be,pdf_file_size:O.size,pdf_uploaded_at:new Date().toISOString(),status:"draft",priority:"medium",risk_level:"medium"},{error:ct}=yield B.from("sds_sheets").insert(os).select().single();if(ct)throw new Error(`Database save failed: ${ct.message}`);alert("PDF uploaded and saved successfully!")}catch(A){console.error("Upload failed:",A),alert(`Upload failed: ${A instanceof Error?A.message:"Unknown error"}`)}finally{E(!1)}}),ns=O=>{const A=document.getElementById("content-main-tab");if(A){const F=A.selectionStart,H=j.substring(0,F)+O+j.substring(F);m(H),te(!1),setTimeout(()=>{A.focus(),A.setSelectionRange(F+O.length,F+O.length)},0)}},is=O=>{m(A=>A+(A?" ":"")+O)},ls=(O,A)=>{K(O),k(A)},nt=p.useCallback((O=!1)=>ie(null,null,function*(){if(!(l!=null&&l.id)||!(l!=null&&l.facility_id))throw new Error("User not authenticated");const A={title:o||"Untitled Policy",description:c||"",content:j||"",tags:Y||[],author_id:l.id,facility_id:l.facility_id,content_type:"policy",status:"draft",published_at:null,archived_at:null,department:"General",domain:"General",policy_number:`POL-${Date.now()}`,version:"1.0",estimated_read_time_minutes:Math.ceil(((j==null?void 0:j.length)||0)/200),points:5},{data:F,error:H}=yield B.from("policies").upsert(A,{onConflict:"id",ignoreDuplicates:!1}).select().single();if(H)throw new Error(`Failed to save policy: ${H.message}`);yield Ve({user_id:l.id,user_name:l.name||"Unknown User",user_email:l.email||"",facility_id:l.facility_id,activity_type:"draft_saved",content_type:"policy",content_id:F.id,content_title:A.title,content_description:A.description,metadata:{auto_saved:!1,version:A.version,department:A.department,tags:A.tags}})}),[l,o,c,j,Y]),qe=p.useCallback(()=>ie(null,null,function*(){if(!(l!=null&&l.id)||!(l!=null&&l.facility_id))throw new Error("User not authenticated");const O={title:o||"Untitled Procedure",description:c||"",content:j||"",tags:Y||[],author_id:l.id,facility_id:l.facility_id,content_type:"procedure",published_at:null,archived_at:null,department:"General",domain:"General",difficulty_level:"medium",safety_level:"medium",estimated_duration_minutes:Math.ceil(((j==null?void 0:j.length)||0)/100),points:5},{data:A,error:F}=yield B.from("procedures").upsert(O,{onConflict:"id",ignoreDuplicates:!1}).select().single();if(F)throw new Error(`Failed to save procedure: ${F.message}`);yield Ve({user_id:l.id,user_name:l.name||"Unknown User",user_email:l.email||"",facility_id:l.facility_id,activity_type:"draft_saved",content_type:"procedure",content_id:A.id,content_title:O.title,content_description:O.description,metadata:{auto_saved:!1,department:O.department,tags:O.tags}})}),[l,o,c,j,Y]),it=p.useCallback(()=>ie(null,null,function*(){if(!(l!=null&&l.id)||!(l!=null&&l.facility_id))throw new Error("User not authenticated");const O={title:o||"Untitled Learning Pathway",description:c||"",content:JSON.stringify({sections:I,items:z}),author_id:l.id,facility_id:l.facility_id,content_type:"learning_pathway",published_at:null,archived_at:null,department:"General",estimated_duration_minutes:z.reduce((H,Be)=>H+(Be.estimated_duration||0),0),points:z.length*2,is_active:!0,is_repeat:!1},{data:A,error:F}=yield B.from("courses").upsert(O,{onConflict:"id",ignoreDuplicates:!1}).select().single();if(F)throw new Error(`Failed to save learning pathway: ${F.message}`);yield Ve({user_id:l.id,user_name:l.name||"Unknown User",user_email:l.email||"",facility_id:l.facility_id,activity_type:"draft_saved",content_type:"learning_pathway",content_id:A.id,content_title:O.title,content_description:O.description,metadata:{auto_saved:!1,department:O.department,sections_count:I.length,items_count:z.length}})}),[l,o,c,I,z]),lt=p.useCallback(()=>ie(null,null,function*(){try{switch(t.id){case"policy":yield nt();break;case"procedure":yield qe();break;case"pathway":yield it();break;default:yield qe()}}catch(O){throw console.error("Auto-save failed:",O),O}}),[t.id,nt,qe,it]),ot=p.useCallback(()=>lt,[lt]),W=ma({enabled:d.autoSave,debounceDelay:2e3,saveInterval:3e4,onSave:ot(),onError:O=>{console.error("Auto-save failed:",O)},onSuccess:()=>{console.log("Auto-save successful")}});return p.useEffect(()=>{r&&ie(null,null,function*(){try{const A=t.id==="course"?"courses":t.id==="policy"?"policies":t.id==="procedure"?"procedures":t.id==="pathway"?"learning_pathways":"courses",F=yield ks(r,A);if(F&&(a(F.title||""),b(F.description||""),m(F.content||""),S(F.tags||[]),t.id==="pathway"&&F.content))try{const H=JSON.parse(F.content);H.sections&&K(H.sections),H.items&&k(H.items)}catch(H){console.error("Failed to parse pathway data:",H)}}catch(A){console.error("Failed to load draft:",A)}})},[r,t.id]),p.useEffect(()=>{(o||c||j)&&W.triggerSave()},[o,c,j,W]),e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:["content","pathway","ai"].map(O=>e.jsx("button",{onClick:()=>n(O),className:`py-2 px-1 border-b-2 font-medium text-sm capitalize ${i===O?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:O},O))})}),i==="content"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(ha,{contentType:t,title:o,description:c,content:j,chemicalName:g,casNumber:v,isRequired:h,reviewAnnually:_,onTitleChange:a,onDescriptionChange:b,onContentChange:m,onChemicalNameChange:y,onCasNumberChange:N,onRequiredChange:f,onReviewAnnuallyChange:C}),t.id==="sds"&&e.jsx(fa,{pdfFile:u,onFileSelect:w,onUpload:as,isUploading:D,facilityId:l==null?void 0:l.facility_id}),e.jsx(ba,{onTranscriptUpdate:is,isRecording:T,onRecordingChange:M}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{path:Xt,size:1.2,className:"text-blue-600"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Table Builder"})]}),e.jsxs("button",{onClick:()=>te(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(x,{path:q,size:.8}),"Create Table"]})]}),e.jsx(va,{tags:Y,onTagsChange:S,content:j,title:o})]}),i==="pathway"&&e.jsx(Ba,{contentType:t,onPathwayChange:ls,pathwaySections:I,selectedPathwayItems:z}),i==="ai"&&e.jsx("div",{className:"space-y-4",children:t.id==="sms"?e.jsx(xa,{}):e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(x,{path:Q,size:1.2,className:"text-blue-600"}),e.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"AI Assistant"})]}),e.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Get AI-powered suggestions to improve your content, identify gaps, and enhance learning outcomes."}),e.jsxs("button",{className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(x,{path:Q,size:1,className:"mr-2"}),"Get AI Suggestions"]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:[e.jsx(x,{path:$e,size:1,className:"mr-2"}),"Preview"]}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",onClick:()=>ie(null,null,function*(){d.autoSave?yield W.forceSave():yield ot()()}),children:[e.jsx(x,{path:at,size:1,className:"mr-2"}),t.id==="pathway"?"Save Pathway":"Save Draft"]})]}),e.jsxs("button",{className:"inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(x,{path:ve,size:1,className:"mr-2"}),t.id==="pathway"?"Publish Pathway":"Publish to Library"]})]}),d.autoSave&&e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 px-4 py-2 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[W.status==="saving"&&e.jsxs(e.Fragment,{children:[e.jsx(x,{path:Le,size:.8,className:"animate-spin text-blue-500"}),e.jsx("span",{className:"text-sm text-blue-600",children:"Saving..."})]}),W.status==="saved"&&e.jsxs(e.Fragment,{children:[e.jsx(x,{path:be,size:.8,className:"text-green-500"}),e.jsxs("span",{className:"text-sm text-green-600",children:["Saved ",W.lastSaved?`at ${W.lastSaved.toLocaleTimeString()}`:""]})]}),W.status==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(x,{path:ae,size:.8,className:"text-red-500"}),e.jsxs("span",{className:"text-sm text-red-600",children:["Save failed: ",W.error]}),e.jsx("button",{onClick:W.clearError,className:"text-xs text-red-500 hover:text-red-700 underline",children:"Dismiss"})]}),W.status==="idle"&&W.isDirty&&e.jsxs(e.Fragment,{children:[e.jsx(x,{path:at,size:.8,className:"text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Unsaved changes"})]})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Auto-save ",d.autoSave?"enabled":"disabled"]})]}),U&&e.jsx(ya,{onInsertTable:ns,onClose:()=>te(!1)})]})};var Ft=(t,r,s)=>new Promise((n,i)=>{var l=a=>{try{o(s.next(a))}catch(c){i(c)}},d=a=>{try{o(s.throw(a))}catch(c){i(c)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((s=s.apply(t,r)).next())});function Va(){const{currentUser:t}=Jt(),[r,s]=p.useState({courses:[],policies:[],procedures:[],learning_pathways:[]}),[n,i]=p.useState(!1),[l,d]=p.useState(null),o=p.useCallback(()=>Ft(null,null,function*(){if(!(t!=null&&t.id)||!(t!=null&&t.facility_id)){s({courses:[],policies:[],procedures:[],learning_pathways:[]});return}i(!0),d(null);try{const b=yield As(t.id,t.facility_id);s(b)}catch(b){const j=b instanceof Error?b.message:"Failed to load drafts";d(j),console.error("Error loading drafts:",b)}finally{i(!1)}}),[t==null?void 0:t.id,t==null?void 0:t.facility_id]),a=p.useCallback(()=>Ft(null,null,function*(){yield o()}),[o]),c=p.useCallback(b=>r[b]||[],[r]);return p.useEffect(()=>{o()},[o]),{drafts:r,loading:n,error:l,refreshDrafts:a,getDraftsByType:c}}const Ha=({drafts:t,contentType:r,onResumeDraft:s,onDeleteDraft:n,onPublishDraft:i})=>t.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(x,{path:Ae,size:2,className:"mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"No drafts yet"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Start creating ",r.toLowerCase()," to see your drafts here"]})]}):e.jsx("div",{className:"space-y-3",children:t.map(l=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:border-[#4ECDC4] hover:shadow-sm transition-all duration-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(x,{path:Ae,size:.8,className:"text-[#4ECDC4]"}),e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:l.title||"Untitled Draft"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Draft"})]}),l.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:l.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(x,{path:le,size:.6}),e.jsxs("span",{children:["Updated ",Is(l.updated_at)]})]}),l.content_type&&e.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-gray-600",children:l.content_type})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsxs("button",{onClick:()=>s(l),className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-[#4ECDC4] bg-[#4ECDC4]/10 rounded-md hover:bg-[#4ECDC4]/20 transition-colors duration-200",children:[e.jsx(x,{path:Ae,size:.6}),"Resume"]}),e.jsxs("button",{onClick:()=>i(l.id),className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-green-600 bg-green-50 rounded-md hover:bg-green-100 transition-colors duration-200",children:[e.jsx(x,{path:ve,size:.6}),"Publish"]}),e.jsxs("button",{onClick:()=>n(l.id),className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-red-600 bg-red-50 rounded-md hover:bg-red-100 transition-colors duration-200",children:[e.jsx(x,{path:Ie,size:.6}),"Delete"]})]})]})},l.id))});var qt=(t,r,s)=>new Promise((n,i)=>{var l=a=>{try{o(s.next(a))}catch(c){i(c)}},d=a=>{try{o(s.throw(a))}catch(c){i(c)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((s=s.apply(t,r)).next())});const Bt=({contentType:t,children:r})=>{const{loading:s,error:n,refreshDrafts:i,getDraftsByType:l}=Va(),[d,o]=p.useState(!1),[a,c]=p.useState(!0),[b,j]=p.useState(void 0),m=t.id==="course"?"courses":t.id==="policy"?"policies":t.id==="procedure"?"procedures":t.id==="pathway"?"learning_pathways":"courses",g=l(m),y=f=>{j(f.id),c(!0),o(!1)},v=()=>{j(void 0),c(!0),o(!1)},N=f=>qt(null,null,function*(){window.confirm("Are you sure you want to delete this draft? This action cannot be undone.")&&((yield $s(f,m))?yield i():alert("Failed to delete draft. Please try again."))}),h=f=>qt(null,null,function*(){window.confirm("Are you sure you want to publish this draft? It will be visible to all users.")&&((yield Rs(f,m))?(yield i(),alert("Draft published successfully!")):alert("Failed to publish draft. Please try again."))});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(x,{path:t.icon,size:1.2,className:"text-[#4ECDC4]"}),t.label]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description})]})}),g.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("button",{onClick:()=>o(!d),className:"flex items-center justify-between w-full text-left",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{path:Ae,size:1,className:"text-[#4ECDC4]"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["My Drafts (",g.length,")"]})]}),e.jsx(x,{path:d?oe:Re,size:1,className:"text-gray-400"})]}),d&&e.jsx("div",{className:"mt-4",children:e.jsx(Ha,{drafts:g,contentType:t.label,onResumeDraft:y,onDeleteDraft:N,onPublishDraft:h})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsxs("button",{onClick:v,className:"flex items-center justify-between w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{path:q,size:1,className:"text-[#4ECDC4]"}),e.jsx("span",{className:"font-medium text-gray-900",children:b?"Resuming Draft":`Create New ${t.label}`})]}),e.jsx(x,{path:a?oe:Re,size:1,className:"text-gray-400"})]}),a&&e.jsx("div",{className:"border-t border-gray-200 p-4",children:r(b)})]}),n&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-red-600",children:["Error loading drafts: ",n]}),e.jsx("button",{onClick:i,className:"mt-2 text-sm text-red-600 hover:text-red-800 underline",children:"Try again"})]}),s&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#4ECDC4]"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Loading drafts..."})]})})]})},Ya=p.memo(({title:t,description:r,content:s,onTitleChange:n,onDescriptionChange:i,onContentChange:l})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content-title-tab",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx("input",{id:"content-title-tab",type:"text",value:t,onChange:d=>n(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter content title..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content-description-tab",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{id:"content-description-tab",rows:2,value:r,onChange:d=>i(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter content description..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content-main-tab",className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),e.jsx("textarea",{id:"content-main-tab",rows:12,value:s,onChange:d=>l(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter your content here..."})]})]}));Ya.displayName="CommonEditorFields";const Ka=p.memo(({onSave:t,onPublish:r,onAIAssistant:s,isSaving:n=!1,isPublishing:i=!1,canPublish:l=!0})=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:t,disabled:n,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4] disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(x,{path:at,size:1,className:"mr-2"}),n?"Saving...":"Save"]}),l&&e.jsxs("button",{onClick:r,disabled:i,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(x,{path:ve,size:1,className:"mr-2"}),i?"Publishing...":"Publish"]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("button",{onClick:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:[e.jsx(x,{path:Q,size:1,className:"mr-2"}),"AI Assistant"]})})]}));Ka.displayName="ContentToolbar";const Qa=p.memo(({fontFamily:t,fontSize:r,textColor:s,onFontFamilyChange:n,onFontSizeChange:i,onTextColorChange:l,onReset:d,onBold:o,onItalic:a,onHeading2:c,onHeading3:b,onBulletList:j,onNumberedList:m,onAddNote:g,onAddWarning:y,onAddCheck:v,onInsertLink:N,onShowTableBuilder:h,onAISuggestions:f})=>e.jsxs("div",{className:"bg-gray-50 border-b border-gray-300 p-2 flex flex-wrap items-center gap-1",children:[e.jsxs("select",{value:t,onChange:_=>n(_.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",title:"Font Family",children:[e.jsxs("optgroup",{label:"Modern Sans-Serif",children:[e.jsx("option",{value:"Inter",children:"Inter - Clean & Modern"}),e.jsx("option",{value:"Roboto",children:"Roboto - Google's Design Font"}),e.jsx("option",{value:"Open Sans",children:"Open Sans - Professional & Readable"}),e.jsx("option",{value:"Lato",children:"Lato - Friendly & Approachable"}),e.jsx("option",{value:"Nunito",children:"Nunito - Rounded & Modern"})]}),e.jsxs("optgroup",{label:"Serif & Display",children:[e.jsx("option",{value:"Merriweather",children:"Merriweather - Elegant Serif"}),e.jsx("option",{value:"Playfair Display",children:"Playfair Display - Classic Serif"}),e.jsx("option",{value:"Georgia",children:"Georgia - Web-Safe Serif"})]}),e.jsxs("optgroup",{label:"Specialty",children:[e.jsx("option",{value:"Source Code Pro",children:"Source Code Pro - For Code"}),e.jsx("option",{value:"Courier New",children:"Courier New - Monospace"})]})]}),e.jsxs("select",{value:r,onChange:_=>i(_.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",title:"Font Size",children:[e.jsx("option",{value:"text-xs",children:"Small (12px)"}),e.jsx("option",{value:"text-sm",children:"Regular (14px)"}),e.jsx("option",{value:"text-base",children:"Medium (16px)"}),e.jsx("option",{value:"text-lg",children:"Large (18px)"}),e.jsx("option",{value:"text-xl",children:"Extra Large (20px)"})]}),e.jsxs("select",{value:s,onChange:_=>l(_.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",title:"Text Color",children:[e.jsx("option",{value:"text-gray-900",children:"Default Black"}),e.jsx("option",{value:"text-gray-700",children:"Dark Gray"}),e.jsx("option",{value:"text-blue-600",children:"Professional Blue"}),e.jsx("option",{value:"text-green-600",children:"Success Green"}),e.jsx("option",{value:"text-red-600",children:"Warning Red"}),e.jsx("option",{value:"text-purple-600",children:"Creative Purple"}),e.jsx("option",{value:"text-orange-600",children:"Attention Orange"}),e.jsx("option",{value:"text-indigo-600",children:"Trust Indigo"})]}),e.jsx("button",{onClick:d,className:"px-2 py-1 text-xs text-gray-600 hover:text-gray-800 hover:bg-gray-200 rounded transition-colors",title:"Reset to Default Font",children:"Reset"}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx("button",{onClick:o,className:"p-2 text-sm font-bold text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Bold (Ctrl+B)",children:"B"}),e.jsx("button",{onClick:a,className:"p-2 text-sm italic text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Italic (Ctrl+I)",children:"I"}),e.jsx("button",{onClick:c,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Heading 2",children:"H2"}),e.jsx("button",{onClick:b,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Heading 3",children:"H3"}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx("button",{onClick:j,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Bullet List",children:"•"}),e.jsx("button",{onClick:m,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Numbered List",children:"1."}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx("button",{onClick:g,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Add Note Block",children:"📝"}),e.jsx("button",{onClick:y,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Add Warning Block",children:"⚠️"}),e.jsx("button",{onClick:v,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Add Check Block",children:"✅"}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx("button",{onClick:h,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Create Modern Table",children:"📊"}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx("button",{onClick:N,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Insert Link (Ctrl+K)",children:"🔗"}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx("button",{onClick:f,className:"p-2 text-sm text-purple-700 bg-purple-100 hover:bg-purple-200 rounded transition-colors",title:"Get AI suggestions for improving your text",children:"🤖"}),e.jsx("button",{onClick:()=>{},className:"p-2 text-sm text-blue-700 bg-blue-100 hover:bg-blue-200 rounded transition-colors",title:"Preview lesson content",children:"👁️"})]}));Qa.displayName="TextFormatting";const Wa=p.memo(({pdfFile:t,isRecording:r,onPdfFileChange:s,onPdfUpload:n,onVoiceToggle:i,pdfUploading:l=!1,showVoiceRecording:d=!0,showPdfUpload:o=!0})=>{const a=p.useRef(null),c=p.useCallback(j=>{var m;const g=(m=j.target.files)==null?void 0:m[0];g&&g.type==="application/pdf"&&s(g)},[s]),b=p.useCallback(()=>{s(null),a.current&&(a.current.value="")},[s]);return e.jsxs("div",{className:"space-y-4",children:[o&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pdf-upload",className:"block text-sm font-medium text-gray-700 mb-2",children:"PDF Document"}),e.jsx("input",{id:"pdf-upload",ref:a,type:"file",accept:".pdf",onChange:c,className:"hidden"}),t?e.jsx("div",{className:"border border-gray-300 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(x,{path:ke,size:1.5,className:"text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(t.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:n,disabled:l,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4] disabled:opacity-50",children:l?"Uploading...":"Upload"}),e.jsx("button",{onClick:b,className:"inline-flex items-center p-1.5 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:e.jsx(x,{path:J,size:1})})]})]})}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(x,{path:q,size:1.5,className:"mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Upload PDF Document"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Supports PDF files (max 10MB)"}),e.jsxs("button",{onClick:()=>{var j;return(j=a.current)==null?void 0:j.click()},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:[e.jsx(x,{path:q,size:1,className:"mr-2"}),"Select PDF"]})]})]}),d&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"voice-input",className:"block text-sm font-medium text-gray-700 mb-2",children:"Voice Input"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:i,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md ${r?"text-white bg-red-600 hover:bg-red-700":"text-white bg-[#4ECDC4] hover:bg-[#3db8b0]"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]`,children:[e.jsx(x,{path:r?Zt:rt,size:1,className:"mr-2"}),r?"Stop Recording":"Start Recording"]}),r&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-red-600",children:"Recording..."})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Use voice input to dictate your content. Click the microphone button to start/stop recording."})]})]})});Wa.displayName="MediaUploader";var Za=Object.defineProperty,Gt=Object.getOwnPropertySymbols,Xa=Object.prototype.hasOwnProperty,Ja=Object.prototype.propertyIsEnumerable,Vt=(t,r,s)=>r in t?Za(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,en=(t,r)=>{for(var s in r||(r={}))Xa.call(r,s)&&Vt(t,s,r[s]);if(Gt)for(var s of Gt(r))Ja.call(r,s)&&Vt(t,s,r[s]);return t};const tn=p.lazy(()=>es(()=>import("./PolicyEditor-Pspjnpex.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),sn=p.lazy(()=>es(()=>Promise.resolve().then(()=>ia),void 0)),rn=()=>e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#4ECDC4]"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading editor..."})]}),an=p.memo(({contentType:t,title:r,description:s,content:n,onTitleChange:i,onDescriptionChange:l,onContentChange:d,onSave:o,onPublish:a,onAIAssistant:c})=>{const b=()=>{const j={title:r,description:s,content:n,onTitleChange:i,onDescriptionChange:l,onContentChange:d,onSave:o,onPublish:a,onAIAssistant:c,contentType:t};switch(t.id){case"policy":return e.jsx(tn,en({},j));case"course":return e.jsx(sn,{});default:return e.jsx("div",{className:"text-center p-8 text-gray-500",children:e.jsxs("p",{children:['Content type "',t.label,'" editor not yet implemented']})})}};return e.jsx(p.Suspense,{fallback:e.jsx(rn,{}),children:b()})});an.displayName="LazyContentEditor";const et=[{id:"course",label:"Course",icon:Qt,description:"Interactive learning modules with assessments"},{id:"policy",label:"Policy",icon:Me,description:"Organizational rules and guidelines"},{id:"procedure",label:"Procedure",icon:ws,description:"Step-by-step operational instructions"},{id:"sms",label:"SDS Sheet",icon:ae,description:"Safety data sheets and chemical information"},{id:"pathway",label:"Learning Pathway",icon:Z,description:"Combined learning experiences"}],nn=()=>{const t=cs(),{state:r}=ee(),{setSelectedContentType:s}=de(),{selectedContentType:n}=r,[i,l]=p.useState(!1),d=ds();p.useEffect(()=>{new URLSearchParams(d.search).get("title")&&s("course")},[d.search,s]);const o=()=>{t("/settings")},a=()=>{var c;if(n==="course")return e.jsx(Bt,{contentType:{id:"course",label:"Course",description:"Create interactive learning courses",icon:((c=et.find(j=>j.id==="course"))==null?void 0:c.icon)||""},children:j=>e.jsx(rs,{draftId:j})});const b=et.find(j=>j.id===n);return b?e.jsx(Bt,{contentType:{id:b.id,label:b.label,description:b.description,icon:b.icon},children:j=>e.jsx(Ga,{contentType:b,draftId:j})}):null};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:e.jsx("div",{className:"flex items-center space-x-4 mb-4 md:flex-row md:mb-0",children:e.jsxs("button",{onClick:o,className:"inline-flex items-center gap-2 text-sm text-gray-600 hover:text-[#4ECDC4] transition-colors duration-200",children:[e.jsx(x,{path:Ss,size:.8}),"Back to Settings"]})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-[#5b5b5b] mb-1",children:"Content Builder"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Create and manage content for your library"})]}),e.jsxs("div",{className:"flex bg-white rounded-lg shadow",children:[e.jsx("div",{className:`${i?"w-20":"w-64"} bg-gray-50 border-r border-gray-200 rounded-l-lg transition-all duration-300`,children:e.jsxs("div",{className:`${i?"p-2":"p-4"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:`text-sm font-medium text-gray-900 ${i?"sr-only":""}`,children:"Content Types"}),e.jsx("button",{onClick:()=>l(!i),className:"p-1 text-gray-400 hover:text-gray-600",title:i?"Expand sidebar":"Collapse sidebar",children:e.jsx(x,{path:i?Re:Wt,size:.8})})]}),e.jsx("div",{className:"space-y-2",children:et.map(c=>e.jsx("button",{onClick:()=>s(c.id),className:`w-full text-left p-3 rounded-lg transition-colors ${n===c.id?"bg-[#4ECDC4] text-white":"text-[#5b5b5b] hover:bg-gray-100"}`,title:i?c.label:void 0,children:e.jsxs("div",{className:`flex items-center ${i?"justify-center":"space-x-3"}`,children:[e.jsx(x,{path:c.icon,size:i?1.5:1.2,className:`${n===c.id?"text-white":"text-gray-400"}`}),!i&&e.jsx("span",{className:"font-medium",children:c.label})]})},c.id))})]})}),e.jsx("div",{className:"flex-1 p-6 rounded-r-lg",children:a()})]})]})},ln=()=>e.jsx(Ys,{children:e.jsx(Es,{children:e.jsx(nn,{})})}),fn=Object.freeze(Object.defineProperty({__proto__:null,default:ln},Symbol.toStringTag,{value:"Module"}));export{Ya as C,Wa as M,Qa as T,Qs as a,Zs as b,hn as c,Fe as d,ya as e,Ka as f,fn as i,gn as m,Ks as p,Ws as s,xn as t,ee as u};
