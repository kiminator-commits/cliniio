const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/PolicyEditor-Cm26BBrY.js","assets/js/utils-DSBVV_PW.js","assets/js/vendor-DoALFvsH.js","assets/js/errors-CdY1Sgot.js","assets/js/login-BkZ1x_Cy.js","assets/js/data-73RVSc-N.js","assets/js/ui-DETUEJ2B.js","assets/js/main-hcQsQQ-J.js","assets/css/main-DOX8ETvk.css"])))=>i.map(i=>d[i]);
var cr=Object.defineProperty,dr=Object.defineProperties;var ur=Object.getOwnPropertyDescriptors;var Wt=Object.getOwnPropertySymbols;var mr=Object.prototype.hasOwnProperty,pr=Object.prototype.propertyIsEnumerable;var Qt=Math.pow,Yt=(r,e,s)=>e in r?cr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,y=(r,e)=>{for(var s in e||(e={}))mr.call(e,s)&&Yt(r,s,e[s]);if(Wt)for(var s of Wt(e))pr.call(e,s)&&Yt(r,s,e[s]);return r},R=(r,e)=>dr(r,ur(e));var pe=(r,e,s)=>new Promise((n,a)=>{var i=o=>{try{l(s.next(o))}catch(d){a(d)}},c=o=>{try{l(s.throw(o))}catch(d){a(d)}},l=o=>o.done?n(o.value):Promise.resolve(o.value).then(i,c);l((s=s.apply(r,e)).next())});import{j as t}from"./utils-DSBVV_PW.js";import{a as f,u as hr}from"./vendor-DoALFvsH.js";import{I as h,ay as ae,N as Me,aY as At,b as ce,al as Ms,aA as se,E as Zt,aZ as fr,j as Ye,a4 as J,aF as It,t as xr,a_ as gr,F as ze,V as Ue,a$ as yr,aP as Rt,M as et,c as Ne,z as br,b0 as vr,m as jr,i as bt,b1 as zs,b2 as Us,b3 as Kt,aK as Nr,aB as _r,T as ct,R as wr,o as Cr,aO as Qe,aW as Fs,C as qs,D as Bs,l as Jt,b4 as Sr,b5 as lt,a0 as Er,a2 as $t,a1 as Zs,b6 as Vs,a as Xt,aM as Gs,q as kr,am as Tr}from"./errors-CdY1Sgot.js";import{h as Or,g as Pr}from"./main-hcQsQQ-J.js";import{s as te,u as Dr,_ as Hs}from"./login-BkZ1x_Cy.js";var Ar=Object.defineProperty,Ir=Object.defineProperties,Rr=Object.getOwnPropertyDescriptors,es=Object.getOwnPropertySymbols,$r=Object.prototype.hasOwnProperty,Lr=Object.prototype.propertyIsEnumerable,ts=(r,e,s)=>e in r?Ar(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,$=(r,e)=>{for(var s in e||(e={}))$r.call(e,s)&&ts(r,s,e[s]);if(es)for(var s of es(e))Lr.call(e,s)&&ts(r,s,e[s]);return r},B=(r,e)=>Ir(r,Rr(e));const Mr={contentType:"course",selectedContentType:"course",activeTab:"content",courseStep:1,courseData:{id:"",title:"",description:"",objectives:[""],prerequisites:[""],linkedPrerequisites:[],modules:[],assessments:[],estimatedDuration:0,difficulty:"beginner",tags:[],isPublished:!1,settings:{difficulty:"beginner",estimatedDuration:0,tags:"",allowRetakes:!0,certificateOnCompletion:!0}},policyData:{},procedureData:{},smsData:{},pathwayData:{},textFormattingData:{},tableData:{},mediaData:{},currentContent:void 0,aiSuggestions:[],mediaLibrary:[],isDirty:!1,isSaving:!1,validationErrors:{}};function zr(r,e){switch(e.type){case"SET_SELECTED_CONTENT_TYPE":return B($({},r),{selectedContentType:e.payload});case"SET_ACTIVE_TAB":return B($({},r),{activeTab:e.payload});case"SET_COURSE_STEP":return B($({},r),{courseStep:e.payload});case"SET_COURSE_DATA":return B($({},r),{courseData:e.payload});case"UPDATE_COURSE_FIELD":return B($({},r),{courseData:$($({},r.courseData),e.payload)});case"ADD_MODULE":return B($({},r),{courseData:B($({},r.courseData),{modules:[...r.courseData.modules,e.payload]})});case"ADD_LESSON":return B($({},r),{courseData:B($({},r.courseData),{modules:r.courseData.modules.map(s=>s.id===e.payload.moduleId?B($({},s),{lessons:[...s.lessons,e.payload.lesson]}):s)})});case"ADD_ASSESSMENT":return B($({},r),{courseData:B($({},r.courseData),{assessments:[...r.courseData.assessments,e.payload]})});case"UPDATE_MODULE":return B($({},r),{courseData:B($({},r.courseData),{modules:r.courseData.modules.map(s=>s.id===e.payload.moduleId?$($({},s),e.payload.updates):s)})});case"UPDATE_LESSON":return B($({},r),{courseData:B($({},r.courseData),{modules:r.courseData.modules.map(s=>s.id===e.payload.moduleId?B($({},s),{lessons:s.lessons.map(n=>n.id===e.payload.lessonId?$($({},n),e.payload.updates):n)}):s)})});case"UPDATE_ASSESSMENT":return B($({},r),{courseData:B($({},r.courseData),{assessments:r.courseData.assessments.map(s=>s.id===e.payload.assessmentId?$($({},s),e.payload.updates):s)})});case"REMOVE_MODULE":return B($({},r),{courseData:B($({},r.courseData),{modules:r.courseData.modules.filter(s=>s.id!==e.payload)})});case"REMOVE_LESSON":return B($({},r),{courseData:B($({},r.courseData),{modules:r.courseData.modules.map(s=>s.id===e.payload.moduleId?B($({},s),{lessons:s.lessons.filter(n=>n.id!==e.payload.lessonId)}):s)})});case"REMOVE_ASSESSMENT":return B($({},r),{courseData:B($({},r.courseData),{assessments:r.courseData.assessments.filter(s=>s.id!==e.payload)})});case"BULK_CREATE_COURSE_STRUCTURE":{const{modules:s,lessonsPerModule:n,assessments:a}=e.payload,i=Date.now(),c=Array.from({length:s},(o,d)=>{const g=`module-${i}-${d}`;return{id:g,title:`Module ${d+1}`,description:`Module ${d+1} description`,lessons:Array.from({length:n},(p,m)=>({id:`lesson-${i}-${d}-${m}`,title:`Lesson ${m+1}`,content:`Lesson ${m+1} content`,order:m,moduleId:g,estimatedDuration:15,isRequired:!1,type:"text"})),order:d,isRequired:!1,estimatedDuration:n*15}}),l=Array.from({length:a},(o,d)=>({id:`assessment-${Date.now()}-${d}`,title:`Assessment ${d+1}`,questions:[],passingScore:70,isRequired:!1}));return B($({},r),{courseData:B($({},r.courseData),{modules:c,assessments:l})})}case"SET_AI_SUGGESTIONS":return B($({},r),{aiSuggestions:e.payload});case"UPDATE_CONTENT":return B($({},r),{currentContent:r.currentContent?$($({},r.currentContent),e.payload):e.payload});case"ADD_MEDIA":return B($({},r),{mediaLibrary:[...r.mediaLibrary||[],e.payload]});case"REMOVE_MEDIA":return B($({},r),{mediaLibrary:(r.mediaLibrary||[]).filter(s=>s.id!==e.payload)});default:return r}}const Ws=f.createContext(void 0);function Ur({children:r}){const[e,s]=f.useReducer(zr,Mr),n=f.useCallback(a=>{s({type:"SET_SELECTED_CONTENT_TYPE",payload:a})},[s]);return t.jsx(Ws.Provider,{value:{state:e,dispatch:s,createNewContent:n},children:r})}function me(){const r=f.useContext(Ws);if(r===void 0)throw new Error("useContentBuilder must be used within a ContentBuilderProvider");return r}function Pe(){const{dispatch:r}=me(),e=f.useCallback(j=>{r({type:"SET_SELECTED_CONTENT_TYPE",payload:j})},[r]),s=f.useCallback(j=>{r({type:"SET_ACTIVE_TAB",payload:j})},[r]),n=f.useCallback(j=>{r({type:"SET_COURSE_STEP",payload:j})},[r]),a=f.useCallback(j=>{r({type:"UPDATE_COURSE_FIELD",payload:j})},[r]),i=f.useCallback(()=>{const j={id:`module-${Date.now()}`,title:`Module ${Date.now()}`,description:"",lessons:[],order:Date.now(),isRequired:!1,estimatedDuration:30};r({type:"ADD_MODULE",payload:j})},[r]),c=f.useCallback(j=>{const _={id:`lesson-${Date.now()}`,title:`Lesson ${Date.now()}`,content:"",order:Date.now(),moduleId:j,estimatedDuration:15,isRequired:!1,type:"text"};r({type:"ADD_LESSON",payload:{moduleId:j,lesson:_}})},[r]),l=f.useCallback(()=>{const j={id:`assessment-${Date.now()}`,title:`Assessment ${Date.now()}`,questions:[],passingScore:70,isRequired:!1};r({type:"ADD_ASSESSMENT",payload:j})},[r]),o=f.useCallback((j,_)=>{r({type:"UPDATE_MODULE",payload:{moduleId:j,updates:_}})},[r]),d=f.useCallback((j,_,x)=>{r({type:"UPDATE_LESSON",payload:{moduleId:j,lessonId:_,updates:x}})},[r]),g=f.useCallback((j,_)=>{r({type:"UPDATE_ASSESSMENT",payload:{assessmentId:j,updates:_}})},[r]),p=f.useCallback(j=>{r({type:"REMOVE_MODULE",payload:j})},[r]),m=f.useCallback((j,_)=>{r({type:"REMOVE_LESSON",payload:{moduleId:j,lessonId:_}})},[r]),S=f.useCallback(j=>{r({type:"REMOVE_ASSESSMENT",payload:j})},[r]),N=f.useCallback((j,_,x)=>{r({type:"BULK_CREATE_COURSE_STRUCTURE",payload:{modules:j,lessonsPerModule:_,assessments:x}})},[r]);return{setSelectedContentType:e,setActiveTab:s,setCourseStep:n,updateCourseField:a,addModule:i,addLesson:c,addAssessment:l,updateModule:o,updateLesson:d,updateAssessment:g,removeModule:p,removeLesson:m,removeAssessment:S,bulkCreateCourseStructure:N}}var F;(function(r){r.assertEqual=a=>{};function e(a){}r.assertIs=e;function s(a){throw new Error}r.assertNever=s,r.arrayToEnum=a=>{const i={};for(const c of a)i[c]=c;return i},r.getValidEnumValues=a=>{const i=r.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),c={};for(const l of i)c[l]=a[l];return r.objectValues(c)},r.objectValues=a=>r.objectKeys(a).map(function(i){return a[i]}),r.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const c in a)Object.prototype.hasOwnProperty.call(a,c)&&i.push(c);return i},r.find=(a,i)=>{for(const c of a)if(i(c))return c},r.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(c=>typeof c=="string"?`'${c}'`:c).join(i)}r.joinValues=n,r.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(F||(F={}));var ss;(function(r){r.mergeShapes=(e,s)=>y(y({},e),s)})(ss||(ss={}));const O=F.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ve=r=>{switch(typeof r){case"undefined":return O.undefined;case"string":return O.string;case"number":return Number.isNaN(r)?O.nan:O.number;case"boolean":return O.boolean;case"function":return O.function;case"bigint":return O.bigint;case"symbol":return O.symbol;case"object":return Array.isArray(r)?O.array:r===null?O.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?O.promise:typeof Map!="undefined"&&r instanceof Map?O.map:typeof Set!="undefined"&&r instanceof Set?O.set:typeof Date!="undefined"&&r instanceof Date?O.date:O.object;default:return O.unknown}},w=F.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ye extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=e}format(e){const s=e||function(i){return i.message},n={_errors:[]},a=i=>{for(const c of i.issues)if(c.code==="invalid_union")c.unionErrors.map(a);else if(c.code==="invalid_return_type")a(c.returnTypeError);else if(c.code==="invalid_arguments")a(c.argumentsError);else if(c.path.length===0)n._errors.push(s(c));else{let l=n,o=0;for(;o<c.path.length;){const d=c.path[o];o===c.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(s(c))):l[d]=l[d]||{_errors:[]},l=l[d],o++}}};return a(this),n}static assert(e){if(!(e instanceof ye))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,F.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=s=>s.message){const s={},n=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];s[i]=s[i]||[],s[i].push(e(a))}else n.push(e(a));return{formErrors:n,fieldErrors:s}}get formErrors(){return this.flatten()}}ye.create=r=>new ye(r);const Lt=(r,e)=>{let s;switch(r.code){case w.invalid_type:r.received===O.undefined?s="Required":s=`Expected ${r.expected}, received ${r.received}`;break;case w.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(r.expected,F.jsonStringifyReplacer)}`;break;case w.unrecognized_keys:s=`Unrecognized key(s) in object: ${F.joinValues(r.keys,", ")}`;break;case w.invalid_union:s="Invalid input";break;case w.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${F.joinValues(r.options)}`;break;case w.invalid_enum_value:s=`Invalid enum value. Expected ${F.joinValues(r.options)}, received '${r.received}'`;break;case w.invalid_arguments:s="Invalid function arguments";break;case w.invalid_return_type:s="Invalid function return type";break;case w.invalid_date:s="Invalid date";break;case w.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(s=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?s=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?s=`Invalid input: must end with "${r.validation.endsWith}"`:F.assertNever(r.validation):r.validation!=="regex"?s=`Invalid ${r.validation}`:s="Invalid";break;case w.too_small:r.type==="array"?s=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?s=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?s=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="bigint"?s=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?s=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:s="Invalid input";break;case w.too_big:r.type==="array"?s=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?s=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?s=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?s=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?s=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:s="Invalid input";break;case w.custom:s="Invalid input";break;case w.invalid_intersection_types:s="Intersection results could not be merged";break;case w.not_multiple_of:s=`Number must be a multiple of ${r.multipleOf}`;break;case w.not_finite:s="Number must be finite";break;default:s=e.defaultError,F.assertNever(r)}return{message:s}};let Fr=Lt;function qr(){return Fr}const Br=r=>{const{data:e,path:s,errorMaps:n,issueData:a}=r,i=[...s,...a.path||[]],c=R(y({},a),{path:i});if(a.message!==void 0)return R(y({},a),{path:i,message:a.message});let l="";const o=n.filter(d=>!!d).slice().reverse();for(const d of o)l=d(c,{data:e,defaultError:l}).message;return R(y({},a),{path:i,message:l})};function T(r,e){const s=qr(),n=Br({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,s,s===Lt?void 0:Lt].filter(a=>!!a)});r.common.issues.push(n)}class ne{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,s){const n=[];for(const a of s){if(a.status==="aborted")return A;a.status==="dirty"&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static mergeObjectAsync(e,s){return pe(this,null,function*(){const n=[];for(const a of s){const i=yield a.key,c=yield a.value;n.push({key:i,value:c})}return ne.mergeObjectSync(e,n)})}static mergeObjectSync(e,s){const n={};for(const a of s){const{key:i,value:c}=a;if(i.status==="aborted"||c.status==="aborted")return A;i.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof c.value!="undefined"||a.alwaysSet)&&(n[i.value]=c.value)}return{status:e.value,value:n}}}const A=Object.freeze({status:"aborted"}),He=r=>({status:"dirty",value:r}),ie=r=>({status:"valid",value:r}),rs=r=>r.status==="aborted",ns=r=>r.status==="dirty",Fe=r=>r.status==="valid",dt=r=>typeof Promise!="undefined"&&r instanceof Promise;var P;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(P||(P={}));class _e{constructor(e,s,n,a){this._cachedPath=[],this.parent=e,this.data=s,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const as=(r,e)=>{if(Fe(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new ye(r.common.issues);return this._error=s,this._error}}};function L(r){if(!r)return{};const{errorMap:e,invalid_type_error:s,required_error:n,description:a}=r;if(e&&(s||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(c,l)=>{var d,g;const{message:o}=r;return c.code==="invalid_enum_value"?{message:o!=null?o:l.defaultError}:typeof l.data=="undefined"?{message:(d=o!=null?o:n)!=null?d:l.defaultError}:c.code!=="invalid_type"?{message:l.defaultError}:{message:(g=o!=null?o:s)!=null?g:l.defaultError}},description:a}}class U{get description(){return this._def.description}_getType(e){return ve(e.data)}_getOrReturnCtx(e,s){return s||{common:e.parent.common,data:e.data,parsedType:ve(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ne,ctx:{common:e.parent.common,data:e.data,parsedType:ve(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const s=this._parse(e);if(dt(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(e){const s=this._parse(e);return Promise.resolve(s)}parse(e,s){const n=this.safeParse(e,s);if(n.success)return n.data;throw n.error}safeParse(e,s){var i;const n={common:{issues:[],async:(i=s==null?void 0:s.async)!=null?i:!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ve(e)},a=this._parseSync({data:e,path:n.path,parent:n});return as(n,a)}"~validate"(e){var n,a;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ve(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return Fe(i)?{value:i.value}:{issues:s.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>Fe(i)?{value:i.value}:{issues:s.common.issues})}parseAsync(e,s){return pe(this,null,function*(){const n=yield this.safeParseAsync(e,s);if(n.success)return n.data;throw n.error})}safeParseAsync(e,s){return pe(this,null,function*(){const n={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ve(e)},a=this._parse({data:e,path:n.path,parent:n}),i=yield dt(a)?a:Promise.resolve(a);return as(n,i)})}refine(e,s){const n=a=>typeof s=="string"||typeof s=="undefined"?{message:s}:typeof s=="function"?s(a):s;return this._refinement((a,i)=>{const c=e(a),l=()=>i.addIssue(y({code:w.custom},n(a)));return typeof Promise!="undefined"&&c instanceof Promise?c.then(o=>o?!0:(l(),!1)):c?!0:(l(),!1)})}refinement(e,s){return this._refinement((n,a)=>e(n)?!0:(a.addIssue(typeof s=="function"?s(n,a):s),!1))}_refinement(e){return new ke({schema:this,typeName:I.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return ge.create(this,this._def)}nullable(){return Te.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ue.create(this)}promise(){return ft.create(this,this._def)}or(e){return mt.create([this,e],this._def)}and(e){return pt.create(this,e,this._def)}transform(e){return new ke(R(y({},L(this._def)),{schema:this,typeName:I.ZodEffects,effect:{type:"transform",transform:e}}))}default(e){const s=typeof e=="function"?e:()=>e;return new xt(R(y({},L(this._def)),{innerType:this,defaultValue:s,typeName:I.ZodDefault}))}brand(){return new Js(y({typeName:I.ZodBranded,type:this},L(this._def)))}catch(e){const s=typeof e=="function"?e:()=>e;return new gt(R(y({},L(this._def)),{innerType:this,catchValue:s,typeName:I.ZodCatch}))}describe(e){const s=this.constructor;return new s(R(y({},this._def),{description:e}))}pipe(e){return Gt.create(this,e)}readonly(){return yt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Zr=/^c[^\s-]{8,}$/i,Vr=/^[0-9a-z]+$/,Gr=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Hr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Wr=/^[a-z0-9_-]{21}$/i,Yr=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Qr=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Kr=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Jr="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let _t;const Xr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,en=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,tn=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,sn=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,rn=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nn=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ys="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",an=new RegExp(`^${Ys}$`);function Qs(r){let e="[0-5]\\d";r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`);const s=r.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${s}`}function on(r){return new RegExp(`^${Qs(r)}$`)}function ln(r){let e=`${Ys}T${Qs(r)}`;const s=[];return s.push(r.local?"Z?":"Z"),r.offset&&s.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${s.join("|")})`,new RegExp(`^${e}$`)}function cn(r,e){return!!((e==="v4"||!e)&&Xr.test(r)||(e==="v6"||!e)&&tn.test(r))}function dn(r,e){if(!Yr.test(r))return!1;try{const[s]=r.split(".");if(!s)return!1;const n=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||e&&a.alg!==e)}catch(s){return!1}}function un(r,e){return!!((e==="v4"||!e)&&en.test(r)||(e==="v6"||!e)&&sn.test(r))}class je extends U{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==O.string){const i=this._getOrReturnCtx(e);return T(i,{code:w.invalid_type,expected:O.string,received:i.parsedType}),A}const n=new ne;let a;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(a=this._getOrReturnCtx(e,a),T(a,{code:w.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(a=this._getOrReturnCtx(e,a),T(a,{code:w.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const c=e.data.length>i.value,l=e.data.length<i.value;(c||l)&&(a=this._getOrReturnCtx(e,a),c?T(a,{code:w.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&T(a,{code:w.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")Kr.test(e.data)||(a=this._getOrReturnCtx(e,a),T(a,{validation:"email",code:w.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")_t||(_t=new RegExp(Jr,"u")),_t.test(e.data)||(a=this._getOrReturnCtx(e,a),T(a,{validation:"emoji",code:w.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")Hr.test(e.data)||(a=this._getOrReturnCtx(e,a),T(a,{validation:"uuid",code:w.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")Wr.test(e.data)||(a=this._getOrReturnCtx(e,a),T(a,{validation:"nanoid",code:w.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")Zr.test(e.data)||(a=this._getOrReturnCtx(e,a),T(a,{validation:"cuid",code:w.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")Vr.test(e.data)||(a=this._getOrReturnCtx(e,a),T(a,{validation:"cuid2",code:w.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")Gr.test(e.data)||(a=this._getOrReturnCtx(e,a),T(a,{validation:"ulid",code:w.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch(c){a=this._getOrReturnCtx(e,a),T(a,{validation:"url",code:w.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),T(a,{validation:"regex",code:w.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(e,a),T(a,{code:w.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(a=this._getOrReturnCtx(e,a),T(a,{code:w.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(a=this._getOrReturnCtx(e,a),T(a,{code:w.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?ln(i).test(e.data)||(a=this._getOrReturnCtx(e,a),T(a,{code:w.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?an.test(e.data)||(a=this._getOrReturnCtx(e,a),T(a,{code:w.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?on(i).test(e.data)||(a=this._getOrReturnCtx(e,a),T(a,{code:w.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?Qr.test(e.data)||(a=this._getOrReturnCtx(e,a),T(a,{validation:"duration",code:w.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?cn(e.data,i.version)||(a=this._getOrReturnCtx(e,a),T(a,{validation:"ip",code:w.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?dn(e.data,i.alg)||(a=this._getOrReturnCtx(e,a),T(a,{validation:"jwt",code:w.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?un(e.data,i.version)||(a=this._getOrReturnCtx(e,a),T(a,{validation:"cidr",code:w.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?rn.test(e.data)||(a=this._getOrReturnCtx(e,a),T(a,{validation:"base64",code:w.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?nn.test(e.data)||(a=this._getOrReturnCtx(e,a),T(a,{validation:"base64url",code:w.invalid_string,message:i.message}),n.dirty()):F.assertNever(i);return{status:n.value,value:e.data}}_regex(e,s,n){return this.refinement(a=>e.test(a),y({validation:s,code:w.invalid_string},P.errToObj(n)))}_addCheck(e){return new je(R(y({},this._def),{checks:[...this._def.checks,e]}))}email(e){return this._addCheck(y({kind:"email"},P.errToObj(e)))}url(e){return this._addCheck(y({kind:"url"},P.errToObj(e)))}emoji(e){return this._addCheck(y({kind:"emoji"},P.errToObj(e)))}uuid(e){return this._addCheck(y({kind:"uuid"},P.errToObj(e)))}nanoid(e){return this._addCheck(y({kind:"nanoid"},P.errToObj(e)))}cuid(e){return this._addCheck(y({kind:"cuid"},P.errToObj(e)))}cuid2(e){return this._addCheck(y({kind:"cuid2"},P.errToObj(e)))}ulid(e){return this._addCheck(y({kind:"ulid"},P.errToObj(e)))}base64(e){return this._addCheck(y({kind:"base64"},P.errToObj(e)))}base64url(e){return this._addCheck(y({kind:"base64url"},P.errToObj(e)))}jwt(e){return this._addCheck(y({kind:"jwt"},P.errToObj(e)))}ip(e){return this._addCheck(y({kind:"ip"},P.errToObj(e)))}cidr(e){return this._addCheck(y({kind:"cidr"},P.errToObj(e)))}datetime(e){var s,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck(y({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(s=e==null?void 0:e.offset)!=null?s:!1,local:(n=e==null?void 0:e.local)!=null?n:!1},P.errToObj(e==null?void 0:e.message)))}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck(y({kind:"time",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision},P.errToObj(e==null?void 0:e.message)))}duration(e){return this._addCheck(y({kind:"duration"},P.errToObj(e)))}regex(e,s){return this._addCheck(y({kind:"regex",regex:e},P.errToObj(s)))}includes(e,s){return this._addCheck(y({kind:"includes",value:e,position:s==null?void 0:s.position},P.errToObj(s==null?void 0:s.message)))}startsWith(e,s){return this._addCheck(y({kind:"startsWith",value:e},P.errToObj(s)))}endsWith(e,s){return this._addCheck(y({kind:"endsWith",value:e},P.errToObj(s)))}min(e,s){return this._addCheck(y({kind:"min",value:e},P.errToObj(s)))}max(e,s){return this._addCheck(y({kind:"max",value:e},P.errToObj(s)))}length(e,s){return this._addCheck(y({kind:"length",value:e},P.errToObj(s)))}nonempty(e){return this.min(1,P.errToObj(e))}trim(){return new je(R(y({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new je(R(y({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new je(R(y({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxLength(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}je.create=r=>{var e;return new je(y({checks:[],typeName:I.ZodString,coerce:(e=r==null?void 0:r.coerce)!=null?e:!1},L(r)))};function mn(r,e){const s=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,a=s>n?s:n,i=Number.parseInt(r.toFixed(a).replace(".","")),c=Number.parseInt(e.toFixed(a).replace(".",""));return i%c/Qt(10,a)}class qe extends U{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==O.number){const i=this._getOrReturnCtx(e);return T(i,{code:w.invalid_type,expected:O.number,received:i.parsedType}),A}let n;const a=new ne;for(const i of this._def.checks)i.kind==="int"?F.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),T(n,{code:w.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),T(n,{code:w.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),T(n,{code:w.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?mn(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),T(n,{code:w.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),T(n,{code:w.not_finite,message:i.message}),a.dirty()):F.assertNever(i);return{status:a.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,P.toString(s))}gt(e,s){return this.setLimit("min",e,!1,P.toString(s))}lte(e,s){return this.setLimit("max",e,!0,P.toString(s))}lt(e,s){return this.setLimit("max",e,!1,P.toString(s))}setLimit(e,s,n,a){return new qe(R(y({},this._def),{checks:[...this._def.checks,{kind:e,value:s,inclusive:n,message:P.toString(a)}]}))}_addCheck(e){return new qe(R(y({},this._def),{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:P.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:P.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:P.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:P.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:P.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:P.toString(s)})}finite(e){return this._addCheck({kind:"finite",message:P.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:P.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:P.toString(e)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&F.isInteger(e.value))}get isFinite(){let e=null,s=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(s===null||n.value>s)&&(s=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(s)&&Number.isFinite(e)}}qe.create=r=>new qe(y({checks:[],typeName:I.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1},L(r)));class Ke extends U{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(i){return this._getInvalidInput(e)}if(this._getType(e)!==O.bigint)return this._getInvalidInput(e);let n;const a=new ne;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),T(n,{code:w.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),T(n,{code:w.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),T(n,{code:w.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):F.assertNever(i);return{status:a.value,value:e.data}}_getInvalidInput(e){const s=this._getOrReturnCtx(e);return T(s,{code:w.invalid_type,expected:O.bigint,received:s.parsedType}),A}gte(e,s){return this.setLimit("min",e,!0,P.toString(s))}gt(e,s){return this.setLimit("min",e,!1,P.toString(s))}lte(e,s){return this.setLimit("max",e,!0,P.toString(s))}lt(e,s){return this.setLimit("max",e,!1,P.toString(s))}setLimit(e,s,n,a){return new Ke(R(y({},this._def),{checks:[...this._def.checks,{kind:e,value:s,inclusive:n,message:P.toString(a)}]}))}_addCheck(e){return new Ke(R(y({},this._def),{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:P.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:P.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:P.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:P.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:P.toString(s)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}Ke.create=r=>{var e;return new Ke(y({checks:[],typeName:I.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!=null?e:!1},L(r)))};class Mt extends U{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==O.boolean){const n=this._getOrReturnCtx(e);return T(n,{code:w.invalid_type,expected:O.boolean,received:n.parsedType}),A}return ie(e.data)}}Mt.create=r=>new Mt(y({typeName:I.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1},L(r)));class ut extends U{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==O.date){const i=this._getOrReturnCtx(e);return T(i,{code:w.invalid_type,expected:O.date,received:i.parsedType}),A}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return T(i,{code:w.invalid_date}),A}const n=new ne;let a;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(a=this._getOrReturnCtx(e,a),T(a,{code:w.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(a=this._getOrReturnCtx(e,a),T(a,{code:w.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):F.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ut(R(y({},this._def),{checks:[...this._def.checks,e]}))}min(e,s){return this._addCheck({kind:"min",value:e.getTime(),message:P.toString(s)})}max(e,s){return this._addCheck({kind:"max",value:e.getTime(),message:P.toString(s)})}get minDate(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e!=null?new Date(e):null}}ut.create=r=>new ut(y({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:I.ZodDate},L(r)));class is extends U{_parse(e){if(this._getType(e)!==O.symbol){const n=this._getOrReturnCtx(e);return T(n,{code:w.invalid_type,expected:O.symbol,received:n.parsedType}),A}return ie(e.data)}}is.create=r=>new is(y({typeName:I.ZodSymbol},L(r)));class zt extends U{_parse(e){if(this._getType(e)!==O.undefined){const n=this._getOrReturnCtx(e);return T(n,{code:w.invalid_type,expected:O.undefined,received:n.parsedType}),A}return ie(e.data)}}zt.create=r=>new zt(y({typeName:I.ZodUndefined},L(r)));class Ut extends U{_parse(e){if(this._getType(e)!==O.null){const n=this._getOrReturnCtx(e);return T(n,{code:w.invalid_type,expected:O.null,received:n.parsedType}),A}return ie(e.data)}}Ut.create=r=>new Ut(y({typeName:I.ZodNull},L(r)));class Je extends U{constructor(){super(...arguments),this._any=!0}_parse(e){return ie(e.data)}}Je.create=r=>new Je(y({typeName:I.ZodAny},L(r)));class os extends U{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ie(e.data)}}os.create=r=>new os(y({typeName:I.ZodUnknown},L(r)));class we extends U{_parse(e){const s=this._getOrReturnCtx(e);return T(s,{code:w.invalid_type,expected:O.never,received:s.parsedType}),A}}we.create=r=>new we(y({typeName:I.ZodNever},L(r)));class ls extends U{_parse(e){if(this._getType(e)!==O.undefined){const n=this._getOrReturnCtx(e);return T(n,{code:w.invalid_type,expected:O.void,received:n.parsedType}),A}return ie(e.data)}}ls.create=r=>new ls(y({typeName:I.ZodVoid},L(r)));class ue extends U{_parse(e){const{ctx:s,status:n}=this._processInputParams(e),a=this._def;if(s.parsedType!==O.array)return T(s,{code:w.invalid_type,expected:O.array,received:s.parsedType}),A;if(a.exactLength!==null){const c=s.data.length>a.exactLength.value,l=s.data.length<a.exactLength.value;(c||l)&&(T(s,{code:c?w.too_big:w.too_small,minimum:l?a.exactLength.value:void 0,maximum:c?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&s.data.length<a.minLength.value&&(T(s,{code:w.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&s.data.length>a.maxLength.value&&(T(s,{code:w.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),s.common.async)return Promise.all([...s.data].map((c,l)=>a.type._parseAsync(new _e(s,c,s.path,l)))).then(c=>ne.mergeArray(n,c));const i=[...s.data].map((c,l)=>a.type._parseSync(new _e(s,c,s.path,l)));return ne.mergeArray(n,i)}get element(){return this._def.type}min(e,s){return new ue(R(y({},this._def),{minLength:{value:e,message:P.toString(s)}}))}max(e,s){return new ue(R(y({},this._def),{maxLength:{value:e,message:P.toString(s)}}))}length(e,s){return new ue(R(y({},this._def),{exactLength:{value:e,message:P.toString(s)}}))}nonempty(e){return this.min(1,e)}}ue.create=(r,e)=>new ue(y({type:r,minLength:null,maxLength:null,exactLength:null,typeName:I.ZodArray},L(e)));function $e(r){if(r instanceof K){const e={};for(const s in r.shape){const n=r.shape[s];e[s]=ge.create($e(n))}return new K(R(y({},r._def),{shape:()=>e}))}else return r instanceof ue?new ue(R(y({},r._def),{type:$e(r.element)})):r instanceof ge?ge.create($e(r.unwrap())):r instanceof Te?Te.create($e(r.unwrap())):r instanceof Se?Se.create(r.items.map(e=>$e(e))):r}class K extends U{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),s=F.objectKeys(e);return this._cached={shape:e,keys:s},this._cached}_parse(e){if(this._getType(e)!==O.object){const d=this._getOrReturnCtx(e);return T(d,{code:w.invalid_type,expected:O.object,received:d.parsedType}),A}const{status:n,ctx:a}=this._processInputParams(e),{shape:i,keys:c}=this._getCached(),l=[];if(!(this._def.catchall instanceof we&&this._def.unknownKeys==="strip"))for(const d in a.data)c.includes(d)||l.push(d);const o=[];for(const d of c){const g=i[d],p=a.data[d];o.push({key:{status:"valid",value:d},value:g._parse(new _e(a,p,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof we){const d=this._def.unknownKeys;if(d==="passthrough")for(const g of l)o.push({key:{status:"valid",value:g},value:{status:"valid",value:a.data[g]}});else if(d==="strict")l.length>0&&(T(a,{code:w.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const g of l){const p=a.data[g];o.push({key:{status:"valid",value:g},value:d._parse(new _e(a,p,a.path,g)),alwaysSet:g in a.data})}}return a.common.async?Promise.resolve().then(()=>pe(this,null,function*(){const d=[];for(const g of o){const p=yield g.key,m=yield g.value;d.push({key:p,value:m,alwaysSet:g.alwaysSet})}return d})).then(d=>ne.mergeObjectSync(n,d)):ne.mergeObjectSync(n,o)}get shape(){return this._def.shape()}strict(e){return P.errToObj,new K(y(R(y({},this._def),{unknownKeys:"strict"}),e!==void 0?{errorMap:(s,n)=>{var i,c,l,o;const a=(l=(c=(i=this._def).errorMap)==null?void 0:c.call(i,s,n).message)!=null?l:n.defaultError;return s.code==="unrecognized_keys"?{message:(o=P.errToObj(e).message)!=null?o:a}:{message:a}}}:{}))}strip(){return new K(R(y({},this._def),{unknownKeys:"strip"}))}passthrough(){return new K(R(y({},this._def),{unknownKeys:"passthrough"}))}extend(e){return new K(R(y({},this._def),{shape:()=>y(y({},this._def.shape()),e)}))}merge(e){return new K({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>y(y({},this._def.shape()),e._def.shape()),typeName:I.ZodObject})}setKey(e,s){return this.augment({[e]:s})}catchall(e){return new K(R(y({},this._def),{catchall:e}))}pick(e){const s={};for(const n of F.objectKeys(e))e[n]&&this.shape[n]&&(s[n]=this.shape[n]);return new K(R(y({},this._def),{shape:()=>s}))}omit(e){const s={};for(const n of F.objectKeys(this.shape))e[n]||(s[n]=this.shape[n]);return new K(R(y({},this._def),{shape:()=>s}))}deepPartial(){return $e(this)}partial(e){const s={};for(const n of F.objectKeys(this.shape)){const a=this.shape[n];e&&!e[n]?s[n]=a:s[n]=a.optional()}return new K(R(y({},this._def),{shape:()=>s}))}required(e){const s={};for(const n of F.objectKeys(this.shape))if(e&&!e[n])s[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof ge;)i=i._def.innerType;s[n]=i}return new K(R(y({},this._def),{shape:()=>s}))}keyof(){return Ks(F.objectKeys(this.shape))}}K.create=(r,e)=>new K(y({shape:()=>r,unknownKeys:"strip",catchall:we.create(),typeName:I.ZodObject},L(e)));K.strictCreate=(r,e)=>new K(y({shape:()=>r,unknownKeys:"strict",catchall:we.create(),typeName:I.ZodObject},L(e)));K.lazycreate=(r,e)=>new K(y({shape:r,unknownKeys:"strip",catchall:we.create(),typeName:I.ZodObject},L(e)));class mt extends U{_parse(e){const{ctx:s}=this._processInputParams(e),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return s.common.issues.push(...l.ctx.common.issues),l.result;const c=i.map(l=>new ye(l.ctx.common.issues));return T(s,{code:w.invalid_union,unionErrors:c}),A}if(s.common.async)return Promise.all(n.map(i=>pe(this,null,function*(){const c=R(y({},s),{common:R(y({},s.common),{issues:[]}),parent:null});return{result:yield i._parseAsync({data:s.data,path:s.path,parent:c}),ctx:c}}))).then(a);{let i;const c=[];for(const o of n){const d=R(y({},s),{common:R(y({},s.common),{issues:[]}),parent:null}),g=o._parseSync({data:s.data,path:s.path,parent:d});if(g.status==="valid")return g;g.status==="dirty"&&!i&&(i={result:g,ctx:d}),d.common.issues.length&&c.push(d.common.issues)}if(i)return s.common.issues.push(...i.ctx.common.issues),i.result;const l=c.map(o=>new ye(o));return T(s,{code:w.invalid_union,unionErrors:l}),A}}get options(){return this._def.options}}mt.create=(r,e)=>new mt(y({options:r,typeName:I.ZodUnion},L(e)));const fe=r=>r instanceof qt?fe(r.schema):r instanceof ke?fe(r.innerType()):r instanceof ht?[r.value]:r instanceof Ee?r.options:r instanceof Bt?F.objectValues(r.enum):r instanceof xt?fe(r._def.innerType):r instanceof zt?[void 0]:r instanceof Ut?[null]:r instanceof ge?[void 0,...fe(r.unwrap())]:r instanceof Te?[null,...fe(r.unwrap())]:r instanceof Js||r instanceof yt?fe(r.unwrap()):r instanceof gt?fe(r._def.innerType):[];class Vt extends U{_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==O.object)return T(s,{code:w.invalid_type,expected:O.object,received:s.parsedType}),A;const n=this.discriminator,a=s.data[n],i=this.optionsMap.get(a);return i?s.common.async?i._parseAsync({data:s.data,path:s.path,parent:s}):i._parseSync({data:s.data,path:s.path,parent:s}):(T(s,{code:w.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),A)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,s,n){const a=new Map;for(const i of s){const c=fe(i.shape[e]);if(!c.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of c){if(a.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);a.set(l,i)}}return new Vt(y({typeName:I.ZodDiscriminatedUnion,discriminator:e,options:s,optionsMap:a},L(n)))}}function Ft(r,e){const s=ve(r),n=ve(e);if(r===e)return{valid:!0,data:r};if(s===O.object&&n===O.object){const a=F.objectKeys(e),i=F.objectKeys(r).filter(l=>a.indexOf(l)!==-1),c=y(y({},r),e);for(const l of i){const o=Ft(r[l],e[l]);if(!o.valid)return{valid:!1};c[l]=o.data}return{valid:!0,data:c}}else if(s===O.array&&n===O.array){if(r.length!==e.length)return{valid:!1};const a=[];for(let i=0;i<r.length;i++){const c=r[i],l=e[i],o=Ft(c,l);if(!o.valid)return{valid:!1};a.push(o.data)}return{valid:!0,data:a}}else return s===O.date&&n===O.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class pt extends U{_parse(e){const{status:s,ctx:n}=this._processInputParams(e),a=(i,c)=>{if(rs(i)||rs(c))return A;const l=Ft(i.value,c.value);return l.valid?((ns(i)||ns(c))&&s.dirty(),{status:s.value,value:l.data}):(T(n,{code:w.invalid_intersection_types}),A)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,c])=>a(i,c)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}pt.create=(r,e,s)=>new pt(y({left:r,right:e,typeName:I.ZodIntersection},L(s)));class Se extends U{_parse(e){const{status:s,ctx:n}=this._processInputParams(e);if(n.parsedType!==O.array)return T(n,{code:w.invalid_type,expected:O.array,received:n.parsedType}),A;if(n.data.length<this._def.items.length)return T(n,{code:w.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),A;!this._def.rest&&n.data.length>this._def.items.length&&(T(n,{code:w.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const i=[...n.data].map((c,l)=>{const o=this._def.items[l]||this._def.rest;return o?o._parse(new _e(n,c,n.path,l)):null}).filter(c=>!!c);return n.common.async?Promise.all(i).then(c=>ne.mergeArray(s,c)):ne.mergeArray(s,i)}get items(){return this._def.items}rest(e){return new Se(R(y({},this._def),{rest:e}))}}Se.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Se(y({items:r,typeName:I.ZodTuple,rest:null},L(e)))};class cs extends U{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:n}=this._processInputParams(e);if(n.parsedType!==O.map)return T(n,{code:w.invalid_type,expected:O.map,received:n.parsedType}),A;const a=this._def.keyType,i=this._def.valueType,c=[...n.data.entries()].map(([l,o],d)=>({key:a._parse(new _e(n,l,n.path,[d,"key"])),value:i._parse(new _e(n,o,n.path,[d,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(()=>pe(this,null,function*(){for(const o of c){const d=yield o.key,g=yield o.value;if(d.status==="aborted"||g.status==="aborted")return A;(d.status==="dirty"||g.status==="dirty")&&s.dirty(),l.set(d.value,g.value)}return{status:s.value,value:l}}))}else{const l=new Map;for(const o of c){const d=o.key,g=o.value;if(d.status==="aborted"||g.status==="aborted")return A;(d.status==="dirty"||g.status==="dirty")&&s.dirty(),l.set(d.value,g.value)}return{status:s.value,value:l}}}}cs.create=(r,e,s)=>new cs(y({valueType:e,keyType:r,typeName:I.ZodMap},L(s)));class Xe extends U{_parse(e){const{status:s,ctx:n}=this._processInputParams(e);if(n.parsedType!==O.set)return T(n,{code:w.invalid_type,expected:O.set,received:n.parsedType}),A;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(T(n,{code:w.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),s.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(T(n,{code:w.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),s.dirty());const i=this._def.valueType;function c(o){const d=new Set;for(const g of o){if(g.status==="aborted")return A;g.status==="dirty"&&s.dirty(),d.add(g.value)}return{status:s.value,value:d}}const l=[...n.data.values()].map((o,d)=>i._parse(new _e(n,o,n.path,d)));return n.common.async?Promise.all(l).then(o=>c(o)):c(l)}min(e,s){return new Xe(R(y({},this._def),{minSize:{value:e,message:P.toString(s)}}))}max(e,s){return new Xe(R(y({},this._def),{maxSize:{value:e,message:P.toString(s)}}))}size(e,s){return this.min(e,s).max(e,s)}nonempty(e){return this.min(1,e)}}Xe.create=(r,e)=>new Xe(y({valueType:r,minSize:null,maxSize:null,typeName:I.ZodSet},L(e)));class qt extends U{get schema(){return this._def.getter()}_parse(e){const{ctx:s}=this._processInputParams(e);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}qt.create=(r,e)=>new qt(y({getter:r,typeName:I.ZodLazy},L(e)));class ht extends U{_parse(e){if(e.data!==this._def.value){const s=this._getOrReturnCtx(e);return T(s,{received:s.data,code:w.invalid_literal,expected:this._def.value}),A}return{status:"valid",value:e.data}}get value(){return this._def.value}}ht.create=(r,e)=>new ht(y({value:r,typeName:I.ZodLiteral},L(e)));function Ks(r,e){return new Ee(y({values:r,typeName:I.ZodEnum},L(e)))}class Ee extends U{_parse(e){if(typeof e.data!="string"){const s=this._getOrReturnCtx(e),n=this._def.values;return T(s,{expected:F.joinValues(n),received:s.parsedType,code:w.invalid_type}),A}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const s=this._getOrReturnCtx(e),n=this._def.values;return T(s,{received:s.data,code:w.invalid_enum_value,options:n}),A}return ie(e.data)}get options(){return this._def.values}get enum(){const e={};for(const s of this._def.values)e[s]=s;return e}get Values(){const e={};for(const s of this._def.values)e[s]=s;return e}get Enum(){const e={};for(const s of this._def.values)e[s]=s;return e}extract(e,s=this._def){return Ee.create(e,y(y({},this._def),s))}exclude(e,s=this._def){return Ee.create(this.options.filter(n=>!e.includes(n)),y(y({},this._def),s))}}Ee.create=Ks;class Bt extends U{_parse(e){const s=F.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==O.string&&n.parsedType!==O.number){const a=F.objectValues(s);return T(n,{expected:F.joinValues(a),received:n.parsedType,code:w.invalid_type}),A}if(this._cache||(this._cache=new Set(F.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const a=F.objectValues(s);return T(n,{received:n.data,code:w.invalid_enum_value,options:a}),A}return ie(e.data)}get enum(){return this._def.values}}Bt.create=(r,e)=>new Bt(y({values:r,typeName:I.ZodNativeEnum},L(e)));class ft extends U{unwrap(){return this._def.type}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==O.promise&&s.common.async===!1)return T(s,{code:w.invalid_type,expected:O.promise,received:s.parsedType}),A;const n=s.parsedType===O.promise?s.data:Promise.resolve(s.data);return ie(n.then(a=>this._def.type.parseAsync(a,{path:s.path,errorMap:s.common.contextualErrorMap})))}}ft.create=(r,e)=>new ft(y({type:r,typeName:I.ZodPromise},L(e)));class ke extends U{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===I.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:s,ctx:n}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:c=>{T(n,c),c.fatal?s.abort():s.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const c=a.transform(n.data,i);if(n.common.async)return Promise.resolve(c).then(l=>pe(this,null,function*(){if(s.value==="aborted")return A;const o=yield this._def.schema._parseAsync({data:l,path:n.path,parent:n});return o.status==="aborted"?A:o.status==="dirty"||s.value==="dirty"?He(o.value):o}));{if(s.value==="aborted")return A;const l=this._def.schema._parseSync({data:c,path:n.path,parent:n});return l.status==="aborted"?A:l.status==="dirty"||s.value==="dirty"?He(l.value):l}}if(a.type==="refinement"){const c=l=>{const o=a.refinement(l,i);if(n.common.async)return Promise.resolve(o);if(o instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?A:(l.status==="dirty"&&s.dirty(),c(l.value),{status:s.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?A:(l.status==="dirty"&&s.dirty(),c(l.value).then(()=>({status:s.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Fe(c))return A;const l=a.transform(c.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>Fe(c)?Promise.resolve(a.transform(c.value,i)).then(l=>({status:s.value,value:l})):A);F.assertNever(a)}}ke.create=(r,e,s)=>new ke(y({schema:r,typeName:I.ZodEffects,effect:e},L(s)));ke.createWithPreprocess=(r,e,s)=>new ke(y({schema:e,effect:{type:"preprocess",transform:r},typeName:I.ZodEffects},L(s)));class ge extends U{_parse(e){return this._getType(e)===O.undefined?ie(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ge.create=(r,e)=>new ge(y({innerType:r,typeName:I.ZodOptional},L(e)));class Te extends U{_parse(e){return this._getType(e)===O.null?ie(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Te.create=(r,e)=>new Te(y({innerType:r,typeName:I.ZodNullable},L(e)));class xt extends U{_parse(e){const{ctx:s}=this._processInputParams(e);let n=s.data;return s.parsedType===O.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}xt.create=(r,e)=>new xt(y({innerType:r,typeName:I.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default},L(e)));class gt extends U{_parse(e){const{ctx:s}=this._processInputParams(e),n=R(y({},s),{common:R(y({},s.common),{issues:[]})}),a=this._def.innerType._parse({data:n.data,path:n.path,parent:y({},n)});return dt(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ye(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ye(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}gt.create=(r,e)=>new gt(y({innerType:r,typeName:I.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch},L(e)));class ds extends U{_parse(e){if(this._getType(e)!==O.nan){const n=this._getOrReturnCtx(e);return T(n,{code:w.invalid_type,expected:O.nan,received:n.parsedType}),A}return{status:"valid",value:e.data}}}ds.create=r=>new ds(y({typeName:I.ZodNaN},L(r)));class Js extends U{_parse(e){const{ctx:s}=this._processInputParams(e),n=s.data;return this._def.type._parse({data:n,path:s.path,parent:s})}unwrap(){return this._def.type}}class Gt extends U{_parse(e){const{status:s,ctx:n}=this._processInputParams(e);if(n.common.async)return pe(this,null,function*(){const i=yield this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?A:i.status==="dirty"?(s.dirty(),He(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})});{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?A:a.status==="dirty"?(s.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(e,s){return new Gt({in:e,out:s,typeName:I.ZodPipeline})}}class yt extends U{_parse(e){const s=this._def.innerType._parse(e),n=a=>(Fe(a)&&(a.value=Object.freeze(a.value)),a);return dt(s)?s.then(a=>n(a)):n(s)}unwrap(){return this._def.innerType}}yt.create=(r,e)=>new yt(y({innerType:r,typeName:I.ZodReadonly},L(e)));function us(r,e){const s=typeof r=="function"?r(e):typeof r=="string"?{message:r}:r;return typeof s=="string"?{message:s}:s}function pn(r,e={},s){return r?Je.create().superRefine((n,a)=>{var c,l;const i=r(n);if(i instanceof Promise)return i.then(o=>{var d,g;if(!o){const p=us(e,n),m=(g=(d=p.fatal)!=null?d:s)!=null?g:!0;a.addIssue(R(y({code:"custom"},p),{fatal:m}))}});if(!i){const o=us(e,n),d=(l=(c=o.fatal)!=null?c:s)!=null?l:!0;a.addIssue(R(y({code:"custom"},o),{fatal:d}))}}):Je.create()}var I;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(I||(I={}));const hn=(r,e={message:`Input not instance of ${r.name}`})=>pn(s=>s instanceof r,e),ee=je.create,We=qe.create,Oe=Mt.create;Je.create;we.create;const wt=ue.create,vt=K.create;mt.create;const fn=Vt.create;pt.create;Se.create;const st=ht.create,jt=Ee.create;ft.create;ge.create;Te.create;const Nt=vt({title:ee().min(1,"Title is required").max(200,"Title must be less than 200 characters").trim(),description:ee().min(1,"Description is required").max(500,"Description must be less than 500 characters").trim(),content:ee().min(1,"Content is required").max(1e4,"Content must be less than 10,000 characters")}),xn=Nt.extend({policyVersion:ee().min(1,"Policy version is required").regex(/^\d+\.\d+$/,"Version must be in format X.Y (e.g., 1.0)"),policyType:jt(["general","safety","compliance","operational"],{errorMap:()=>({message:"Please select a valid policy type"})}),requiresSignature:Oe(),signatureDeadline:We().min(1,"Deadline must be at least 1 day").max(365,"Deadline cannot exceed 365 days").optional(),acknowledgmentStatement:ee().min(10,"Acknowledgment statement must be at least 10 characters").max(500,"Acknowledgment statement must be less than 500 characters").optional()}),gn=Nt.extend({isRequired:Oe(),reviewAnnually:Oe(),estimatedDuration:We().min(1,"Duration must be at least 1 minute").max(480,"Duration cannot exceed 8 hours (480 minutes)"),difficulty:jt(["beginner","intermediate","advanced"],{errorMap:()=>({message:"Please select a valid difficulty level"})}),department:ee().min(1,"Department is required").max(100,"Department must be less than 100 characters"),responsiblePerson:ee().min(1,"Responsible person is required").max(100,"Responsible person must be less than 100 characters")}),yn=Nt.extend({chemicalName:ee().min(1,"Chemical name is required").max(200,"Chemical name must be less than 200 characters"),casNumber:ee().min(1,"CAS number is required").regex(/^\d{1,7}-\d{2}-\d$/,"CAS number must be in format XXXX-XX-X"),hazardClass:jt(["1","2","3","4","5","6","7","8","9"],{errorMap:()=>({message:"Please select a valid hazard class"})}),storageRequirements:ee().min(1,"Storage requirements are required").max(500,"Storage requirements must be less than 500 characters"),handlingInstructions:ee().min(1,"Handling instructions are required").max(1e3,"Handling instructions must be less than 1,000 characters"),emergencyProcedures:ee().min(1,"Emergency procedures are required").max(1e3,"Emergency procedures must be less than 1,000 characters")}),bn=Nt.extend({pathwayDueDate:ee().min(1,"Due date is required").refine(r=>new Date(r)>new Date,"Due date must be in the future"),issueCertificate:Oe(),requireFinalQuiz:Oe(),quizQuestionCount:We().min(1,"Quiz must have at least 1 question").max(50,"Quiz cannot have more than 50 questions"),quizPassingRate:We().min(50,"Passing rate must be at least 50%").max(100,"Passing rate cannot exceed 100%"),quizTimeLimit:We().min(5,"Time limit must be at least 5 minutes").max(180,"Time limit cannot exceed 3 hours (180 minutes)")}),ki=vt({fontFamily:ee().min(1,"Font family is required"),fontSize:jt(["text-xs","text-sm","text-base","text-lg","text-xl"],{errorMap:()=>({message:"Please select a valid font size"})}),textColor:ee().min(1,"Text color is required")}),Ti=vt({headers:wt(ee().min(1,"Header cannot be empty")).min(1,"Table must have at least one column").max(10,"Table cannot have more than 10 columns"),data:wt(wt(ee())).min(1,"Table must have at least one row").max(50,"Table cannot have more than 50 rows")}),Oi=vt({pdfFile:hn(File).nullable(),isRecording:Oe(),pdfUploading:Oe()});fn("type",[xn.extend({type:st("policy")}),gn.extend({type:st("procedure")}),yn.extend({type:st("sms")}),bn.extend({type:st("pathway")})]);var Xs=(r,e,s)=>new Promise((n,a)=>{var i=o=>{try{l(s.next(o))}catch(d){a(d)}},c=o=>{try{l(s.throw(o))}catch(d){a(d)}},l=o=>o.done?n(o.value):Promise.resolve(o.value).then(i,c);l((s=s.apply(r,e)).next())});function vn(r){return Xs(this,null,function*(){try{const{data:e,error:s}=yield te.from("knowledge_hub_content").select("id, title, description, difficulty_level, estimated_duration, department, tags").eq("is_active",!0).eq("status","published").or(`title.ilike.%${r}%,description.ilike.%${r}%`).limit(10);return s?(console.error("Error searching courses:",s),[]):e||[]}catch(e){return console.error("Error in searchCourses:",e),[]}})}function jn(r){return Xs(this,null,function*(){try{const{data:e,error:s}=yield te.from("knowledge_hub_content").select("id, title, description, difficulty_level, estimated_duration, department, tags").eq("id",r).eq("is_active",!0).eq("status","published").single();return s?(console.error("Error fetching course:",s),null):e}catch(e){return console.error("Error in getCourseById:",e),null}})}var Ct=(r,e,s)=>new Promise((n,a)=>{var i=o=>{try{l(s.next(o))}catch(d){a(d)}},c=o=>{try{l(s.throw(o))}catch(d){a(d)}},l=o=>o.done?n(o.value):Promise.resolve(o.value).then(i,c);l((s=s.apply(r,e)).next())});const Nn=({value:r,onChange:e,onRemove:s,placeholder:n="Search for a course..."})=>{const[a,i]=f.useState(""),[c,l]=f.useState([]),[o,d]=f.useState(!1),[g,p]=f.useState(!1),[m,S]=f.useState(null),N=f.useRef(),j=f.useRef(null);f.useEffect(()=>{r&&!m&&Ct(null,null,function*(){try{const u=yield jn(r);u&&(S(u),i(u.title))}catch(u){console.error("Error fetching course details:",u)}})},[r,m]),f.useEffect(()=>{const b=u=>{j.current&&!j.current.contains(u.target)&&p(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const _=b=>Ct(null,null,function*(){if(i(b),p(!0),N.current&&clearTimeout(N.current),b.length<2){l([]);return}N.current=setTimeout(()=>Ct(null,null,function*(){d(!0);try{const u=yield vn(b);l(u)}catch(u){console.error("Search error:",u),l([])}finally{d(!1)}}),300)}),x=b=>{S(b),e(b.id),i(b.title),p(!1),l([])},v=()=>{S(null),i(""),e(""),l([])},C=b=>{if(b<60)return`${b}m`;const u=Math.floor(b/60),k=b%60;return k===0?`${u}h`:`${u}h ${k}m`};return m?t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[t.jsx(h,{path:ae,size:1.2,className:"text-blue-600"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-medium text-blue-900",children:m.title}),t.jsxs("div",{className:"text-sm text-blue-700 flex items-center space-x-4",children:[t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(h,{path:Me,size:.8}),t.jsx("span",{children:C(m.estimated_duration)})]}),t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(h,{path:At,size:.8}),t.jsx("span",{className:"capitalize",children:m.difficulty_level})]})]})]}),t.jsx("button",{onClick:s,className:"p-1 text-blue-600 hover:bg-blue-100 rounded","aria-label":"Remove course",children:t.jsx(h,{path:ce,size:1})})]}):t.jsxs("div",{className:"relative",ref:j,children:[t.jsxs("div",{className:"relative",children:[t.jsx(h,{path:Ms,size:1,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:a,onChange:b=>_(b.target.value),onFocus:()=>p(!0),className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:n}),a&&t.jsx("button",{onClick:v,className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600",children:t.jsx(h,{path:ce,size:1})})]}),g&&(a.length>=2||o)&&t.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",children:o?t.jsxs("div",{className:"p-4 text-center text-gray-500",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#4ECDC4] mx-auto mb-2"}),"Searching..."]}):c.length>0?t.jsx("div",{className:"py-2",children:c.map(b=>t.jsxs("button",{onClick:()=>x(b),className:"w-full text-left p-3 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none",children:[t.jsx("div",{className:"font-medium text-gray-900",children:b.title}),t.jsx("div",{className:"text-sm text-gray-600 line-clamp-2",children:b.description}),t.jsxs("div",{className:"text-xs text-gray-500 flex items-center space-x-3 mt-1",children:[t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(h,{path:Me,size:.8}),t.jsx("span",{children:C(b.estimated_duration)})]}),t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(h,{path:At,size:.8}),t.jsx("span",{className:"capitalize",children:b.difficulty_level})]})]})]},b.id))}):a.length>=2?t.jsxs("div",{className:"p-4 text-center text-gray-500",children:['No courses found matching "',a,'"']}):null})]})};var ms=(r,e,s)=>new Promise((n,a)=>{var i=o=>{try{l(s.next(o))}catch(d){a(d)}},c=o=>{try{l(s.throw(o))}catch(d){a(d)}},l=o=>o.done?n(o.value):Promise.resolve(o.value).then(i,c);l((s=s.apply(r,e)).next())});class er{static generateLearningObjectives(e){return ms(this,null,function*(){try{const s=this.buildContextPrompt(e),n=yield fetch(this.API_ENDPOINT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:s,context:"courses"})});if(!n.ok)throw new Error(`AI service responded with status ${n.status}`);const a=yield this.parseStreamingResponse(n);return this.parseObjectivesFromResponse(a)}catch(s){return console.error("Error generating learning objectives:",s),this.getFallbackObjectives(e)}})}static buildContextPrompt(e){const{title:s,description:n,prerequisites:a,linkedPrerequisites:i,difficulty:c}=e;let l=`Generate 3-5 specific, measurable learning objectives for a healthcare/sterilization course with the following details:

Course Title: "${s}"
Course Description: "${n}"
Difficulty Level: ${c}`;return a&&a.length>0&&a[0]&&(l+=`
Prerequisites: ${a.filter(o=>o.trim()).join(", ")}`),i&&i.length>0&&(l+=`
Linked Course Prerequisites: ${i.length} course(s) from our library`),l+=`

Please generate learning objectives that:
1. Use action verbs aligned with Bloom's Taxonomy
2. Are specific and measurable
3. Are appropriate for ${c} level learners
4. Focus on healthcare/sterilization context
5. Build upon the stated prerequisites

Format each objective as a JSON object with:
- "objective": the learning objective statement
- "bloomsLevel": one of [remember, understand, apply, analyze, evaluate, create]
- "reasoning": brief explanation of why this objective fits the course
- "confidence": score from 0.0 to 1.0

Return only a JSON array of objectives, no other text.`,l}static parseStreamingResponse(e){return ms(this,null,function*(){var s;const n=(s=e.body)==null?void 0:s.getReader();if(!n)throw new Error("No response body");let a="";const i=new TextDecoder;try{let c=1e3;for(;c>0;){const{done:l,value:o}=yield n.read();if(l)break;const d=i.decode(o,{stream:!0});a+=d,c--}}finally{n.releaseLock()}return a})}static parseObjectivesFromResponse(e){try{const s=e.match(/\[[\s\S]*\]/);if(!s)throw new Error("No JSON array found in response");return JSON.parse(s[0]).map(a=>({objective:a.objective||"Invalid objective",bloomsLevel:a.bloomsLevel||"understand",reasoning:a.reasoning||"AI generated",confidence:typeof a.confidence=="number"?a.confidence:.7}))}catch(s){return console.error("Error parsing AI response:",s),[]}}static getFallbackObjectives(e){const{title:s,difficulty:n}=e,a=[];return s.toLowerCase().includes("sterilization")&&(a.push({objective:"Identify proper sterilization procedures and protocols",bloomsLevel:"remember",reasoning:"Fundamental knowledge for sterilization courses",confidence:.8}),n!=="beginner"&&a.push({objective:"Evaluate sterilization effectiveness and troubleshoot issues",bloomsLevel:"evaluate",reasoning:"Advanced skill for non-beginner courses",confidence:.7})),s.toLowerCase().includes("safety")&&a.push({objective:"Apply safety protocols in healthcare environments",bloomsLevel:"apply",reasoning:"Practical application for safety courses",confidence:.8}),a.length===0&&a.push({objective:`Demonstrate understanding of ${s.toLowerCase()} concepts and procedures`,bloomsLevel:"understand",reasoning:"Generic objective based on course title",confidence:.6}),a}}er.API_ENDPOINT="/api/ai/openai";var _n=(r,e,s)=>new Promise((n,a)=>{var i=o=>{try{l(s.next(o))}catch(d){a(d)}},c=o=>{try{l(s.throw(o))}catch(d){a(d)}},l=o=>o.done?n(o.value):Promise.resolve(o.value).then(i,c);l((s=s.apply(r,e)).next())});const wn=({courseTitle:r,courseDescription:e,prerequisites:s,linkedPrerequisites:n,difficulty:a,onObjectiveSelect:i,isVisible:c,onClose:l})=>{const[o,d]=f.useState([]),[g,p]=f.useState(!1),[m,S]=f.useState(!1),[N,j]=f.useState(new Set),_=()=>_n(null,null,function*(){if(!r.trim()&&!e.trim()){alert("Please add a course title and description first to generate smart suggestions.");return}p(!0);try{const b=yield er.generateLearningObjectives({title:r,description:e,prerequisites:s.filter(u=>u.trim()),linkedPrerequisites:n,difficulty:a});d(b),S(!0)}catch(b){console.error("Error generating suggestions:",b),alert("Failed to generate AI suggestions. Please try again.")}finally{p(!1)}}),x=b=>{i(b.objective),j(u=>new Set([...u,b.objective]))},v=b=>({remember:"text-blue-600 bg-blue-50",understand:"text-green-600 bg-green-50",apply:"text-yellow-600 bg-yellow-50",analyze:"text-orange-600 bg-orange-50",evaluate:"text-red-600 bg-red-50",create:"text-purple-600 bg-purple-50"})[b]||"text-gray-600 bg-gray-50",C=b=>({remember:"Recall facts and basic concepts",understand:"Explain ideas or concepts",apply:"Use information in new situations",analyze:"Draw connections among ideas",evaluate:"Justify a stand or decision",create:"Produce new or original work"})[b]||"Learning objective";return c?t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(h,{path:se,size:1,className:"text-purple-600"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Smart Learning Objectives"})]}),t.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",children:""})]}),!m&&t.jsxs("div",{className:"text-center py-6",children:[t.jsx(h,{path:se,size:2,className:"text-gray-300 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Get AI-powered suggestions for learning objectives based on your course details"}),t.jsx("button",{onClick:_,disabled:g,className:"inline-flex items-center gap-2 px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#45b8b3] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?t.jsxs(t.Fragment,{children:[t.jsx(h,{path:Zt,size:.8,className:"animate-spin"}),"Generating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(h,{path:se,size:.8,className:"text-purple-600"}),"Generate Smart Suggestions"]})})]}),m&&o.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(h,{path:fr,size:.8,className:"text-blue-500"}),t.jsx("p",{className:"text-sm text-gray-600",children:"AI-generated suggestions based on your course details. Click to add to your objectives."})]}),o.map((b,u)=>t.jsx("div",{className:"border border-gray-200 rounded-lg p-3 hover:border-[#4ECDC4] transition-colors",children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-gray-900 font-medium mb-2",children:b.objective}),t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v(b.bloomsLevel)}`,children:b.bloomsLevel.charAt(0).toUpperCase()+b.bloomsLevel.slice(1)}),t.jsxs("span",{className:"text-xs text-gray-500",children:["Confidence: ",Math.round(b.confidence*100),"%"]})]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("strong",{children:"Why this fits:"})," ",b.reasoning]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[t.jsx("strong",{children:"Bloom's Level:"})," ",C(b.bloomsLevel)]})]}),t.jsx("button",{onClick:()=>x(b),disabled:N.has(b.objective),className:`flex items-center gap-1 px-3 py-1 rounded-md text-sm font-medium transition-colors ${N.has(b.objective)?"bg-green-100 text-green-700 cursor-not-allowed":"bg-[#4ECDC4] text-white hover:bg-[#45b8b3]"}`,children:N.has(b.objective)?t.jsxs(t.Fragment,{children:[t.jsx(h,{path:Ye,size:.6}),"Added"]}):t.jsxs(t.Fragment,{children:[t.jsx(h,{path:J,size:.6}),"Add"]})})]})},u)),t.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:t.jsx("button",{onClick:_,disabled:g,className:"text-sm text-[#4ECDC4] hover:text-[#45b8b3] font-medium transition-colors",children:g?"Generating...":"Generate New Suggestions"})})]}),m&&o.length===0&&t.jsxs("div",{className:"text-center py-4",children:[t.jsx("p",{className:"text-gray-600 mb-3",children:"No suggestions generated. Try updating your course details and generate again."}),t.jsx("button",{onClick:_,disabled:g,className:"text-[#4ECDC4] hover:text-[#45b8b3] font-medium transition-colors",children:"Try Again"})]})]}):null},Cn=()=>{const{state:r}=me(),{updateCourseField:e}=Pe(),{courseData:s}=r,[n,a]=f.useState("text"),[i,c]=f.useState(!1),l=(x,v)=>{const C=[...s.objectives||[]];C[x]=v,e({objectives:C})},o=x=>{const v=(s.objectives||[]).filter((C,b)=>b!==x);e({objectives:v})},d=()=>{e({objectives:[...s.objectives||[],""]})},g=(x,v)=>{const C=[...s.prerequisites||[]];C[x]=v,e({prerequisites:C})},p=x=>{const v=(s.prerequisites||[]).filter((C,b)=>b!==x);e({prerequisites:v})},m=()=>{e({prerequisites:[...s.prerequisites||[],""]})},S=(x,v)=>{const C=[...s.linkedPrerequisites||[]];C[x]=v,e({linkedPrerequisites:C})},N=x=>{const v=(s.linkedPrerequisites||[]).filter((C,b)=>b!==x);e({linkedPrerequisites:v})},j=()=>{e({linkedPrerequisites:[...s.linkedPrerequisites||[],""]})},_=x=>{const v=s.objectives||[""],C=v.findIndex(b=>!b.trim());if(C>=0){const b=[...v];b[C]=x,e({objectives:b})}else e({objectives:[...v,x]})};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Course Overview"}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"course-title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Title *"}),t.jsx("input",{id:"course-title",type:"text",value:s.title,onChange:x=>e({title:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter course title..."})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"course-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Description *"}),t.jsx("textarea",{id:"course-description",rows:4,value:s.description,onChange:x=>e({description:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Describe what learners will gain from this course..."})]}),t.jsxs("div",{children:[t.jsx("span",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Prerequisites"}),t.jsxs("div",{className:"flex space-x-1 mb-4 p-1 bg-gray-100 rounded-lg",children:[t.jsx("button",{onClick:()=>a("text"),className:`flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors ${n==="text"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Text Prerequisites"}),t.jsx("button",{onClick:()=>a("linked"),className:`flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors ${n==="linked"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Library Courses"})]}),n==="text"&&t.jsxs("div",{className:"space-y-3",children:[(s.prerequisites||[]).map((x,v)=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{id:`course-prereq-${v}`,type:"text",value:x,onChange:C=>g(v,C.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:`Prerequisite ${v+1}...`}),(s.prerequisites||[]).length>1&&t.jsx("button",{onClick:()=>p(v),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:t.jsx(h,{path:It,size:1})})]},v)),t.jsxs("button",{onClick:m,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[t.jsx(h,{path:J,size:1,className:"mr-2"}),"Add Text Prerequisite"]})]}),n==="linked"&&t.jsxs("div",{className:"space-y-3",children:[(s.linkedPrerequisites||[]).map((x,v)=>t.jsx("div",{children:t.jsx(Nn,{value:x,onChange:C=>S(v,C),onRemove:()=>N(v),placeholder:"Search for a course in the library..."})},v)),t.jsxs("button",{onClick:j,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[t.jsx(h,{path:J,size:1,className:"mr-2"}),"Add Library Course"]})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("label",{htmlFor:"course-objectives",className:"block text-sm font-medium text-gray-700",children:"Learning Objectives"}),t.jsxs("button",{onClick:()=>c(!i),className:"inline-flex items-center gap-2 px-3 py-1 text-sm text-[#4ECDC4] hover:text-[#45b8b3] font-medium transition-colors",children:[t.jsx(h,{path:se,size:.7,className:"text-purple-600"}),i?"Hide":"Get"," AI Suggestions"]})]}),t.jsx(wn,{courseTitle:s.title,courseDescription:s.description,prerequisites:s.prerequisites||[],linkedPrerequisites:s.linkedPrerequisites||[],difficulty:s.difficulty,onObjectiveSelect:_,isVisible:i,onClose:()=>c(!1)}),(s.objectives||[]).map((x,v)=>t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("input",{id:`course-objective-${v}`,type:"text",value:x,onChange:C=>l(v,C.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:`Learning objective ${v+1}...`}),(s.objectives||[]).length>1&&t.jsx("button",{onClick:()=>o(v),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:t.jsx(h,{path:It,size:1})})]},v)),t.jsxs("button",{onClick:d,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[t.jsx(h,{path:J,size:1,className:"mr-2"}),"Add Objective"]})]})]})};var Sn=Object.defineProperty,En=Object.defineProperties,kn=Object.getOwnPropertyDescriptors,ps=Object.getOwnPropertySymbols,Tn=Object.prototype.hasOwnProperty,On=Object.prototype.propertyIsEnumerable,hs=(r,e,s)=>e in r?Sn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,St=(r,e)=>{for(var s in e||(e={}))Tn.call(e,s)&&hs(r,s,e[s]);if(ps)for(var s of ps(e))On.call(e,s)&&hs(r,s,e[s]);return r},Et=(r,e)=>En(r,kn(e)),Pn=(r,e,s)=>new Promise((n,a)=>{var i=o=>{try{l(s.next(o))}catch(d){a(d)}},c=o=>{try{l(s.throw(o))}catch(d){a(d)}},l=o=>o.done?n(o.value):Promise.resolve(o.value).then(i,c);l((s=s.apply(r,e)).next())});const Dn=()=>{const{state:r}=me(),{updateCourseField:e,bulkCreateCourseStructure:s,setCourseStep:n}=Pe(),{courseData:a}=r,[i,c]=f.useState(null),[l,o]=f.useState(!1),[d,g]=f.useState({modules:3,lessonsPerModule:2,assessments:1}),p=()=>Pn(null,null,function*(){if(!a.title.trim()&&!a.description.trim()){alert("Please add a course title and description first to get AI suggestions.");return}o(!0);try{yield new Promise(j=>setTimeout(j,1500));const N={modules:a.title.toLowerCase().includes("comprehensive")?5:3,lessonsPerModule:a.difficulty==="beginner"?2:3,assessments:a.difficulty==="beginner"?1:2,reasoning:`Based on your "${a.title}" course and ${a.difficulty} difficulty level, we recommend this structure for optimal learning outcomes.`,confidence:.85};c(N)}catch(N){console.error("Error generating AI suggestion:",N),alert("Failed to generate AI suggestion. Please try again.")}finally{o(!1)}}),m=()=>{i&&(g({modules:i.modules,lessonsPerModule:i.lessonsPerModule,assessments:i.assessments}),s(i.modules,i.lessonsPerModule,i.assessments),e({estimatedDuration:i.modules*i.lessonsPerModule*30+i.assessments*15}),n(3))},S=()=>{s(d.modules,d.lessonsPerModule,d.assessments),e({estimatedDuration:d.modules*d.lessonsPerModule*30+d.assessments*15}),n(3)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h4",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Plan Your Course Structure"}),t.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Get AI help to plan your course structure, or design it yourself if you know what you want."})]}),t.jsxs("div",{className:"bg-gradient-to-r from-purple-25 to-blue-25 border border-purple-100 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(h,{path:se,size:1.2,className:"text-purple-500"}),t.jsx("h5",{className:"text-base font-semibold text-gray-800",children:"Option 1: Get Help"})]}),i?t.jsx("div",{className:"bg-white rounded-lg p-3 border border-purple-100",children:t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h6",{className:"font-medium text-gray-800 mb-2 text-sm",children:"AI Recommendation"}),t.jsx("p",{className:"text-xs text-gray-500 mb-3",children:i.reasoning}),t.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[t.jsxs("div",{className:"text-center p-2 bg-purple-25 rounded-md border border-purple-100",children:[t.jsx("div",{className:"text-lg font-bold text-purple-500",children:i.modules}),t.jsx("div",{className:"text-xs text-purple-500",children:"Modules"})]}),t.jsxs("div",{className:"text-center p-2 bg-blue-25 rounded-md border border-blue-100",children:[t.jsx("div",{className:"text-lg font-bold text-blue-500",children:i.lessonsPerModule}),t.jsx("div",{className:"text-xs text-blue-500",children:"Lessons/Module"})]}),t.jsxs("div",{className:"text-center p-2 bg-green-25 rounded-md border border-green-100",children:[t.jsx("div",{className:"text-lg font-bold text-green-500",children:i.assessments}),t.jsx("div",{className:"text-xs text-green-500",children:"Assessments"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[t.jsx(h,{path:xr,size:.6}),"Confidence: ",Math.round(i.confidence*100),"%"]})]}),t.jsxs("button",{onClick:m,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-colors text-sm",children:[t.jsx(h,{path:Ye,size:.7}),"Apply"]})]})}):t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-gray-500 text-sm",children:"Get intelligent suggestions for your course structure based on your title, description, and objectives."}),t.jsx("button",{onClick:p,disabled:l,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-purple-500 text-white rounded-md hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:l?t.jsxs(t.Fragment,{children:[t.jsx(h,{path:Me,size:.8,className:"animate-spin"}),"Analyzing..."]}):t.jsxs(t.Fragment,{children:[t.jsx(h,{path:se,size:.8}),"Get AI Suggestion"]})})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-blue-25 to-green-25 border border-blue-100 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(h,{path:gr,size:1.2,className:"text-blue-500"}),t.jsx("h5",{className:"text-base font-semibold text-gray-800",children:"Option 2: Self-Guided"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"modules-input",className:"block text-xs font-medium text-gray-600 mb-1",children:"Number of Modules"}),t.jsx("input",{id:"modules-input",type:"number",min:"1",max:"10",value:d.modules,onChange:N=>g(j=>Et(St({},j),{modules:parseInt(N.target.value)||1})),className:"w-full px-2 py-1.5 border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"lessons-input",className:"block text-xs font-medium text-gray-600 mb-1",children:"Lessons per Module"}),t.jsx("input",{id:"lessons-input",type:"number",min:"1",max:"10",value:d.lessonsPerModule,onChange:N=>g(j=>Et(St({},j),{lessonsPerModule:parseInt(N.target.value)||1})),className:"w-full px-2 py-1.5 border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"assessments-input",className:"block text-xs font-medium text-gray-600 mb-1",children:"Number of Assessments"}),t.jsx("input",{id:"assessments-input",type:"number",min:"0",max:"10",value:d.assessments,onChange:N=>g(j=>Et(St({},j),{assessments:parseInt(N.target.value)||0})),className:"w-full px-2 py-1.5 border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent text-sm"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[t.jsxs("div",{className:"bg-white border border-gray-200 rounded-md p-2",children:[t.jsx("span",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Estimated Course Duration"}),t.jsxs("div",{className:"text-sm font-semibold text-gray-800",children:["~",d.modules*d.lessonsPerModule*30+d.assessments*15," ","minutes"]})]}),t.jsx("div",{}),t.jsx("div",{className:"flex items-end justify-end",children:t.jsxs("button",{onClick:S,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-colors text-sm",children:[t.jsx(h,{path:Ye,size:.7}),"Apply Custom Structure"]})})]})]})]})},An=({modules:r,expandedModules:e,onToggleModuleExpansion:s,onUpdateModule:n,onUpdateLesson:a,onOpenLessonEditor:i,onLessonReorder:c})=>{const[l,o]=f.useState(!1),d=(m,S)=>{m.dataTransfer.setData("text/plain",S)},g=m=>{m.preventDefault()},p=(m,S,N)=>{m.preventDefault();const j=m.dataTransfer.getData("text/plain");if(j===N)return;const _=r.find(C=>C.id===S);if(!_)return;const x=_.lessons.findIndex(C=>C.id===j),v=_.lessons.findIndex(C=>C.id===N);x!==-1&&v!==-1&&c(S,x,v)};return t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[t.jsxs("div",{className:"mb-4 cursor-pointer flex items-center justify-between",onClick:()=>o(!l),onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),o(!l))},tabIndex:0,role:"button","aria-label":"Toggle Step 2: Build Content",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Step 2: Build Content"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Create modules and lessons for your course"})]}),l&&t.jsx("div",{className:"flex items-center gap-2",children:r.length>0?t.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[t.jsx(h,{path:Ye,size:1}),t.jsxs("span",{className:"text-xs font-medium",children:[r.length," Module",r.length!==1?"s":""]})]}):t.jsxs("div",{className:"flex items-center gap-1 text-red-500",children:[t.jsx(h,{path:ce,size:1}),t.jsx("span",{className:"text-xs font-medium",children:"No Modules"})]})})]}),t.jsx(h,{path:l?ze:Ue,size:1,className:"text-gray-400"})]}),!l&&t.jsx(t.Fragment,{children:r.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(h,{path:ae,size:3,className:"mx-auto text-gray-300 mb-4"}),t.jsx("p",{children:"No course structure found. Please go back to Step 2 to plan your course."})]}):t.jsx("div",{className:"space-y-4",children:r.map((m,S)=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[t.jsx("button",{onClick:()=>s(m.id),className:"text-left hover:text-blue-600 transition-colors",children:t.jsx(h,{path:e.has(m.id)?ze:Ue,size:.8,className:"text-gray-400"})}),t.jsx("input",{type:"text",value:m.title||`Module ${S+1}`,onChange:N=>n(m.id,{title:N.target.value}),className:"font-medium text-gray-900 border-none focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] rounded px-2 py-1 bg-transparent hover:bg-gray-50",placeholder:`Module ${S+1}`})]}),t.jsxs("span",{className:"text-sm text-gray-500",children:[m.lessons.length," lesson",m.lessons.length!==1?"s":""]})]}),e.has(m.id)&&m.lessons.length>0&&t.jsx("div",{className:"ml-6 space-y-2",children:m.lessons.map((N,j)=>t.jsxs("div",{draggable:!0,onDragStart:_=>d(_,N.id),onDragOver:g,onDrop:_=>p(_,m.id,N.id),className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>i(N.id),onKeyDown:_=>{(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),i(N.id))},tabIndex:0,role:"button","aria-label":`Open lesson editor for ${N.title||`Lesson ${j+1}`}`,children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[t.jsx("div",{className:"cursor-grab hover:cursor-grabbing p-1 text-gray-400 hover:text-gray-600",children:t.jsx(h,{path:yr,size:.8})}),t.jsx(h,{path:ae,size:.8,className:"text-gray-400"}),t.jsx("input",{type:"text",value:N.title||`Lesson ${j+1}`,onChange:_=>{a(m.id,N.id,{title:_.target.value})},className:"text-sm font-medium text-gray-700 border-none focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] rounded px-2 py-1 bg-transparent hover:bg-gray-100",placeholder:`Lesson ${j+1}`,onClick:_=>_.stopPropagation(),onFocus:_=>_.stopPropagation()})]}),t.jsx("div",{className:"flex items-center gap-2",children:N.content&&N.content.toString().trim()?t.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"Content Added"}):t.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full",children:"No Content"})})]},N.id))})]},m.id))})})]})},In=({lessonData:r,courseTitle:e,onUpdateLesson:s,onAddModule:n,onAddLesson:a})=>{const[i,c]=f.useState(null),l=()=>{if(!r)return;const x=[];if(r.title&&(x.push(` **Enhanced Title**: "${r.title}"  "${o(r.title)}"`),x.push(` **Learning Objective**: "${d(r.title)}"`)),r.description&&x.push(` **Expanded Description**: "${r.description}"  "${g(r.description)}"`),r.sections.length>0){const v=r.sections[0];v.content?x.push(` **Content Enhancement**: "${v.content.substring(0,50)}..."  "${p(v.content,r.title)}"`):x.push(` **Starter Content**: "${m(r.title)}"`)}else x.push(` **Lesson Structure**: ${S()}`);c(x)},o=x=>{const v=[`Master ${x}: Complete Guide`,`${x} - Essential Skills & Techniques`,`Advanced ${x}: From Beginner to Expert`,`${x} Fundamentals & Best Practices`,`Professional ${x}: Industry Insights`];return v[Math.floor(Math.random()*v.length)]},d=x=>{const v=[`By the end of this lesson, you will understand the core principles of ${x}`,`Learn practical techniques and strategies for mastering ${x}`,`Develop comprehensive knowledge and skills in ${x}`,`Gain hands-on experience with ${x} through real-world examples`,`Master the fundamentals and advanced concepts of ${x}`];return v[Math.floor(Math.random()*v.length)]},g=x=>{const v=[`${x} This comprehensive lesson covers essential concepts, practical applications, and industry best practices.`,`${x} Learn through interactive examples, case studies, and hands-on exercises designed for real-world success.`,`${x} Discover proven strategies, common pitfalls to avoid, and expert tips for mastering this topic.`,`${x} Perfect for both beginners and experienced professionals looking to enhance their skills.`];return v[Math.floor(Math.random()*v.length)]},p=(x,v)=>{const C=[`# ${v}

${x}

## Key Takeaways
 Point 1
 Point 2
 Point 3

## Next Steps
Continue building on these foundations...`,`${x}

## Practical Examples
Here are real-world applications...

## Common Mistakes to Avoid
1. Mistake 1
2. Mistake 2

## Expert Tips
 Tip 1
 Tip 2`,`${x}

## Summary
This lesson covered...

## Practice Exercise
Try this activity to reinforce your learning...

## Additional Resources
Explore these materials for deeper understanding...`];return C[Math.floor(Math.random()*C.length)]},m=x=>{const v=[`# Welcome to ${x}

This lesson will guide you through the essential concepts and practical applications of ${x}.

## What You'll Learn
 Fundamental principles
 Key techniques
 Real-world applications

## Getting Started
Let's begin with the basics...`,`# Introduction to ${x}

${x} is a fundamental concept that forms the foundation for advanced learning in this field.

## Learning Objectives
 Understand core concepts
 Apply basic techniques
 Build practical skills

## Lesson Overview
We'll cover...`,`# ${x} Essentials

In this comprehensive lesson, you'll discover everything you need to know about ${x}.

## Topics Covered
 Basic concepts
 Intermediate techniques
 Advanced applications

## Your Learning Journey
Start here and build your expertise...`];return v[Math.floor(Math.random()*v.length)]},S=()=>{const x=[` **Recommended Structure**:
1. Introduction & Overview
2. Core Concepts
3. Practical Examples
4. Hands-on Exercise
5. Summary & Next Steps`,` **Content Framework**:
 Opening Hook
 Learning Objectives
 Main Content (3-4 sections)
 Practice Activities
 Assessment Questions
 Conclusion`,` **Lesson Flow**:
 Warm-up Activity
 Theory & Concepts
 Real-world Applications
 Interactive Practice
 Knowledge Check
 Future Learning Path`];return x[Math.floor(Math.random()*x.length)]},N=()=>{if(!e){alert("Please enter a course title first to generate structure suggestions.");return}const x=e.toLowerCase();let v=[];x.includes("beginner")||x.includes("fundamental")||x.includes("basic")?v=[{title:"Getting Started",lessons:[{title:"Introduction to the Topic",description:"Basic concepts and overview"},{title:"Essential Tools and Setup",description:"Required software and environment"},{title:"First Steps",description:"Your first practical exercise"}]},{title:"Core Concepts",lessons:[{title:"Understanding the Basics",description:"Fundamental principles"},{title:"Key Techniques",description:"Essential methods and approaches"},{title:"Common Patterns",description:"Frequently used solutions"}]},{title:"Practical Application",lessons:[{title:"Real-World Examples",description:"Case studies and scenarios"},{title:"Hands-on Projects",description:"Build something practical"},{title:"Troubleshooting",description:"Common issues and solutions"}]}]:x.includes("advanced")||x.includes("expert")||x.includes("professional")?v=[{title:"Advanced Theory",lessons:[{title:"Complex Concepts",description:"Advanced theoretical knowledge"},{title:"Advanced Techniques",description:"Sophisticated methods"},{title:"Performance Optimization",description:"Speed and efficiency"}]},{title:"Professional Skills",lessons:[{title:"Industry Best Practices",description:"Professional standards"},{title:"Advanced Problem Solving",description:"Complex scenarios"},{title:"Expert Tips and Tricks",description:"Pro-level insights"}]},{title:"Mastery and Beyond",lessons:[{title:"Cutting-Edge Trends",description:"Latest developments"},{title:"Innovation and Creativity",description:"Pushing boundaries"},{title:"Teaching Others",description:"Sharing your expertise"}]}]:v=[{title:"Foundation",lessons:[{title:"Introduction and Overview",description:"Course overview and objectives"},{title:"Basic Concepts",description:"Fundamental principles"},{title:"Getting Started",description:"First practical steps"}]},{title:"Core Learning",lessons:[{title:"Main Concepts",description:"Key learning areas"},{title:"Practical Examples",description:"Real-world applications"},{title:"Interactive Practice",description:"Hands-on exercises"}]},{title:"Advanced Topics",lessons:[{title:"Complex Scenarios",description:"Advanced applications"},{title:"Best Practices",description:"Industry standards"},{title:"Next Steps",description:"Future learning path"}]}],v.forEach((C,b)=>{const u=`module-${Date.now()}-${b}`;n({title:C.title}),C.lessons.forEach(k=>{a(u,{title:k.title,description:k.description,estimatedDuration:15,isRequired:!0})})}),alert(`Generated ${v.length} modules with ${v.reduce((C,b)=>C+b.lessons.length,0)} lessons!`)},j=()=>{if(!e){alert("Please enter a course title first to generate content ideas.");return}const v=[" **Interactive Quizzes**: Add knowledge checks throughout lessons"," **Learning Objectives**: Clear goals for each lesson"," **Case Studies**: Real-world examples and scenarios"," **Hands-on Exercises**: Practical activities and projects"," **Progress Tracking**: Visual indicators of learning progress"," **Additional Resources**: Links to further reading and tools"," **Summary Points**: Key takeaways at the end of each lesson"," **Discussion Questions**: Topics for group discussion"," **Video Demonstrations**: Screen recordings and tutorials"," **Checklists**: Step-by-step guides and procedures"].join(`

`);if(r&&r.sections.length>0){const C=[...r.sections],b=C[0];b&&b.type==="text"&&(b.content=`# Content Ideas for ${e}

${v}

## How to Use These Ideas

1. **Review each suggestion** and determine relevance to your course
2. **Prioritize** based on your learning objectives
3. **Integrate** into your lesson structure
4. **Customize** to fit your specific topic and audience
5. **Test** with learners to ensure effectiveness`,s({sections:C}),alert("Content ideas have been added to your current lesson!"))}else alert("Please open a lesson first to add content ideas.")},_=x=>{let v="";x.includes(" **Enhanced Title**")?v=`# Preview: ${x.split(' "')[1].split('"')[0]}

This enhanced title is more engaging and descriptive, making it clear what learners will gain from this lesson.`:x.includes(" **Learning Objective**")?v=`# Learning Objective Preview

**New Objective:**
${x.split(' "')[1].split('"')[0]}

This objective clearly defines what learners will accomplish by the end of the lesson.`:x.includes(" **Content Enhancement**")||x.includes(" **Starter Content**")?v=`# Content Preview

**Enhanced Content:**

${x.split(' "')[1].split('"')[0]}

This enhanced content provides a more comprehensive and structured learning experience.`:x.includes(" **Lesson Structure**")&&(v=`# Structure Preview

**Recommended Lesson Structure:**

1. **Introduction & Overview** - Set the context and learning goals
2. **Core Concepts** - Explain fundamental principles
3. **Practical Examples** - Show real-world applications
4. **Hands-on Exercise** - Provide interactive practice
5. **Summary & Next Steps** - Reinforce learning and guide future study

This structure follows proven learning principles and ensures comprehensive coverage.`),v&&alert(`Preview:

${v}

Click "Use this suggestion" to apply it to your lesson.`)};return t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx(h,{path:se,size:1.5,className:"text-blue-600"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI Content Assistant"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Get intelligent suggestions for your course content and structure"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[t.jsxs("button",{onClick:l,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[t.jsx(h,{path:Rt,size:.8}),"Get AI Suggestions"]}),t.jsxs("button",{onClick:N,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[t.jsx(h,{path:se,size:.8}),"Generate Course Structure"]}),t.jsxs("button",{onClick:j,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[t.jsx(h,{path:Rt,size:.8}),"Content Ideas"]})]}),i&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-900",children:"AI Suggestions:"}),i.map((x,v)=>t.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-800",children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsx("div",{className:"flex-1 whitespace-pre-line",children:x}),t.jsx("div",{className:"flex gap-2",children:t.jsx("button",{onClick:()=>_(x),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:"Preview"})})]})},v))]})]})},Rn=({lessonData:r})=>{const e=()=>{if(!r)return;const s=[];let n=0,a=0;if(r.title){a+=20;let o=0;r.title.length>5&&(o+=5),r.title.length<50&&(o+=5),r.title.includes(":")&&(o+=5),(r.title.includes("Guide")||r.title.includes("Complete")||r.title.includes("Essential"))&&(o+=5),n+=o,s.push(` **Title Quality**: ${o}/20 - ${o>=15?"Excellent":o>=10?"Good":"Needs improvement"}`)}if(r.description){a+=20;let o=0;r.description.length>20&&(o+=5),r.description.length<200&&(o+=5),(r.description.includes("learn")||r.description.includes("understand"))&&(o+=5),(r.description.includes("practical")||r.description.includes("hands-on"))&&(o+=5),n+=o,s.push(` **Description Quality**: ${o}/20 - ${o>=15?"Excellent":o>=10?"Good":"Needs improvement"}`)}if(r.sections.length>0){a+=40;let o=0;r.sections.forEach(d=>{d.content&&d.content.length>100&&(o+=8),d.content&&d.content.includes("#")&&(o+=8),d.content&&d.content.includes("")&&(o+=8),d.content&&d.content.includes("##")&&(o+=8)}),n+=Math.min(o,40),s.push(` **Content Quality**: ${Math.min(o,40)}/40 - ${o>=30?"Excellent":o>=20?"Good":"Needs improvement"}`)}a+=20;let i=0;r.sections.length>=3&&(i+=10),r.sections.length>=5&&(i+=10),n+=i,s.push(` **Structure Quality**: ${i}/20 - ${i>=15?"Excellent":i>=10?"Good":"Needs improvement"}`);const c=Math.round(n/a*100);let l="F";c>=90?l="A":c>=80?l="B":c>=70?l="C":c>=60&&(l="D"),s.unshift(` **Overall Quality Score**: ${n}/${a} (${c}%) - Grade: ${l}`),c<70&&s.push(`
 **Improvement Suggestions**:
 Add more detailed content to sections
 Include learning objectives
 Add practical examples and exercises
 Structure content with clear headings
 Include summary points and takeaways`),alert(`Content Quality Report:

${s.join(`
`)}`)};return r?t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx(h,{path:et,size:1.5,className:"text-green-600"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Content Quality Validator"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Analyze and score your lesson content quality"})]})]}),t.jsxs("button",{onClick:e,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[t.jsx(h,{path:Ne,size:.8}),"Validate Content Quality"]}),t.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"What We Check:"}),t.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[t.jsx("li",{children:" Title clarity and engagement"}),t.jsx("li",{children:" Description completeness"}),t.jsx("li",{children:" Content structure and formatting"}),t.jsx("li",{children:" Section organization"}),t.jsx("li",{children:" Overall lesson completeness"})]})]})]}):null};var $n=(r,e,s)=>new Promise((n,a)=>{var i=o=>{try{l(s.next(o))}catch(d){a(d)}},c=o=>{try{l(s.throw(o))}catch(d){a(d)}},l=o=>o.done?n(o.value):Promise.resolve(o.value).then(i,c);l((s=s.apply(r,e)).next())});function Ln(r,e={}){const{delay:s=2e3,enabled:n=!0,onSave:a,onSaveSuccess:i,onSaveError:c}=e,[l,o]=f.useState(!1),[d,g]=f.useState(null),[p,m]=f.useState("idle"),[S,N]=f.useState(null),j=f.useRef(null),_=f.useRef(r),x=f.useCallback(()=>$n(null,null,function*(){if(!(!n||!a||r===_.current))try{o(!0),m("saving"),N(null),yield a(r),_.current=r,g(new Date),m("saved"),o(!1),i==null||i(),setTimeout(()=>{m("idle")},3e3)}catch(C){const b=C instanceof Error?C:new Error("Save failed");N(b),m("error"),o(!1),c==null||c(b),setTimeout(()=>{m("idle"),N(null)},5e3)}}),[r,n,a,i,c]),v=f.useCallback(()=>{m("idle"),N(null)},[]);return f.useEffect(()=>{if(!(!n||!a))return j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{x()},s),()=>{j.current&&clearTimeout(j.current)}},[r,s,n,a,x]),f.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]),{isSaving:l,lastSaved:d,saveStatus:p,error:S,triggerSave:x,resetSaveStatus:v}}const Mn=({status:r,lastSaved:e,className:s=""})=>{const a=(()=>{switch(r){case"saving":return{icon:Zt,text:"Saving...",color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"};case"saved":return{icon:et,text:"Saved",color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200"};case"error":return{icon:Ne,text:"Save failed",color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200"};default:return{icon:br,text:"Ready",color:"text-gray-500",bgColor:"bg-gray-50",borderColor:"border-gray-200"}}})(),i=r==="saving";return r==="idle"?null:t.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-2 rounded-lg border ${a.bgColor} ${a.borderColor} ${s}`,children:[t.jsx(h,{path:a.icon,size:.8,className:`${a.color} ${i?"animate-spin":""}`}),t.jsx("span",{className:`text-sm font-medium ${a.color}`,children:a.text}),e&&r==="saved"&&t.jsx("span",{className:"text-xs text-gray-500",children:e.toLocaleTimeString()})]})};var zn=(r,e,s)=>new Promise((n,a)=>{var i=o=>{try{l(s.next(o))}catch(d){a(d)}},c=o=>{try{l(s.throw(o))}catch(d){a(d)}},l=o=>o.done?n(o.value):Promise.resolve(o.value).then(i,c);l((s=s.apply(r,e)).next())});const Un=({value:r,onChange:e,onSave:s,placeholder:n="Enter your content here...",className:a="",showSaveStatus:i=!0})=>{const c=f.useRef(null),l=f.useCallback(()=>{c.current&&e(c.current.innerHTML)},[e]),{lastSaved:o,saveStatus:d}=Ln(r,{delay:2e3,enabled:!!s,onSave:s||(()=>zn(null,null,function*(){})),onSaveError:g=>{console.error("Autosave failed:",g)}});return t.jsxs("div",{className:`${a}`,children:[i&&s&&t.jsx("div",{className:"mb-3 flex justify-end",children:t.jsx(Mn,{status:d,lastSaved:o})}),t.jsx("div",{ref:c,contentEditable:!0,dangerouslySetInnerHTML:{__html:r},onInput:l,className:"h-full min-h-[300px] p-4 focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent text-gray-900","data-placeholder":n,style:{fontFamily:"Inter, system-ui, sans-serif",fontSize:"16px",lineHeight:"1.6"}})]})};var Fn=Object.defineProperty,qn=Object.defineProperties,Bn=Object.getOwnPropertyDescriptors,fs=Object.getOwnPropertySymbols,Zn=Object.prototype.hasOwnProperty,Vn=Object.prototype.propertyIsEnumerable,xs=(r,e,s)=>e in r?Fn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,kt=(r,e)=>{for(var s in e||(e={}))Zn.call(e,s)&&xs(r,s,e[s]);if(fs)for(var s of fs(e))Vn.call(e,s)&&xs(r,s,e[s]);return r},Tt=(r,e)=>qn(r,Bn(e)),Gn=(r,e,s)=>new Promise((n,a)=>{var i=o=>{try{l(s.next(o))}catch(d){a(d)}},c=o=>{try{l(s.throw(o))}catch(d){a(d)}},l=o=>o.done?n(o.value):Promise.resolve(o.value).then(i,c);l((s=s.apply(r,e)).next())});const Hn=({onFileUpload:r,acceptedTypes:e=["image/*","video/*",".pdf",".doc",".docx",".ppt",".pptx"],maxFileSize:s=50,maxFiles:n=10,className:a=""})=>{const[i,c]=f.useState(!1),[l,o]=f.useState([]),d=f.useRef(null),g=u=>u.type.startsWith("image/")?"image":u.type.startsWith("video/")?"video":"document",p=u=>{switch(u){case"image":return Us;case"video":return zs;case"document":return bt}},m=u=>{if(u===0)return"0 Bytes";const k=1024,D=["Bytes","KB","MB","GB"],M=Math.floor(Math.log(u)/Math.log(k));return parseFloat((u/Math.pow(k,M)).toFixed(2))+" "+D[M]},S=u=>new Promise((k,D)=>{let M=0;const q=setInterval(()=>{M+=Math.random()*20,M>=100?(M=100,clearInterval(q),Math.random()>.1?(o(W=>W.map(H=>H.id===u.id?Tt(kt({},H),{status:"success",progress:100}):H)),k()):(o(W=>W.map(H=>H.id===u.id?Tt(kt({},H),{status:"error",progress:0,error:"Upload failed"}):H)),D(new Error("Upload failed")))):o(W=>W.map(H=>H.id===u.id?Tt(kt({},H),{progress:M}):H))},100)}),N=f.useCallback(u=>Gn(null,null,function*(){const k=q=>{var W;if(q.size>s*1024*1024)return`File size exceeds ${s}MB limit`;const H="."+((W=q.name.split(".").pop())==null?void 0:W.toLowerCase());return e.some(oe=>oe.includes("*")?q.type.startsWith(oe.replace("*","")):oe===H)?null:"File type not supported"},D=Array.from(u);if(l.length+D.length>n){alert(`Maximum ${n} files allowed`);return}const M=[];for(const q of D){const W=k(q);if(W){alert(`${q.name}: ${W}`);continue}const H={id:`file-${Date.now()}-${Math.random()}`,file:q,type:g(q),url:URL.createObjectURL(q),status:"uploading",progress:0};M.push(H)}if(M.length!==0){o(q=>[...q,...M]);for(const q of M)try{yield S(q)}catch(W){console.error("Upload failed:",W)}r([...l,...M])}}),[l,n,r,e,s]),j=f.useCallback(u=>{u.preventDefault(),c(!1),u.dataTransfer.files&&N(u.dataTransfer.files)},[N]),_=f.useCallback(u=>{u.preventDefault(),c(!0)},[]),x=f.useCallback(u=>{u.preventDefault(),c(!1)},[]),v=f.useCallback(u=>{u.target.files&&N(u.target.files)},[N]),C=u=>{o(k=>{const D=k.filter(M=>M.id!==u);return r(D),D})},b=()=>{var u;(u=d.current)==null||u.click()};return t.jsxs("div",{className:`space-y-4 ${a}`,children:[t.jsxs("div",{onDrop:j,onDragOver:_,onDragLeave:x,onClick:b,onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),b())},role:"button",tabIndex:0,className:`
          border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all
          ${i?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}
        `,children:[t.jsx(h,{path:vr,size:3,className:"mx-auto text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drop files here or click to upload"}),t.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Support for images, videos, and documents up to ",s,"MB"]}),t.jsx("div",{className:"flex flex-wrap justify-center gap-2 text-xs text-gray-400",children:e.map((u,k)=>t.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded",children:u},k))})]}),t.jsx("input",{ref:d,type:"file",multiple:!0,accept:e.join(","),onChange:v,className:"hidden"}),l.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Uploaded Files"}),t.jsx("div",{className:"space-y-2",children:l.map(u=>t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(h,{path:p(u.type),size:1.2,className:"text-gray-500"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:u.file.name}),t.jsx("p",{className:"text-xs text-gray-500",children:m(u.file.size)}),u.status==="uploading"&&t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"bg-gray-200 rounded-full h-1",children:t.jsx("div",{className:"bg-blue-600 h-1 rounded-full transition-all duration-300",style:{width:`${u.progress}%`}})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Uploading... ",Math.round(u.progress),"%"]})]}),u.status==="error"&&t.jsx("p",{className:"text-xs text-red-500 mt-1",children:u.error||"Upload failed"})]}),t.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[u.status==="uploading"&&t.jsx(h,{path:Zt,size:.8,className:"text-blue-500 animate-spin"}),u.status==="success"&&t.jsx(h,{path:et,size:.8,className:"text-green-500"}),u.status==="error"&&t.jsx(h,{path:jr,size:.8,className:"text-red-500"}),t.jsx("button",{onClick:k=>{k.stopPropagation(),C(u.id)},className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:t.jsx(h,{path:ce,size:.8})})]})]},u.id))})]})]})};var Wn=Object.defineProperty,Yn=Object.defineProperties,Qn=Object.getOwnPropertyDescriptors,gs=Object.getOwnPropertySymbols,Kn=Object.prototype.hasOwnProperty,Jn=Object.prototype.propertyIsEnumerable,ys=(r,e,s)=>e in r?Wn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,le=(r,e)=>{for(var s in e||(e={}))Kn.call(e,s)&&ys(r,s,e[s]);if(gs)for(var s of gs(e))Jn.call(e,s)&&ys(r,s,e[s]);return r},he=(r,e)=>Yn(r,Qn(e));const Xn=({lessonData:r,onUpdateLesson:e,onClose:s})=>{var n,a,i,c;const[l,o]=f.useState(r.sections.length>0?r.sections[0].id:null),[d,g]=f.useState(!1),[p,m]=f.useState("text"),[S,N]=f.useState(!1),j=()=>{const u={id:`section-${Date.now()}`,type:p,content:"",order:r.sections.length},k=[...r.sections,u];e({sections:k}),o(u.id),g(!1)},_=(u,k)=>{const D=r.sections.map(M=>M.id===u?le(le({},M),k):M);e({sections:D})},x=u=>{const k=r.sections.filter(D=>D.id!==u).map((D,M)=>he(le({},D),{order:M}));if(e({sections:k}),l===u)if(k.length===0)o(null);else if(k.length===1)o(k[0].id);else{const D=r.sections.findIndex(q=>q.id===u),M=D>=k.length?k.length-1:D;o(k[M].id)}},v=u=>{switch(u){case"text":return Kt;case"image":return Us;case"video":return zs;case"file":return bt;case"link":return Nr;default:return Kt}},C=u=>{switch(u){case"text":return"bg-blue-100 text-blue-600";case"image":return"bg-green-100 text-green-600";case"video":return"bg-purple-100 text-purple-600";case"file":return"bg-orange-100 text-orange-600";case"link":return"bg-indigo-100 text-indigo-600";default:return"bg-gray-100 text-gray-600"}},b=u=>{var k,D,M,q,W,H,Ce,oe;switch(u.type){case"text":return t.jsx(Un,{value:u.content,onChange:E=>_(u.id,{content:E}),placeholder:"Start writing your lesson content..."});case"image":return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"text",value:((k=u.metadata)==null?void 0:k.url)||"",onChange:E=>_(u.id,{metadata:he(le({},u.metadata),{url:E.target.value})}),placeholder:"Image URL",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),t.jsx("input",{type:"text",value:((D=u.metadata)==null?void 0:D.alt)||"",onChange:E=>_(u.id,{metadata:he(le({},u.metadata),{alt:E.target.value})}),placeholder:"Alt text for accessibility",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),t.jsx("input",{type:"text",value:((M=u.metadata)==null?void 0:M.caption)||"",onChange:E=>_(u.id,{metadata:he(le({},u.metadata),{caption:E.target.value})}),placeholder:"Image caption (optional)",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsx("div",{className:"border-t pt-4",children:t.jsxs("button",{onClick:()=>N(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[t.jsx(h,{path:J,size:.8}),"Upload Image"]})})]});case"video":return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"text",value:((q=u.metadata)==null?void 0:q.url)||"",onChange:E=>_(u.id,{metadata:he(le({},u.metadata),{url:E.target.value})}),placeholder:"Video URL",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),t.jsx("input",{type:"number",value:((W=u.metadata)==null?void 0:W.duration)||"",onChange:E=>_(u.id,{metadata:he(le({},u.metadata),{duration:parseInt(E.target.value)||0})}),placeholder:"Duration in seconds",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsx("div",{className:"border-t pt-4",children:t.jsxs("button",{onClick:()=>N(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[t.jsx(h,{path:J,size:.8}),"Upload Video"]})})]});case"file":return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"text",value:((H=u.metadata)==null?void 0:H.url)||"",onChange:E=>_(u.id,{metadata:he(le({},u.metadata),{url:E.target.value})}),placeholder:"File URL",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),t.jsx("input",{type:"text",value:((Ce=u.metadata)==null?void 0:Ce.size)||"",onChange:E=>_(u.id,{metadata:he(le({},u.metadata),{size:E.target.value})}),placeholder:"File size (e.g., 2.5 MB)",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsx("div",{className:"border-t pt-4",children:t.jsxs("button",{onClick:()=>N(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-colors",children:[t.jsx(h,{path:J,size:.8}),"Upload File"]})})]});case"link":return t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"text",value:((oe=u.metadata)==null?void 0:oe.url)||"",onChange:E=>_(u.id,{metadata:he(le({},u.metadata),{url:E.target.value})}),placeholder:"Link URL",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),t.jsx("input",{type:"text",value:u.content,onChange:E=>_(u.id,{content:E.target.value}),placeholder:"Link text",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]});default:return null}};return t.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[t.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(h,{path:ae,size:1.5,className:"text-blue-600"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:r.title}),t.jsx("p",{className:"text-sm text-gray-600",children:"Editing lesson content"})]})]}),t.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(h,{path:J,size:1.5,className:"rotate-45"})})]})}),t.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[t.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[t.jsxs("div",{className:"p-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Content Sections"}),t.jsxs("button",{onClick:()=>g(!0),className:"w-full inline-flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[t.jsx(h,{path:J,size:.8}),"Add Section"]})]}),d&&t.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Add New Section"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("select",{value:p,onChange:u=>m(u.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"text",children:"Text"}),t.jsx("option",{value:"image",children:"Image"}),t.jsx("option",{value:"video",children:"Video"}),t.jsx("option",{value:"file",children:"File"}),t.jsx("option",{value:"link",children:"Link"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:j,className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm",children:"Add"}),t.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-3 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors text-sm",children:"Cancel"})]})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[r.sections.map((u,k)=>t.jsx("div",{className:`p-3 rounded-lg border-2 cursor-pointer transition-all ${l===u.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>o(u.id),onKeyDown:D=>{(D.key==="Enter"||D.key===" ")&&(D.preventDefault(),o(u.id))},tabIndex:0,role:"button","aria-label":`Select ${u.type} section ${k+1}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-2 rounded-md ${C(u.type)}`,children:t.jsx(h,{path:v(u.type),size:.8})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:u.type}),t.jsxs("span",{className:"text-xs text-gray-500",children:["#",k+1]})]}),t.jsx("p",{className:"text-xs text-gray-500 truncate",children:u.content||"No content"})]}),t.jsx("button",{onClick:D=>{D.stopPropagation(),x(u.id)},className:"p-1 text-red-400 hover:text-red-600",title:"Delete section",children:t.jsx(h,{path:It,size:.8})})]})},u.id)),r.sections.length===0&&t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(h,{path:ae,size:2,className:"mx-auto text-gray-300 mb-2"}),t.jsx("p",{className:"text-sm",children:"No content sections yet"}),t.jsx("p",{className:"text-xs",children:'Click "Add Section" to get started'})]})]})]}),t.jsx("div",{className:"flex-1 flex flex-col",children:l&&r.sections.find(u=>u.id===l)?t.jsx("div",{className:"flex-1 p-6",children:t.jsx("div",{className:"max-w-4xl mx-auto",children:t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:`p-2 rounded-md ${C(((n=r.sections.find(u=>u.id===l))==null?void 0:n.type)||"text")}`,children:t.jsx(h,{path:v(((a=r.sections.find(u=>u.id===l))==null?void 0:a.type)||"text"),size:1})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 capitalize",children:[(i=r.sections.find(u=>u.id===l))==null?void 0:i.type," ","Section"]}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Edit your"," ",(c=r.sections.find(u=>u.id===l))==null?void 0:c.type," ","content"]})]})]}),b(r.sections.find(u=>u.id===l))]})})}):t.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:t.jsxs("div",{className:"text-center",children:[t.jsx(h,{path:ae,size:3,className:"mx-auto text-gray-300 mb-4"}),t.jsx("p",{children:"Select a section to start editing"})]})})})]}),S&&t.jsx(Hn,{onFileUpload:u=>{if(u.length>0&&l){const k=u[0];_(l,{metadata:{url:k.url}})}N(!1)}})]})};var ea=Object.defineProperty,bs=Object.getOwnPropertySymbols,ta=Object.prototype.hasOwnProperty,sa=Object.prototype.propertyIsEnumerable,vs=(r,e,s)=>e in r?ea(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,js=(r,e)=>{for(var s in e||(e={}))ta.call(e,s)&&vs(r,s,e[s]);if(bs)for(var s of bs(e))sa.call(e,s)&&vs(r,s,e[s]);return r};const ra=()=>{const{state:r}=me(),{updateLesson:e,addModule:s,addLesson:n,updateCourseField:a,updateModule:i}=Pe(),{courseData:c}=r,{closeDrawer:l}=Or(),[o,d]=f.useState(null),[g,p]=f.useState(null),[m,S]=f.useState(new Set),[N,j]=f.useState(!1);f.useEffect(()=>{l()},[l]);const _=f.useCallback(u=>{const k=c.modules.flatMap(D=>D.lessons).find(D=>D.id===u);if(k){const D=k.content&&typeof k.content=="string"?[{id:"1",type:"text",content:k.content,order:0}]:[];p({id:k.id,title:k.title||`Lesson ${k.id}`,description:k.description||"",sections:D,estimatedDuration:k.estimatedDuration||15,isRequired:k.isRequired||!1}),d(u)}},[c.modules]),x=u=>{const k=new Set(m);k.has(u)?k.delete(u):k.add(u),S(k)},v=(u,k,D)=>{const M=c.modules.find(H=>H.id===u);if(!M)return;const q=[...M.lessons],[W]=q.splice(k,1);q.splice(D,0,W),i(u,{lessons:q})},C=u=>{if(!g)return;const k=js(js({},g),u);p(k);const D=c.modules.find(M=>M.lessons.some(q=>q.id===g.id));if(D){const M=k.sections.map(q=>q.content).join(`

`);e(D.id,g.id,{title:k.title,content:M,estimatedDuration:k.estimatedDuration,isRequired:k.isRequired})}},b=()=>{d(null),p(null)};return o&&g?t.jsx(Xn,{lessonData:g,onUpdateLesson:C,onClose:b}):t.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:t.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[t.jsx("div",{className:"mb-4 cursor-pointer flex items-center justify-between",onClick:()=>j(!N),onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),j(!N))},tabIndex:0,role:"button","aria-label":"Toggle Step 1: Course Information",children:t.jsx("div",{className:"flex items-center gap-3",children:t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Step 1: Course Information"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Set your course title and description"})]})})}),!N&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"course-title-step3",className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Title *"}),t.jsx("input",{id:"course-title-step3",type:"text",value:c.title,onChange:u=>a({title:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter your course title..."})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"course-description-step3",className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Description *"}),t.jsx("textarea",{id:"course-description-step3",rows:2,value:c.description,onChange:u=>a({description:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Describe what learners will gain from this course..."})]})]})]}),t.jsx(In,{lessonData:g,courseTitle:c.title,onUpdateLesson:C,onAddModule:s,onAddLesson:n}),t.jsx(Rn,{lessonData:g}),t.jsx(An,{modules:c.modules,expandedModules:m,onToggleModuleExpansion:x,onUpdateModule:i,onUpdateLesson:(u,k,D)=>{e(u,k,D)},onOpenLessonEditor:_,onLessonReorder:v})]})})},na=({collapsedSections:r,toggleSection:e})=>{const{state:s}=me(),{courseData:n}=s,[a,i]=f.useState([]);return f.useEffect(()=>{(()=>{var l;const o=[];if(!n.title||n.title.trim().length<5?o.push({field:"title",status:"error",message:"Course title must be at least 5 characters long"}):n.title.length>100?o.push({field:"title",status:"warning",message:"Course title is quite long, consider shortening it"}):o.push({field:"title",status:"valid",message:"Course title is appropriate length"}),!n.description||n.description.trim().length<20?o.push({field:"description",status:"error",message:"Course description must be at least 20 characters long"}):n.description.length>500?o.push({field:"description",status:"warning",message:"Course description is quite long, consider shortening it"}):o.push({field:"description",status:"valid",message:"Course description is appropriate length"}),n.modules.length===0)o.push({field:"modules",status:"error",message:"Course must have at least one module"});else{const d=n.modules.reduce((g,p)=>g+p.lessons.length,0);d===0?o.push({field:"lessons",status:"error",message:"Course must have at least one lesson"}):d<3?o.push({field:"lessons",status:"warning",message:"Consider adding more lessons for a comprehensive course"}):o.push({field:"lessons",status:"valid",message:`Course has ${d} lessons across ${n.modules.length} modules`})}(l=n.settings)!=null&&l.difficulty?o.push({field:"difficulty",status:"valid",message:`Difficulty level: ${n.settings.difficulty}`}):o.push({field:"difficulty",status:"error",message:"Difficulty level must be set"}),n.assessments&&n.assessments.length>0?o.push({field:"assessments",status:"valid",message:`Course has ${n.assessments.length} assessment(s)`}):o.push({field:"assessments",status:"warning",message:"Consider adding assessments to evaluate learning"}),i(o)})()},[n]),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[t.jsxs("div",{className:"p-4 cursor-pointer flex items-center justify-between hover:bg-gray-50",onClick:()=>e("review"),onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),e("review"))},role:"button",tabIndex:0,"aria-expanded":!r.review,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(h,{path:ae,size:1.2,className:"text-blue-600"}),t.jsx("h5",{className:"text-lg font-medium text-gray-900",children:"Course Review & Validation"})]}),t.jsx(h,{path:r.review?ze:Ue,size:1,className:"text-gray-400"})]}),!r.review&&t.jsx("div",{className:"border-t border-gray-200 p-4 space-y-4",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map((c,l)=>t.jsxs("div",{className:`p-3 rounded-lg border ${c.status==="valid"?"bg-green-50 border-green-200":c.status==="warning"?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200"}`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(h,{path:c.status==="valid"?Ye:c.status==="warning"?Ne:ce,size:.8,className:c.status==="valid"?"text-green-600":c.status==="warning"?"text-yellow-600":"text-red-600"}),t.jsx("span",{className:`text-sm font-medium capitalize ${c.status==="valid"?"text-green-800":c.status==="warning"?"text-yellow-800":"text-red-800"}`,children:c.field})]}),t.jsx("p",{className:`text-xs ${c.status==="valid"?"text-green-700":c.status==="warning"?"text-yellow-700":"text-red-700"}`,children:c.message})]},l))})})]})};var aa=Object.defineProperty,ia=Object.defineProperties,oa=Object.getOwnPropertyDescriptors,Ns=Object.getOwnPropertySymbols,la=Object.prototype.hasOwnProperty,ca=Object.prototype.propertyIsEnumerable,_s=(r,e,s)=>e in r?aa(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,De=(r,e)=>{for(var s in e||(e={}))la.call(e,s)&&_s(r,s,e[s]);if(Ns)for(var s of Ns(e))ca.call(e,s)&&_s(r,s,e[s]);return r},Ae=(r,e)=>ia(r,oa(e));const da=({collapsedSections:r,toggleSection:e,publishSettings:s,setPublishSettings:n})=>t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[t.jsxs("div",{className:"p-4 cursor-pointer flex items-center justify-between hover:bg-gray-50",onClick:()=>e("settings"),onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),e("settings"))},role:"button",tabIndex:0,"aria-expanded":!r.settings,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(h,{path:_r,size:1.2,className:"text-purple-600"}),t.jsx("h5",{className:"text-lg font-medium text-gray-900",children:"Publishing Settings & Access Controls"})]}),t.jsx(h,{path:r.settings?ze:Ue,size:1,className:"text-gray-400"})]}),!r.settings&&t.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"course-visibility",className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Visibility"}),t.jsxs("select",{id:"course-visibility",value:s.isPublic?"public":"private",onChange:a=>n(i=>Ae(De({},i),{isPublic:a.target.value==="public"})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",children:[t.jsx("option",{value:"public",children:"Public - Visible to all users"}),t.jsx("option",{value:"private",children:"Private - Invitation only"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"enrollment-requirements",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enrollment Requirements"}),t.jsxs("select",{id:"enrollment-requirements",value:s.requireEnrollment?"required":"optional",onChange:a=>n(i=>Ae(De({},i),{requireEnrollment:a.target.value==="required"})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",children:[t.jsx("option",{value:"optional",children:"Optional - Users can start immediately"}),t.jsx("option",{value:"required",children:"Required - Approval needed"})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h6",{className:"text-sm font-medium text-gray-900",children:"Access Controls"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{id:"allow-guest-access",type:"checkbox",checked:s.allowGuestAccess,onChange:a=>n(i=>Ae(De({},i),{allowGuestAccess:a.target.checked})),className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),t.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Allow guest access"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{id:"auto-archive",type:"checkbox",checked:s.autoArchive,onChange:a=>n(i=>Ae(De({},i),{autoArchive:a.target.checked})),className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),t.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Auto-archive after completion"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"enrollment-start-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enrollment Start Date"}),t.jsx("input",{id:"enrollment-start-date",type:"date",value:s.enrollmentStartDate,onChange:a=>n(i=>Ae(De({},i),{enrollmentStartDate:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"enrollment-end-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enrollment End Date"}),t.jsx("input",{id:"enrollment-end-date",type:"date",value:s.enrollmentEndDate,onChange:a=>n(i=>Ae(De({},i),{enrollmentEndDate:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent"})]})]})]})]});var ua=Object.defineProperty,ma=Object.defineProperties,pa=Object.getOwnPropertyDescriptors,ws=Object.getOwnPropertySymbols,ha=Object.prototype.hasOwnProperty,fa=Object.prototype.propertyIsEnumerable,Cs=(r,e,s)=>e in r?ua(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,Be=(r,e)=>{for(var s in e||(e={}))ha.call(e,s)&&Cs(r,s,e[s]);if(ws)for(var s of ws(e))fa.call(e,s)&&Cs(r,s,e[s]);return r},Ze=(r,e)=>ma(r,pa(e));const xa=({collapsedSections:r,toggleSection:e,seoSettings:s,setSeoSettings:n})=>t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[t.jsxs("div",{className:"p-4 cursor-pointer flex items-center justify-between hover:bg-gray-50",onClick:()=>e("seo"),onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),e("seo"))},role:"button",tabIndex:0,"aria-expanded":!r.seo,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(h,{path:Ms,size:1.2,className:"text-indigo-600"}),t.jsx("h5",{className:"text-lg font-medium text-gray-900",children:"Course Metadata & SEO Options"})]}),t.jsx(h,{path:r.seo?ze:Ue,size:1,className:"text-gray-400"})]}),!r.seo&&t.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"meta-title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Title"}),t.jsx("input",{id:"meta-title",type:"text",value:s.metaTitle,onChange:a=>n(i=>Ze(Be({},i),{metaTitle:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"SEO-optimized title (50-60 characters)"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.metaTitle.length,"/60 characters"]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"meta-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Description"}),t.jsx("textarea",{id:"meta-description",value:s.metaDescription,onChange:a=>n(i=>Ze(Be({},i),{metaDescription:a.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"SEO-optimized description (150-160 characters)"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.metaDescription.length,"/160 characters"]})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"keywords",className:"block text-sm font-medium text-gray-700 mb-2",children:"Keywords"}),t.jsx("input",{id:"keywords",type:"text",value:s.keywords,onChange:a=>n(i=>Ze(Be({},i),{keywords:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter keywords separated by commas"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"canonical-url",className:"block text-sm font-medium text-gray-700 mb-2",children:"Canonical URL"}),t.jsx("input",{id:"canonical-url",type:"url",value:s.canonicalUrl,onChange:a=>n(i=>Ze(Be({},i),{canonicalUrl:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"https://example.com/course"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"og-image",className:"block text-sm font-medium text-gray-700 mb-2",children:"Open Graph Image"}),t.jsx("input",{id:"og-image",type:"url",value:s.ogImage,onChange:a=>n(i=>Ze(Be({},i),{ogImage:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"https://example.com/image.jpg"})]})]})]})]}),ga=({collapsedSections:r,toggleSection:e,generatePreview:s})=>{var n,a;const{state:i}=me(),{courseData:c}=i;return t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[t.jsxs("div",{className:"p-4 cursor-pointer flex items-center justify-between hover:bg-gray-50",onClick:()=>e("preview"),onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),e("preview"))},role:"button",tabIndex:0,"aria-expanded":!r.preview,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(h,{path:ct,size:1.2,className:"text-green-600"}),t.jsx("h5",{className:"text-lg font-medium text-gray-900",children:"Course Preview & Testing Tools"})]}),t.jsx(h,{path:r.preview?ze:Ue,size:1,className:"text-gray-400"})]}),!r.preview&&t.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("button",{onClick:s,className:"p-4 border border-blue-200 rounded-lg bg-blue-50 hover:border-blue-300 hover:bg-blue-100 transition-colors text-center",children:[t.jsx(h,{path:ct,size:1.5,className:"mx-auto text-blue-600 mb-2"}),t.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Preview Course"})]}),t.jsxs("button",{onClick:()=>alert("Student view simulation would open here"),className:"p-4 border border-green-200 rounded-lg bg-green-50 hover:border-green-300 hover:bg-green-100 transition-colors text-center",children:[t.jsx(h,{path:wr,size:1.5,className:"mx-auto text-green-600 mb-2"}),t.jsx("span",{className:"text-sm font-medium text-green-900",children:"Student View"})]}),t.jsxs("button",{onClick:()=>alert("Course export options would appear here"),className:"p-4 border border-purple-200 rounded-lg bg-purple-50 hover:border-purple-300 hover:bg-purple-100 transition-colors text-center",children:[t.jsx(h,{path:Cr,size:1.5,className:"mx-auto text-purple-600 mb-2"}),t.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Export Course"})]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("h6",{className:"text-sm font-medium text-gray-900 mb-3",children:"Quick Stats"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c.modules.length}),t.jsx("div",{className:"text-xs text-gray-600",children:"Modules"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:c.modules.reduce((l,o)=>l+o.lessons.length,0)}),t.jsx("div",{className:"text-xs text-gray-600",children:"Lessons"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600",children:((n=c.settings)==null?void 0:n.estimatedDuration)||0}),t.jsx("div",{className:"text-xs text-gray-600",children:"Minutes"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-orange-600",children:((a=c.assessments)==null?void 0:a.length)||0}),t.jsx("div",{className:"text-xs text-gray-600",children:"Assessments"})]})]})]})]})]})},ya=({validationStatus:r,isPublishing:e,handlePublish:s})=>t.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx(h,{path:Qe,size:1.5,className:"text-green-600"}),t.jsx("h5",{className:"text-lg font-medium text-green-900",children:"Ready to Publish?"})]}),t.jsxs("div",{className:"space-y-3 mb-6",children:[t.jsx("p",{className:"text-sm text-green-700",children:"Your course has been reviewed and is ready for publication. Here's what will happen:"}),t.jsxs("ul",{className:"text-sm text-green-700 space-y-1 ml-4",children:[t.jsx("li",{children:" Course will be available in the library"}),t.jsx("li",{children:" Users can enroll and start learning"}),t.jsx("li",{children:" Progress tracking will be enabled"}),t.jsx("li",{children:" Certificates will be issued upon completion"})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{onClick:s,disabled:r.status==="error"||e,className:`inline-flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-colors ${r.status==="error"||e?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 shadow-lg"}`,children:[t.jsx(h,{path:e?Me:Qe,size:1.2}),t.jsx("span",{children:e?"Publishing...":"Publish Course Now"})]}),t.jsx("button",{onClick:()=>alert("Course will be saved as draft"),className:"px-4 py-3 text-sm text-gray-600 hover:text-gray-800 underline",children:"Save as Draft"})]})]}),ba=({validationStatus:r})=>t.jsx("div",{className:`p-4 rounded-lg border ${r.status==="error"?"bg-red-50 border-red-200":r.status==="warning"?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(h,{path:r.status==="error"?Ne:r.status==="warning"?Ne:et,size:1.2,className:r.status==="error"?"text-red-600":r.status==="warning"?"text-yellow-600":"text-green-600"}),t.jsxs("div",{children:[t.jsx("h5",{className:`font-medium ${r.status==="error"?"text-red-900":r.status==="warning"?"text-yellow-900":"text-green-900"}`,children:r.status==="error"?"Course Cannot Be Published":r.status==="warning"?"Course Ready with Warnings":"Course Ready to Publish"}),t.jsx("p",{className:`text-sm ${r.status==="error"?"text-red-700":r.status==="warning"?"text-yellow-700":"text-green-700"}`,children:r.message})]})]})});var va=Object.defineProperty,ja=Object.defineProperties,Na=Object.getOwnPropertyDescriptors,Ss=Object.getOwnPropertySymbols,_a=Object.prototype.hasOwnProperty,wa=Object.prototype.propertyIsEnumerable,Es=(r,e,s)=>e in r?va(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,Ca=(r,e)=>{for(var s in e||(e={}))_a.call(e,s)&&Es(r,s,e[s]);if(Ss)for(var s of Ss(e))wa.call(e,s)&&Es(r,s,e[s]);return r},Sa=(r,e)=>ja(r,Na(e)),Ea=(r,e,s)=>new Promise((n,a)=>{var i=o=>{try{l(s.next(o))}catch(d){a(d)}},c=o=>{try{l(s.throw(o))}catch(d){a(d)}},l=o=>o.done?n(o.value):Promise.resolve(o.value).then(i,c);l((s=s.apply(r,e)).next())});const ka=()=>{const{state:r}=me(),{updateCourseField:e}=Pe(),{courseData:s}=r,[n,a]=f.useState([]),[i,c]=f.useState(!1),[l,o]=f.useState({isPublic:!0,requireEnrollment:!1,allowGuestAccess:!1,maxEnrollments:0,enrollmentStartDate:"",enrollmentEndDate:"",courseStartDate:"",courseEndDate:"",autoArchive:!1,archiveAfterDays:30}),[d,g]=f.useState({metaTitle:s.title||"",metaDescription:s.description||"",keywords:"",canonicalUrl:"",ogImage:"",structuredData:!0}),[p,m]=f.useState({review:!1,settings:!1,seo:!1,access:!1,preview:!1});f.useEffect(()=>{(()=>{var C;const b=[];if(!s.title||s.title.trim().length<5?b.push({field:"title",status:"error",message:"Course title must be at least 5 characters long"}):s.title.length>100?b.push({field:"title",status:"warning",message:"Course title is quite long, consider shortening it"}):b.push({field:"title",status:"valid",message:"Course title is appropriate length"}),!s.description||s.description.trim().length<20?b.push({field:"description",status:"error",message:"Course description must be at least 20 characters long"}):s.description.length>500?b.push({field:"description",status:"warning",message:"Course description is quite long, consider shortening it"}):b.push({field:"description",status:"valid",message:"Course description is appropriate length"}),s.modules.length===0)b.push({field:"modules",status:"error",message:"Course must have at least one module"});else{const u=s.modules.reduce((k,D)=>k+D.lessons.length,0);u===0?b.push({field:"lessons",status:"error",message:"Course must have at least one lesson"}):u<3?b.push({field:"lessons",status:"warning",message:"Consider adding more lessons for a comprehensive course"}):b.push({field:"lessons",status:"valid",message:`Course has ${u} lessons across ${s.modules.length} modules`})}(C=s.settings)!=null&&C.difficulty?b.push({field:"difficulty",status:"valid",message:`Difficulty level: ${s.settings.difficulty}`}):b.push({field:"difficulty",status:"error",message:"Difficulty level must be set"}),s.assessments&&s.assessments.length>0?b.push({field:"assessments",status:"valid",message:`Course has ${s.assessments.length} assessment(s)`}):b.push({field:"assessments",status:"warning",message:"Consider adding assessments to evaluate learning"}),a(b)})()},[s]);const S=()=>{const v=n.filter(b=>b.status==="error").length,C=n.filter(b=>b.status==="warning").length;return v>0?{status:"error",message:`${v} issues must be resolved`}:C>0?{status:"warning",message:`${C} warnings to consider`}:{status:"valid",message:"Course is ready to publish"}},N=v=>{m(C=>Sa(Ca({},C),{[v]:!C[v]}))},j=()=>Ea(null,null,function*(){if(S().status==="error"){alert("Please resolve all validation errors before publishing");return}c(!0);try{yield new Promise(C=>setTimeout(C,2e3)),e({isPublished:!0}),alert("Course published successfully! It is now available in the library.")}catch(C){console.error(C),alert("Failed to publish course. Please try again.")}finally{c(!1)}}),_=()=>{var v,C;const b={title:s.title,description:s.description,modules:s.modules.length,lessons:s.modules.reduce((u,k)=>u+k.lessons.length,0),duration:((v=s.settings)==null?void 0:v.estimatedDuration)||0,difficulty:((C=s.settings)==null?void 0:C.difficulty)||"beginner"};alert(`Course Preview:

Title: ${b.title}
Description: ${b.description}
Modules: ${b.modules}
Lessons: ${b.lessons}
Duration: ${b.duration} minutes
Difficulty: ${b.difficulty}`)},x=S();return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-2xl font-semibold text-gray-900",children:"Publish & Settings"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Final review and configuration before publishing your course"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{onClick:_,className:"inline-flex items-center gap-2 px-4 py-2 border border-blue-200 rounded-lg bg-blue-50 hover:border-blue-300 hover:bg-blue-100 transition-colors",children:[t.jsx(h,{path:ct,size:1,className:"text-blue-600"}),t.jsx("span",{className:"font-medium text-blue-900 text-sm",children:"Preview"})]}),t.jsxs("button",{onClick:j,disabled:x.status==="error"||i,className:`inline-flex items-center gap-2 px-6 py-2 rounded-lg font-medium transition-colors ${x.status==="error"||i?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:[t.jsx(h,{path:i?Me:Qe,size:1}),t.jsx("span",{children:i?"Publishing...":"Publish Course"})]})]})]}),t.jsx(ba,{validationStatus:x}),t.jsx(na,{collapsedSections:p,toggleSection:N}),t.jsx(da,{collapsedSections:p,toggleSection:N,publishSettings:l,setPublishSettings:o}),t.jsx(xa,{collapsedSections:p,toggleSection:N,seoSettings:d,setSeoSettings:g}),t.jsx(ga,{collapsedSections:p,toggleSection:N,generatePreview:_}),t.jsx(ya,{validationStatus:x,isPublishing:i,handlePublish:j})]})},tr=()=>{const{state:r}=me(),{setCourseStep:e}=Pe(),{courseStep:s}=r;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[t.jsx(h,{path:Fs,size:1.5,className:"text-[#4ECDC4]"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Course Builder"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Create an engaging, interactive learning experience"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Course Structure"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("span",{className:"text-sm text-gray-500",children:["Step ",s||1," of 4"]}),t.jsx("div",{className:"flex space-x-1",children:[1,2,3,4].map(n=>t.jsx("div",{className:`w-3 h-3 rounded-full ${n<=(s||1)?"bg-[#4ECDC4]":"bg-gray-300"}`,title:n===1?"Course Overview":n===2?"Course Planning":n===3?"Content Builder":"Publish & Settings"},n))})]})]}),t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("button",{onClick:()=>e(Math.max(1,(s||1)-1)),disabled:(s||1)===1,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(h,{path:qs,size:1,className:"mr-1"}),"Previous"]}),t.jsxs("button",{onClick:()=>e(Math.min(4,(s||1)+1)),disabled:(s||1)===4,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] disabled:opacity-50 disabled:cursor-not-allowed",children:["Next",t.jsx(h,{path:Bs,size:1,className:"ml-1"})]})]}),(s||1)===1&&t.jsx(Cn,{}),(s||1)===2&&t.jsx(Dn,{}),(s||1)===3&&t.jsx(ra,{}),(s||1)===4&&t.jsx(ka,{})]})]})},Ta=Object.freeze(Object.defineProperty({__proto__:null,default:tr},Symbol.toStringTag,{value:"Module"}));var Ot=(r,e,s)=>new Promise((n,a)=>{var i=o=>{try{l(s.next(o))}catch(d){a(d)}},c=o=>{try{l(s.throw(o))}catch(d){a(d)}},l=o=>o.done?n(o.value):Promise.resolve(o.value).then(i,c);l((s=s.apply(r,e)).next())});class Pt{static analyzeSDSCoverage(){return Ot(this,null,function*(){const{data:e,error:s}=yield te.from("inventory_items").select("name, category, manufacturer, quantity, status").eq("status","active").or("category.ilike.%chemical%,category.ilike.%solvent%,category.ilike.%acid%,category.ilike.%base%,category.ilike.%reagent%");if(s)throw new Error("Failed to fetch inventory data");const{data:n,error:a}=yield te.from("sds_sheets").select("title, chemical_name, status, priority, risk_level").eq("status","published");if(a)throw new Error("Failed to fetch SDS sheet data from database");return this.performAnalysis(e||[],n||[])})}static performAnalysis(e,s){const n=this.filterChemicalItems(e),a=this.extractChemicalNames(s),i=this.identifyMissingChemicals(n,a),c=this.generatePriorityRecommendations(i),l=n.length,o=s.length,d=i.length,g=l>0?Math.round((l-d)/l*100):0;return{totalChemicals:l,existingSDSSheets:o,missingSDSSheets:d,coveragePercentage:g,missingChemicals:i,priorityRecommendations:c}}static filterChemicalItems(e){return e.filter(s=>{const n=(s.name||"").toLowerCase(),a=(s.category||"").toLowerCase();return(s.quantity||0)>0&&(n.includes("acid")||n.includes("base")||n.includes("solvent")||n.includes("reagent")||n.includes("chemical")||a.includes("chemical")||a.includes("solvent")||a.includes("reagent"))})}static extractChemicalNames(e){return e.map(s=>(s.chemical_name||s.title||"").trim())}static identifyMissingChemicals(e,s){return e.filter(n=>{var a;const i=((a=n.name)==null?void 0:a.toLowerCase())||"";return!s.some(c=>c.toLowerCase().includes(i)||i.includes(c.toLowerCase()))}).map(n=>{var a;return{name:n.name,category:n.category,manufacturer:(a=n.data)==null?void 0:a.manufacturer,priority:this.calculatePriority(n),reason:this.generateMissingReason(n),estimatedRisk:this.estimateRisk(n)}})}static calculatePriority(e){const s=(e.name||"").toLowerCase(),n=(e.category||"").toLowerCase(),a=e.quantity||0;return a>100||s.includes("acid")||s.includes("base")||s.includes("toxic")||s.includes("hazardous")||n.includes("dangerous")?"high":a>50||s.includes("solvent")||s.includes("reagent")||n.includes("chemical")?"medium":"low"}static generateMissingReason(e){const s=(e.name||"").toLowerCase(),n=(e.category||"").toLowerCase();return(e.quantity||0)>100||s.includes("acid")||s.includes("base")||s.includes("toxic")||s.includes("hazardous")||n.includes("dangerous")?"High-risk chemical with significant quantity - immediate SDS required for safety compliance":s.includes("reagent")||n.includes("chemical")?"Chemical reagent or laboratory chemical - SDS needed for proper handling procedures":"Standard chemical inventory item - SDS recommended for complete safety documentation"}static estimateRisk(e){const s=(e.name||"").toLowerCase(),n=(e.category||"").toLowerCase();return(e.quantity||0)>100||s.includes("acid")||s.includes("base")||s.includes("toxic")||s.includes("hazardous")||n.includes("dangerous")?"high":s.includes("reagent")||n.includes("chemical")?"medium":"low"}static generatePriorityRecommendations(e){return e.sort((s,n)=>{const a={high:3,medium:2,low:1};return a[n.priority]-a[s.priority]}).slice(0,10).map(s=>({chemicalName:s.name,priority:s.priority,reason:s.reason,suggestedAction:`Create SDS sheet for ${s.name}`,estimatedTimeToCreate:this.estimateCreationTime(s)}))}static estimateCreationTime(e){let n=1;return e.priority==="high"?n=1.5:e.priority==="medium"&&(n=1.2),e.estimatedRisk==="high"&&(n+=.3),Math.round(30*n)}static getSummaryStats(){return Ot(this,null,function*(){const e=yield this.analyzeSDSCoverage(),s=e.missingChemicals.filter(a=>a.priority==="high").length,n=e.priorityRecommendations.reduce((a,i)=>a+i.estimatedTimeToCreate,0);return{totalChemicals:e.totalChemicals,coveragePercentage:e.coveragePercentage,highPriorityMissing:s,estimatedTotalTime:n}})}static saveAnalysisResults(e,s){return Ot(this,null,function*(){const{data:n,error:a}=yield te.from("sds_gap_analysis").insert({facility_id:e,total_chemicals:s.totalChemicals,existing_sds_sheets:s.existingSDSSheets,missing_sds_sheets:s.missingSDSSheets,coverage_percentage:s.coveragePercentage,high_priority_missing:s.missingChemicals.filter(i=>i.priority==="high").length,medium_priority_missing:s.missingChemicals.filter(i=>i.priority==="medium").length,low_priority_missing:s.missingChemicals.filter(i=>i.priority==="low").length,estimated_total_time:s.priorityRecommendations.reduce((i,c)=>i+c.estimatedTimeToCreate,0),compliance_score:s.coveragePercentage}).select().single();if(a)throw new Error("Failed to save gap analysis");if(s.priorityRecommendations.length>0){const i=s.priorityRecommendations.map(l=>{const o=s.missingChemicals.find(d=>d.name===l.chemicalName);return{facility_id:e,gap_analysis_id:n.id,chemical_name:l.chemicalName,category:(o==null?void 0:o.category)||"unknown",manufacturer:o==null?void 0:o.manufacturer,priority:l.priority,risk_level:(o==null?void 0:o.estimatedRisk)||"medium",reason:l.reason,suggested_action:l.suggestedAction,estimated_time_to_create:l.estimatedTimeToCreate,ai_confidence_score:.8,ai_reasoning:"AI analysis based on inventory and existing SDS coverage"}}),{error:c}=yield te.from("sds_chemical_recommendations").insert(i);if(c)throw new Error("Failed to save recommendations")}})}}var ks=(r,e,s)=>new Promise((n,a)=>{var i=o=>{try{l(s.next(o))}catch(d){a(d)}},c=o=>{try{l(s.throw(o))}catch(d){a(d)}},l=o=>o.done?n(o.value):Promise.resolve(o.value).then(i,c);l((s=s.apply(r,e)).next())});const Oa=()=>{const[r,e]=f.useState(null),[s,n]=f.useState(!1),[a,i]=f.useState(null),c=()=>ks(null,null,function*(){n(!0),i(null);try{const o=yield Pt.analyzeSDSCoverage();e(o);try{const{data:{user:d}}=yield te.auth.getUser();d&&(yield Pt.saveAnalysisResults("your-facility-id",o))}catch(d){console.warn("Failed to save analysis to database:",d)}}catch(o){i(o instanceof Error?o.message:"Failed to analyze SDS coverage"),console.error("SDS analysis error:",o)}finally{n(!1)}}),l=()=>ks(null,null,function*(){try{return yield Pt.getSummaryStats()}catch(o){return console.error("Error getting summary stats:",o),null}});return f.useEffect(()=>{c()},[]),{analysis:r,loading:s,error:a,analyzeCoverage:c,getSummaryStats:l}},Pa=()=>{const{analysis:r,loading:e,error:s,analyzeCoverage:n}=Oa();if(e)return t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-blue-700",children:"Analyzing your SDS sheet coverage..."})]});if(s)return t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[t.jsx(h,{path:Ne,size:1.2,className:"text-red-600"}),t.jsx("h3",{className:"text-sm font-medium text-red-900",children:"Analysis Error"})]}),t.jsx("p",{className:"text-sm text-red-700 mb-4",children:s}),t.jsxs("button",{onClick:n,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[t.jsx(h,{path:Jt,size:1,className:"mr-2"}),"Retry Analysis"]})]});if(!r)return t.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 text-center",children:t.jsx("p",{className:"text-gray-600",children:"No analysis data available"})});const{totalChemicals:a,existingSDSSheets:i,missingSDSSheets:c,coveragePercentage:l,missingChemicals:o,priorityRecommendations:d}=r,g=o.filter(m=>m.priority==="high").length,p=o.filter(m=>m.priority==="medium").length;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[t.jsx(h,{path:se,size:1.2,className:"text-blue-600"}),t.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"Safety Data Sheet (SDS) Compliance Assistant"})]}),t.jsx("p",{className:"text-sm text-blue-700",children:"AI-powered analysis of your chemical inventory vs. SDS sheet coverage"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Chemicals"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a})]}),t.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:t.jsx(h,{path:Ne,size:1.5,className:"text-blue-600"})})]})}),t.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Coverage"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[l,"%"]})]}),t.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:t.jsx(h,{path:et,size:1.5,className:"text-green-600"})})]})})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Coverage Breakdown"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Existing SDS Sheets"}),t.jsx("span",{className:"text-sm font-medium text-green-600",children:i})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Missing SDS Sheets"}),t.jsx("span",{className:"text-sm font-medium text-red-600",children:c})]}),t.jsxs("div",{className:"border-t pt-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"High Priority Missing"}),t.jsx("span",{className:"text-sm font-bold text-red-600",children:g})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Medium Priority Missing"}),t.jsx("span",{className:"text-sm font-bold text-orange-600",children:p})]})]})]})]}),d.length>0&&t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Priority Recommendations"}),t.jsx("div",{className:"space-y-3",children:d.slice(0,5).map((m,S)=>t.jsxs("div",{className:"border-l-4 border-blue-500 pl-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:m.chemicalName}),t.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${m.priority==="high"?"bg-red-100 text-red-800":m.priority==="medium"?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:[m.priority," priority"]})]}),t.jsx("p",{className:"text-xs text-gray-600 mb-1",children:m.reason}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(h,{path:Me,size:.8,className:"text-gray-400"}),t.jsxs("span",{className:"text-xs text-gray-500",children:["Est. ",m.estimatedTimeToCreate," min to create"]})]})]},S))}),d.length>5&&t.jsxs("p",{className:"text-xs text-gray-500 mt-2 text-center",children:["+",d.length-5," more recommendations"]})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs("button",{onClick:n,className:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[t.jsx(h,{path:Jt,size:1,className:"mr-2"}),"Refresh Analysis"]}),t.jsxs("button",{className:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[t.jsx(h,{path:se,size:1,className:"mr-2"}),"Get AI Suggestions"]})]})]})},Da=({contentType:r,title:e,description:s,content:n,chemicalName:a,casNumber:i,isRequired:c,reviewAnnually:l,onTitleChange:o,onDescriptionChange:d,onContentChange:g,onChemicalNameChange:p,onCasNumberChange:m,onRequiredChange:S,onReviewAnnuallyChange:N})=>{const j=()=>{switch(r.id){case"policy":return bt;case"procedure":return ae;case"sds":return Sr;default:return ae}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(h,{path:j(),size:1.5,className:"text-blue-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r.label}),t.jsx("p",{className:"text-sm text-gray-600",children:r.description})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),t.jsx("input",{id:"title",type:"text",value:e,onChange:_=>o(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:`Enter ${r.label.toLowerCase()} title...`})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"is-required",className:"block text-sm font-medium text-gray-700 mb-2",children:"Required"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{id:"is-required",type:"checkbox",checked:c,onChange:_=>S(_.target.checked),className:"h-4 w-4 text-[#4ECDC4] focus:ring-[#4ECDC4] border-gray-300 rounded"}),t.jsx("label",{htmlFor:"is-required",className:"ml-2 text-sm text-gray-700",children:"Mark as required content"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{id:"description",rows:3,value:s,onChange:_=>d(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:`Describe this ${r.label.toLowerCase()}...`})]}),r.id==="sds"&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"chemical-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Chemical Name"}),t.jsx("input",{id:"chemical-name",type:"text",value:a,onChange:_=>p(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter chemical name..."})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"cas-number",className:"block text-sm font-medium text-gray-700 mb-2",children:"CAS Number"}),t.jsx("input",{id:"cas-number",type:"text",value:i,onChange:_=>m(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter CAS number..."})]})]}),(r.id==="policy"||r.id==="procedure")&&t.jsxs("div",{children:[t.jsx("label",{htmlFor:"review-annually",className:"block text-sm font-medium text-gray-700 mb-2",children:"Annual Review"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{id:"review-annually",type:"checkbox",checked:l,onChange:_=>N(_.target.checked),className:"h-4 w-4 text-[#4ECDC4] focus:ring-[#4ECDC4] border-gray-300 rounded"}),t.jsx("label",{htmlFor:"review-annually",className:"ml-2 text-sm text-gray-700",children:"Mark for annual review and updates"})]}),l&&t.jsxs("p",{className:"mt-2 text-xs text-blue-600",children:["This ",r.label.toLowerCase()," will be automatically flagged for annual review and compliance checks."]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),t.jsx("textarea",{id:"content",rows:12,value:n,onChange:_=>g(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent font-mono text-sm",placeholder:`Start writing your ${r.label.toLowerCase()} content...`}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Use markdown formatting for better structure and readability."})]})]})};var Aa=(r,e,s)=>new Promise((n,a)=>{var i=o=>{try{l(s.next(o))}catch(d){a(d)}},c=o=>{try{l(s.throw(o))}catch(d){a(d)}},l=o=>o.done?n(o.value):Promise.resolve(o.value).then(i,c);l((s=s.apply(r,e)).next())});const Ia=({pdfFile:r,onFileSelect:e,onUpload:s,isUploading:n,facilityId:a})=>{const i=f.useRef(null),c=d=>{var g;const p=(g=d.target.files)==null?void 0:g[0];if(p&&p.type==="application/pdf"){if(p.size>10*1024*1024){alert("File size must be less than 10MB");return}e(p)}else p&&alert("Please select a PDF file")},l=()=>{e(null),i.current&&(i.current.value="")},o=()=>Aa(null,null,function*(){r&&(yield s(r))});return a?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(h,{path:lt,size:1.2,className:"text-blue-600"}),t.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"PDF Upload"})]}),r?t.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(h,{path:lt,size:1.5,className:"text-red-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.name}),t.jsxs("p",{className:"text-xs text-gray-500",children:[(r.size/(1024*1024)).toFixed(2)," MB"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:o,disabled:n,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm",children:[t.jsx(h,{path:Er,size:.8}),n?"Uploading...":"Upload"]}),t.jsx("button",{onClick:l,className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Remove file",children:t.jsx(h,{path:ce,size:.8})})]})]})}):t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[t.jsx("input",{ref:i,type:"file",accept:".pdf",onChange:c,className:"hidden"}),t.jsxs("button",{onClick:()=>{var d;return(d=i.current)==null?void 0:d.click()},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[t.jsx(h,{path:J,size:.8}),"Select PDF File"]}),t.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Maximum file size: 10MB. Only PDF files are supported."})]})]}):t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(h,{path:lt,size:1.2,className:"text-yellow-600"}),t.jsx("p",{className:"text-sm text-yellow-800",children:"No facility ID available. Please ensure you are assigned to a facility."})]})})},Ra=({onTranscriptUpdate:r,isRecording:e,onRecordingChange:s})=>{const n=f.useRef(null),a=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert("Speech recognition is not supported in this browser. Please use Chrome or Edge.");return}const l=window.SpeechRecognition||window.webkitSpeechRecognition,o=new l;o.continuous=!0,o.interimResults=!0,o.lang="en-US",o.addEventListener("start",()=>{s(!0)}),o.onresult=d=>{let g="";for(let p=d.resultIndex;p<d.results.length;p++){const m=d.results[p][0].transcript;d.results[p].isFinal&&(g+=m)}g&&r(g)},o.onerror=d=>{console.error("Speech recognition error:",d.error),s(!1),d.error==="no-speech"&&alert("No speech detected. Please try again.")},o.onend=()=>{s(!1)},n.current=o,o.start()},i=()=>{n.current&&(n.current.stop(),n.current=null),s(!1)},c=()=>{e?i():a()};return f.useEffect(()=>()=>{n.current&&n.current.stop()},[]),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(h,{path:$t,size:1.2,className:"text-blue-600"}),t.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Voice Recording"})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("button",{onClick:c,className:`inline-flex items-center gap-2 px-4 py-2 rounded-md transition-colors ${e?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[t.jsx(h,{path:e?Zs:$t,size:.8}),e?"Stop Recording":"Start Recording"]}),e&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),t.jsx("span",{className:"text-sm text-red-600 font-medium",children:"Recording..."})]})]}),t.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[t.jsxs("p",{className:"text-xs text-gray-600",children:[t.jsx("strong",{children:"How it works:"}),' Click "Start Recording" and speak clearly. Your speech will be automatically transcribed and added to the content field. Click "Stop Recording" when finished.']}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[t.jsx("strong",{children:"Note:"})," Speech recognition works best in quiet environments with clear pronunciation."]})]})]})},$a=({onInsertTable:r,onClose:e})=>{const[s,n]=f.useState([["","",""],["","",""],["","",""]]),[a,i]=f.useState(["Column 1","Column 2","Column 3"]),c=()=>{i(S=>[...S,`Column ${S.length+1}`]),n(S=>S.map(N=>[...N,""]))},l=S=>{a.length>1&&(i(N=>N.filter((j,_)=>_!==S)),n(N=>N.map(j=>j.filter((_,x)=>x!==S))))},o=()=>{n(S=>[...S,new Array(a.length).fill("")])},d=S=>{s.length>1&&n(N=>N.filter((j,_)=>_!==S))},g=(S,N,j)=>{const _=[...s];_[S][N]=j,n(_)},p=(S,N)=>{const j=[...a];j[S]=N,i(j)},m=()=>{let S=`

`;S+="| "+a.join(" | ")+` |
`,S+="|"+a.map(()=>"---").join("|")+`|
`,s.forEach(N=>{S+="| "+N.map(j=>j||" ").join(" | ")+` |
`}),S+=`
`,r(S),e()};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg shadow-lg max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(h,{path:Vs,size:1.2,className:"text-blue-600"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Table Builder"})]}),t.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(h,{path:J,size:1.5,className:"rotate-45"})})]})}),t.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsxs("button",{onClick:c,className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm",children:[t.jsx(h,{path:J,size:.8}),"Add Column"]}),t.jsxs("button",{onClick:o,className:"inline-flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm",children:[t.jsx(h,{path:J,size:.8}),"Add Row"]})]}),t.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden mb-6",children:[t.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:t.jsx("h4",{className:"font-medium text-gray-900",children:"Table Preview"})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsx("tr",{children:a.map((S,N)=>t.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",value:S,onChange:j=>p(N,j.target.value),className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.length>1&&t.jsx("button",{onClick:()=>l(N),className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Remove column",children:t.jsx(h,{path:Xt,size:.8})})]})},N))})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((S,N)=>t.jsxs("tr",{children:[S.map((j,_)=>t.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:t.jsx("input",{type:"text",value:j,onChange:x=>g(N,_,x.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter content..."})},_)),t.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-500",children:s.length>1&&t.jsx("button",{onClick:()=>d(N),className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Remove row",children:t.jsx(h,{path:Xt,size:.8})})})]},N))})]})})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[t.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"How to use:"}),t.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[t.jsx("li",{children:" Edit column headers to describe your data"}),t.jsx("li",{children:" Fill in table cells with your content"}),t.jsx("li",{children:" Add or remove columns and rows as needed"}),t.jsx("li",{children:' Click "Insert Table" to add it to your content'})]})]})]}),t.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[t.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:"Cancel"}),t.jsx("button",{onClick:m,className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] border border-transparent rounded-md hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:"Insert Table"})]})]})})},La=({tags:r,onTagsChange:e,content:s,title:n})=>{const[a,i]=f.useState(""),c=f.useMemo(()=>{const p=[],m=(s+" "+n).toLowerCase();return m.includes("safety")&&!r.includes("safety")&&p.push("safety"),m.includes("compliance")&&!r.includes("compliance")&&p.push("compliance"),m.includes("training")&&!r.includes("training")&&p.push("training"),m.includes("procedure")&&!r.includes("procedure")&&p.push("procedure"),m.includes("policy")&&!r.includes("policy")&&p.push("policy"),m.includes("chemical")&&!r.includes("chemical")&&p.push("chemical"),m.includes("hazard")&&!r.includes("hazard")&&p.push("hazard"),m.includes("emergency")&&!r.includes("emergency")&&p.push("emergency"),m.includes("ppe")&&!r.includes("ppe")&&p.push("ppe"),m.includes("equipment")&&!r.includes("equipment")&&p.push("equipment"),m.includes("maintenance")&&!r.includes("maintenance")&&p.push("maintenance"),m.includes("cleaning")&&!r.includes("cleaning")&&p.push("cleaning"),m.includes("disposal")&&!r.includes("disposal")&&p.push("disposal"),m.includes("storage")&&!r.includes("storage")&&p.push("storage"),m.includes("transport")&&!r.includes("transport")&&p.push("transport"),m.includes("inspection")&&!r.includes("inspection")&&p.push("inspection"),m.includes("testing")&&!r.includes("testing")&&p.push("testing"),m.includes("calibration")&&!r.includes("calibration")&&p.push("calibration"),m.includes("documentation")&&!r.includes("documentation")&&p.push("documentation"),m.includes("reporting")&&!r.includes("reporting")&&p.push("reporting"),m.includes("incident")&&!r.includes("incident")&&p.push("incident"),m.includes("investigation")&&!r.includes("investigation")&&p.push("investigation"),m.includes("corrective")&&!r.includes("corrective")&&p.push("corrective"),m.includes("preventive")&&!r.includes("preventive")&&p.push("preventive"),m.includes("risk")&&!r.includes("risk")&&p.push("risk"),m.includes("assessment")&&!r.includes("assessment")&&p.push("assessment"),m.includes("monitoring")&&!r.includes("monitoring")&&p.push("monitoring"),m.includes("supply")&&!r.includes("supply")&&p.push("supply"),m.includes("admin")&&!r.includes("admin")&&p.push("admin"),[...new Set(p)].sort()},[s,n,r]),l=p=>{const m=p.toLowerCase();return!(["stuff","things","random","important","good","useful","new","updated","recent","document","file","content","info","data","item","stuff","thing","random","misc","other","general","basic","simple","easy"].includes(m)||p.length<2||m==="policy"||m==="procedure"||m==="course")},o=p=>{p&&!r.includes(p)&&l(p)&&e([...r,p])},d=p=>{e(r.filter((m,S)=>S!==p))},g=()=>{const p=a.trim();p&&!r.includes(p)&&(l(p)?(e([...r,p]),i("")):alert('Please use a more specific and meaningful tag. Avoid generic terms like "stuff", "things", or "important".'))};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(h,{path:At,size:1.2,className:"text-blue-600"}),t.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Smart Tagging"})]}),r.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2",children:r.map((p,m)=>t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[p,t.jsx("button",{onClick:()=>d(m),className:"ml-1 text-blue-600 hover:text-blue-800 transition-colors",title:"Remove tag",children:t.jsx(h,{path:ce,size:.8})})]},m))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:a,onChange:p=>i(p.target.value),onKeyPress:p=>{p.key==="Enter"&&g()},placeholder:"Add a new tag...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent text-sm"}),t.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm",children:t.jsx(h,{path:J,size:.8})})]}),c.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(h,{path:Rt,size:1,className:"text-yellow-500"}),t.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Suggested Tags"})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((p,m)=>t.jsxs("button",{onClick:()=>o(p),className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm hover:bg-yellow-200 transition-colors",children:["+ ",p]},m))}),t.jsx("p",{className:"text-xs text-gray-500",children:"These tags are automatically suggested based on your content. Click to add them."})]}),t.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[t.jsx("h4",{className:"text-xs font-medium text-gray-900 mb-2",children:"Tag Guidelines:"}),t.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[t.jsx("li",{children:' Use specific, descriptive terms (e.g., "chemical-safety" not "stuff")'}),t.jsx("li",{children:' Avoid generic words like "important", "good", or "new"'}),t.jsx("li",{children:" Tags should help others find and categorize your content"}),t.jsx("li",{children:" Use 2-3 words maximum per tag"})]})]})]})};var Ma=Object.defineProperty,za=Object.defineProperties,Ua=Object.getOwnPropertyDescriptors,Ts=Object.getOwnPropertySymbols,Fa=Object.prototype.hasOwnProperty,qa=Object.prototype.propertyIsEnumerable,Os=(r,e,s)=>e in r?Ma(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,rt=(r,e)=>{for(var s in e||(e={}))Fa.call(e,s)&&Os(r,s,e[s]);if(Ts)for(var s of Ts(e))qa.call(e,s)&&Os(r,s,e[s]);return r},nt=(r,e)=>za(r,Ua(e));const at={COURSES:"courses",POLICIES:"policies",PROCEDURES:"procedures",SDS_SHEETS:"sds_sheets"},it={COURSES:"id, title, description, difficulty, estimated_duration",POLICIES:"id, title, description, policy_type",PROCEDURES:"id, title, description, difficulty",SDS_SHEETS:"id, chemical_name, description, hazard_level"},G={COURSE:"course",POLICY:"policy",PROCEDURE:"procedure",SDS:"sds",ALL:"all"},Ve={[G.ALL]:"All Types",[G.COURSE]:"Courses",[G.POLICY]:"Policies",[G.PROCEDURE]:"Procedures",[G.SDS]:"SDS Sheets"},Le={[G.COURSE]:"bg-green-100 text-green-800",[G.POLICY]:"bg-blue-100 text-blue-800",[G.PROCEDURE]:"bg-purple-100 text-purple-800",[G.SDS]:"bg-orange-100 text-orange-800"},Ba=[{id:1,name:"Foundation",description:"Essential concepts and basics",items:[],order:1},{id:2,name:"Core Learning",description:"Main concepts and practical applications",items:[],order:2},{id:3,name:"Advanced Topics",description:"Complex scenarios and best practices",items:[],order:3}],V={TITLE:"Learning Pathway Builder",AVAILABLE_CONTENT_TITLE:"Available Content",AVAILABLE_CONTENT_DESCRIPTION:"Select content to add to your pathway",PATHWAY_TITLE:"Your Learning Pathway",PATHWAY_DESCRIPTION:"Organized into logical sections for better learning flow",SEARCH_PLACEHOLDER:"Search content...",ADD_BUTTON:"Add",ADD_SECTION_BUTTON:"Add Section",SMART_ORGANIZE_BUTTON:"Smart Organize",ORGANIZING_BUTTON:"Organizing...",NO_ITEMS_MESSAGE:"No items in your pathway yet",NO_ITEMS_INSTRUCTION:"Select content from the left panel to get started",NO_ITEMS_IN_SECTION:"No items in this section",ADD_CONTENT_INSTRUCTION:"Add content from the left panel",NO_CONTENT_FOUND:"No content found matching your criteria",NO_CONTENT_AVAILABLE:"No content available",LOADING_MESSAGE:"Loading available content...",ADD_SECTION_MODAL_TITLE:"Add New Section",SECTION_NAME_LABEL:"Section Name",SECTION_NAME_PLACEHOLDER:"Enter section name...",CANCEL_BUTTON:"Cancel",ADD_SECTION_CONFIRM:"Add Section",SMART_ORGANIZE_MODAL_TITLE:"Smart Organize",SMART_ORGANIZE_DESCRIPTION:"This will reorganize your pathway content automatically using AI. Your current organization will be replaced with an optimized structure.",SMART_ORGANIZE_CONFIRM:"Do you want to continue?",CONTINUE_BUTTON:"Continue",EDIT_SECTION_PROMPT:"Edit section name:"},Za={SMART_ORGANIZE_DELAY:2e3},Dt={CONTENT_TYPE_FILTER:"all",NEW_SECTION_DESCRIPTION:"",EMPTY_ITEMS_ARRAY:[]},xe={DIFFICULTY_BADGE:"bg-gray-100 text-gray-800",SECTION_NUMBER:"bg-blue-600 text-white",ITEM_NUMBER:"bg-blue-500 text-white",MOVE_UP:"",MOVE_DOWN:"",EDIT:""},ot={COURSE:r=>{var e;return nt(rt({},r),{id:r.id,title:r.title,description:(e=r.data)==null?void 0:e.description,difficulty:r.difficulty,estimated_duration:r.estimated_duration,type:G.COURSE,displayTitle:r.title})},POLICY:r=>{var e;return nt(rt({},r),{id:r.id,title:r.title,description:(e=r.data)==null?void 0:e.description,policy_type:r.policy_type,type:G.POLICY,displayTitle:r.title})},PROCEDURE:r=>{var e;return nt(rt({},r),{id:r.id,title:r.title,description:(e=r.data)==null?void 0:e.description,difficulty:r.difficulty,type:G.PROCEDURE,displayTitle:r.title})},SDS:r=>{var e;return nt(rt({},r),{id:r.id,chemical_name:r.chemical_name,description:(e=r.data)==null?void 0:e.description,hazard_level:r.hazard_level,type:G.SDS,displayTitle:r.chemical_name})}};var Va=Object.defineProperty,Ga=Object.defineProperties,Ha=Object.getOwnPropertyDescriptors,Ps=Object.getOwnPropertySymbols,Wa=Object.prototype.hasOwnProperty,Ya=Object.prototype.propertyIsEnumerable,Ds=(r,e,s)=>e in r?Va(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,Qa=(r,e)=>{for(var s in e||(e={}))Wa.call(e,s)&&Ds(r,s,e[s]);if(Ps)for(var s of Ps(e))Ya.call(e,s)&&Ds(r,s,e[s]);return r},Ka=(r,e)=>Ga(r,Ha(e));const Ja=({pathwaySections:r,selectedPathwayItems:e,onPathwayChange:s,movePathwayItem:n,removeFromPathway:a,removeSection:i})=>t.jsx(t.Fragment,{children:r.length===0&&e.length===0?t.jsxs("div",{className:"text-center py-12 text-gray-500",children:[t.jsx(h,{path:ae,size:3,className:"mx-auto mb-3 text-gray-300"}),t.jsx("p",{className:"text-sm",children:V.NO_ITEMS_MESSAGE}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:V.NO_ITEMS_INSTRUCTION})]}):r.length>0?t.jsx("div",{className:"space-y-6",children:r.map(c=>t.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[t.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-4 py-3 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("span",{className:`inline-flex items-center justify-center w-6 h-6 ${xe.SECTION_NUMBER} text-xs font-medium rounded-full`,children:c.order}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-gray-900",children:c.name}),c.description&&t.jsx("p",{className:"text-xs text-gray-600",children:c.description})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>{const l=prompt(V.EDIT_SECTION_PROMPT,c.name);if(l!=null&&l.trim()){const o=r.map(d=>d.id===c.id?Ka(Qa({},d),{name:l.trim()}):d);s(o,e)}},className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:"Edit section",children:xe.EDIT}),t.jsx("button",{onClick:()=>i(c.id),className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Remove section",children:t.jsx(h,{path:ce,size:.8})})]})]})}),t.jsx("div",{className:"p-3 space-y-2",children:c.items.length===0?t.jsxs("div",{className:"text-center py-4 text-gray-400",children:[t.jsx("p",{className:"text-sm",children:V.NO_ITEMS_IN_SECTION}),t.jsx("p",{className:"text-xs",children:V.ADD_CONTENT_INSTRUCTION})]}):e.filter(l=>c.items.includes(l.pathwayId)).map((l,o)=>t.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx("span",{className:`inline-flex items-center justify-center w-5 h-5 ${xe.ITEM_NUMBER} text-xs font-medium rounded-full`,children:o+1}),t.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Le[l.type]||Le[G.SDS]}`,children:l.type.charAt(0).toUpperCase()+l.type.slice(1)})]}),t.jsx("h6",{className:"font-medium text-gray-900",children:l.displayTitle}),l.data&&typeof l.data=="object"&&"description"in l.data&&typeof l.data.description=="string"&&t.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:l.data.description})]}),t.jsxs("div",{className:"flex items-center space-x-1 ml-3",children:[t.jsx("button",{onClick:()=>n(l.pathwayId,"up"),disabled:o===0,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:xe.MOVE_UP}),t.jsx("button",{onClick:()=>n(l.pathwayId,"down"),disabled:o===c.items.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:xe.MOVE_DOWN}),t.jsx("button",{onClick:()=>a(l.pathwayId),className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Remove from pathway",children:t.jsx(h,{path:ce,size:.8})})]})]})},l.pathwayId))})]},c.id))}):t.jsx("div",{className:"space-y-3",children:e.map((c,l)=>t.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx("span",{className:`inline-flex items-center justify-center w-6 h-6 ${xe.SECTION_NUMBER} text-xs font-medium rounded-full`,children:c.order}),t.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Le[c.type]||Le[G.SDS]}`,children:c.type.charAt(0).toUpperCase()+c.type.slice(1)})]}),t.jsx("h6",{className:"font-medium text-gray-900",children:c.displayTitle}),c.data&&typeof c.data=="object"&&"description"in c.data&&typeof c.data.description=="string"&&t.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:c.data.description})]}),t.jsxs("div",{className:"flex items-center space-x-1 ml-3",children:[t.jsx("button",{onClick:()=>n(c.pathwayId,"up"),disabled:l===0,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:xe.MOVE_UP}),t.jsx("button",{onClick:()=>n(c.pathwayId,"down"),disabled:l===e.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:xe.MOVE_DOWN}),t.jsx("button",{onClick:()=>a(c.pathwayId),className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Remove from pathway",children:t.jsx(h,{path:ce,size:.8})})]})]})},c.pathwayId))})}),Xa=({addSection:r,organizePathwaySmartly:e,selectedPathwayItemsLength:s,isOrganizing:n})=>t.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:V.PATHWAY_TITLE}),t.jsx("p",{className:"text-sm text-gray-600",children:V.PATHWAY_DESCRIPTION})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("button",{onClick:r,className:"inline-flex items-center px-3 py-1.5 border border-blue-300 text-xs font-medium rounded-md text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx(h,{path:J,size:.8,className:"mr-1"}),V.ADD_SECTION_BUTTON]}),t.jsxs("button",{onClick:e,disabled:s===0||n,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-purple-500",children:[t.jsx(h,{path:se,size:.8,className:"mr-1"}),n?V.ORGANIZING_BUTTON:V.SMART_ORGANIZE_BUTTON]})]})]})});var ei=Object.defineProperty,ti=Object.defineProperties,si=Object.getOwnPropertyDescriptors,As=Object.getOwnPropertySymbols,ri=Object.prototype.hasOwnProperty,ni=Object.prototype.propertyIsEnumerable,Is=(r,e,s)=>e in r?ei(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,Ie=(r,e)=>{for(var s in e||(e={}))ri.call(e,s)&&Is(r,s,e[s]);if(As)for(var s of As(e))ni.call(e,s)&&Is(r,s,e[s]);return r},Re=(r,e)=>ti(r,si(e)),ai=(r,e,s)=>new Promise((n,a)=>{var i=o=>{try{l(s.next(o))}catch(d){a(d)}},c=o=>{try{l(s.throw(o))}catch(d){a(d)}},l=o=>o.done?n(o.value):Promise.resolve(o.value).then(i,c);l((s=s.apply(r,e)).next())});const ii=({contentType:r,onPathwayChange:e,pathwaySections:s,selectedPathwayItems:n})=>{const[a,i]=f.useState([]),[c,l]=f.useState(!1),[o,d]=f.useState(""),[g,p]=f.useState(Dt.CONTENT_TYPE_FILTER),[m,S]=f.useState(!1),[N,j]=f.useState(!1),[_,x]=f.useState(!1),[v,C]=f.useState(""),b=f.useCallback(()=>ai(null,null,function*(){if(r.id==="pathway"){l(!0);try{const[E,Y,z,Z]=yield Promise.all([te.from(at.COURSES).select(it.COURSES).eq("is_published",!0),te.from(at.POLICIES).select(it.POLICIES).eq("is_published",!0),te.from(at.PROCEDURES).select(it.PROCEDURES).eq("is_published",!0),te.from(at.SDS_SHEETS).select(it.SDS_SHEETS).eq("is_published",!0)]);if(!E.data||!Y.data||!z.data||!Z.data){i([]);return}const re=[...(E.data||[]).map(ot.COURSE),...(Y.data||[]).map(ot.POLICY),...(z.data||[]).map(ot.PROCEDURE),...(Z.data||[]).map(ot.SDS)];i(re)}catch(E){console.error("Error fetching available content:",E)}finally{l(!1)}}}),[r.id]);f.useEffect(()=>{b()},[b]);const u=()=>a.filter(E=>{const Y=E.displayTitle.toLowerCase().includes(o.toLowerCase())||E.data&&typeof E.data=="object"&&"description"in E.data&&typeof E.data.description=="string"&&E.data.description||"".toLowerCase().includes(o.toLowerCase()),z=g===G.ALL||E.type===g;return Y&&z}),k=E=>{if(s.length>0){const Y=s[0],z=Re(Ie({},E),{pathwayId:Date.now()+Math.random(),order:(Y.items.length||0)+1,sectionId:Y.id}),Z=[...n,z],re=s.map(be=>be.id===Y.id?Re(Ie({},be),{items:[...be.items,z.pathwayId]}):be);e(re,Z)}else{const Y=Re(Ie({},E),{pathwayId:Date.now()+Math.random(),order:n.length+1});e(s,[...n,Y])}},D=E=>{const Y=n.filter(Z=>Z.pathwayId!==E),z=s.map(Z=>Re(Ie({},Z),{items:Z.items.filter(re=>re!==E)}));e(z,Y)},M=(E,Y)=>{const z=[...n],Z=z.findIndex(re=>re.pathwayId===E);Y==="up"&&Z>0?[z[Z],z[Z-1]]=[z[Z-1],z[Z]]:Y==="down"&&Z<z.length-1&&([z[Z],z[Z+1]]=[z[Z+1],z[Z]]),z.forEach((re,be)=>{re.order=be+1}),e(s,z)},q=()=>{j(!0)},W=()=>{if(v.trim()){const E={id:Date.now(),name:v.trim(),description:Dt.NEW_SECTION_DESCRIPTION,items:[...Dt.EMPTY_ITEMS_ARRAY],order:s.length+1};e([...s,E],n),C(""),j(!1)}},H=E=>{const Y=s.filter(z=>z.id!==E);e(Y,n)},Ce=()=>{x(!0)},oe=()=>{S(!0),setTimeout(()=>{const E=Ba.map(z=>Re(Ie({},z),{items:[...z.items]})),Y=n.map((z,Z)=>{const re=Math.floor(Z/n.length*3);return Re(Ie({},z),{sectionId:E[re].id,order:Z+1})});E.forEach(z=>{z.items=Y.filter(Z=>Z.sectionId===z.id).map(Z=>Z.pathwayId)}),e(E,Y),S(!1),x(!1)},Za.SMART_ORGANIZE_DELAY)};return r.id!=="pathway"?null:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(h,{path:ae,size:1.2,className:"text-blue-600"}),t.jsx("h3",{className:"text-sm font-medium text-gray-900",children:V.TITLE})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[t.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:[t.jsx("h4",{className:"font-medium text-gray-900",children:V.AVAILABLE_CONTENT_TITLE}),t.jsx("p",{className:"text-sm text-gray-600",children:V.AVAILABLE_CONTENT_DESCRIPTION})]}),t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex gap-2 mb-4",children:[t.jsx("input",{type:"text",placeholder:V.SEARCH_PLACEHOLDER,value:o,onChange:E=>d(E.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsxs("select",{value:g,onChange:E=>p(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:G.ALL,children:Ve[G.ALL]}),t.jsx("option",{value:G.COURSE,children:Ve[G.COURSE]}),t.jsx("option",{value:G.POLICY,children:Ve[G.POLICY]}),t.jsx("option",{value:G.PROCEDURE,children:Ve[G.PROCEDURE]}),t.jsx("option",{value:G.SDS,children:Ve[G.SDS]})]})]}),t.jsx("div",{className:"max-h-96 overflow-y-auto",children:c?t.jsxs("div",{className:"text-center py-4",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:V.LOADING_MESSAGE})]}):u().length===0?t.jsx("div",{className:"p-4 text-center text-gray-500",children:o||g!==G.ALL?V.NO_CONTENT_FOUND:V.NO_CONTENT_AVAILABLE}):t.jsx("div",{className:"divide-y divide-gray-200",children:u().map(E=>t.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Le[E.type]||Le[G.SDS]}`,children:E.type.charAt(0).toUpperCase()+E.type.slice(1)}),E.difficulty&&t.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${xe.DIFFICULTY_BADGE}`,children:E.difficulty})]}),t.jsx("h5",{className:"font-medium text-gray-900 truncate",children:E.displayTitle}),E.data&&typeof E.data=="object"&&"description"in E.data&&typeof E.data.description=="string"&&t.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:E.data.description}),t.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[E.estimated_duration&&t.jsxs("span",{children:[" ",E.estimated_duration," min"]}),E.hazard_level&&t.jsxs("span",{children:[" Level ",E.hazard_level]})]})]}),t.jsxs("button",{onClick:()=>k(E),className:"ml-3 flex-shrink-0 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[t.jsx(h,{path:J,size:.8,className:"mr-1"}),V.ADD_BUTTON]})]})},`${E.type}-${E.id}`))})})]})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[t.jsx(Xa,{addSection:q,organizePathwaySmartly:Ce,selectedPathwayItemsLength:n.length,isOrganizing:m}),t.jsx("div",{className:"p-4",children:t.jsx(Ja,{pathwaySections:s,selectedPathwayItems:n,onPathwayChange:e,movePathwayItem:M,removeFromPathway:D,removeSection:H})})]})]}),N&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg shadow-lg max-w-md w-full mx-4",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:V.ADD_SECTION_MODAL_TITLE})}),t.jsxs("div",{className:"p-6",children:[t.jsx("label",{htmlFor:"section-name-input",className:"block text-sm font-medium text-gray-700 mb-2",children:V.SECTION_NAME_LABEL}),t.jsx("input",{id:"section-name-input",type:"text",value:v,onChange:E=>C(E.target.value),placeholder:V.SECTION_NAME_PLACEHOLDER,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",onKeyPress:E=>{E.key==="Enter"&&W()}})]}),t.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[t.jsx("button",{onClick:()=>{j(!1),C("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:V.CANCEL_BUTTON}),t.jsx("button",{onClick:W,disabled:!v.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] border border-transparent rounded-md hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4] disabled:opacity-50 disabled:cursor-not-allowed",children:V.ADD_SECTION_CONFIRM})]})]})}),_&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg shadow-lg max-w-md w-full mx-4",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:V.SMART_ORGANIZE_MODAL_TITLE})}),t.jsxs("div",{className:"p-6",children:[t.jsx("p",{className:"text-sm text-gray-600",children:V.SMART_ORGANIZE_DESCRIPTION}),t.jsx("p",{className:"text-sm text-gray-600 mt-2",children:V.SMART_ORGANIZE_CONFIRM})]}),t.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[t.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:V.CANCEL_BUTTON}),t.jsx("button",{onClick:oe,className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] border border-transparent rounded-md hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:V.CONTINUE_BUTTON})]})]})})]})};var Ge=(r,e,s)=>new Promise((n,a)=>{var i=o=>{try{l(s.next(o))}catch(d){a(d)}},c=o=>{try{l(s.throw(o))}catch(d){a(d)}},l=o=>o.done?n(o.value):Promise.resolve(o.value).then(i,c);l((s=s.apply(r,e)).next())});const oi=({contentType:r})=>{const{state:e}=me(),{setActiveTab:s}=Pe(),{activeTab:n}=e,{currentUser:a}=Dr(),[i,c]=f.useState(""),[l,o]=f.useState(""),[d,g]=f.useState(""),[p,m]=f.useState(""),[S,N]=f.useState(""),[j,_]=f.useState(!1),[x,v]=f.useState(!1),[C,b]=f.useState(null),[u,k]=f.useState(!1),[D,M]=f.useState(!1),[q,W]=f.useState(!1),[H,Ce]=f.useState([]),[oe,E]=f.useState([]),[Y,z]=f.useState([]),Z=f.useCallback(()=>Ge(null,null,function*(){if(!(!(a!=null&&a.facility_id)||!i.trim()))try{const Q={title:`Annual Review Required: ${i}`,description:`This ${r.id==="procedure"?"procedure":"policy"} "${i}" is marked for annual review and updates. Please review the content, verify accuracy, and update as needed to maintain compliance and best practices.`,category:"compliance",difficulty:"medium",estimatedDuration:45,impact:"high",effort:"medium",points:150,aiReasoning:`${r.id==="procedure"?"Procedure":"Policy"} "${i}" requires annual review to ensure content accuracy, regulatory compliance, and alignment with current best practices.`,prerequisites:["Access to content","Understanding of current regulations"],expectedOutcomes:["Content reviewed and updated","Regulatory compliance verified","Best practices alignment confirmed","Documentation updated with review date"],complianceDeadline:new Date(Date.now()+31536e6).toISOString(),facilityId:a.facility_id,assignedTo:a.id,status:"pending",priority:"high",tags:["compliance","annual-review","regulatory"]},{data:X,error:de}=yield te.from("ai_challenge_completions").insert(Q).select().single();if(de){console.error("Error creating annual review challenge:",de);return}console.log("Annual review challenge created:",X)}catch(Q){console.error("Error creating annual review challenge:",Q)}}),[a==null?void 0:a.facility_id,a==null?void 0:a.id,i,r.id]);f.useEffect(()=>{x&&i.trim()&&Z()},[x,i,Z]);const re=Q=>Ge(null,null,function*(){k(!0);try{const X=a==null?void 0:a.facility_id;if(!X)throw new Error("No facility ID available. Please ensure you are assigned to a facility.");const de=`sds-sheets/${Date.now()}-${Q.name}`,{error:tt}=yield te.storage.from("documents").upload(de,Q);if(tt)throw new Error(`Upload failed: ${tt.message}`);const{data:{publicUrl:or}}=te.storage.from("documents").getPublicUrl(de),lr={facility_id:X,title:i||`SDS Sheet - ${p||"Unknown Chemical"}`,description:l,content:d,chemical_name:p,cas_number:S,pdf_file_path:or,pdf_file_size:Q.size,pdf_uploaded_at:new Date().toISOString(),status:"draft",priority:"medium",risk_level:"medium"},{error:Ht}=yield te.from("sds_sheets").insert(lr).select().single();if(Ht)throw new Error(`Database save failed: ${Ht.message}`);alert("PDF uploaded and saved successfully!")}catch(X){console.error("Upload failed:",X),alert(`Upload failed: ${X instanceof Error?X.message:"Unknown error"}`)}finally{k(!1)}}),be=Q=>{const X=document.getElementById("content-main-tab");if(X){const de=X.selectionStart,tt=d.substring(0,de)+Q+d.substring(de);g(tt),W(!1),setTimeout(()=>{X.focus(),X.setSelectionRange(de+Q.length,de+Q.length)},0)}},sr=Q=>{g(X=>X+(X?" ":"")+Q)},rr=(Q,X)=>{z(Q),E(X)},nr=()=>Ge(null,null,function*(){console.log("Saving policy:",{title:i,description:l,content:d,tags:H})}),ar=()=>Ge(null,null,function*(){console.log("Saving procedure:",{title:i,description:l,content:d,tags:H})}),ir=()=>Ge(null,null,function*(){console.log("Saving pathway:",{pathwaySections:Y,selectedPathwayItems:oe})});return t.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:["content","pathway","ai"].map(Q=>t.jsx("button",{onClick:()=>s(Q),className:`py-2 px-1 border-b-2 font-medium text-sm capitalize ${n===Q?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:Q},Q))})}),n==="content"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx(Da,{contentType:r,title:i,description:l,content:d,chemicalName:p,casNumber:S,isRequired:j,reviewAnnually:x,onTitleChange:c,onDescriptionChange:o,onContentChange:g,onChemicalNameChange:m,onCasNumberChange:N,onRequiredChange:_,onReviewAnnuallyChange:v}),r.id==="sds"&&t.jsx(Ia,{pdfFile:C,onFileSelect:b,onUpload:re,isUploading:u,facilityId:a==null?void 0:a.facility_id}),t.jsx(Ra,{onTranscriptUpdate:sr,isRecording:D,onRecordingChange:M}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(h,{path:Vs,size:1.2,className:"text-blue-600"}),t.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Table Builder"})]}),t.jsxs("button",{onClick:()=>W(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[t.jsx(h,{path:J,size:.8}),"Create Table"]})]}),t.jsx(La,{tags:H,onTagsChange:Ce,content:d,title:i})]}),n==="pathway"&&t.jsx(ii,{contentType:r,onPathwayChange:rr,pathwaySections:Y,selectedPathwayItems:oe}),n==="ai"&&t.jsx("div",{className:"space-y-4",children:r.id==="sms"?t.jsx(Pa,{}):t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[t.jsx(h,{path:se,size:1.2,className:"text-blue-600"}),t.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"AI Assistant"})]}),t.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Get AI-powered suggestions to improve your content, identify gaps, and enhance learning outcomes."}),t.jsxs("button",{className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[t.jsx(h,{path:se,size:1,className:"mr-2"}),"Get AI Suggestions"]})]})}),t.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:[t.jsx(h,{path:ct,size:1,className:"mr-2"}),"Preview"]}),t.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",onClick:r.id==="pathway"?ir:r.id==="policy"?nr:ar,children:[t.jsx(h,{path:Gs,size:1,className:"mr-2"}),r.id==="pathway"?"Save Pathway":"Save Draft"]})]}),t.jsxs("button",{className:"inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[t.jsx(h,{path:Qe,size:1,className:"mr-2"}),r.id==="pathway"?"Publish Pathway":"Publish to Library"]})]}),q&&t.jsx($a,{onInsertTable:be,onClose:()=>W(!1)})]})},li=f.memo(({title:r,description:e,content:s,onTitleChange:n,onDescriptionChange:a,onContentChange:i})=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"content-title-tab",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),t.jsx("input",{id:"content-title-tab",type:"text",value:r,onChange:c=>n(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter content title..."})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"content-description-tab",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{id:"content-description-tab",rows:2,value:e,onChange:c=>a(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter content description..."})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"content-main-tab",className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),t.jsx("textarea",{id:"content-main-tab",rows:12,value:s,onChange:c=>i(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter your content here..."})]})]}));li.displayName="CommonEditorFields";const ci=f.memo(({onSave:r,onPublish:e,onAIAssistant:s,isSaving:n=!1,isPublishing:a=!1,canPublish:i=!0})=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 border-t border-gray-200",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("button",{onClick:r,disabled:n,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4] disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(h,{path:Gs,size:1,className:"mr-2"}),n?"Saving...":"Save"]}),i&&t.jsxs("button",{onClick:e,disabled:a,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(h,{path:Qe,size:1,className:"mr-2"}),a?"Publishing...":"Publish"]})]}),t.jsx("div",{className:"flex items-center space-x-3",children:t.jsxs("button",{onClick:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:[t.jsx(h,{path:se,size:1,className:"mr-2"}),"AI Assistant"]})})]}));ci.displayName="ContentToolbar";const di=f.memo(({fontFamily:r,fontSize:e,textColor:s,onFontFamilyChange:n,onFontSizeChange:a,onTextColorChange:i,onReset:c,onBold:l,onItalic:o,onHeading2:d,onHeading3:g,onBulletList:p,onNumberedList:m,onAddNote:S,onAddWarning:N,onAddCheck:j,onInsertLink:_,onShowTableBuilder:x,onAISuggestions:v})=>t.jsxs("div",{className:"bg-gray-50 border-b border-gray-300 p-2 flex flex-wrap items-center gap-1",children:[t.jsxs("select",{value:r,onChange:C=>n(C.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",title:"Font Family",children:[t.jsxs("optgroup",{label:"Modern Sans-Serif",children:[t.jsx("option",{value:"Inter",children:"Inter - Clean & Modern"}),t.jsx("option",{value:"Roboto",children:"Roboto - Google's Design Font"}),t.jsx("option",{value:"Open Sans",children:"Open Sans - Professional & Readable"}),t.jsx("option",{value:"Lato",children:"Lato - Friendly & Approachable"}),t.jsx("option",{value:"Nunito",children:"Nunito - Rounded & Modern"})]}),t.jsxs("optgroup",{label:"Serif & Display",children:[t.jsx("option",{value:"Merriweather",children:"Merriweather - Elegant Serif"}),t.jsx("option",{value:"Playfair Display",children:"Playfair Display - Classic Serif"}),t.jsx("option",{value:"Georgia",children:"Georgia - Web-Safe Serif"})]}),t.jsxs("optgroup",{label:"Specialty",children:[t.jsx("option",{value:"Source Code Pro",children:"Source Code Pro - For Code"}),t.jsx("option",{value:"Courier New",children:"Courier New - Monospace"})]})]}),t.jsxs("select",{value:e,onChange:C=>a(C.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",title:"Font Size",children:[t.jsx("option",{value:"text-xs",children:"Small (12px)"}),t.jsx("option",{value:"text-sm",children:"Regular (14px)"}),t.jsx("option",{value:"text-base",children:"Medium (16px)"}),t.jsx("option",{value:"text-lg",children:"Large (18px)"}),t.jsx("option",{value:"text-xl",children:"Extra Large (20px)"})]}),t.jsxs("select",{value:s,onChange:C=>i(C.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",title:"Text Color",children:[t.jsx("option",{value:"text-gray-900",children:"Default Black"}),t.jsx("option",{value:"text-gray-700",children:"Dark Gray"}),t.jsx("option",{value:"text-blue-600",children:"Professional Blue"}),t.jsx("option",{value:"text-green-600",children:"Success Green"}),t.jsx("option",{value:"text-red-600",children:"Warning Red"}),t.jsx("option",{value:"text-purple-600",children:"Creative Purple"}),t.jsx("option",{value:"text-orange-600",children:"Attention Orange"}),t.jsx("option",{value:"text-indigo-600",children:"Trust Indigo"})]}),t.jsx("button",{onClick:c,className:"px-2 py-1 text-xs text-gray-600 hover:text-gray-800 hover:bg-gray-200 rounded transition-colors",title:"Reset to Default Font",children:"Reset"}),t.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),t.jsx("button",{onClick:l,className:"p-2 text-sm font-bold text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Bold (Ctrl+B)",children:"B"}),t.jsx("button",{onClick:o,className:"p-2 text-sm italic text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Italic (Ctrl+I)",children:"I"}),t.jsx("button",{onClick:d,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Heading 2",children:"H2"}),t.jsx("button",{onClick:g,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Heading 3",children:"H3"}),t.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),t.jsx("button",{onClick:p,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Bullet List",children:""}),t.jsx("button",{onClick:m,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Numbered List",children:"1."}),t.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),t.jsx("button",{onClick:S,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Add Note Block",children:""}),t.jsx("button",{onClick:N,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Add Warning Block",children:""}),t.jsx("button",{onClick:j,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Add Check Block",children:""}),t.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),t.jsx("button",{onClick:x,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Create Modern Table",children:""}),t.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),t.jsx("button",{onClick:_,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Insert Link (Ctrl+K)",children:""}),t.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),t.jsx("button",{onClick:v,className:"p-2 text-sm text-purple-700 bg-purple-100 hover:bg-purple-200 rounded transition-colors",title:"Get AI suggestions for improving your text",children:""}),t.jsx("button",{onClick:()=>{},className:"p-2 text-sm text-blue-700 bg-blue-100 hover:bg-blue-200 rounded transition-colors",title:"Preview lesson content",children:""})]}));di.displayName="TextFormatting";const ui=f.memo(({pdfFile:r,isRecording:e,onPdfFileChange:s,onPdfUpload:n,onVoiceToggle:a,pdfUploading:i=!1,showVoiceRecording:c=!0,showPdfUpload:l=!0})=>{const o=f.useRef(null),d=f.useCallback(p=>{var m;const S=(m=p.target.files)==null?void 0:m[0];S&&S.type==="application/pdf"&&s(S)},[s]),g=f.useCallback(()=>{s(null),o.current&&(o.current.value="")},[s]);return t.jsxs("div",{className:"space-y-4",children:[l&&t.jsxs("div",{children:[t.jsx("label",{htmlFor:"pdf-upload",className:"block text-sm font-medium text-gray-700 mb-2",children:"PDF Document"}),t.jsx("input",{id:"pdf-upload",ref:o,type:"file",accept:".pdf",onChange:d,className:"hidden"}),r?t.jsx("div",{className:"border border-gray-300 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(h,{path:lt,size:1.5,className:"text-red-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.name}),t.jsxs("p",{className:"text-xs text-gray-500",children:[(r.size/1024/1024).toFixed(2)," MB"]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:n,disabled:i,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4] disabled:opacity-50",children:i?"Uploading...":"Upload"}),t.jsx("button",{onClick:g,className:"inline-flex items-center p-1.5 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:t.jsx(h,{path:ce,size:1})})]})]})}):t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[t.jsx(h,{path:J,size:1.5,className:"mx-auto text-gray-400 mb-3"}),t.jsx("p",{className:"text-gray-600 mb-2",children:"Upload PDF Document"}),t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Supports PDF files (max 10MB)"}),t.jsxs("button",{onClick:()=>{var p;return(p=o.current)==null?void 0:p.click()},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:[t.jsx(h,{path:J,size:1,className:"mr-2"}),"Select PDF"]})]})]}),c&&t.jsxs("div",{children:[t.jsx("label",{htmlFor:"voice-input",className:"block text-sm font-medium text-gray-700 mb-2",children:"Voice Input"}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("button",{onClick:a,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md ${e?"text-white bg-red-600 hover:bg-red-700":"text-white bg-[#4ECDC4] hover:bg-[#3db8b0]"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]`,children:[t.jsx(h,{path:e?Zs:$t,size:1,className:"mr-2"}),e?"Stop Recording":"Start Recording"]}),e&&t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),t.jsx("span",{className:"text-sm text-red-600",children:"Recording..."})]})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Use voice input to dictate your content. Click the microphone button to start/stop recording."})]})]})});ui.displayName="MediaUploader";var mi=Object.defineProperty,Rs=Object.getOwnPropertySymbols,pi=Object.prototype.hasOwnProperty,hi=Object.prototype.propertyIsEnumerable,$s=(r,e,s)=>e in r?mi(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,fi=(r,e)=>{for(var s in e||(e={}))pi.call(e,s)&&$s(r,s,e[s]);if(Rs)for(var s of Rs(e))hi.call(e,s)&&$s(r,s,e[s]);return r};const xi=f.lazy(()=>Hs(()=>import("./PolicyEditor-Cm26BBrY.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),gi=f.lazy(()=>Hs(()=>Promise.resolve().then(()=>Ta),void 0)),yi=()=>t.jsxs("div",{className:"flex items-center justify-center p-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#4ECDC4]"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Loading editor..."})]}),bi=f.memo(({contentType:r,title:e,description:s,content:n,onTitleChange:a,onDescriptionChange:i,onContentChange:c,onSave:l,onPublish:o,onAIAssistant:d})=>{const g=()=>{const p={title:e,description:s,content:n,onTitleChange:a,onDescriptionChange:i,onContentChange:c,onSave:l,onPublish:o,onAIAssistant:d,contentType:r};switch(r.id){case"policy":return t.jsx(xi,fi({},p));case"course":return t.jsx(gi,{});default:return t.jsx("div",{className:"text-center p-8 text-gray-500",children:t.jsxs("p",{children:['Content type "',r.label,'" editor not yet implemented']})})}};return t.jsx(f.Suspense,{fallback:t.jsx(yi,{}),children:g()})});bi.displayName="LazyContentEditor";const Ls=[{id:"course",label:"Course",icon:Fs,description:"Interactive learning modules with assessments"},{id:"policy",label:"Policy",icon:bt,description:"Organizational rules and guidelines"},{id:"procedure",label:"Procedure",icon:kr,description:"Step-by-step operational instructions"},{id:"sms",label:"SDS Sheet",icon:Ne,description:"Safety data sheets and chemical information"},{id:"pathway",label:"Learning Pathway",icon:ae,description:"Combined learning experiences"}],vi=()=>{const r=hr(),{state:e}=me(),{setSelectedContentType:s}=Pe(),{selectedContentType:n}=e,[a,i]=f.useState(!1),c=()=>{r("/settings")},l=()=>{if(n==="course")return t.jsx(tr,{});const o=Ls.find(d=>d.id===n);return o?t.jsx(oi,{contentType:o}):null};return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:t.jsx("div",{className:"flex items-center space-x-4 mb-4 md:flex-row md:mb-0",children:t.jsxs("button",{onClick:c,className:"inline-flex items-center gap-2 text-sm text-gray-600 hover:text-[#4ECDC4] transition-colors duration-200",children:[t.jsx(h,{path:Tr,size:.8}),"Back to Settings"]})})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-[#5b5b5b] mb-1",children:"Content Builder"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"Create and manage content for your library"})]}),t.jsxs("div",{className:"flex bg-white rounded-lg shadow",children:[t.jsx("div",{className:`${a?"w-20":"w-64"} bg-gray-50 border-r border-gray-200 rounded-l-lg transition-all duration-300`,children:t.jsxs("div",{className:`${a?"p-2":"p-4"}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:`text-sm font-medium text-gray-900 ${a?"sr-only":""}`,children:"Content Types"}),t.jsx("button",{onClick:()=>i(!a),className:"p-1 text-gray-400 hover:text-gray-600",title:a?"Expand sidebar":"Collapse sidebar",children:t.jsx(h,{path:a?Bs:qs,size:.8})})]}),t.jsx("div",{className:"space-y-2",children:Ls.map(o=>t.jsx("button",{onClick:()=>s(o.id),className:`w-full text-left p-3 rounded-lg transition-colors ${n===o.id?"bg-[#4ECDC4] text-white":"text-[#5b5b5b] hover:bg-gray-100"}`,title:a?o.label:void 0,children:t.jsxs("div",{className:`flex items-center ${a?"justify-center":"space-x-3"}`,children:[t.jsx(h,{path:o.icon,size:a?1.5:1.2,className:`${n===o.id?"text-white":"text-gray-400"}`}),!a&&t.jsx("span",{className:"font-medium",children:o.label})]})},o.id))})]})}),t.jsx("div",{className:"flex-1 p-6 rounded-r-lg",children:l()})]})]})},ji=()=>t.jsx(Ur,{children:t.jsx(Pr,{children:t.jsx(vi,{})})}),Pi=Object.freeze(Object.defineProperty({__proto__:null,default:ji},Symbol.toStringTag,{value:"Module"}));export{li as C,ui as M,di as T,ye as Z,gn as a,bn as b,Ti as c,Nt as d,$a as e,ci as f,Pi as i,Oi as m,xn as p,yn as s,ki as t,me as u};
