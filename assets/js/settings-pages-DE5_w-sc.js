import{r as h,j as e,I as j,u as qt,U as Vt,V as Me,W as Yt,X as Wt,Y as ms,Z as Kt,_ as us,$ as Zt,a0 as Ne,b as Qt,B as xs,a1 as Xt}from"./react-vendor-QwocJJ0l.js";import{s as I,g as ne,y as Jt,z as ea,x as he,A as sa,U as ta,B as rs,F as pe,G as hs,H as aa,J as gs,K as ra,R as na,S as ia,E as Z}from"./components-CQ0__InY.js";import{ae as At,F as ns,af as la,ag as oa,ah as ca,ai as da,aj as is,ak as ma,al as ua,am as xa,an as ha,ao as ga,ap as pa}from"./services-TvYZC6AJ.js";import{S as Pt,a6 as Y,aF as fa,aG as Ot,a0 as ba,M as ps,c as F,i as ya,e as va,Q as fs,a5 as Dt,a as ja,ae as $e,aH as Oe,a8 as Rt,aa as bs,R as ys,b as Na,aI as Ca,v as xe,aJ as kt,a9 as Lt,aK as _a,r as ie,I as vs,F as js,D as Ns,aL as ge,l as as,aM as ve,aN as ls,aO as le,a7 as Cs,aP as Sa,ag as Ea,aQ as wa,aR as Mt,u as ye,aS as $t,aj as os,X as Ta,aT as Ia,aU as Aa,_ as Pa,K as Oa,av as Da}from"./ui-vendor-mgcSnJSc.js";import"./data-vendor-74w85Vz1.js";import"./vendor-B35QfyBG.js";import"./utils-vendor-DPZjRVl3.js";import"./inventory-pages-Clxt543p.js";import"./knowledgehub-pages-BPCkPWE6.js";const Ft=()=>{const s=At.getInstance();return h.useMemo(()=>{const t=s.getBudgetData(),r=s.isTokenLimitExceeded(),i=s.shouldShowTokenLimitWarning();return{hasIssues:r||i,isExceeded:r,shouldWarn:i,usagePercentage:t.percentage,remainingTokens:t.remaining,usedTokens:t.used,limitTokens:t.limit}},[s])},Ra=({activeTab:s,onTabChange:a})=>{const t=[{id:"basic-info",label:"Basic Information",icon:Pt},{id:"preferences",label:"Preferences",icon:Y},{id:"mobile",label:"Mobile Scanner Shortcuts",icon:fa},{id:"account",label:"Account Management",icon:Ot}];return e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:t.map(r=>e.jsxs("button",{onClick:()=>a(r.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${s===r.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(j,{path:r.icon,size:1}),e.jsx("span",{children:r.label})]},r.id))})})})};var ka=Object.defineProperty,La=Object.defineProperties,Ma=Object.getOwnPropertyDescriptors,_s=Object.getOwnPropertySymbols,$a=Object.prototype.hasOwnProperty,Fa=Object.prototype.propertyIsEnumerable,Ss=(s,a,t)=>a in s?ka(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,B=(s,a)=>{for(var t in a||(a={}))$a.call(a,t)&&Ss(s,t,a[t]);if(_s)for(var t of _s(a))Fa.call(a,t)&&Ss(s,t,a[t]);return s},q=(s,a)=>La(s,Ma(a));const Ga=({basicInfoForm:s,setBasicInfoForm:a,userData:t,uploadingPhoto:r,uploadProfilePhoto:i,removeProfilePhoto:m})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx("input",{id:"first-name",type:"text",value:s.first_name,onChange:d=>a(c=>q(B({},c),{first_name:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx("input",{id:"last-name",type:"text",value:s.last_name,onChange:d=>a(c=>q(B({},c),{last_name:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{id:"email",type:"email",value:s.email,onChange:d=>a(c=>q(B({},c),{email:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{id:"phone",type:"tel",value:s.phone,onChange:d=>a(c=>q(B({},c),{phone:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsx("input",{id:"department",type:"text",value:s.department,onChange:d=>a(c=>q(B({},c),{department:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"position",className:"block text-sm font-medium text-gray-700 mb-2",children:"Position"}),e.jsx("input",{id:"position",type:"text",value:s.position,onChange:d=>a(c=>q(B({},c),{position:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date-of-birth",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),e.jsx("input",{id:"date-of-birth",type:"date",value:s.date_of_birth,onChange:d=>a(c=>q(B({},c),{date_of_birth:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),e.jsx("textarea",{id:"bio",value:s.bio||"",onChange:d=>a(c=>q(B({},c),{bio:d.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tell us about yourself..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"preferred-language",className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Language"}),e.jsxs("select",{id:"preferred-language",value:s.preferred_language||"en",onChange:d=>a(c=>q(B({},c),{preferred_language:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"}),e.jsx("option",{value:"pt",children:"Portuguese"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"timezone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),e.jsxs("select",{id:"timezone",value:s.timezone||"UTC",onChange:d=>a(c=>q(B({},c),{timezone:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"Eastern Time"}),e.jsx("option",{value:"America/Chicago",children:"Central Time"}),e.jsx("option",{value:"America/Denver",children:"Mountain Time"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time"}),e.jsx("option",{value:"Europe/London",children:"London"}),e.jsx("option",{value:"Europe/Paris",children:"Paris"}),e.jsx("option",{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Profile Picture"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:r?e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#4ECDC4]"})}):t!=null&&t.avatar_url?e.jsx("img",{src:String(t.avatar_url),alt:"Profile",className:"w-20 h-20 rounded-full object-cover"}):e.jsx(j,{path:ba,size:2,className:"text-gray-400"})}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("input",{type:"file",id:"profile-photo",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:d=>{var c;const n=(c=d.target.files)==null?void 0:c[0];n&&i(n),d.target.value=""},className:"hidden",disabled:r}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm cursor-pointer text-center disabled:opacity-50 disabled:cursor-not-allowed",onClick:d=>{if(r){d.preventDefault();return}document.getElementById("profile-photo").click()},disabled:r,children:r?"Uploading...":"Upload Photo"}),(t==null?void 0:t.avatar_url)&&e.jsx("button",{onClick:m,disabled:r,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Remove Photo"}),e.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG or GIF. Max size 2MB."}),r&&e.jsx("p",{className:"text-xs text-blue-600",children:"Uploading photo..."})]})]})]})]}),z=({id:s,checked:a,onChange:t,label:r,description:i,disabled:m=!1})=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:r}),i&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i})]}),e.jsxs("label",{htmlFor:s,className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{id:s,type:"checkbox",className:"sr-only peer",checked:a,onChange:d=>t(d.target.checked),disabled:m}),e.jsx("div",{className:`w-11 h-6 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all ${a?"bg-[#4ECDC4] after:translate-x-full":"bg-gray-200"} ${m?"opacity-50 cursor-not-allowed":"cursor-pointer"}`}),e.jsx("span",{className:"sr-only",children:r})]})]});let Fe=null;const Ua=()=>(Fe||(Fe=new(window.AudioContext||window.webkitAudioContext)),Fe),za=(s,a=50)=>{const t=Ua(),r=t.createOscillator(),i=t.createGain();switch(i.gain.value=a/100,r.connect(i),i.connect(t.destination),s){case"gentle-chime":r.frequency.setValueAtTime(800,t.currentTime),r.frequency.setValueAtTime(1e3,t.currentTime+.1),r.frequency.setValueAtTime(1200,t.currentTime+.2),r.type="sine";break;case"medical-alert":r.frequency.setValueAtTime(600,t.currentTime),r.frequency.setValueAtTime(800,t.currentTime+.15),r.type="square";break;case"soft-bell":r.frequency.setValueAtTime(1e3,t.currentTime),r.frequency.setValueAtTime(800,t.currentTime+.2),r.type="sine";break;case"digital-beep":r.frequency.setValueAtTime(1e3,t.currentTime),r.type="square";break;case"success-tone":r.frequency.setValueAtTime(800,t.currentTime),r.frequency.setValueAtTime(1e3,t.currentTime+.1),r.type="sine";break;case"warning-sound":r.frequency.setValueAtTime(400,t.currentTime),r.frequency.setValueAtTime(600,t.currentTime+.1),r.type="sawtooth";break;default:return}r.start(t.currentTime),r.stop(t.currentTime+.3)},Ha=s=>{switch(s){case"short-pulse":return[100];case"double-tap":return[100,50,100];case"long-pulse":return[300];case"pattern":return[100,50,100,50,200];case"off":default:return[]}},Gt=s=>{if("vibrate"in navigator){const a=Ha(s);a.length>0&&navigator.vibrate(a)}else console.log("Vibration not supported on this device")},Ut=(s,a=50)=>{if(s!=="none")try{za(s,a)}catch(t){console.error("Error playing notification sound:",t)}},Ba=s=>{const{sound:a,volume:t,vibration:r,vibrationEnabled:i}=s.notifications;a&&a!=="none"&&Ut(a,t),i&&r&&r!=="off"&&Gt(r)};var qa=Object.defineProperty,Va=Object.defineProperties,Ya=Object.getOwnPropertyDescriptors,Es=Object.getOwnPropertySymbols,Wa=Object.prototype.hasOwnProperty,Ka=Object.prototype.propertyIsEnumerable,ws=(s,a,t)=>a in s?qa(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,Ge=(s,a)=>{for(var t in a||(a={}))Wa.call(a,t)&&ws(s,t,a[t]);if(Es)for(var t of Es(a))Ka.call(a,t)&&ws(s,t,a[t]);return s},Ue=(s,a)=>Va(s,Ya(a));const Za=({preferences:s,setPreferences:a})=>{const t=(i,m)=>{a(Ue(Ge({},s),{[i]:m}))},r=(i,m)=>{a(Ue(Ge({},s),{notifications:Ue(Ge({},s.notifications),{[i]:m})}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Appearance"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"theme",className:"block text-sm font-medium text-gray-600 mb-2",children:"Theme"}),e.jsxs("select",{id:"theme",value:s.theme,onChange:i=>t("theme",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"light",children:"Light"}),e.jsx("option",{value:"dark",children:"Dark"}),e.jsx("option",{value:"auto",children:"Auto (System)"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Notifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(z,{id:"push-notifications",checked:s.notifications.push,onChange:i=>r("push",i),label:"Push Notifications (Browser)"}),s.notifications.push&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-3",children:"Notification Sounds"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notification-sound",className:"block text-sm font-medium text-gray-600 mb-2",children:"Default Sound"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{id:"notification-sound",value:s.notifications.sound||"gentle-chime",onChange:i=>r("sound",i.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"gentle-chime",children:"Gentle Chime"}),e.jsx("option",{value:"medical-alert",children:"Medical Alert"}),e.jsx("option",{value:"soft-bell",children:"Soft Bell"}),e.jsx("option",{value:"digital-beep",children:"Digital Beep"}),e.jsx("option",{value:"success-tone",children:"Success Tone"}),e.jsx("option",{value:"warning-sound",children:"Warning Sound"}),e.jsx("option",{value:"none",children:"No Sound"})]}),e.jsx("button",{type:"button",onClick:()=>Ut(s.notifications.sound||"gentle-chime",s.notifications.volume||50),className:"px-3 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Preview"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notification-volume",className:"block text-sm font-medium text-gray-600 mb-2",children:"Volume"}),e.jsx("input",{id:"notification-volume",type:"range",min:"0",max:"100",value:s.notifications.volume||50,onChange:i=>r("volume",parseInt(i.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"0%"}),e.jsxs("span",{children:[s.notifications.volume||50,"%"]}),e.jsx("span",{children:"100%"})]})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-3",children:"Vibration (Mobile Devices)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"vibration-pattern",className:"block text-sm font-medium text-gray-600 mb-2",children:"Vibration Pattern"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{id:"vibration-pattern",value:s.notifications.vibration||"short-pulse",onChange:i=>r("vibration",i.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"short-pulse",children:"Short Pulse"}),e.jsx("option",{value:"double-tap",children:"Double Tap"}),e.jsx("option",{value:"long-pulse",children:"Long Pulse"}),e.jsx("option",{value:"pattern",children:"Pattern"}),e.jsx("option",{value:"off",children:"Off"})]}),e.jsx("button",{type:"button",onClick:()=>Gt(s.notifications.vibration||"short-pulse"),className:"px-3 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Test"})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(z,{id:"vibration-enabled",checked:s.notifications.vibrationEnabled!==!1,onChange:i=>r("vibrationEnabled",i),label:"Enable Vibration"})})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4 mt-4",children:e.jsx("button",{type:"button",onClick:()=>Ba(s),className:"w-full px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors",children:"Test Full Notification"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can customize notification preferences for specific features in each module."})]})]})]})};var Qa=Object.defineProperty,Xa=Object.defineProperties,Ja=Object.getOwnPropertyDescriptors,Ts=Object.getOwnPropertySymbols,er=Object.prototype.hasOwnProperty,sr=Object.prototype.propertyIsEnumerable,Is=(s,a,t)=>a in s?Qa(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,fe=(s,a)=>{for(var t in a||(a={}))er.call(a,t)&&Is(s,t,a[t]);if(Ts)for(var t of Ts(a))sr.call(a,t)&&Is(s,t,a[t]);return s},be=(s,a)=>Xa(s,Ja(a)),As=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const tr=()=>{const[s,a]=h.useState([{id:"clean-tool",name:"Clean Tool Scan",description:"Scan clean tools ready for use",icon:ps,enabled:!1,shortcutSlot:null},{id:"dirty-tool",name:"Dirty Tool Scan",description:"Scan tools that need sterilization",icon:ps,enabled:!1,shortcutSlot:null},{id:"problem-tool",name:"Problem Tool Scan",description:"Scan tools with issues/repair needs",icon:F,enabled:!1,shortcutSlot:null},{id:"import-receipt",name:"Import Autoclave Receipt",description:"Import physical autoclave documentation",icon:ya,enabled:!1,shortcutSlot:null},{id:"package-tools",name:"Package Tools",description:"Package tools for sterilization",icon:va,enabled:!1,shortcutSlot:null},{id:"single-scan",name:"Single Scan Mode",description:"Individual tool scanning",icon:fs,enabled:!1,shortcutSlot:null},{id:"batch-scan",name:"Batch Scan Mode",description:"Multiple tools at once",icon:fs,enabled:!1,shortcutSlot:null},{id:"add-inventory",name:"Add Inventory",description:"Scan new items to add",icon:Dt,enabled:!1,shortcutSlot:null},{id:"use-inventory",name:"Use Inventory",description:"Scan items to remove/consume",icon:ja,enabled:!1,shortcutSlot:null},{id:"scan-room",name:"Scan Room",description:"Scan room barcodes for cleaning",icon:$e,enabled:!1,shortcutSlot:null},{id:"complete-cleaning",name:"Complete Cleaning",description:"Mark room as cleaned",icon:$e,enabled:!1,shortcutSlot:null},{id:"update-status",name:"Update Status",description:"Change room cleaning status",icon:$e,enabled:!1,shortcutSlot:null}]),t=(n,o)=>{if(o&&r().length===0){alert("No mobile shortcuts available. Please disable another workflow first or assign this workflow to an existing shortcut.");return}a(l=>l.map(u=>u.id===n?be(fe({},u),{enabled:o,shortcutSlot:o?u.shortcutSlot:null}):u))},r=()=>{const n=s.filter(l=>l.enabled&&l.shortcutSlot!==null).map(l=>l.shortcutSlot);return["volume-up","volume-down","volume-up-double","volume-down-double","power-double","double-tap","shake","flip"].filter(l=>!n.includes(l))},i=(n,o)=>{o===null&&setTimeout(()=>{a(l=>l.map(u=>u.id===n&&u.shortcutSlot===null?be(fe({},u),{enabled:!1}):u))},5e3),a(l=>l.map(u=>u.shortcutSlot===o&&u.id!==n?be(fe({},u),{shortcutSlot:null}):u.id===n?be(fe({},u),{shortcutSlot:o}):u))},m=n=>{var o;return((o=[{id:"volume-up",label:"Volume Up"},{id:"volume-down",label:"Volume Down"},{id:"volume-up-double",label:"Volume Up (2x)"},{id:"volume-down-double",label:"Volume Down (2x)"},{id:"power-double",label:"Power (2x)"},{id:"double-tap",label:"Double Tap"},{id:"shake",label:"Shake"},{id:"flip",label:"Flip"}].find(u=>u.id===n))==null?void 0:o.label)||n},d=()=>As(null,null,function*(){try{const{data:{user:n}}=yield I.auth.getUser();if(!n)return;const{data:o,error:l}=yield I.from("users").select("mobile_shortcuts").eq("id",n.id).single();if(l&&l.code!=="PGRST116")return;o!=null&&o.mobile_shortcuts&&typeof o.mobile_shortcuts=="object"&&a(u=>u.map(g=>{const p=o.mobile_shortcuts[g.id];return p?be(fe({},g),{enabled:p.enabled,shortcutSlot:p.shortcut}):g}))}catch(n){console.error("Failed to load mobile shortcuts:",n)}}),c=h.useCallback(()=>As(null,null,function*(){try{const{data:{user:n}}=yield I.auth.getUser();if(!n)return;const o=s.reduce((u,g)=>(g.enabled&&g.shortcutSlot&&(u[g.id]={enabled:g.enabled,shortcut:g.shortcutSlot}),u),{}),{error:l}=yield I.from("users").update({mobile_shortcuts:o,updated_at:new Date().toISOString()}).eq("id",n.id);l?console.error("Error saving mobile settings:",l):console.log("Mobile settings saved successfully")}catch(n){console.error("Failed to save mobile shortcuts:",n)}}),[s]);return h.useEffect(()=>{setTimeout(()=>{d()},0)},[]),h.useEffect(()=>{s.some(n=>n.enabled)&&c()},[s,c]),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Mobile Scanner Shortcuts"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Configure up to 4 mobile shortcuts for quick access to your most-used scanning workflows."}),e.jsx("div",{className:"space-y-4",children:s.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(j,{path:n.icon,size:1.2,className:"text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:n.name}),e.jsx("p",{className:"text-xs text-gray-500",children:n.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Enable"}),e.jsx(z,{id:`toggle-${n.id}`,label:`Enable ${n.name}`,checked:n.enabled,onChange:o=>t(n.id,o)})]}),n.enabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("select",{value:n.shortcutSlot||"",onChange:o=>i(n.id,o.target.value?o.target.value:null),className:`px-3 py-1 border rounded text-sm ${n.shortcutSlot?"border-gray-300":"border-red-300 bg-red-50"}`,children:[e.jsx("option",{value:"",children:"Select Shortcut"}),[{id:"volume-up",label:"Volume Up (Single Press)",description:"Press volume up button once"},{id:"volume-down",label:"Volume Down (Single Press)",description:"Press volume down button once"},{id:"volume-up-double",label:"Volume Up (Double Press)",description:"Press volume up button twice quickly"},{id:"volume-down-double",label:"Volume Down (Double Press)",description:"Press volume down button twice quickly"},{id:"power-double",label:"Power Button (Double Press)",description:"Press power button twice quickly"},{id:"double-tap",label:"Double Tap Screen",description:"Tap screen twice quickly"},{id:"shake",label:"Shake Device",description:"Shake your phone"},{id:"flip",label:"Flip Device",description:"Turn phone face down"}].map(o=>e.jsx("option",{value:o.id,disabled:s.some(l=>l.id!==n.id&&l.shortcutSlot===o.id),children:o.label},o.id))]}),!n.shortcutSlot&&e.jsx("p",{className:"text-xs text-red-500",children:"⚠️ Please select a mobile shortcut or this workflow will be disabled in 5 seconds"})]})]})]},n.id))}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h6",{className:"text-sm font-medium text-blue-700 mb-3",children:"Current Shortcuts"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.filter(n=>n.enabled&&n.shortcutSlot).map(n=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-2 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(j,{path:n.icon,size:1.2,className:"text-blue-600"})}),e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:n.name}),e.jsx("p",{className:"text-xs text-blue-500",children:m(n.shortcutSlot)})]},n.id)),s.filter(n=>n.enabled&&n.shortcutSlot).length===0&&e.jsxs("div",{className:"col-span-2 md:col-span-4 text-center py-4",children:[e.jsx("p",{className:"text-blue-500 text-sm",children:"No shortcuts configured yet"}),e.jsx("p",{className:"text-blue-400 text-xs",children:"Enable workflows and assign mobile shortcuts above"})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-3",children:"How to Use Mobile Shortcuts"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Enable workflows:"})," Use the toggles for scanning workflows you use frequently"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Assign shortcuts:"})," Choose mobile device actions (volume buttons, double tap, shake, etc.)"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Mobile access:"})," These shortcuts will trigger on your mobile device for quick scanning"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Unique assignments:"})," Each mobile shortcut can only be used by one workflow"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Quick launch:"})," Perform the assigned action to directly open that scanner workflow"]})]})]})]})})};var ar=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const rr=({userData:s,onPasswordChange:a,onOpenPasswordModal:t,onArchiveAccount:r,passwordError:i,passwordSuccess:m})=>{const[d,c]=h.useState(!1),[n,o]=h.useState(!1),[l,u]=h.useState(""),g=p=>ar(null,null,function*(){yield a(p),c(!1)}),b=()=>{l.trim()&&(r(),o(!1),u(""))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Account Security"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:e.jsx(j,{path:Oe,size:1,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium text-gray-700",children:"Password"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Last changed:"," ",s!=null&&s.password_changed_at?s.password_changed_at:"Never"]})]})]}),e.jsx("button",{onClick:t,className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Change Password"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"two-factor-toggle",className:"block text-sm font-medium text-gray-700",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Add an extra layer of security to your account"})]}),e.jsx("button",{id:"two-factor-toggle",disabled:!0,className:"px-4 py-2 rounded-md transition-colors text-sm bg-gray-400 text-white cursor-not-allowed opacity-60",title:"Coming Soon",children:"Coming Soon"})]}),e.jsx("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sessions-toggle",className:"block text-sm font-medium text-gray-700",children:"Login Sessions"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Active sessions:"," ",s!=null&&s.active_sessions?s.active_sessions:1]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Account Actions"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(j,{path:Rt,size:1,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium text-orange-700",children:"Archive Account"}),e.jsx("p",{className:"text-sm text-orange-600",children:"Archive your account - data is preserved but access is disabled"})]})]}),e.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-colors text-sm",children:"Archive Account"})]})})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Change Password"}),i&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-red-600 text-sm",children:i})}),m&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsx("p",{className:"text-green-600 text-sm",children:m})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"current-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),e.jsx("input",{id:"current-password",type:"password",placeholder:"Enter your current password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsx("input",{id:"new-password",type:"password",placeholder:"Enter new password (min 8 characters)",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsx("input",{id:"confirm-password",type:"password",placeholder:"Confirm new password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>g({currentPassword:"",newPassword:"",confirmPassword:""}),className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] rounded-md hover:bg-[#38b2ac]",children:"Change Password"})]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-900 mb-4",children:"Archive Account"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Your account will be archived. This means:"}),e.jsxs("ul",{className:"text-sm text-gray-600 mb-4 space-y-1",children:[e.jsx("li",{children:"• Your data will be preserved"}),e.jsx("li",{children:"• You won't be able to access the system"}),e.jsx("li",{children:"• Your account can be restored by administrators"}),e.jsx("li",{children:"• All sessions will be terminated"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"This action can be reversed by contacting support."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"delete-reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for archiving (optional)"}),e.jsx("textarea",{id:"archive-reason",value:l,onChange:p=>u(p.target.value),placeholder:"Please let us know why you're archiving your account...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:b,className:"px-4 py-2 text-sm font-medium text-white bg-orange-600 rounded-md hover:bg-orange-700",children:"Archive Account"})]})]})})]})};var nr=Object.defineProperty,ir=Object.defineProperties,lr=Object.getOwnPropertyDescriptors,Ps=Object.getOwnPropertySymbols,or=Object.prototype.hasOwnProperty,cr=Object.prototype.propertyIsEnumerable,Os=(s,a,t)=>a in s?nr(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,ze=(s,a)=>{for(var t in a||(a={}))or.call(a,t)&&Os(s,t,a[t]);if(Ps)for(var t of Ps(a))cr.call(a,t)&&Os(s,t,a[t]);return s},He=(s,a)=>ir(s,lr(a)),dr=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const mr=({isOpen:s,onClose:a,onSubmit:t,error:r,success:i,isPasswordReset:m=!1})=>{const[d,c]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[n,o]=h.useState(!1),[l,u]=h.useState(!1),g=()=>dr(null,null,function*(){yield t(d),i&&c({currentPassword:"*********",newPassword:"",confirmPassword:""})}),b=()=>{c({currentPassword:"*********",newPassword:"",confirmPassword:""}),a()};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:m?"Reset Password":"Change Password"}),r&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-red-600 text-sm",children:r})}),i&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsx("p",{className:"text-green-600 text-sm",children:i})}),e.jsxs("div",{className:"space-y-4",children:[!m&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),e.jsx("div",{className:"relative",children:e.jsx("input",{id:"currentPassword",type:"password",placeholder:"Enter your current password",value:d.currentPassword||"*********",onChange:p=>c(He(ze({},d),{currentPassword:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter your current password to verify your identity before changing."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:m?"Choose New Password":"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"newPassword",type:n?"text":"password",placeholder:"Enter new password (min 6 characters)",value:d.newPassword,onChange:p=>c(He(ze({},d),{newPassword:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("button",{type:"button",onClick:()=>o(!n),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(j,{path:n?bs:ys,size:1,className:"text-gray-400"})})]}),d.newPassword&&e.jsxs("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Password Requirements:"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[d.newPassword.length>=6?e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}):e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-300"}),e.jsxs("span",{className:`text-xs ${d.newPassword.length>=6?"text-green-700":"text-gray-500"}`,children:["At least 6 characters (",d.newPassword.length,"/6)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[d.newPassword===d.confirmPassword&&d.confirmPassword?e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}):e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-300"}),e.jsx("span",{className:`text-xs ${d.newPassword===d.confirmPassword&&d.confirmPassword?"text-green-700":"text-gray-500"}`,children:"Passwords match"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmPassword",type:l?"text":"password",value:d.confirmPassword,onChange:p=>c(He(ze({},d),{confirmPassword:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("button",{type:"button",onClick:()=>u(!l),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(j,{path:l?bs:ys,size:1,className:"text-gray-400"})})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:b,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:g,className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] rounded-md hover:bg-[#38b2ac]",children:m?"Send Reset Email":"Save"})]})]})}):null};var Q=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});class X{static fetchUserData(a){return Q(this,null,function*(){try{const{data:t}=yield I.from("users").select("*").eq("id",a).single();return t||(yield this.createDefaultProfile(a))}catch(t){throw console.error("Error fetching user data:",t),t}})}static createDefaultProfile(a){return Q(this,null,function*(){const{data:t}=yield I.from("users").select("facility_id").eq("id",a).single(),r={id:a,email:"",first_name:"",last_name:"",role:"user",phone:"",department:"",position:"",date_of_birth:"",bio:"",preferred_language:"en",timezone:"UTC",facility_id:(t==null?void 0:t.facility_id)||"550e8400-e29b-41d4-a716-446655440000"},{data:i,error:m}=yield I.from("users").insert(r).select().single();if(m)throw console.error("Error creating default profile:",m),m;return i})}static getActiveSessionsCount(a){return Q(this,null,function*(){const{data:t}=yield I.from("user_sessions").select("id").eq("user_id",a).eq("is_active",!0);return(t==null?void 0:t.length)||0})}static saveProfile(a,t){return Q(this,null,function*(){const{data:r}=yield I.from("users").select("avatar_url").eq("id",a).single(),{error:i}=yield I.from("users").update({first_name:t.first_name,last_name:t.last_name,email:t.email,phone:t.phone,department:t.department,position:t.position,date_of_birth:t.date_of_birth,bio:t.bio,preferred_language:t.preferred_language,timezone:t.timezone,avatar_url:(r==null?void 0:r.avatar_url)||null,updated_at:new Date().toISOString()}).eq("id",a);if(i)throw i})}static changePassword(a){return Q(this,null,function*(){const{error:t}=yield I.auth.updateUser({password:a.newPassword});if(t)throw t})}static resetPassword(a){return Q(this,null,function*(){const{error:t}=yield I.auth.resetPasswordForEmail(a,{redirectTo:`${window.location.origin}/settings?tab=account&openPasswordModal=true`});if(t)throw t})}static archiveAccount(a){return Q(this,null,function*(){const{error:t}=yield I.from("users").update({status:"archived",archived_at:new Date().toISOString()}).eq("id",a);if(t)throw t})}static uploadProfilePhoto(a,t){return Q(this,null,function*(){const r=t.name.split(".").pop(),i=`${Date.now()}.${r}`,m=`${a}/${i}`,{error:d}=yield I.storage.from("profile-photos").upload(m,t);if(d)throw d;const{data:{publicUrl:c}}=I.storage.from("profile-photos").getPublicUrl(m),{error:n}=yield I.from("users").update({avatar_url:c}).eq("id",a);if(n)throw n;return c})}static removeProfilePhoto(a){return Q(this,null,function*(){const{error:t}=yield I.from("users").update({avatar_url:null}).eq("id",a);if(t)throw t})}}var ur=Object.defineProperty,xr=Object.defineProperties,hr=Object.getOwnPropertyDescriptors,Ds=Object.getOwnPropertySymbols,gr=Object.prototype.hasOwnProperty,pr=Object.prototype.propertyIsEnumerable,Rs=(s,a,t)=>a in s?ur(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,k=(s,a)=>{for(var t in a||(a={}))gr.call(a,t)&&Rs(s,t,a[t]);if(Ds)for(var t of Ds(a))pr.call(a,t)&&Rs(s,t,a[t]);return s},L=(s,a)=>xr(s,hr(a)),ce=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const fr=()=>{const{refreshUserData:s}=ne(),a=qt(),[t,r]=h.useState({activeTab:"basic-info",userData:null,loading:!0,saving:!1,saveSuccess:!1,saveError:null,basicInfoForm:{first_name:"",last_name:"",email:"",phone:"",department:"",position:"",date_of_birth:"",bio:"",preferred_language:"en",timezone:"UTC"},preferences:{theme:"light",notifications:{push:!0,sound:"default",volume:50,email:!0,sms:!1,desktop:!0,mobile:!0,weekly_digest:!0,security_alerts:!0,system_updates:!0,maintenance_notices:!0},privacy:{profile_visibility:"public",show_online_status:!0,allow_direct_messages:!0,data_sharing:!1,analytics_tracking:!0},accessibility:{high_contrast:!1,large_text:!1,screen_reader:!1,keyboard_navigation:!0,reduced_motion:!1}},mobileShortcuts:{quick_scan:!0,emergency_contact:!0,voice_commands:!1,gesture_navigation:!0,haptic_feedback:!0,auto_sync:!0,offline_mode:!1,biometric_login:!1},showPasswordModal:!1,isPasswordReset:!1,passwordError:null,passwordSuccess:null});h.useEffect(()=>{const l=new URLSearchParams(a.search),u=l.get("tab"),g=l.get("openPasswordModal");u&&r(b=>L(k({},b),{activeTab:u})),g==="true"&&(r(b=>L(k({},b),{showPasswordModal:!0})),window.history.replaceState({},"","/settings"))},[a.search]);const i=h.useCallback(()=>ce(null,null,function*(){try{r(y=>L(k({},y),{loading:!0}));const{data:{user:l}}=yield I.auth.getUser();if(!l)return;const u=yield X.fetchUserData(l.id),g=yield X.getActiveSessionsCount(l.id);let b=u.first_name||"",p=u.last_name||"";if(!b&&!p&&u.full_name){const y=u.full_name.split(" ");b=y[0]||"",p=y.slice(1).join(" ")||""}const x=u.email||l.email||"";let v=x;if(!x&&l.email){const y=l.email.split("@")[0];if(y.includes(".")){const _=y.split(".");b=_[0]||b,p=_.slice(1).join(" ")||p}v=l.email}const N=L(k({},u),{first_name:b,last_name:p,email:v,active_sessions:g});r(y=>L(k({},y),{userData:N,basicInfoForm:{first_name:b,last_name:p,email:v,phone:u.phone||"",department:u.department||"",position:u.position||"",date_of_birth:u.date_of_birth||"",bio:u.bio||"",preferred_language:u.preferred_language||"en",timezone:u.timezone||"UTC"},loading:!1}))}catch(l){console.error("Error fetching user data:",l),r(u=>L(k({},u),{loading:!1}))}}),[r]);return{state:t,setState:r,fetchUserData:i,handleSave:()=>ce(null,null,function*(){try{r(u=>L(k({},u),{saving:!0,saveError:null}));const{data:{user:l}}=yield I.auth.getUser();if(!l)return;yield X.saveProfile(l.id,t.basicInfoForm),r(u=>L(k({},u),{saving:!1,saveSuccess:!0,saveError:null})),setTimeout(()=>{r(u=>L(k({},u),{saveSuccess:!1}))},3e3),s()}catch(l){r(u=>L(k({},u),{saving:!1,saveError:l instanceof Error?l.message:"Failed to save profile"}))}}),handlePasswordChange:l=>ce(null,null,function*(){try{if(r(u=>L(k({},u),{passwordError:null,passwordSuccess:null})),l.newPassword!==l.confirmPassword){r(u=>L(k({},u),{passwordError:"Passwords do not match"}));return}t.isPasswordReset?(yield X.resetPassword(l.newPassword),r(u=>L(k({},u),{passwordSuccess:"Password reset email sent! Check your inbox.",showPasswordModal:!1}))):(yield X.changePassword(l),r(u=>L(k({},u),{passwordSuccess:"Password changed successfully!",showPasswordModal:!1})))}catch(u){r(g=>L(k({},g),{passwordError:u instanceof Error?u.message:"Failed to change password"}))}}),handleArchiveAccount:()=>ce(null,null,function*(){try{const{data:{user:l}}=yield I.auth.getUser();if(!l)return;yield X.archiveAccount(l.id),yield I.auth.signOut(),window.location.href="/login"}catch(l){console.error("Error archiving account:",l)}}),uploadProfilePhoto:l=>ce(null,null,function*(){try{const{data:{user:u}}=yield I.auth.getUser();if(!u)return;const g=yield X.uploadProfilePhoto(u.id,l);r(b=>L(k({},b),{userData:b.userData?L(k({},b.userData),{avatar_url:g}):null})),s()}catch(u){console.error("Error uploading profile photo:",u)}}),removeProfilePhoto:()=>ce(null,null,function*(){try{const{data:{user:l}}=yield I.auth.getUser();if(!l)return;yield X.removeProfilePhoto(l.id),r(u=>L(k({},u),{userData:u.userData?L(k({},u.userData),{avatar_url:null}):null})),s()}catch(l){console.error("Error removing profile photo:",l)}})}},zt=h.createContext(void 0),br=({children:s})=>{const a=fr();return e.jsx(zt.Provider,{value:a,children:s})},yr=()=>{const s=h.useContext(zt);if(s===void 0)throw new Error("useProfileSettingsContext must be used within a ProfileSettingsProvider");return s};var vr=Object.defineProperty,jr=Object.defineProperties,Nr=Object.getOwnPropertyDescriptors,ks=Object.getOwnPropertySymbols,Cr=Object.prototype.hasOwnProperty,_r=Object.prototype.propertyIsEnumerable,Ls=(s,a,t)=>a in s?vr(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,V=(s,a)=>{for(var t in a||(a={}))Cr.call(a,t)&&Ls(s,t,a[t]);if(ks)for(var t of ks(a))_r.call(a,t)&&Ls(s,t,a[t]);return s},J=(s,a)=>jr(s,Nr(a));const Sr=()=>{const{state:s,setState:a,fetchUserData:t,handleSave:r,handlePasswordChange:i,handleArchiveAccount:m,uploadProfilePhoto:d,removeProfilePhoto:c}=yr();h.useEffect(()=>{t()},[t]);const n=[{id:"quick_scan",label:"Quick Scan",description:"Fast barcode scanning"},{id:"emergency_contact",label:"Emergency Contact",description:"Quick access to emergency"},{id:"voice_commands",label:"Voice Commands",description:"Hands-free operation"},{id:"gesture_navigation",label:"Gesture Navigation",description:"Swipe-based navigation"},{id:"haptic_feedback",label:"Haptic Feedback",description:"Touch vibration feedback"},{id:"auto_sync",label:"Auto Sync",description:"Automatic data synchronization"},{id:"offline_mode",label:"Offline Mode",description:"Work without internet"},{id:"biometric_login",label:"Biometric Login",description:"Fingerprint/Face ID login"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ra,{activeTab:s.activeTab,onTabChange:o=>a(l=>J(V({},l),{activeTab:o}))}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.activeTab==="basic-info"&&e.jsx(Ga,{basicInfoForm:s.basicInfoForm,setBasicInfoForm:o=>a(l=>J(V({},l),{basicInfoForm:o})),userData:s.userData?{avatar_url:s.userData.avatar_url}:null,uploadingPhoto:s.uploadingPhoto,uploadProfilePhoto:d,removeProfilePhoto:c}),s.activeTab==="preferences"&&e.jsx(Za,{preferences:{theme:s.preferences.theme,notifications:{push:s.preferences.notifications.push,sound:s.preferences.notifications.sound,volume:s.preferences.notifications.volume,vibration:"medium",vibrationEnabled:!0}},setPreferences:o=>{a(l=>{var u,g,b;return J(V({},l),{preferences:J(V({},l.preferences),{theme:o.theme,notifications:J(V({},l.preferences.notifications),{push:(u=o.notifications)==null?void 0:u.push,sound:(g=o.notifications)==null?void 0:g.sound,volume:(b=o.notifications)==null?void 0:b.volume})})})})}}),s.activeTab==="mobile"&&e.jsx(tr,{mobileShortcuts:Object.entries(s.mobileShortcuts).map(([o,l])=>({[o]:l})),setMobileShortcuts:o=>{const l=o.reduce((u,g)=>V(V({},u),g),{});a(u=>J(V({},u),{mobileShortcuts:l}))},availableShortcuts:n}),s.activeTab==="account"&&e.jsx(rr,{userData:s.userData,onPasswordChange:i,onOpenPasswordModal:()=>a(o=>J(V({},o),{showPasswordModal:!0})),onArchiveAccount:m,passwordError:s.passwordError,passwordSuccess:s.passwordSuccess})]}),e.jsx(mr,{isOpen:s.showPasswordModal,onClose:()=>a(o=>J(V({},o),{showPasswordModal:!1})),onSubmit:i,error:s.passwordError,success:s.passwordSuccess,isPasswordReset:s.isPasswordReset})]})},Er=()=>e.jsx(br,{children:e.jsx(Sr,{})});var wr=Object.defineProperty,Tr=Object.defineProperties,Ir=Object.getOwnPropertyDescriptors,Ms=Object.getOwnPropertySymbols,Ar=Object.prototype.hasOwnProperty,Pr=Object.prototype.propertyIsEnumerable,$s=(s,a,t)=>a in s?wr(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,Ce=(s,a)=>{for(var t in a||(a={}))Ar.call(a,t)&&$s(s,t,a[t]);if(Ms)for(var t of Ms(a))Pr.call(a,t)&&$s(s,t,a[t]);return s},_e=(s,a)=>Tr(s,Ir(a)),Se=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const Or=()=>{const[s,a]=h.useState(null),[t,r]=h.useState([]),[i,m]=h.useState(!0),[d,c]=h.useState(!1),[n,o]=h.useState(!1),[l,u]=h.useState({closure_date:"",closure_type:"holiday",description:"",is_recurring:!1});h.useEffect(()=>{Se(null,null,function*(){try{const y=yield ns.getCurrentFacilityId();a(y)}catch(y){console.error("Failed to load facility ID:",y)}})},[]);const g=h.useCallback(()=>Se(null,null,function*(){if(s)try{m(!0);const{data:N,error:y}=yield I.from("office_closures").select("*").eq("facility_id",s).order("closure_date",{ascending:!0});if(y){console.error("Error loading closures:",y);return}r(N.map(_=>{var E;return{id:_.id,closure_date:_.closure_date,closure_type:_.closure_type,description:((E=_.data)==null?void 0:E.description)||"",is_recurring:_.is_recurring}})||[])}catch(N){console.error("Error loading closures:",N)}finally{m(!1)}}),[s]);h.useEffect(()=>{s&&g()},[s,g]);const b=()=>Se(null,null,function*(){if(!(!s||!l.closure_date))try{c(!0);const{error:N}=yield I.from("office_closures").insert({facility_id:s,closure_date:l.closure_date,closure_type:l.closure_type,description:l.description,is_recurring:l.is_recurring});if(N){console.error("Error adding closure:",N);return}u({closure_date:"",closure_type:"holiday",description:"",is_recurring:!1}),o(!1),g()}catch(N){console.error("Error adding closure:",N)}finally{c(!1)}}),p=N=>Se(null,null,function*(){try{const{error:y}=yield I.from("office_closures").delete().eq("id",N);if(y){console.error("Error deleting closure:",y);return}g()}catch(y){console.error("Error deleting closure:",y)}}),x=N=>{switch(N){case"holiday":return"Holiday";case"maintenance":return"Maintenance";case"custom":return"Custom";default:return N}},v=N=>{switch(N){case"holiday":return"bg-red-100 text-red-800";case"maintenance":return"bg-yellow-100 text-yellow-800";case"custom":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return i?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-2"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-16 bg-gray-200 rounded"}),e.jsx("div",{className:"h-16 bg-gray-200 rounded"})]})]})}):e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-[#4ECDC4] bg-opacity-10 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-[#4ECDC4]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsx("h6",{className:"text-lg font-semibold text-gray-800",children:"🗓️ Office Closures & Holidays"})]}),e.jsx("button",{onClick:()=>o(!n),className:"px-4 py-2 text-sm bg-[#4ECDC4] text-white rounded-lg hover:bg-[#45b8b0] transition-all duration-200 transform hover:scale-105 shadow-sm",children:n?"❌ Cancel":"➕ Add Closure"})]}),n&&e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 p-6 rounded-xl border-2 border-gray-200 space-y-4 mb-6",children:[e.jsx("h6",{className:"text-lg font-semibold text-gray-800 mb-4",children:"➕ Add New Closure"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"closureDate",className:"block text-sm font-medium text-gray-600 mb-2",children:"📅 Date"}),e.jsx("input",{id:"closureDate",type:"date",value:l.closure_date,onChange:N=>u(y=>_e(Ce({},y),{closure_date:N.target.value})),className:"w-full px-3 py-2 text-sm border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"closureType",className:"block text-sm font-medium text-gray-600 mb-2",children:"🏷️ Type"}),e.jsxs("select",{id:"closureType",value:l.closure_type,onChange:N=>u(y=>_e(Ce({},y),{closure_type:N.target.value})),className:"w-full px-3 py-2 text-sm border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",children:[e.jsx("option",{value:"holiday",children:"🎉 Holiday"}),e.jsx("option",{value:"maintenance",children:"🔧 Maintenance"}),e.jsx("option",{value:"custom",children:"📝 Custom"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"closureDescription",className:"block text-sm font-medium text-gray-600 mb-2",children:"📝 Description"}),e.jsx("input",{id:"closureDescription",type:"text",value:l.description,onChange:N=>u(y=>_e(Ce({},y),{description:N.target.value})),placeholder:"e.g., Christmas Day, Annual Maintenance",className:"w-full px-3 py-2 text-sm border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"recurring",checked:l.is_recurring,onChange:N=>u(y=>_e(Ce({},y),{is_recurring:N.target.checked})),className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4] h-4 w-4"}),e.jsx("label",{htmlFor:"recurring",className:"text-sm font-medium text-gray-600",children:"🔄 Recurring annually"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:b,disabled:d||!l.closure_date,className:"px-4 py-2 text-sm bg-[#4ECDC4] text-white rounded-lg hover:bg-[#45b8b0] disabled:opacity-50 transition-all duration-200 transform hover:scale-105 shadow-sm",children:d?"⏳ Adding...":"✅ Add Closure"}),e.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-sm bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-all duration-200 transform hover:scale-105",children:"❌ Cancel"})]})]}),e.jsx("div",{className:"space-y-2",children:t.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No office closures configured. Add holidays and maintenance days above."}):t.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${v(N.closure_type)}`,children:x(N.closure_type)}),N.is_recurring&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"Recurring"})]}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:new Date(N.closure_date).toLocaleDateString()}),N.description&&e.jsx("div",{className:"text-sm text-gray-600",children:N.description})]}),e.jsx("button",{onClick:()=>p(N.id),className:"ml-2 p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete closure",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},N.id))}),e.jsx("p",{className:"text-xs text-gray-500",children:"Office closures are automatically excluded from streak calculations. Users won't lose their streak on holidays or maintenance days."})]})};var Dr=Object.defineProperty,Rr=Object.defineProperties,kr=Object.getOwnPropertyDescriptors,Fs=Object.getOwnPropertySymbols,Lr=Object.prototype.hasOwnProperty,Mr=Object.prototype.propertyIsEnumerable,Gs=(s,a,t)=>a in s?Dr(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,Ee=(s,a)=>{for(var t in a||(a={}))Lr.call(a,t)&&Gs(s,t,a[t]);if(Fs)for(var t of Fs(a))Mr.call(a,t)&&Gs(s,t,a[t]);return s},we=(s,a)=>Rr(s,kr(a)),Be=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const $r=()=>{const[s,a]=h.useState(null),[t,r]=h.useState(!0),[i,m]=h.useState(!1),[d,c]=h.useState(()=>({workingDays:{monday:!0,tuesday:!0,wednesday:!0,thursday:!0,friday:!0,saturday:!1,sunday:!1},openHolidays:!1,startHour:8,endHour:17}));h.useEffect(()=>{Be(null,null,function*(){try{const v=yield ns.getCurrentFacilityId();a(v)}catch(v){console.error("Failed to load facility ID:",v)}})},[]);const n=h.useCallback(()=>Be(null,null,function*(){if(s)try{r(!0);const{data:x,error:v}=yield I.from("facility_office_hours").select("*").eq("facility_id",s).single();if(v&&v.code!=="PGRST116"){console.error("Error loading office hours:",v);return}x&&c({workingDays:x.working_days,startHour:x.start_hour,endHour:x.end_hour,openHolidays:x.open_holidays})}catch(x){console.error("Error loading office hours:",x)}finally{r(!1)}}),[s]);h.useEffect(()=>{s&&n()},[s,n]);const o=x=>Be(null,null,function*(){if(s)try{m(!0);const{error:v}=yield I.from("facility_office_hours").upsert({facility_id:s,working_days:x.workingDays,start_hour:x.startHour,end_hour:x.endHour,open_holidays:x.openHolidays});if(v){console.error("Error saving office hours:",v);return}localStorage.setItem("officeHoursSettings",JSON.stringify(x))}catch(v){console.error("Error saving office hours:",v)}finally{m(!1)}}),l=x=>{const v=we(Ee({},d),{workingDays:we(Ee({},d.workingDays),{[x]:!d.workingDays[x]})});c(v),o(v)},u=()=>{const x=we(Ee({},d),{openHolidays:!d.openHolidays});c(x),o(x)},g=(x,v)=>{const N=we(Ee({},d),{[x==="start"?"startHour":"endHour"]:v});c(N),o(N)},b=x=>{const v=x>=12?"PM":"AM";return`${x===0?12:x>12?x-12:x}:00 ${v}`},p=()=>{const x=Object.entries(d.workingDays).filter(([,v])=>v).map(([v])=>v.charAt(0).toUpperCase()+v.slice(1));return x.length===0?"No days selected":x.length===7?"Every day":x.length===5&&!d.workingDays.saturday&&!d.workingDays.sunday?"Monday - Friday":x.join(", ")};return t?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})]})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h5",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Office Hours & Scheduling"}),e.jsx("p",{className:"text-sm text-gray-600",children:"These settings affect BI test scheduling, analytics calculations, and streak tracking"}),i&&e.jsx("div",{className:"mt-4 text-sm text-blue-600 bg-blue-50 px-4 py-2 rounded-lg",children:"💾 Saving changes..."})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-[#4ECDC4] bg-opacity-10 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-[#4ECDC4]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("h6",{className:"text-lg font-semibold text-gray-800",children:"📅 Working Days"})]}),e.jsx("div",{className:"grid grid-cols-7 gap-3 mb-4",children:Object.entries(d.workingDays).map(([x,v])=>e.jsxs("button",{onClick:()=>l(x),className:`p-4 text-center rounded-xl font-medium transition-all duration-200 transform hover:scale-105 ${v?"bg-[#4ECDC4] text-white shadow-lg shadow-[#4ECDC4]/25":"bg-gray-50 text-gray-600 hover:bg-gray-100 border-2 border-gray-200"}`,children:[e.jsx("div",{className:"text-sm font-bold",children:x.charAt(0).toUpperCase()}),e.jsx("div",{className:"text-xs opacity-75",children:x.slice(0,3)})]},x))}),e.jsx("div",{className:"bg-[#4ECDC4] bg-opacity-10 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-[#4ECDC4] font-medium",children:["✅ Selected: ",p()]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx("div",{className:"p-2 bg-[#4ECDC4] bg-opacity-10 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-[#4ECDC4]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h6",{className:"text-lg font-semibold text-gray-800",children:"⏰ Hours of Operation"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600 mb-3",children:"Start Time"}),e.jsx("select",{value:d.startHour,onChange:x=>g("start",parseInt(x.target.value)),className:"px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] text-lg font-semibold bg-white shadow-sm",children:Array.from({length:24},(x,v)=>e.jsx("option",{value:v,children:b(v)},v))})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-2xl text-[#4ECDC4] font-bold",children:"→"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"to"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600 mb-3",children:"End Time"}),e.jsx("select",{value:d.endHour,onChange:x=>g("end",parseInt(x.target.value)),className:"px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] text-lg font-semibold bg-white shadow-sm",children:Array.from({length:24},(x,v)=>e.jsx("option",{value:v,children:b(v)},v))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx("div",{className:"p-2 bg-[#4ECDC4] bg-opacity-10 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-[#4ECDC4]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})})}),e.jsx("h6",{className:"text-lg font-semibold text-gray-800",children:"🎉 Holiday Operations"})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"text-4xl",children:d.openHolidays?"🎊":"🏠"}),e.jsxs("div",{children:[e.jsx("h6",{className:"text-lg font-semibold text-gray-800",children:d.openHolidays?"Open on holidays":"Closed on holidays"}),e.jsx("p",{className:"text-sm text-gray-600",children:d.openHolidays?"BI tests and operations will continue on holidays":"BI tests due on holidays will be rescheduled to the next business day"})]})]}),e.jsx("button",{onClick:u,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-[#4ECDC4]/20 ${d.openHolidays?"bg-[#4ECDC4] shadow-lg shadow-[#4ECDC4]/25":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-all duration-300 shadow-lg ${d.openHolidays?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h6",{className:"text-lg font-semibold text-blue-800",children:"📋 Current Schedule Summary"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"Working Days"}),e.jsx("div",{className:"text-lg font-semibold text-gray-800",children:p()})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"Hours"}),e.jsxs("div",{className:"text-lg font-semibold text-gray-800",children:[b(d.startHour)," - ",b(d.endHour)]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"Holidays"}),e.jsx("div",{className:"text-lg font-semibold text-gray-800",children:d.openHolidays?"Open":"Closed"})]})]})]}),e.jsx(Or,{})]})},Fr=({user:s,mode:a})=>{var t,r;return e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),e.jsx("input",{id:"firstName",type:"text",placeholder:"Enter first name",defaultValue:((t=s==null?void 0:s.full_name)==null?void 0:t.split(" ")[0])||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),e.jsx("input",{id:"lastName",type:"text",placeholder:"Enter last name",defaultValue:((r=s==null?void 0:s.full_name)==null?void 0:r.split(" ").slice(1).join(" "))||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),e.jsx("input",{id:"email",type:"email",placeholder:"user@clinic.com",defaultValue:(s==null?void 0:s.email)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),a==="add"&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"An invitation email will be sent to this address"})]})]})]})},Gr=({user:s})=>{const[a,t]=h.useState(!1),[r,i]=h.useState("");return e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Role & Permissions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"userRole",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),a?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{id:"newRoleInput",type:"text",placeholder:"Enter new role name",value:r,onChange:m=>i(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{r.trim()&&(i(""),t(!1))},className:"px-3 py-1 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-xs",children:"Add Role"}),e.jsx("button",{onClick:()=>{i(""),t(!1)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"Cancel"})]})]}):e.jsxs("select",{id:"userRole",defaultValue:(s==null?void 0:s.role)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"",children:"Select a role"}),e.jsx("option",{value:"Admin",children:"Admin"}),e.jsx("option",{value:"Technician",children:"Technician"}),e.jsx("option",{value:"Nurse",children:"Nurse"}),e.jsx("option",{value:"add-new",children:"+ Add New Role"})]}),!a&&e.jsx("button",{onClick:()=>t(!0),className:"text-xs text-[#4ECDC4] hover:text-[#38b2ac] mt-1",children:"+ Add New Role"})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Module Permissions"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{name:"Inventory Management",key:"inventory"},{name:"Sterilization",key:"sterilization"},{name:"Environmental Cleaning",key:"cleaning"},{name:"Knowledge Hub",key:"knowledge"},{name:"Settings",key:"settings"},{name:"Reports",key:"reports"}].map(m=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",defaultChecked:(s==null?void 0:s.role)==="Admin",className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("span",{className:"text-sm text-gray-700",children:m.name})]},m.key))})]})]})},Ur=()=>{const[s,a]=h.useState(!1),[t,r]=h.useState("");return e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Department Assignment"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"userDepartment",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),s?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{id:"newDepartmentInput",type:"text",placeholder:"Enter new department name",value:t,onChange:i=>r(i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{t.trim()&&(r(""),a(!1))},className:"px-3 py-1 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-xs",children:"Add Department"}),e.jsx("button",{onClick:()=>{r(""),a(!1)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"Cancel"})]})]}):e.jsxs("select",{id:"userDepartment",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"",children:"Select department"}),e.jsx("option",{value:"Sterilization",children:"Sterilization"}),e.jsx("option",{value:"Environmental Cleaning",children:"Environmental Cleaning"}),e.jsx("option",{value:"Inventory",children:"Inventory"}),e.jsx("option",{value:"General",children:"General"}),e.jsx("option",{value:"add-new",children:"+ Add New Department"})]}),!s&&e.jsx("button",{onClick:()=>a(!0),className:"text-xs text-[#4ECDC4] hover:text-[#38b2ac] mt-1",children:"+ Add New Department"})]})})]})},zr=()=>e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Security Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Force Password Change"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Require user to change password on next login"})]}),e.jsx("button",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-md hover:bg-orange-200 transition-colors text-xs",children:"Force Change"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Session Management"}),e.jsx("p",{className:"text-xs text-gray-500",children:"View and manage active sessions"})]}),e.jsx("button",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors text-xs",children:"View Sessions"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Access Logs"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Monitor login attempts and system access"})]}),e.jsx("button",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 transition-colors text-xs",children:"View Logs"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"IP Restrictions"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Configure allowed IP ranges for this user"})]}),e.jsx("button",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-md hover:bg-green-200 transition-colors text-xs",children:"Manage IPs"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Device Management"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Approve and manage mobile devices"})]}),e.jsx("button",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-md hover:bg-indigo-200 transition-colors text-xs",children:"Manage Devices"})]})]})]}),Hr=({user:s})=>e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Login Security"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Failed Login Attempts"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Account lockout after multiple failed attempts"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"1",max:"10",defaultValue:"5",className:"w-16 px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("span",{className:"text-xs text-gray-500",children:"attempts"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Lockout Duration"}),e.jsx("p",{className:"text-xs text-gray-500",children:"How long to lock account after failed attempts"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"5",max:"1440",defaultValue:"30",className:"w-16 px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("span",{className:"text-xs text-gray-500",children:"minutes"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Session Timeout"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Auto-logout after inactivity"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("select",{className:"px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"15",children:"15 minutes"}),e.jsx("option",{value:"30",selected:!0,children:"30 minutes"}),e.jsx("option",{value:"60",children:"1 hour"}),e.jsx("option",{value:"240",children:"4 hours"}),e.jsx("option",{value:"480",children:"8 hours"})]})})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Audit & Compliance"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Activity Monitoring"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Track user actions and system changes"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"activity-monitoring",defaultChecked:!0,className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("label",{htmlFor:"activity-monitoring",className:"text-xs text-gray-700",children:"Enabled"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Data Export Logs"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Log all data export activities"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"export-logs",defaultChecked:!0,className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("label",{htmlFor:"export-logs",className:"text-xs text-gray-700",children:"Enabled"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Sensitive Data Access"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Require additional verification for sensitive data"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"sensitive-data",defaultChecked:(s==null?void 0:s.role)==="Admin",className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("label",{htmlFor:"sensitive-data",className:"text-xs text-gray-700",children:"Enabled"})]})]})]})]})]}),Br=({isOpen:s,onClose:a,user:t,mode:r,onSave:i})=>s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto scrollbar-hide",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r==="add"?"Add New User":`Edit: ${(t==null?void 0:t.full_name)||"Unknown User"}`}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:e.jsx(j,{path:Na,size:1.2})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Fr,{user:t,mode:r}),e.jsx(Gr,{user:t,mode:r}),e.jsx(Ur,{user:t,mode:r}),e.jsx(zr,{}),e.jsx(Hr,{user:t,mode:r})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{i({}),a()},className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors",children:r==="add"?"Add User":"Save Changes"})]})]})}):null,qr=({showDeleteModal:s,selectedUser:a,onCloseDeleteModal:t,onConfirmDelete:r})=>e.jsx(e.Fragment,{children:s&&a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 rounded-lg p-2 mr-3",children:e.jsx(j,{path:Rt,size:1.5,className:"text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete User"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Are you sure you want to delete this user? This action cannot be undone."}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-red-600",children:a==null?void 0:a.name.split(" ").map(i=>i[0]).join("")})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:a==null?void 0:a.name}),e.jsx("p",{className:"text-xs text-gray-500",children:a==null?void 0:a.email}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${(a==null?void 0:a.role)==="Admin"?"bg-red-100 text-red-800":(a==null?void 0:a.role)==="Technician"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:a==null?void 0:a.role}),e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${(a==null?void 0:a.status)==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:a==null?void 0:a.status})]})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Delete User"})]})]})})});var Vr=Object.defineProperty,Yr=Object.defineProperties,Wr=Object.getOwnPropertyDescriptors,Us=Object.getOwnPropertySymbols,Kr=Object.prototype.hasOwnProperty,Zr=Object.prototype.propertyIsEnumerable,zs=(s,a,t)=>a in s?Vr(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,Qr=(s,a)=>{for(var t in a||(a={}))Kr.call(a,t)&&zs(s,t,a[t]);if(Us)for(var t of Us(a))Zr.call(a,t)&&zs(s,t,a[t]);return s},Xr=(s,a)=>Yr(s,Wr(a)),Hs=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const Jr=()=>{const{currentUser:s}=ne(),[a,t]=h.useState({sessionTimeout:480,inactiveTimeout:30,rememberMeDuration:7,requireReauthForSensitive:!0,twoFactorEnabled:!1}),[r,i]=h.useState(!1),[m,d]=h.useState(!1),[c,n]=h.useState(null),o=h.useCallback(()=>Hs(null,null,function*(){var g,b;if(s){i(!0);try{const{data:p,error:x}=yield I.from("user_security_settings").select("*").eq("user_id",s.id).single();x&&x.code!=="PGRST116"?console.error("Error loading security settings:",x):p&&t({sessionTimeout:p.session_timeout||480,inactiveTimeout:p.inactive_timeout||30,rememberMeDuration:p.remember_me_duration||7,requireReauthForSensitive:(g=p.require_reauth_for_sensitive)!=null?g:!0,twoFactorEnabled:(b=p.two_factor_enabled)!=null?b:!1})}catch(p){console.error("Error loading security settings:",p)}finally{i(!1)}}}),[s]);h.useEffect(()=>{o()},[o]);const l=()=>Hs(null,null,function*(){if(s){d(!0),n(null);try{const{error:g}=yield I.from("user_security_settings").upsert({user_id:s.id,session_timeout:a.sessionTimeout,inactive_timeout:a.inactiveTimeout,remember_me_duration:a.rememberMeDuration,require_reauth_for_sensitive:a.requireReauthForSensitive,two_factor_enabled:a.twoFactorEnabled,updated_at:new Date().toISOString()});if(g)throw g;n({type:"success",text:"Security settings saved successfully!"}),localStorage.setItem("cliniio_session_timeout",a.sessionTimeout.toString()),localStorage.setItem("cliniio_inactive_timeout",a.inactiveTimeout.toString()),localStorage.setItem("cliniio_remember_me_duration",a.rememberMeDuration.toString()),ea.updateConfig({sessionTimeout:a.sessionTimeout,inactiveTimeout:a.inactiveTimeout,rememberMeDuration:a.rememberMeDuration})}catch(g){console.error("Error saving security settings:",g),n({type:"error",text:"Failed to save security settings. Please try again."})}finally{d(!1)}}}),u=(g,b)=>{t(p=>Xr(Qr({},p),{[g]:b}))};return r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(g=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},g))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Security & Sessions"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Configure how long you stay logged in and security preferences for your account."})]}),c&&e.jsx("div",{className:`p-4 rounded-lg ${c.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:c.text}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Session Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"session-timeout",className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Session Duration"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:"session-timeout",type:"number",min:"60",max:"1440",value:a.sessionTimeout,onChange:g=>u("sessionTimeout",parseInt(g.target.value)||480),className:"w-20 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"minutes (1-24 hours)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How long you stay logged in before being automatically logged out"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"inactive-timeout",className:"block text-sm font-medium text-gray-700 mb-2",children:"Inactive Timeout"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:"inactive-timeout",type:"number",min:"5",max:"120",value:a.inactiveTimeout,onChange:g=>u("inactiveTimeout",parseInt(g.target.value)||30),className:"w-20 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"minutes (5-120 minutes)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How long of inactivity before automatic logout"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"remember-me-duration",className:"block text-sm font-medium text-gray-700 mb-2",children:"Remember Me Duration"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:"remember-me-duration",type:"number",min:"1",max:"30",value:a.rememberMeDuration,onChange:g=>u("rememberMeDuration",parseInt(g.target.value)||7),className:"w-20 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"days (1-30 days)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'How long to stay logged in when using "Remember Me"'})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Security Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"require-reauth-toggle",className:"text-sm font-medium text-gray-700",children:"Require Re-authentication for Sensitive Actions"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ask for password confirmation before changing critical settings"})]}),e.jsx("button",{id:"require-reauth-toggle",onClick:()=>u("requireReauthForSensitive",!a.requireReauthForSensitive),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${a.requireReauthForSensitive?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a.requireReauthForSensitive?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"two-factor-toggle",className:"text-sm font-medium text-gray-700",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add an extra layer of security to your account (coming soon)"})]}),e.jsx("button",{id:"two-factor-toggle",disabled:!0,className:"relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 cursor-not-allowed",children:e.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white translate-x-1"})})]})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-4",children:"Current Session"}),e.jsx("div",{className:"text-sm text-blue-800 space-y-2",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Logged in as:"})," ",s==null?void 0:s.email]})}),e.jsx("div",{className:"mt-4",children:e.jsx(Jt,{variant:"detailed"})})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:l,disabled:m,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"Saving...":"Save Settings"})})]})};var Te=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});function en(){const{getCurrentFacilityId:s}=he(),{currentUser:a}=ne(),[t,r]=h.useState([]),[i,m]=h.useState([]),[d,c]=h.useState(!0),[n,o]=h.useState(null),[l,u]=h.useState(null),[g,b]=h.useState(!1),[p,x]=h.useState(!1),[v,N]=h.useState([]),[y,_]=h.useState(new Set);function E(){return Te(this,null,function*(){c(!0);try{const[C,S]=yield Promise.all([la(),oa()]);r(C),m(S)}catch(C){console.error("Failed to load audit dashboard:",C)}finally{c(!1)}})}function D(){return Te(this,null,function*(){try{const C=yield ca();N(C)}catch(C){console.error("Failed to load historical compliance data:",C)}})}h.useEffect(()=>{E()},[]);const R=C=>{o(C)},oe=()=>{o(null)},H=C=>{const S=new Set(y);S.has(C)?S.delete(C):S.add(C),_(S)},Re=C=>{switch(C){case"high":return e.jsx(Ne,{className:"w-4 h-4 text-red-500"});case"medium":return e.jsx(Ne,{className:"w-4 h-4 text-orange-500"});case"low":return e.jsx(Ne,{className:"w-4 h-4 text-yellow-500"});default:return e.jsx(Ne,{className:"w-4 h-4 text-gray-500"})}},ke=C=>{switch(C){case"high":return"bg-red-500 text-white";case"medium":return"bg-orange-500 text-white";case"low":return"bg-yellow-500 text-white";default:return"bg-gray-500 text-white"}},je=C=>Te(null,null,function*(){u(C);try{const{data:{user:S}}=yield I.auth.getUser(),{error:P}=yield I.from("audit_flags").update({resolved:!0}).eq("id",C);if(P){console.error("Failed to resolve audit flag:",P),alert("Failed to resolve compliance issue: "+P.message);return}console.log("Successfully updated audit flag in database");const{error:T}=yield I.from("audit_logs").insert({id:crypto.randomUUID(),module:"compliance",table_name:"audit_flags",action:"compliance_issue_resolved",record_id:C,user_id:(a==null?void 0:a.id)||"00000000-0000-0000-0000-000000000000",facility_id:s()||"unknown-facility",metadata:{resolution_timestamp:new Date().toISOString(),resolved_by:(a==null?void 0:a.id)||"unknown-user",resolution_type:"manual_resolution"},created_at:new Date().toISOString()});T&&console.error("Failed to create audit log:",T),console.log("Refreshing data..."),yield E();const K=t.filter(U=>U.id!==C);r(K),console.log("Data refreshed, current flags count:",K.length),(n==null?void 0:n.id)===C&&o(null),console.log("Compliance issue resolved successfully:",C),setTimeout(()=>{console.log("Dispatching complianceIssueResolved event"),window.dispatchEvent(new CustomEvent("complianceIssueResolved",{detail:{flagId:C,resolvedCount:K.length}}))},500)}catch(S){console.error("Error resolving compliance issue:",S)}finally{u(null)}}),Le=()=>Te(null,null,function*(){b(!0);try{const{data:{user:C}}=yield I.auth.getUser(),S={generated_at:new Date().toISOString(),generated_by:(C==null?void 0:C.id)||"unknown-user",facility_id:s()||"unknown-facility",active_issues:t.filter(U=>!U.resolved),resolved_issues:t.filter(U=>U.resolved),total_issues:t.length,severity_breakdown:{high:t.filter(U=>U.severity==="high"&&!U.resolved).length,medium:t.filter(U=>U.severity==="medium"&&!U.resolved).length,low:t.filter(U=>U.severity==="low"&&!U.resolved).length}};yield I.from("audit_logs").insert({id:crypto.randomUUID(),module:"compliance",table_name:"audit_flags",action:"compliance_report_exported",record_id:null,user_id:(C==null?void 0:C.id)||"unknown-user",facility_id:s()||"unknown-facility",metadata:{export_timestamp:new Date().toISOString(),exported_by:(C==null?void 0:C.id)||"unknown-user",report_summary:S},created_at:new Date().toISOString()});const P=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),T=URL.createObjectURL(P),K=document.createElement("a");K.href=T,K.download=`compliance-report-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(K),K.click(),document.body.removeChild(K),URL.revokeObjectURL(T)}catch(C){console.error("Error exporting compliance report:",C)}finally{b(!1)}});return e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Audit & Compliance Dashboard"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{x(!p),p||D()},className:`px-4 py-2 rounded transition-colors ${p?"bg-purple-500 text-white hover:bg-purple-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:p?"Hide Historical":"View Historical"}),e.jsxs("button",{onClick:Le,disabled:g||t.length===0,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Vt,{className:"w-4 h-4"}),g?"Exporting...":"Export Report"]})]})]}),d?e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"animate-spin w-4 h-4"})," Loading…"]}):e.jsx(e.Fragment,{children:e.jsxs(sa,{className:"p-4",children:[e.jsxs("h2",{className:"text-lg font-medium mb-2",children:["🚨 Active Compliance Issues (",t.length,")"]}),t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),e.jsx("p",{className:"text-muted text-lg",children:"No active compliance issues!"}),e.jsx("p",{className:"text-muted text-sm mt-2",children:"All systems are operating within compliance standards."})]}):e.jsx("div",{className:"space-y-4",children:t.map(C=>{const S=y.has(C.id);return e.jsxs("div",{className:"border rounded-lg hover:shadow-md transition-all",children:[e.jsxs("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>H(C.id),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[S?e.jsx(Yt,{className:"w-4 h-4 text-gray-500"}):e.jsx(Wt,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-sm font-medium ${C.severity==="high"?"bg-red-100 text-red-800 border border-red-200":C.severity==="medium"?"bg-orange-100 text-orange-800 border border-orange-200":"bg-yellow-100 text-yellow-800 border border-yellow-200"}`,children:[C.severity.toUpperCase()," SEVERITY"]}),C.compliance_standard&&e.jsx("span",{className:"text-sm bg-[#4ECDC4] text-white px-3 py-1 rounded font-medium",children:C.compliance_standard})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:P=>{P.stopPropagation(),R(C)},className:"px-3 py-1 bg-[#4ECDC4] text-white text-sm rounded hover:bg-[#3BB5AD] transition-colors",children:"View Details"}),e.jsxs("button",{onClick:P=>{P.stopPropagation(),je(C.id)},disabled:l===C.id,className:"px-3 py-1 bg-gray-600 text-white text-sm rounded hover:bg-gray-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center gap-1",children:[l===C.id?e.jsx(Me,{className:"w-3 h-3 animate-spin"}):e.jsx(ms,{className:"w-3 h-3"}),l===C.id?"Resolving...":"Resolve"]})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx("p",{className:"text-gray-900 font-medium",children:C.description})})]}),S&&e.jsx("div",{className:"px-4 pb-4 border-t bg-gray-50/50",children:e.jsxs("div",{className:"pt-4 space-y-4",children:[C.compliance_standard&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Compliance Requirement"}),e.jsxs("div",{className:"bg-blue-50/50 p-3 rounded-lg border border-blue-100",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Standard:"}),e.jsx("p",{className:"text-gray-800 font-semibold",children:C.compliance_standard})]}),C.regulation_reference&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Reference:"}),e.jsx("p",{className:"text-gray-800",children:C.regulation_reference})]})]}),C.requirement_description&&e.jsxs("div",{className:"mt-3",children:[e.jsx("span",{className:"font-medium text-blue-800",children:"Requirement:"}),e.jsx("p",{className:"text-blue-700 mt-1",children:C.requirement_description})]})]})]}),C.corrective_action&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Required Actions"}),e.jsx("div",{className:"bg-green-50 p-3 rounded-lg",children:e.jsx("div",{className:"text-green-800 whitespace-pre-line text-sm",children:C.corrective_action})})]}),(C.responsible_party||C.due_date)&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"Assignment & Timeline"}),e.jsx("div",{className:"bg-purple-50 p-3 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[C.responsible_party&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-purple-800",children:"Responsible:"}),e.jsx("p",{className:"text-purple-700 font-semibold",children:C.responsible_party})]}),C.due_date&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-purple-800",children:"Due Date:"}),e.jsx("p",{className:"text-purple-700 font-semibold",children:new Date(C.due_date).toLocaleDateString()})]})]})})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["📋 System: ",C.related_table.replace("_"," ")]}),C.related_id&&e.jsxs("span",{children:["🔗 Record: ",C.related_id.slice(0,8),"..."]}),e.jsxs("span",{children:["📅 Detected: ",new Date(C.created_at).toLocaleDateString()]})]})})]})})]},C.id)})})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto scrollbar-hide",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[Re(n.severity),e.jsx("h2",{className:"text-xl font-semibold",children:"Compliance Issue Details"})]}),e.jsx("button",{onClick:oe,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(Kt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-sm font-medium ${ke(n.severity)}`,children:[n.severity.toUpperCase()," SEVERITY"]}),e.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-sm font-medium ${n.resolved?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:n.resolved?"RESOLVED":"ACTIVE"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Issue Description"}),e.jsx("p",{className:"text-gray-700 bg-gray-50 p-4 rounded-lg",children:n.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(us,{className:"w-4 h-4 text-blue-600"}),e.jsx("h4",{className:"font-medium text-blue-900",children:"Related Table"})]}),e.jsx("p",{className:"text-blue-700",children:n.related_table})]}),n.related_id&&e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(us,{className:"w-4 h-4 text-green-600"}),e.jsx("h4",{className:"font-medium text-green-900",children:"Record ID"})]}),e.jsx("p",{className:"text-green-700 font-mono text-sm",children:n.related_id})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Zt,{className:"w-4 h-4 text-gray-600"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Timeline"})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Created:"})," ",new Date(n.created_at).toLocaleString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Age:"})," ",Math.floor((Date.now()-new Date(n.created_at).getTime())/(1e3*60*60*24))," days"]})]})]}),n.compliance_standard&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Compliance Requirements"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-blue-800",children:"Standard:"}),e.jsx("span",{className:"text-blue-700 ml-2",children:n.compliance_standard})]}),n.regulation_reference&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-blue-800",children:"Reference:"}),e.jsx("span",{className:"text-blue-700 ml-2",children:n.regulation_reference})]}),n.requirement_description&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-blue-800",children:"Requirement:"}),e.jsx("p",{className:"text-blue-700 mt-1",children:n.requirement_description})]})]})]}),n.corrective_action&&e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Required Corrective Actions"}),e.jsx("div",{className:"text-sm text-green-800 whitespace-pre-line",children:n.corrective_action})]}),(n.responsible_party||n.due_date)&&e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-purple-900 mb-2",children:"Assignment & Timeline"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.responsible_party&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-purple-800",children:"Responsible Party:"}),e.jsx("p",{className:"text-purple-700",children:n.responsible_party})]}),n.due_date&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-purple-800",children:"Due Date:"}),e.jsx("p",{className:"text-purple-700",children:new Date(n.due_date).toLocaleDateString()})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t",children:[e.jsx("button",{onClick:oe,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",children:"Close"}),e.jsxs("button",{onClick:()=>je(n.id),disabled:l===n.id,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[l===n.id?e.jsx(Me,{className:"w-4 h-4 animate-spin"}):e.jsx(ms,{className:"w-4 h-4"}),l===n.id?"Resolving...":"Mark as Resolved"]})]})]})})})]})}var sn=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const tn=({initialTab:s,complianceFlagCount:a=0})=>{const[t]=h.useState([]),[r,i]=h.useState(!1),[m,d]=h.useState(!1),[c,n]=h.useState(!1),[o,l]=h.useState(null),[u,g]=h.useState(s==="audit"?"audit":s==="security"?"security":s==="office-hours"?"office-hours":"users"),[b,p]=h.useState(0);(()=>{const _=t.filter(H=>H.status==="Active").length,E=[{min:0,max:5,name:"0-5 Users"},{min:6,max:15,name:"6-15 Users"},{min:16,max:21,name:"16-21 Users"},{min:22,max:1/0,name:"21+ Users"}],D=E.find(H=>_>=H.min&&_<=H.max),R=E.find(H=>H.min>_);if(!D||!R)return null;const oe=R.min-_;return{currentTier:D,nextTier:R,usersToNextTier:oe,activeUserCount:_}})(),h.useEffect(()=>{function _(){return sn(this,null,function*(){try{const{count:E,error:D}=yield I.from("audit_flags").select("*",{count:"exact",head:!0}).eq("resolved",!1);!D&&typeof E=="number"&&p(E)}catch(E){console.error("Failed to fetch audit flag count:",E)}})}_()},[]);const v=()=>{i(!1),d(!1),n(!1),l(null)},N=_=>{console.log("Saving user:",_),v()},y=()=>{console.log("Deleting user:",o),v()};return e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"System Administration"}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>g("users"),className:`py-2 px-1 border-b-2 font-medium text-sm ${u==="users"?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"User Management"}),e.jsx("button",{onClick:()=>g("office-hours"),className:`py-2 px-1 border-b-2 font-medium text-sm ${u==="office-hours"?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Office Hours"}),e.jsx("button",{onClick:()=>g("security"),className:`py-2 px-1 border-b-2 font-medium text-sm ${u==="security"?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Security & Sessions"}),e.jsx("button",{onClick:()=>g("audit"),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${u==="audit"?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} ${a>0?"bg-red-50 text-red-700 border-red-300":""}`,children:e.jsx("span",{children:"Audit & Compliance"})})]})})}),u==="users"&&e.jsx(e.Fragment,{children:e.jsx(ta,{})}),u==="office-hours"&&e.jsx("div",{children:e.jsx($r,{})}),u==="security"&&e.jsx("div",{children:e.jsx(Jr,{})}),u==="audit"&&e.jsx("div",{children:e.jsx(en,{})}),e.jsx(Br,{isOpen:r||m,onClose:v,onSave:N,user:o,mode:m?"edit":"add"}),e.jsx(qr,{showDeleteModal:c,selectedUser:o,onCloseDeleteModal:()=>n(!1),onConfirmDelete:y})]})},an=()=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Billing & Subscription Settings"}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Current Plan"}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"text-base font-semibold text-blue-900",children:"Professional Plan"}),e.jsx("p",{className:"text-xs text-blue-700",children:"$299/month • 50 users • Full features"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Next billing: Jan 15, 2024"})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"Active"})})]})})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Payment Methods"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-5 bg-blue-600 rounded mr-2 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"VISA"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"•••• •••• •••• 4242"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Expires 12/25"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"inline-block bg-green-100 text-green-800 text-xs px-1 py-0.5 rounded-full",children:"Default"}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-xs",children:"Edit"})]})]}),e.jsx("button",{className:"w-full p-2 border-2 border-dashed border-gray-300 rounded-md text-gray-500 hover:border-gray-400 hover:text-gray-700 transition-colors text-xs",children:"+ Add Payment Method"})]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Billing Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company-name",className:"block text-xs font-medium text-gray-600 mb-1",children:"Company Name"}),e.jsx("input",{id:"company-name",type:"text",defaultValue:"Medical Center Inc.",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tax-id",className:"block text-xs font-medium text-gray-600 mb-1",children:"Tax ID"}),e.jsx("input",{id:"tax-id",type:"text",defaultValue:"12-3456789",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billing-email",className:"block text-xs font-medium text-gray-600 mb-1",children:"Billing Email"}),e.jsx("input",{id:"billing-email",type:"email",defaultValue:"billing@medicalcenter.com",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billing-phone",className:"block text-xs font-medium text-gray-600 mb-1",children:"Phone"}),e.jsx("input",{id:"billing-phone",type:"tel",defaultValue:"+1 (555) 123-4567",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billing-city",className:"block text-xs font-medium text-gray-600 mb-1",children:"City"}),e.jsx("input",{id:"billing-city",type:"text",defaultValue:"New York",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billing-state-zip",className:"block text-xs font-medium text-gray-600 mb-1",children:"State/ZIP"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{id:"billing-state",type:"text",defaultValue:"NY",className:"w-1/2 px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("input",{id:"billing-zip",type:"text",defaultValue:"10001",className:"w-1/2 px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]})]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Invoice Settings"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded-md",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Frequency"}),e.jsxs("select",{className:"px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{children:"Monthly"}),e.jsx("option",{children:"Quarterly"}),e.jsx("option",{children:"Annually"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded-md",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Auto-pay"}),e.jsx("input",{type:"checkbox",id:"auto-pay",className:"rounded",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded-md",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Reminders"}),e.jsx("input",{type:"checkbox",id:"payment-reminders",className:"rounded",defaultChecked:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Usage & Limits"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-2 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Users"}),e.jsx("span",{className:"text-xs text-gray-600",children:"35/50"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full",style:{width:"70%"}})})]}),e.jsxs("div",{className:"p-2 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Storage"}),e.jsx("span",{className:"text-xs text-gray-600",children:"2.1/10 GB"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-green-600 h-1.5 rounded-full",style:{width:"21%"}})})]}),e.jsxs("div",{className:"p-2 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"API Calls"}),e.jsx("span",{className:"text-xs text-gray-600",children:"45K/100K"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-yellow-600 h-1.5 rounded-full",style:{width:"45%"}})})]})]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Plan Management"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("button",{className:"p-2 border border-blue-300 bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100 transition-colors text-xs",children:"Upgrade"}),e.jsx("button",{className:"p-2 border border-gray-300 bg-gray-50 text-gray-700 rounded-md hover:bg-gray-100 transition-colors text-xs",children:"Downgrade"}),e.jsx("button",{className:"p-2 border border-red-300 bg-red-50 text-red-700 rounded-md hover:bg-red-100 transition-colors text-xs",children:"Cancel"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Save Changes"})})]}),f={HEADER:{TITLE:"AI and Analytics Settings",SUBTITLE:"Configure AI features, analytics, and intelligence settings"},BUTTONS:{RESET:"Reset",SAVE:"Save Settings",SAVING:"Saving..."},MESSAGES:{LOADING:"Loading AI settings...",FACILITY_NOT_AVAILABLE:"Facility not available. Please select a facility first.",FAILED_TO_LOAD:"Failed to load AI settings. Please try refreshing the page.",SAVE_SUCCESS:"AI settings saved and applied successfully!",SAVE_ERROR:"Failed to save AI settings",RESET_SUCCESS:"Settings reset to defaults",RESET_ERROR:"Failed to reset settings"},SECTIONS:{AI_SERVICE_STATUS:"AI Service Status",ENABLE_AI_FEATURES:"Enable AI Features",AI_FEATURES:"AI Features",TOKEN_USAGE_DASHBOARD:"AI Usage Dashboard",THROTTLING_CONTROLS:"Throttling Controls",ANALYTICS_CONFIGURATION:"Analytics Configuration",INTELLIGENCE_SETTINGS:"Intelligence Settings",PERFORMANCE_MONITORING:"Performance Monitoring",DATA_PRIVACY_SECURITY:"Data Privacy & Security",INTEGRATION_SETTINGS:"Integration Settings",USER_EXPERIENCE:"User Experience"},FORM_GROUPS:{COMPUTER_VISION:"Computer Vision",PREDICTIVE_ANALYTICS:"Predictive Analytics",SMART_WORKFLOW:"Smart Workflow",DATA_COLLECTION:"Data Collection",REPORTING_EXPORT:"Reporting & Export",RISK_ALERTS:"Risk & Alerts",AI_INSIGHTS:"AI Insights",QUALITY_METRICS:"Quality Metrics",OPTIMIZATION:"Optimization",PRIVACY_CONTROLS:"Privacy Controls",SECURITY_FEATURES:"Security Features",EXTERNAL_SERVICES:"External Services",SYSTEM_HEALTH:"System Health",AI_ASSISTANCE:"AI Assistance",INTERFACE_HELP:"Interface & Help"},TOGGLE_LABELS:{TOOL_CONDITION_ASSESSMENT:"Tool Condition Assessment",BARCODE_QUALITY_DETECTION:"Barcode Quality Detection",DAMAGE_DETECTION:"Damage Detection",CYCLE_OPTIMIZATION:"Cycle Optimization",FAILURE_PREDICTION:"Failure Prediction",EFFICIENCY_OPTIMIZATION:"Efficiency Optimization",INTELLIGENT_WORKFLOW_SELECTION:"Intelligent Workflow Selection",AUTOMATED_PROBLEM_DETECTION:"Automated Problem Detection",DATA_COLLECTION:"Data Collection",REAL_TIME_UPDATES:"Real-time Updates",HISTORICAL_DATA_RETENTION:"Historical Data Retention",EXPORT_CAPABILITIES:"Export Capabilities",DASHBOARD_CUSTOMIZATION:"Dashboard Customization",RISK_ASSESSMENT:"Risk Assessment",ALERT_SYSTEM:"Alert System",ESCALATION_RULES:"Escalation Rules",AI_RECOMMENDATIONS:"AI Recommendations",OPTIMIZATION_TIPS:"Optimization Tips",ACCURACY_TRACKING:"Accuracy Tracking",RESPONSE_TIME_MONITORING:"Response Time Monitoring",ERROR_RATE_TRACKING:"Error Rate Tracking",PERFORMANCE_ALERTS:"Performance Alerts",MODEL_HEALTH_MONITORING:"Model Health Monitoring",DATA_ANONYMIZATION:"Data Anonymization",THIRD_PARTY_PERMISSIONS:"Third-party Permissions",COMPLIANCE_MONITORING:"Compliance Monitoring",ENCRYPTION:"Encryption",ACCESS_CONTROL:"Access Control",EXTERNAL_SERVICES:"External Services",API_RATE_LIMITING:"API Rate Limiting",WEBHOOK_ENDPOINTS:"Webhook Endpoints",HEALTH_MONITORING:"Health Monitoring",SYNC_SCHEDULING:"Sync Scheduling",AI_SUGGESTIONS:"AI Suggestions",LEARNING_PATHS:"Learning Paths",PERSONALIZATION:"Personalization",ACCESSIBILITY_FEATURES:"Accessibility Features",SMART_HELP_SYSTEM:"Smart Help System"},DESCRIPTIONS:{MASTER_AI_TOGGLE:"Master toggle for all AI-powered features across the system",TOOL_CONDITION_ASSESSMENT:"AI-powered tool wear and condition analysis",BARCODE_QUALITY_DETECTION:"Automatic barcode readability assessment",DAMAGE_DETECTION:"AI detection of tool damage and defects",CYCLE_OPTIMIZATION:"AI-powered sterilization cycle optimization",FAILURE_PREDICTION:"Predictive maintenance and failure alerts",EFFICIENCY_OPTIMIZATION:"AI-driven workflow efficiency improvements",INTELLIGENT_WORKFLOW_SELECTION:"AI-powered workflow recommendations",AUTOMATED_PROBLEM_DETECTION:"AI detection of workflow issues",DATA_COLLECTION:"Enable comprehensive data collection",REAL_TIME_UPDATES:"Live analytics and dashboard updates",HISTORICAL_DATA_RETENTION:"Long-term data storage and analysis",EXPORT_CAPABILITIES:"PDF, CSV, and Excel export options",DASHBOARD_CUSTOMIZATION:"Customizable analytics dashboards",RISK_ASSESSMENT:"AI-powered risk analysis and scoring",ALERT_SYSTEM:"Smart notification and alert system",ESCALATION_RULES:"Automatic alert escalation based on priority",AI_RECOMMENDATIONS:"Intelligent recommendations and suggestions",OPTIMIZATION_TIPS:"AI-generated optimization suggestions",ACCURACY_TRACKING:"Monitor AI prediction accuracy",RESPONSE_TIME_MONITORING:"Track AI response times and performance",ERROR_RATE_TRACKING:"Monitor and track error rates",PERFORMANCE_ALERTS:"Alerts for performance issues",MODEL_HEALTH_MONITORING:"AI model performance and health tracking",DATA_ANONYMIZATION:"Automatically anonymize sensitive data",THIRD_PARTY_PERMISSIONS:"Control third-party AI service access",COMPLIANCE_MONITORING:"Monitor regulatory compliance",ENCRYPTION:"End-to-end data encryption",ACCESS_CONTROL:"Role-based access control for AI features",EXTERNAL_SERVICES:"Connect to external AI and analytics services",API_RATE_LIMITING:"Control API usage and rate limits",WEBHOOK_ENDPOINTS:"Enable webhook notifications and integrations",HEALTH_MONITORING:"Monitor integration system health",SYNC_SCHEDULING:"Automated data synchronization",AI_SUGGESTIONS:"Contextual AI-powered suggestions",LEARNING_PATHS:"Personalized AI learning recommendations",PERSONALIZATION:"AI-driven interface personalization",ACCESSIBILITY_FEATURES:"AI-powered accessibility enhancements",SMART_HELP_SYSTEM:"AI-powered contextual help and guidance"},STATUS:{ACTIVE:"Available",INACTIVE:"In Use"}},Bs={MESSAGE_DISPLAY:5e3,RESET_MESSAGE_DISPLAY:3e3},A=({id:s,checked:a,onChange:t,label:r,description:i,disabled:m=!1})=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:r}),i&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i})]}),e.jsxs("label",{htmlFor:s,className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{id:s,type:"checkbox",className:"sr-only peer",checked:a,onChange:d=>t(d.target.checked),disabled:m}),e.jsx("div",{className:`w-11 h-6 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all ${a?"bg-[#4ECDC4] after:translate-x-full":"bg-gray-200"} ${m?"opacity-50 cursor-not-allowed":"cursor-pointer"}`}),e.jsx("span",{className:"sr-only",children:r})]})]}),G=({title:s,children:a})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 border-b border-gray-200 pb-2",children:s}),e.jsx("div",{className:"space-y-4",children:a})]}),rn=({settings:s,updateMasterAI:a,updateComputerVision:t,updatePredictiveAnalytics:r,updateSmartWorkflow:i})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:f.SECTIONS.ENABLE_AI_FEATURES}),e.jsx("p",{className:"text-sm text-gray-500",children:f.DESCRIPTIONS.MASTER_AI_TOGGLE})]}),e.jsx(A,{id:"aiEnabled",checked:s.aiEnabled,onChange:a,label:""})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(j,{path:Ca,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:f.SECTIONS.AI_FEATURES})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(G,{title:f.FORM_GROUPS.COMPUTER_VISION,children:[e.jsx(A,{id:"toolConditionAssessment",checked:s.computerVision.toolConditionAssessment,onChange:m=>t("toolConditionAssessment",m),label:f.TOGGLE_LABELS.TOOL_CONDITION_ASSESSMENT,description:f.DESCRIPTIONS.TOOL_CONDITION_ASSESSMENT,disabled:!s.aiEnabled}),e.jsx(A,{id:"barcodeQualityDetection",checked:s.computerVision.barcodeQualityDetection,onChange:m=>t("barcodeQualityDetection",m),label:f.TOGGLE_LABELS.BARCODE_QUALITY_DETECTION,description:f.DESCRIPTIONS.BARCODE_QUALITY_DETECTION,disabled:!s.aiEnabled}),e.jsx(A,{id:"damageDetection",checked:s.computerVision.damageDetection,onChange:m=>t("damageDetection",m),label:f.TOGGLE_LABELS.DAMAGE_DETECTION,description:f.DESCRIPTIONS.DAMAGE_DETECTION,disabled:!s.aiEnabled})]}),e.jsxs(G,{title:f.FORM_GROUPS.PREDICTIVE_ANALYTICS,children:[e.jsx(A,{id:"cycleOptimization",checked:s.predictiveAnalytics.cycleOptimization,onChange:m=>r("cycleOptimization",m),label:f.TOGGLE_LABELS.CYCLE_OPTIMIZATION,description:f.DESCRIPTIONS.CYCLE_OPTIMIZATION,disabled:!s.aiEnabled}),e.jsx(A,{id:"failurePrediction",checked:s.predictiveAnalytics.failurePrediction,onChange:m=>r("failurePrediction",m),label:f.TOGGLE_LABELS.FAILURE_PREDICTION,description:f.DESCRIPTIONS.FAILURE_PREDICTION,disabled:!s.aiEnabled}),e.jsx(A,{id:"efficiencyOptimization",checked:s.predictiveAnalytics.efficiencyOptimization,onChange:m=>r("efficiencyOptimization",m),label:f.TOGGLE_LABELS.EFFICIENCY_OPTIMIZATION,description:f.DESCRIPTIONS.EFFICIENCY_OPTIMIZATION,disabled:!s.aiEnabled})]}),e.jsxs(G,{title:f.FORM_GROUPS.SMART_WORKFLOW,children:[e.jsx(A,{id:"intelligentWorkflowSelection",checked:s.smartWorkflow.intelligentWorkflowSelection,onChange:m=>i("intelligentWorkflowSelection",m),label:f.TOGGLE_LABELS.INTELLIGENT_WORKFLOW_SELECTION,description:f.DESCRIPTIONS.INTELLIGENT_WORKFLOW_SELECTION,disabled:!s.aiEnabled}),e.jsx(A,{id:"automatedProblemDetection",checked:s.smartWorkflow.automatedProblemDetection,onChange:m=>i("automatedProblemDetection",m),label:f.TOGGLE_LABELS.AUTOMATED_PROBLEM_DETECTION,description:f.DESCRIPTIONS.AUTOMATED_PROBLEM_DETECTION,disabled:!s.aiEnabled})]})]})]})})]}),nn=({settings:s,updateAnalytics:a})=>e.jsxs(G,{title:f.FORM_GROUPS.REPORTING_EXPORT,children:[e.jsx(A,{id:"exportCapabilities",checked:s.analytics.exportCapabilities,onChange:t=>a("exportCapabilities",t),label:f.TOGGLE_LABELS.EXPORT_CAPABILITIES,description:f.DESCRIPTIONS.EXPORT_CAPABILITIES,disabled:!s.aiEnabled}),e.jsx(A,{id:"dashboardCustomization",checked:s.analytics.dashboardCustomization,onChange:t=>a("dashboardCustomization",t),label:f.TOGGLE_LABELS.DASHBOARD_CUSTOMIZATION,description:f.DESCRIPTIONS.DASHBOARD_CUSTOMIZATION,disabled:!s.aiEnabled})]}),ln=({settings:s,updateAnalytics:a})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(j,{path:xe,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:f.SECTIONS.ANALYTICS_CONFIGURATION})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(G,{title:f.FORM_GROUPS.DATA_COLLECTION,children:[e.jsx(A,{id:"dataCollection",checked:s.analytics.dataCollection,onChange:t=>a("dataCollection",t),label:f.TOGGLE_LABELS.DATA_COLLECTION,description:f.DESCRIPTIONS.DATA_COLLECTION,disabled:!s.aiEnabled}),e.jsx(A,{id:"realTimeUpdates",checked:s.analytics.realTimeUpdates,onChange:t=>a("realTimeUpdates",t),label:f.TOGGLE_LABELS.REAL_TIME_UPDATES,description:f.DESCRIPTIONS.REAL_TIME_UPDATES,disabled:!s.aiEnabled}),e.jsx(A,{id:"historicalDataRetention",checked:s.analytics.historicalDataRetention,onChange:t=>a("historicalDataRetention",t),label:f.TOGGLE_LABELS.HISTORICAL_DATA_RETENTION,description:f.DESCRIPTIONS.HISTORICAL_DATA_RETENTION,disabled:!s.aiEnabled})]}),e.jsx(nn,{settings:s,updateAnalytics:a})]})]}),on=({settings:s,updatePerformance:a})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(j,{path:kt,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:f.SECTIONS.PERFORMANCE_MONITORING})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(G,{title:f.FORM_GROUPS.QUALITY_METRICS,children:[e.jsx(A,{id:"accuracyTracking",checked:s.performance.accuracyTracking,onChange:t=>a("accuracyTracking",t),label:f.TOGGLE_LABELS.ACCURACY_TRACKING,description:f.DESCRIPTIONS.ACCURACY_TRACKING,disabled:!s.aiEnabled}),e.jsx(A,{id:"responseTimeMonitoring",checked:s.performance.responseTimeMonitoring,onChange:t=>a("responseTimeMonitoring",t),label:f.TOGGLE_LABELS.RESPONSE_TIME_MONITORING,description:f.DESCRIPTIONS.RESPONSE_TIME_MONITORING,disabled:!s.aiEnabled}),e.jsx(A,{id:"errorRateTracking",checked:s.performance.errorRateTracking,onChange:t=>a("errorRateTracking",t),label:f.TOGGLE_LABELS.ERROR_RATE_TRACKING,description:f.DESCRIPTIONS.ERROR_RATE_TRACKING,disabled:!s.aiEnabled})]}),e.jsxs(G,{title:f.FORM_GROUPS.OPTIMIZATION,children:[e.jsx(A,{id:"performanceAlerts",checked:s.performance.performanceAlerts,onChange:t=>a("performanceAlerts",t),label:f.TOGGLE_LABELS.PERFORMANCE_ALERTS,description:f.DESCRIPTIONS.PERFORMANCE_ALERTS,disabled:!s.aiEnabled}),e.jsx(A,{id:"modelHealthMonitoring",checked:s.performance.modelHealthMonitoring,onChange:t=>a("modelHealthMonitoring",t),label:f.TOGGLE_LABELS.MODEL_HEALTH_MONITORING,description:f.DESCRIPTIONS.MODEL_HEALTH_MONITORING,disabled:!s.aiEnabled})]})]})]}),cn=({settings:s,updatePrivacy:a})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(j,{path:Lt,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:f.SECTIONS.DATA_PRIVACY_SECURITY})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(G,{title:f.FORM_GROUPS.PRIVACY_CONTROLS,children:[e.jsx(A,{id:"dataAnonymization",checked:s.privacy.dataAnonymization,onChange:t=>a("dataAnonymization",t),label:f.TOGGLE_LABELS.DATA_ANONYMIZATION,description:f.DESCRIPTIONS.DATA_ANONYMIZATION,disabled:!s.aiEnabled}),e.jsx(A,{id:"thirdPartyPermissions",checked:s.privacy.thirdPartyPermissions,onChange:t=>a("thirdPartyPermissions",t),label:f.TOGGLE_LABELS.THIRD_PARTY_PERMISSIONS,description:f.DESCRIPTIONS.THIRD_PARTY_PERMISSIONS,disabled:!s.aiEnabled}),e.jsx(A,{id:"complianceMonitoring",checked:s.privacy.complianceMonitoring,onChange:t=>a("complianceMonitoring",t),label:f.TOGGLE_LABELS.COMPLIANCE_MONITORING,description:f.DESCRIPTIONS.COMPLIANCE_MONITORING,disabled:!s.aiEnabled})]}),e.jsxs(G,{title:f.FORM_GROUPS.SECURITY_FEATURES,children:[e.jsx(A,{id:"encryption",checked:s.privacy.encryption,onChange:t=>a("encryption",t),label:f.TOGGLE_LABELS.ENCRYPTION,description:f.DESCRIPTIONS.ENCRYPTION,disabled:!s.aiEnabled}),e.jsx(A,{id:"accessControl",checked:s.privacy.accessControl,onChange:t=>a("accessControl",t),label:f.TOGGLE_LABELS.ACCESS_CONTROL,description:f.DESCRIPTIONS.ACCESS_CONTROL,disabled:!s.aiEnabled})]})]})]}),dn=({settings:s,updateIntegration:a})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(j,{path:_a,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:f.SECTIONS.INTEGRATION_SETTINGS})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(G,{title:f.FORM_GROUPS.EXTERNAL_SERVICES,children:[e.jsx(A,{id:"externalServices",checked:s.integration.externalServices,onChange:t=>a("externalServices",t),label:f.TOGGLE_LABELS.EXTERNAL_SERVICES,description:f.DESCRIPTIONS.EXTERNAL_SERVICES,disabled:!s.aiEnabled}),e.jsx(A,{id:"apiRateLimiting",checked:s.integration.apiRateLimiting,onChange:t=>a("apiRateLimiting",t),label:f.TOGGLE_LABELS.API_RATE_LIMITING,description:f.DESCRIPTIONS.API_RATE_LIMITING,disabled:!s.aiEnabled}),e.jsx(A,{id:"webhookEndpoints",checked:s.integration.webhookEndpoints,onChange:t=>a("webhookEndpoints",t),label:f.TOGGLE_LABELS.WEBHOOK_ENDPOINTS,description:f.DESCRIPTIONS.WEBHOOK_ENDPOINTS,disabled:!s.aiEnabled})]}),e.jsxs(G,{title:f.FORM_GROUPS.SYSTEM_HEALTH,children:[e.jsx(A,{id:"healthMonitoring",checked:s.integration.healthMonitoring,onChange:t=>a("healthMonitoring",t),label:f.TOGGLE_LABELS.HEALTH_MONITORING,description:f.DESCRIPTIONS.HEALTH_MONITORING,disabled:!s.aiEnabled}),e.jsx(A,{id:"syncScheduling",checked:s.integration.syncScheduling,onChange:t=>a("syncScheduling",t),label:f.TOGGLE_LABELS.SYNC_SCHEDULING,description:f.DESCRIPTIONS.SYNC_SCHEDULING,disabled:!s.aiEnabled})]})]})]}),mn=({serviceStatus:s})=>e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-800 mb-3",children:f.SECTIONS.AI_SERVICE_STATUS}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(s).map(([a,t])=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{path:t?ie:F,size:1,className:t?"text-green-600":"text-red-500"}),e.jsx("span",{className:"text-sm capitalize",children:a}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t?f.STATUS.ACTIVE:f.STATUS.INACTIVE})]},a))})]}),un=({settings:s,updateUserExperience:a})=>e.jsxs(G,{title:f.FORM_GROUPS.INTERFACE_HELP,children:[e.jsx(A,{id:"accessibility",checked:s.userExperience.accessibility,onChange:t=>a("accessibility",t),label:f.TOGGLE_LABELS.ACCESSIBILITY_FEATURES,description:f.DESCRIPTIONS.ACCESSIBILITY_FEATURES,disabled:!s.aiEnabled}),e.jsx(A,{id:"helpSystem",checked:s.userExperience.helpSystem,onChange:t=>a("helpSystem",t),label:f.TOGGLE_LABELS.SMART_HELP_SYSTEM,description:f.DESCRIPTIONS.SMART_HELP_SYSTEM,disabled:!s.aiEnabled})]}),xn=({settings:s,updateUserExperience:a})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(j,{path:Ot,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:f.SECTIONS.USER_EXPERIENCE})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(G,{title:f.FORM_GROUPS.AI_ASSISTANCE,children:[e.jsx(A,{id:"aiSuggestions",checked:s.userExperience.aiSuggestions,onChange:t=>a("aiSuggestions",t),label:f.TOGGLE_LABELS.AI_SUGGESTIONS,description:f.DESCRIPTIONS.AI_SUGGESTIONS,disabled:!s.aiEnabled}),e.jsx(A,{id:"learningPaths",checked:s.userExperience.learningPaths,onChange:t=>a("learningPaths",t),label:f.TOGGLE_LABELS.LEARNING_PATHS,description:f.DESCRIPTIONS.LEARNING_PATHS,disabled:!s.aiEnabled}),e.jsx(A,{id:"personalization",checked:s.userExperience.personalization,onChange:t=>a("personalization",t),label:f.TOGGLE_LABELS.PERSONALIZATION,description:f.DESCRIPTIONS.PERSONALIZATION,disabled:!s.aiEnabled})]}),e.jsx(un,{settings:s,updateUserExperience:a})]})]}),Ht=()=>{const{currentUser:s}=ne(),a=()=>{var m;if(!s)return!1;const d=(m=s.role)==null?void 0:m.toLowerCase();return["administrator","admin","👑 administrator","system_admin","super_admin"].includes(d)},t=()=>a(),r=()=>!!s,i=()=>a();return{isAdmin:a(),canManageThrottling:t(),canViewUsage:r(),canConfigureAI:i(),userRole:(s==null?void 0:s.role)||"Unknown"}};var hn=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const gn=({facilityId:s})=>{const[a,t]=h.useState(null),[r,i]=h.useState(!0),[m,d]=h.useState(null),[c,n]=h.useState(!1),[o,l]=h.useState(!1),u=At.getInstance(),{canViewUsage:g}=Ht();h.useEffect(()=>{const x=()=>hn(null,null,function*(){try{i(!0);const N=u.getUsageData();t(N)}catch(N){d("Failed to load usage data"),console.error("Error fetching token usage:",N)}finally{i(!1)}});x();const v=setInterval(x,3e4);return()=>clearInterval(v)},[s,u]);const b=x=>x>=90?"text-red-600 bg-red-50 border-red-200":x>=75?"text-yellow-600 bg-yellow-50 border-yellow-200":"text-green-600 bg-green-50 border-green-200",p=x=>x>=90?F:x>=75?vs:ie;return g?r?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})]})}):m||!a?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(j,{path:F,size:2,className:"text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:m||"No usage data available"})]})}):e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(j,{path:xe,size:1.2,className:"text-[#4ECDC4]"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"AI Usage Dashboard"})]}),e.jsxs("div",{className:`p-4 rounded-lg border mb-6 ${b(a.budget.percentage)}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{path:p(a.budget.percentage),size:1,className:a.budget.percentage>=75?"text-current":"text-green-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Monthly Usage Status"}),e.jsxs("p",{className:"text-sm opacity-75",children:[a.currentMonth.tokens.toLocaleString()," tokens used this month"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[a.budget.percentage.toFixed(1),"%"]}),e.jsxs("div",{className:"text-sm opacity-75",children:[Math.max(0,a.budget.limit-a.currentMonth.tokens).toLocaleString()," tokens remaining"]})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${a.budget.percentage>=90?"bg-red-500":a.budget.percentage>=75?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(a.budget.percentage,100)}%`}})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Tokens"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.currentMonth.tokens.toLocaleString()}),e.jsx("p",{className:"text-xs text-gray-500",children:"This month"})]}),e.jsx(j,{path:xe,size:1.5,className:"text-gray-400"})]})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"API Requests"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.currentMonth.requests.toLocaleString()}),e.jsx("p",{className:"text-xs text-gray-500",children:"This month"})]}),e.jsx(j,{path:vs,size:1.5,className:"text-gray-400"})]})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Tokens/Request"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.currentMonth.requests>0?Math.round(a.currentMonth.tokens/a.currentMonth.requests).toLocaleString():"0"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Efficiency metric"})]}),e.jsx(j,{path:xe,size:1.5,className:"text-gray-400"})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>n(!c),className:"flex items-center justify-between w-full p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Usage by Feature"}),e.jsx(j,{path:c?js:Ns,size:1,className:"text-gray-500"})]}),c&&e.jsx("div",{className:"mt-3 space-y-3",children:a.featureBreakdown.map((x,v)=>e.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900",children:x.feature}),e.jsxs("span",{className:"text-sm text-gray-600",children:[x.tokens.toLocaleString()," tokens (",x.percentage.toFixed(1),"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-[#4ECDC4] h-2 rounded-full transition-all duration-300",style:{width:`${x.percentage}%`}})})]})},v))})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>l(!o),className:"flex items-center justify-between w-full p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Daily Usage Trend"}),e.jsx(j,{path:o?js:Ns,size:1,className:"text-gray-500"})]}),o&&e.jsx("div",{className:"mt-3 bg-gray-50 rounded-lg p-4",children:e.jsx("div",{className:"grid grid-cols-5 gap-2",children:a.dailyUsage.map((x,v)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:new Date(x.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsxs("div",{className:"bg-white rounded p-2",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.tokens.toLocaleString()}),e.jsxs("div",{className:"text-xs text-gray-600",children:[x.requests," requests"]})]})]},v))})})]})]}):e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(j,{path:F,size:2,className:"text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Access denied. You need to be logged in to view AI usage data."})]})})};var pn=Object.defineProperty,fn=Object.defineProperties,bn=Object.getOwnPropertyDescriptors,qs=Object.getOwnPropertySymbols,yn=Object.prototype.hasOwnProperty,vn=Object.prototype.propertyIsEnumerable,Vs=(s,a,t)=>a in s?pn(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,te=(s,a)=>{for(var t in a||(a={}))yn.call(a,t)&&Vs(s,t,a[t]);if(qs)for(var t of qs(a))vn.call(a,t)&&Vs(s,t,a[t]);return s},ae=(s,a)=>fn(s,bn(a));const jn=({settings:s,onUpdateSettings:a,currentUsage:t})=>{const[r,i]=h.useState(!1),[m,d]=h.useState(s),{canManageThrottling:c,userRole:n}=Ht(),o=()=>{a(m),i(!1)},l=()=>{d(s),i(!1)},u=(b,p)=>{const x=b/p*100;return x>=90?"text-red-600":x>=75?"text-yellow-600":"text-green-600"},g=(b,p)=>{const x=b/p*100;return x>=90?F:x>=75?F:ie};return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{path:kt,size:1.2,className:"text-[#4ECDC4]"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Throttling Controls"}),!c&&e.jsx(j,{path:Lt,size:.8,className:"text-gray-400",title:"Admin Only"}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:s.enabled?"Enabled":"Disabled"})]}),c?e.jsx("button",{onClick:()=>i(!r),className:"px-4 py-2 text-sm font-medium text-[#4ECDC4] hover:text-[#3db8b0] transition-colors",children:r?"Cancel":"Configure"}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Admin access required"}),e.jsxs("div",{className:"text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded",children:["Role: ",n," | Admin: ",c?"Yes":"No"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Requests/Minute"}),e.jsx("p",{className:`text-2xl font-bold ${u(t.requestsThisMinute,s.requestsPerMinute)}`,children:t.requestsThisMinute}),e.jsxs("p",{className:"text-xs text-gray-500",children:["of ",s.requestsPerMinute]})]}),e.jsx(j,{path:g(t.requestsThisMinute,s.requestsPerMinute),size:1.5,className:u(t.requestsThisMinute,s.requestsPerMinute)})]})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Requests/Hour"}),e.jsx("p",{className:`text-2xl font-bold ${u(t.requestsThisHour,s.requestsPerHour)}`,children:t.requestsThisHour}),e.jsxs("p",{className:"text-xs text-gray-500",children:["of ",s.requestsPerHour]})]}),e.jsx(j,{path:g(t.requestsThisHour,s.requestsPerHour),size:1.5,className:u(t.requestsThisHour,s.requestsPerHour)})]})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Tokens"}),e.jsx("p",{className:`text-2xl font-bold ${u(t.monthlyTokens,t.monthlyTokenLimit)}`,children:t.monthlyTokens.toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-500",children:["of ",t.monthlyTokenLimit.toLocaleString()]})]}),e.jsx(j,{path:g(t.monthlyTokens,t.monthlyTokenLimit),size:1.5,className:u(t.monthlyTokens,t.monthlyTokenLimit)})]})})]}),r&&c&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Throttling Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requests Per Minute"}),e.jsx("input",{type:"number",value:m.requestsPerMinute,onChange:b=>d(p=>ae(te({},p),{requestsPerMinute:parseInt(b.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",min:"1",max:"1000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requests Per Hour"}),e.jsx("input",{type:"number",value:m.requestsPerHour,onChange:b=>d(p=>ae(te({},p),{requestsPerHour:parseInt(b.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",min:"1",max:"10000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Burst Limit"}),e.jsx("input",{type:"number",value:m.burstLimit,onChange:b=>d(p=>ae(te({},p),{burstLimit:parseInt(b.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",min:"1",max:"100"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monthly Token Limit"}),e.jsx("input",{type:"number",value:m.monthlyTokenLimit,onChange:b=>d(p=>ae(te({},p),{monthlyTokenLimit:parseInt(b.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",min:"10000",max:"10000000",step:"1000"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended: 500,000 - 1,000,000 tokens/month"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warning Threshold (%)"}),e.jsx("input",{type:"number",value:m.warningThreshold,onChange:b=>d(p=>ae(te({},p),{warningThreshold:parseInt(b.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",min:"50",max:"95"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Critical Threshold (%)"}),e.jsx("input",{type:"number",value:m.criticalThreshold,onChange:b=>d(p=>ae(te({},p),{criticalThreshold:parseInt(b.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",min:"75",max:"100"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Cancel"}),e.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] hover:bg-[#3db8b0] rounded-md transition-colors",children:"Save Changes"})]})]}),c&&e.jsx("div",{className:"mt-6 p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Enable/Disable Throttling"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.enabled,onChange:b=>a(ae(te({},s),{enabled:b.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#4ECDC4]"})]})]})})]})},Nn=({isSaving:s,onResetToDefaults:a,onSaveSettings:t})=>e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{path:ge,size:1.5,className:"text-[#4ECDC4]"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-semibold text-gray-800",children:f.HEADER.TITLE}),e.jsx("p",{className:"text-sm text-gray-600",children:f.HEADER.SUBTITLE})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(j,{path:as,size:1}),f.BUTTONS.RESET]}),e.jsxs("button",{onClick:t,disabled:s,className:"flex items-center gap-2 px-4 py-2 text-sm text-white bg-[#4ECDC4] hover:bg-[#3db8b0] rounded-lg disabled:opacity-50",children:[e.jsx(j,{path:s?as:ve,size:1,className:s?"animate-spin":""}),s?f.BUTTONS.SAVING:f.BUTTONS.SAVE]})]})]}),Cn=({settings:s,updateIntelligence:a})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(j,{path:ge,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:f.SECTIONS.INTELLIGENCE_SETTINGS})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(G,{title:f.FORM_GROUPS.RISK_ALERTS,children:[e.jsx(A,{id:"riskAssessment",checked:s.intelligence.riskAssessment,onChange:t=>a("riskAssessment",t),label:f.TOGGLE_LABELS.RISK_ASSESSMENT,description:f.DESCRIPTIONS.RISK_ASSESSMENT,disabled:!s.aiEnabled}),e.jsx(A,{id:"alertSystem",checked:s.intelligence.alertSystem,onChange:t=>a("alertSystem",t),label:f.TOGGLE_LABELS.ALERT_SYSTEM,description:f.DESCRIPTIONS.ALERT_SYSTEM,disabled:!s.aiEnabled}),e.jsx(A,{id:"escalationRules",checked:s.intelligence.escalationRules,onChange:t=>a("escalationRules",t),label:f.TOGGLE_LABELS.ESCALATION_RULES,description:f.DESCRIPTIONS.ESCALATION_RULES,disabled:!s.aiEnabled})]}),e.jsxs(G,{title:f.FORM_GROUPS.AI_INSIGHTS,children:[e.jsx(A,{id:"aiRecommendations",checked:s.intelligence.aiRecommendations,onChange:t=>a("aiRecommendations",t),label:f.TOGGLE_LABELS.AI_RECOMMENDATIONS,description:f.DESCRIPTIONS.AI_RECOMMENDATIONS,disabled:!s.aiEnabled}),e.jsx(A,{id:"optimizationTips",checked:s.intelligence.optimizationTips,onChange:t=>a("optimizationTips",t),label:f.TOGGLE_LABELS.OPTIMIZATION_TIPS,description:f.DESCRIPTIONS.OPTIMIZATION_TIPS,disabled:!s.aiEnabled})]})]})]});var _n=Object.defineProperty,Sn=Object.defineProperties,En=Object.getOwnPropertyDescriptors,Ys=Object.getOwnPropertySymbols,wn=Object.prototype.hasOwnProperty,Tn=Object.prototype.propertyIsEnumerable,Ws=(s,a,t)=>a in s?_n(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,M=(s,a)=>{for(var t in a||(a={}))wn.call(a,t)&&Ws(s,t,a[t]);if(Ys)for(var t of Ys(a))Tn.call(a,t)&&Ws(s,t,a[t]);return s},$=(s,a)=>Sn(s,En(a)),Ie=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const In=()=>{const{getCurrentFacilityId:s}=he(),a=s(),t=Ft(),r=da(),[i,m]=h.useState(null),[d,c]=h.useState(!1),[n,o]=h.useState(!1),[l,u]=h.useState(null),[g,b]=h.useState(null),[p,x]=h.useState("overview"),v=h.useCallback(()=>Ie(null,null,function*(){if(r){c(!0);try{const S=yield r.loadUnifiedSettings();m(S)}catch(S){console.error("Failed to load AI settings:",S),u({type:"error",text:f.MESSAGES.SAVE_ERROR})}finally{c(!1)}}}),[r]),N=h.useCallback(()=>Ie(null,null,function*(){if(r)try{const S=yield r.getServiceStatus();b(S)}catch(S){console.error("Failed to load service status:",S)}}),[r]);h.useEffect(()=>{r&&(v(),N())},[r,v,N]);const y=()=>Ie(null,null,function*(){if(!(!r||!i)){o(!0);try{(yield r.saveUnifiedSettings(i))?(yield r.applySettings(i),u({type:"success",text:f.MESSAGES.SAVE_SUCCESS}),setTimeout(()=>u(null),Bs.MESSAGE_DISPLAY),yield N()):u({type:"error",text:f.MESSAGES.SAVE_ERROR})}catch(S){console.error("Failed to save AI settings:",S),u({type:"error",text:f.MESSAGES.SAVE_ERROR})}finally{o(!1)}}}),_=()=>Ie(null,null,function*(){if(r)try{const S=yield r.loadUnifiedSettings();m(S),u({type:"success",text:f.MESSAGES.RESET_SUCCESS}),setTimeout(()=>u(null),Bs.RESET_MESSAGE_DISPLAY)}catch(S){console.error("Failed to reset settings:",S),u({type:"error",text:f.MESSAGES.RESET_ERROR})}}),E=(S,P)=>{i&&m(T=>T?$(M({},T),{computerVision:$(M({},T.computerVision),{[S]:P})}):null)},D=(S,P)=>{i&&m(T=>T?$(M({},T),{predictiveAnalytics:$(M({},T.predictiveAnalytics),{[S]:P})}):null)},R=(S,P)=>{i&&m(T=>T?$(M({},T),{smartWorkflow:$(M({},T.smartWorkflow),{[S]:P})}):null)},oe=(S,P)=>{i&&m(T=>T?$(M({},T),{analytics:$(M({},T.analytics),{[S]:P})}):null)},H=(S,P)=>{i&&m(T=>T?$(M({},T),{intelligence:$(M({},T.intelligence),{[S]:P})}):null)},Re=(S,P)=>{i&&m(T=>T?$(M({},T),{performance:$(M({},T.performance),{[S]:P})}):null)},ke=(S,P)=>{i&&m(T=>T?$(M({},T),{privacy:$(M({},T.privacy),{[S]:P})}):null)},je=(S,P)=>{i&&m(T=>T?$(M({},T),{integration:$(M({},T.integration),{[S]:P})}):null)},Le=(S,P)=>{i&&m(T=>T?$(M({},T),{userExperience:$(M({},T.userExperience),{[S]:P})}):null)},C=S=>{i&&m(P=>P?$(M({},P),{aiEnabled:S}):null)};return a?d?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#4ECDC4] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:f.MESSAGES.LOADING})]}):i?e.jsxs("div",{className:"space-y-6",children:[t.hasIssues&&e.jsx("div",{className:`p-4 rounded-lg border-l-4 ${t.isExceeded?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(j,{path:t.isExceeded?F:F,size:1.2,className:`mr-3 ${t.isExceeded?"text-red-600":"text-yellow-600"}`}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${t.isExceeded?"text-red-800":"text-yellow-800"}`,children:t.isExceeded?"AI Usage Limit Exceeded":"AI Usage Warning"}),e.jsx("p",{className:`text-sm ${t.isExceeded?"text-red-700":"text-yellow-700"}`,children:t.isExceeded?`You've used ${t.usedTokens.toLocaleString()} tokens (${Math.round(t.usagePercentage)}%) of your ${t.limitTokens.toLocaleString()} token limit.`:`You've used ${t.usedTokens.toLocaleString()} tokens (${Math.round(t.usagePercentage)}%) of your ${t.limitTokens.toLocaleString()} token limit. Consider adjusting throttling settings.`})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[{id:"overview",name:"Overview",icon:"📊"},{id:"usage",name:"Usage & Limits",icon:"📈"},{id:"features",name:"AI Features",icon:"⚙️"},{id:"settings",name:"Settings",icon:"🔧"}].map(S=>e.jsxs("button",{onClick:()=>x(S.id),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${p===S.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("span",{className:"mr-2",children:S.icon}),S.name]},S.id))})}),e.jsxs("div",{className:"p-6",children:[p==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(Nn,{isSaving:n,onResetToDefaults:_,onSaveSettings:y}),g&&e.jsx(mn,{serviceStatus:g})]}),p==="usage"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(gn,{facilityId:a}),e.jsx(jn,{settings:{enabled:!0,requestsPerMinute:60,requestsPerHour:1e3,burstLimit:10,monthlyTokenLimit:1e6,warningThreshold:75,criticalThreshold:90},onUpdateSettings:S=>{console.log("Updating throttling settings:",S)},currentUsage:{requestsThisMinute:15,requestsThisHour:120,monthlyTokens:125e3,monthlyTokenLimit:1e6}})]}),p==="features"&&e.jsx(rn,{settings:i,updateMasterAI:C,updateComputerVision:E,updatePredictiveAnalytics:D,updateSmartWorkflow:R}),p==="settings"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(ln,{settings:i,updateAnalytics:oe}),e.jsx(Cn,{settings:i,updateIntelligence:H}),e.jsx(on,{settings:i,updatePerformance:Re}),e.jsx(cn,{settings:i,updatePrivacy:ke}),e.jsx(dn,{settings:i,updateIntegration:je}),e.jsx(xn,{settings:i,updateUserExperience:Le})]})]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(j,{path:F,size:2,className:"text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:f.MESSAGES.FAILED_TO_LOAD})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(j,{path:F,size:2,className:"text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:f.MESSAGES.FACILITY_NOT_AVAILABLE})]})},se={AI_VERSION:"1.0.0",AI_CONFIDENCE_THRESHOLD:.85,AI_DATA_RETENTION_DAYS:90,ENCRYPTED_DATA_TRANSMISSION:!0},qe={COMPUTER_VISION:[{key:"tool_condition_assessment",label:"Tool Condition Assessment",desc:"AI-powered visual inspection of tool wear and damage"},{key:"barcode_quality_detection",label:"Barcode Quality Detection",desc:"Automated barcode readability assessment"},{key:"tool_type_recognition",label:"Tool Type Recognition",desc:"Automatic tool identification from images"},{key:"cleaning_validation",label:"Cleaning Validation",desc:"Visual verification of cleaning effectiveness"}],PREDICTIVE_ANALYTICS:[{key:"cycle_optimization",label:"Cycle Optimization",desc:"AI-driven sterilization cycle parameter optimization"},{key:"failure_prediction",label:"Failure Prediction",desc:"Predictive maintenance and equipment failure alerts"},{key:"efficiency_optimization",label:"Efficiency Optimization",desc:"Process efficiency analysis and recommendations"},{key:"resource_planning",label:"Resource Planning",desc:"Intelligent resource allocation and scheduling"}],SMART_WORKFLOW:[{key:"intelligent_workflow_selection",label:"Intelligent Workflow Selection",desc:"AI-powered workflow recommendation based on tool type and condition"},{key:"automated_problem_detection",label:"Automated Problem Detection",desc:"Real-time issue identification and alerting"},{key:"smart_phase_transitions",label:"Smart Phase Transitions",desc:"Intelligent sterilization phase management"},{key:"batch_optimization",label:"Batch Optimization",desc:"Optimal tool grouping and batch processing"}]},An=[{value:"unwrapped",label:"Unwrapped (3 min, 132°C)"},{value:"pouches",label:"Pouches (5 min, 132°C)"},{value:"packs",label:"Packs (30 min, 121°C)"},{value:"handpieces",label:"Handpieces (6 min, 132°C)"},{value:"custom",label:"Custom"}],Pn=[{value:3,label:"3 months"},{value:6,label:"6 months"},{value:12,label:"1 year (recommended)"},{value:18,label:"18 months"},{value:24,label:"2 years"}],On=[{value:30,label:"30 days"},{value:60,label:"60 days"},{value:90,label:"90 days (recommended)"},{value:180,label:"180 days"},{value:365,label:"1 year"}],ee={TEMPERATURE:{min:100,max:150},PRESSURE:{min:10,max:30},STERILIZE_TIME:{min:1,max:60},DRY_TIME:{min:10,max:60}},Ve={min:.5,max:1,step:.05},Ks=3e3;var cs=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const Dn=s=>cs(null,null,function*(){try{return yield new is(s).loadSettings()}catch(a){return console.error("Failed to load AI settings:",a),null}}),Zs=(s,a)=>cs(null,null,function*(){try{return yield new is(s).saveSettings(a)}catch(t){return console.error("Failed to save AI settings:",t),!1}}),Rn=s=>cs(null,null,function*(){try{const a={facility_id:s,ai_enabled:!1,ai_version:se.AI_VERSION,computer_vision_enabled:!1,tool_condition_assessment:!1,barcode_quality_detection:!1,tool_type_recognition:!1,cleaning_validation:!1,predictive_analytics_enabled:!1,cycle_optimization:!1,failure_prediction:!1,efficiency_optimization:!1,resource_planning:!1,smart_workflow_enabled:!1,intelligent_workflow_selection:!1,automated_problem_detection:!1,smart_phase_transitions:!1,batch_optimization:!1,quality_assurance_enabled:!1,biological_indicator_analysis:!1,compliance_monitoring:!1,audit_trail_enhancement:!1,risk_assessment:!1,scanner_intelligence_enabled:!1,multi_format_barcode_support:!1,tool_history_integration:!1,smart_validation:!1,error_prevention:!1,real_time_monitoring_enabled:!1,anomaly_detection:!1,predictive_maintenance:!1,quality_drift_detection:!1,smart_notifications:!1,ai_confidence_threshold:se.AI_CONFIDENCE_THRESHOLD,ai_data_retention_days:se.AI_DATA_RETENTION_DAYS,real_time_processing_enabled:!1,batch_processing_enabled:!1,data_sharing_enabled:!1,local_ai_processing_enabled:!1,encrypted_data_transmission:se.ENCRYPTED_DATA_TRANSMISSION,ai_model_training:!1,auto_optimization_enabled:!1,performance_monitoring:!1,resource_optimization:!1,openai_api_key_encrypted:"",google_vision_api_key_encrypted:"",azure_computer_vision_key_encrypted:""};return yield new is(s).saveSettings(a)}catch(a){return console.error("Failed to reset AI settings:",a),!1}}),Ye=s=>({facility_id:s,ai_enabled:!1,ai_version:se.AI_VERSION,computer_vision_enabled:!1,tool_condition_assessment:!1,barcode_quality_detection:!1,tool_type_recognition:!1,cleaning_validation:!1,predictive_analytics_enabled:!1,cycle_optimization:!1,failure_prediction:!1,efficiency_optimization:!1,resource_planning:!1,smart_workflow_enabled:!1,intelligent_workflow_selection:!1,automated_problem_detection:!1,smart_phase_transitions:!1,batch_optimization:!1,quality_assurance_enabled:!1,biological_indicator_analysis:!1,compliance_monitoring:!1,audit_trail_enhancement:!1,risk_assessment:!1,scanner_intelligence_enabled:!1,multi_format_barcode_support:!1,tool_history_integration:!1,smart_validation:!1,error_prevention:!1,real_time_monitoring_enabled:!1,anomaly_detection:!1,predictive_maintenance:!1,quality_drift_detection:!1,smart_notifications:!1,ai_confidence_threshold:se.AI_CONFIDENCE_THRESHOLD,ai_data_retention_days:se.AI_DATA_RETENTION_DAYS,real_time_processing_enabled:!1,batch_processing_enabled:!1,data_sharing_enabled:!1,local_ai_processing_enabled:!1,encrypted_data_transmission:se.ENCRYPTED_DATA_TRANSMISSION,ai_model_training:!1,auto_optimization_enabled:!1,performance_monitoring:!1,resource_optimization:!1,openai_api_key_encrypted:"",google_vision_api_key_encrypted:"",azure_computer_vision_key_encrypted:""}),de=(s,a,t,r)=>{console.log("Setting changed:",{setting:s,oldValue:a,newValue:t,facilityId:r,timestamp:new Date().toISOString()})},kn=(s,a)=>{console.log("Save attempt:",{facilityId:a,timestamp:new Date().toISOString(),settingsCount:Object.keys(s).length,aiEnabled:s.ai_enabled})},We=(s,a,t)=>{console.log("Save result:",{success:s,facilityId:a,timestamp:new Date().toISOString(),error:t||null})},Ln=s=>{console.log("Reset attempt:",{facilityId:s,timestamp:new Date().toISOString()})},Ke=(s,a,t)=>{console.log("Reset result:",{success:s,facilityId:a,timestamp:new Date().toISOString(),error:t||null})},Mn=(s,a,t)=>{console.log("AI feature toggle:",{feature:s,enabled:a,facilityId:t,timestamp:new Date().toISOString()})},me=(s,a,t)=>{console.log("Cycle settings change:",{cycleType:s,changes:a,facilityId:t,timestamp:new Date().toISOString()})},Qs=(s,a,t)=>{console.log("Enforcement toggle:",{type:s,enabled:a,facilityId:t,timestamp:new Date().toISOString()})},Xs=(s,a,t)=>{console.log("Receipt settings change:",{setting:s,value:a,facilityId:t,timestamp:new Date().toISOString()})},$n=()=>{const{enforceCi:s,enforceBi:a,_allowOverrides:t,updateComplianceSettings:r,fetchComplianceSettings:i}=rs(),[m,d]=h.useState(!1),[c,n]=h.useState(!1),{getCurrentFacilityId:o}=he();return h.useEffect(()=>{const l=o();l&&i(l)},[o,i]),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Sterilization Enforcement"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"enforceBI",className:"text-sm font-medium",children:"Biological Indicator Management"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable daily BI test requirements and compliance tracking"})]}),e.jsx("button",{onClick:()=>{const l=o();l&&(Qs("BI",!a,l),r(l,{enforceBi:!a}))},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${a?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a?"translate-x-6":"translate-x-1"}`})})]}),a&&e.jsxs("div",{className:"ml-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"BI tests are being enforced"})]}),e.jsxs("button",{onClick:()=>d(!m),className:"text-xs text-blue-600 hover:text-blue-800",children:[m?"Hide":"Show"," BI test history"]}),m&&e.jsxs("div",{className:"p-3 bg-gray-50 rounded-md text-xs text-gray-600",children:[e.jsx("p",{children:"• Last BI test: 2024-01-15 (PASS)"}),e.jsx("p",{children:"• Next required: 2024-01-16"}),e.jsx("p",{children:"• Tests passed this month: 15"})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Chemical Indicator (CI) Management"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Configure how CI indicators are handled during autoclave cycles."}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"ON:"})," Users must confirm CI strip usage (Y/N selection in workflow)",e.jsx("br",{}),e.jsx("strong",{children:"OFF:"})," Users get a warning but can proceed without CI confirmation"]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:"enforceCI",className:"font-medium",children:"Require CI Confirmation"}),e.jsx("button",{id:"enforceCI",onClick:()=>{const l=o();l&&(Qs("CI",!s,l),r(l,{enforceCi:!s}))},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${s?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s?"translate-x-6":"translate-x-1"}`})})]})]})]})};var Js=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const Fn=()=>{const{currentUser:s}=ne(),[a,t]=h.useState(!0),[r,i]=h.useState(null),[m,d]=h.useState(["pouch","wrap","container","tray"]),[c,n]=h.useState(["small","medium","large","extra-large"]),[o,l]=h.useState(!1),[u,g]=h.useState("PKG-"),[b,p]=h.useState(25);h.useEffect(()=>{Js(null,null,function*(){try{if(!s)return;const{data:_,error:E}=yield I.from("facility_settings").select("packaging_settings").eq("facility_id",s.facility_id).single();if(E&&console.warn("No existing packaging settings found"),_!=null&&_.packaging_settings){const D=_.packaging_settings;d(R=>D.packageTypes||R),n(R=>D.packageSizes||R),l(!!D.requireReceiptUpload),g(R=>D.batchPrefix||R),p(R=>D.maxToolsPerBatch||R)}i(s.facility_id)}catch(_){console.error("Error loading packaging settings:",_)}finally{t(!1)}})},[s]);const x=()=>Js(null,null,function*(){if(!r)return;t(!0);const y={packageTypes:m,packageSizes:c,requireReceiptUpload:o,batchPrefix:u,maxToolsPerBatch:b},{error:_}=yield I.from("facility_settings").update({packaging_settings:y}).eq("facility_id",r);_&&console.error("Error saving packaging settings:",_),t(!1)}),v=y=>{d(_=>_.includes(y)?_.filter(E=>E!==y):[..._,y])},N=y=>{n(_=>_.includes(y)?_.filter(E=>E!==y):[..._,y])};return a?e.jsx("p",{className:"text-sm text-gray-500",children:"Loading packaging settings..."}):e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"📦 Packaging Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(pe,{className:"font-medium",children:"Available Package Types"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:["pouch","wrap","container","tray"].map(y=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(hs,{checked:m.includes(y),onCheckedChange:()=>v(y)}),e.jsx("span",{className:"capitalize",children:y})]},y))})]}),e.jsxs("div",{children:[e.jsx(pe,{className:"font-medium",children:"Available Package Sizes"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:["small","medium","large","extra-large"].map(y=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(hs,{checked:c.includes(y),onCheckedChange:()=>N(y)}),e.jsx("span",{className:"capitalize",children:y})]},y))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(pe,{className:"font-medium",children:"Require Receipt Upload"}),e.jsx(aa,{checked:o,onCheckedChange:l})]}),e.jsxs("div",{children:[e.jsx(pe,{className:"font-medium",children:"Batch Code Prefix"}),e.jsx(gs,{value:u,onChange:y=>g(y.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(pe,{className:"font-medium",children:"Max Tools per Batch"}),e.jsx(gs,{type:"number",value:b,onChange:y=>p(parseInt(y.target.value,10)),className:"mt-1"})]}),e.jsx("button",{onClick:x,className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Save Settings"})]})]})},Gn=()=>{const{cycleSettings:s,defaultCycleType:a,allowCustomCycles:t,setDefaultCycleType:r,setAllowCustomCycles:i,updateCycleSettings:m,resetCycleSettings:d}=rs(),[c,n]=h.useState(null),{getCurrentFacilityId:o}=he();return e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Autoclave Cycle Customization"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"defaultCycle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Cycle Type"}),e.jsx("select",{id:"defaultCycle",value:a,onChange:l=>{const u=o();u&&me("defaultCycleType",{cycleType:l.target.value},u),r(l.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",children:An.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This cycle type will be selected by default for new sterilization runs"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"allowCustomCycles",className:"text-sm font-medium",children:"Allow Custom Cycle Parameters"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable users to modify temperature, pressure, and timing for special cases"})]}),e.jsx("button",{id:"allowCustomCycles",onClick:()=>{const l=o();l&&me("allowCustomCycles",{enabled:!t},l),i(!t)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${t?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Cycle Presets"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(s).map(([l,u])=>{const g=u;return e.jsxs("div",{className:"border border-gray-200 rounded-md p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"text-sm font-medium",children:g.name}),l==="custom"&&t&&e.jsx("button",{onClick:()=>n(c===l?null:l),className:"text-xs text-blue-600 hover:text-blue-800",children:c===l?"Save":"Edit"})]}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("p",{children:["Temperature: ",g.temperature,"°C"]}),e.jsxs("p",{children:["Pressure: ",g.pressure," PSI"]}),e.jsxs("p",{children:["Sterilize Time: ",g.sterilizeTime," min"]}),e.jsxs("p",{children:["Dry Time: ",g.dryTime," min"]}),e.jsxs("p",{children:["Total Time: ",g.totalTime," min"]})]}),l==="custom"&&t&&c===l&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customTemperature",className:"text-xs text-gray-500",children:"Temperature (°C)"}),e.jsx("input",{id:"customTemperature",type:"number",value:g.temperature,onChange:b=>{const p=o();p&&me("custom",{temperature:Number(b.target.value)},p),m("custom",{temperature:Number(b.target.value)})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:ee.TEMPERATURE.min,max:ee.TEMPERATURE.max})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customPressure",className:"text-xs text-gray-500",children:"Pressure (PSI)"}),e.jsx("input",{id:"customPressure",type:"number",value:g.pressure,onChange:b=>{const p=o();p&&me("custom",{pressure:Number(b.target.value)},p),m("custom",{pressure:Number(b.target.value)})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:ee.PRESSURE.min,max:ee.PRESSURE.max})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customSterilizeTime",className:"text-xs text-gray-500",children:"Sterilize (min)"}),e.jsx("input",{id:"customSterilizeTime",type:"number",value:g.sterilizeTime,onChange:b=>{const p=o();p&&me("custom",{sterilizeTime:Number(b.target.value)},p),m("custom",{sterilizeTime:Number(b.target.value)})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:ee.STERILIZE_TIME.min,max:ee.STERILIZE_TIME.max})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customDryTime",className:"text-xs text-gray-500",children:"Dry (min)"}),e.jsx("input",{id:"customDryTime",type:"number",value:g.dryTime,onChange:b=>{const p=o();p&&me("custom",{dryTime:Number(b.target.value)},p),m("custom",{dryTime:Number(b.target.value)})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:ee.DRY_TIME.min,max:ee.DRY_TIME.max})]})]})]})]},l)})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:d,className:"px-4 py-2 text-sm text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:"Reset to Defaults"})})]})]})},Un=()=>{const{autoclaveReceiptSettings:s,setAutoclaveHasPrinter:a,setReceiptRetentionMonths:t}=rs(),{getCurrentFacilityId:r}=he();return e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Autoclave Receipt Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"autoclaveHasPrinter",className:"text-sm font-medium",children:"Autoclave Has Printer"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable receipt upload functionality for autoclave cycles"})]}),e.jsx("button",{id:"autoclaveHasPrinter",onClick:()=>{const i=r();i&&Xs("autoclaveHasPrinter",!s.autoclaveHasPrinter,i),a(!s.autoclaveHasPrinter)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${s.autoclaveHasPrinter?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.autoclaveHasPrinter?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"retentionPeriod",className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Retention Period"}),e.jsx("select",{id:"retentionPeriod",value:s.receiptRetentionMonths,onChange:i=>{const m=r();m&&Xs("receiptRetentionMonths",Number(i.target.value),m),t(Number(i.target.value))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",children:Pn.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Receipts will be automatically deleted after this period"})]}),s.autoclaveHasPrinter&&e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-md",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Receipt Management Active"}),e.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[e.jsx("p",{children:"• Users can upload autoclave receipts via camera or file"}),e.jsx("p",{children:"• Receipts are linked to sterilization batch codes"}),e.jsxs("p",{children:["• Automatic cleanup after"," ",s.receiptRetentionMonths," months"]}),e.jsx("p",{children:"• Available for audit and compliance review"})]})]})]})]})};var zn=Object.defineProperty,Hn=Object.defineProperties,Bn=Object.getOwnPropertyDescriptors,et=Object.getOwnPropertySymbols,qn=Object.prototype.hasOwnProperty,Vn=Object.prototype.propertyIsEnumerable,st=(s,a,t)=>a in s?zn(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,Yn=(s,a)=>{for(var t in a||(a={}))qn.call(a,t)&&st(s,t,a[t]);if(et)for(var t of et(a))Vn.call(a,t)&&st(s,t,a[t]);return s},Wn=(s,a)=>Hn(s,Bn(a)),Ze=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const Kn=()=>{const{getCurrentFacilityId:s}=he(),[a,t]=h.useState(()=>{const l=s();return Ye(l||"")}),[r,i]=h.useState(null),[m,d]=h.useState(!1),c=(l,u)=>{const g=s();g&&Mn(l,u,g),t(b=>Wn(Yn({},b),{[l]:u}))},n=()=>Ze(null,null,function*(){try{d(!0);const l=s();if(!l){i({type:"error",text:"User facility not found"});return}kn(a,l),(yield Zs(l,a))?(We(!0,l),i({type:"success",text:"AI settings saved successfully!"}),setTimeout(()=>i(null),Ks)):(We(!1,l,"Save operation failed"),i({type:"error",text:"Failed to save AI settings"}))}catch(l){We(!1,s()||"",l instanceof Error?l.message:"Unknown error"),i({type:"error",text:"Failed to save AI settings"})}finally{d(!1)}}),o=()=>Ze(null,null,function*(){try{d(!0);const l=s();if(!l){i({type:"error",text:"User facility not found"});return}Ln(l);const u=Ye(l);t(u),(yield Rn(l))?(Ke(!0,l),i({type:"success",text:"AI settings reset to defaults"}),setTimeout(()=>i(null),Ks)):(Ke(!1,l,"Reset operation failed"),i({type:"error",text:"Failed to reset AI settings"}))}catch(l){Ke(!1,s()||"",l instanceof Error?l.message:"Unknown error"),i({type:"error",text:"Failed to reset AI settings"})}finally{d(!1)}});return h.useEffect(()=>{Ze(null,null,function*(){const u=s();if(u)try{const g=yield Dn(u);if(g)t(g);else{const b=Ye(u);t(b),yield Zs(u,b)}}catch(g){console.error("Failed to load AI settings:",g)}})},[s]),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"AI-Powered Sterilization Features"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure intelligent automation and machine learning capabilities"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-3 py-2 text-sm text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:"Reset"}),e.jsxs("button",{onClick:n,disabled:m,className:"px-4 py-2 text-sm bg-[#4ECDC4] text-white rounded-md hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] disabled:opacity-50",children:[e.jsx(j,{path:ve,size:.8,className:"inline mr-1"}),"Save AI Settings"]})]})]}),r&&e.jsx("div",{className:`p-4 rounded-lg border mb-6 ${r.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{path:r.type==="success"?ie:F,size:1,className:"text-current"}),r.text]})}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(j,{path:ge,size:1.5,className:"text-purple-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-800",children:"Master AI Control"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Enable or disable all AI features globally"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiEnabledToggle",className:"text-sm font-medium text-purple-800",children:"Enable AI Features"}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Master switch for all sterilization AI capabilities"})]}),e.jsx("button",{id:"aiEnabledToggle",onClick:()=>{const l=s();l&&de("ai_enabled",a.ai_enabled,!a.ai_enabled,l),c("ai_enabled",!a.ai_enabled)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 ${a.ai_enabled?"bg-purple-600":"bg-gray-200"}`,"aria-label":`${a.ai_enabled?"Disable":"Enable"} AI Features`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a.ai_enabled?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(j,{path:Y,size:1.2,className:"text-blue-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Computer Vision"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:qe.COMPUTER_VISION.map(({key:l,label:u,desc:g})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`${l}Toggle`,className:"text-sm font-medium text-gray-700",children:u}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:g})]}),e.jsx("button",{id:`${l}Toggle`,onClick:()=>{const b=s();b&&de(l,a[l],!a[l],b),c(l,!a[l])},disabled:!a.ai_enabled,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 ${a[l]?"bg-blue-600":"bg-gray-200"} ${a.ai_enabled?"":"opacity-50 cursor-not-allowed"}`,"aria-label":`${a[l]?"Disable":"Enable"} ${u}`,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${a[l]?"translate-x-5":"translate-x-1"}`})})]},l))})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(j,{path:ls,size:1.2,className:"text-green-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Predictive Analytics"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:qe.PREDICTIVE_ANALYTICS.map(({key:l,label:u,desc:g})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`${l}Toggle`,className:"text-sm font-medium text-gray-700",children:u}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:g})]}),e.jsx("button",{id:`${l}Toggle`,onClick:()=>{const b=s();b&&de(l,a[l],!a[l],b),c(l,!a[l])},disabled:!a.ai_enabled,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1 ${a[l]?"bg-green-600":"bg-gray-200"} ${a.ai_enabled?"":"opacity-50 cursor-not-allowed"}`,"aria-label":`${a[l]?"Disable":"Enable"} ${u}`,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${a[l]?"translate-x-5":"translate-x-1"}`})})]},l))})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(j,{path:Y,size:1.2,className:"text-orange-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Smart Workflow Automation"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:qe.SMART_WORKFLOW.map(({key:l,label:u,desc:g})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`${l}Toggle`,className:"text-sm font-medium text-gray-700",children:u}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:g})]}),e.jsx("button",{id:`${l}Toggle`,onClick:()=>{const b=s();b&&de(l,a[l],!a[l],b),c(l,!a[l])},disabled:!a.ai_enabled,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-1 ${a[l]?"bg-orange-600":"bg-gray-200"} ${a.ai_enabled?"":"opacity-50 cursor-not-allowed"}`,"aria-label":`${a[l]?"Disable":"Enable"} ${u}`,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${a[l]?"translate-x-5":"translate-x-1"}`})})]},l))})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(j,{path:le,size:1.2,className:"text-purple-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"AI Configuration"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiConfidenceThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Confidence Threshold"}),e.jsx("input",{id:"aiConfidenceThreshold",type:"range",min:Ve.min,max:Ve.max,step:Ve.step,value:a.ai_confidence_threshold||.8,onChange:l=>{const u=s();u&&de("ai_confidence_threshold",a.ai_confidence_threshold,parseFloat(l.target.value),u),c("ai_confidence_threshold",parseFloat(l.target.value))},disabled:!a.ai_enabled,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer disabled:opacity-50"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"50%"}),e.jsxs("span",{children:[Math.round(a.ai_confidence_threshold*100),"%"]}),e.jsx("span",{children:"100%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiDataRetentionDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Retention (Days)"}),e.jsx("select",{id:"aiDataRetentionDays",value:a.ai_data_retention_days||365,onChange:l=>{const u=s();u&&de("ai_data_retention_days",a.ai_data_retention_days,parseInt(l.target.value),u),c("ai_data_retention_days",parseInt(l.target.value))},disabled:!a.ai_enabled,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] disabled:opacity-50",children:On.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})]})]})})]})]})]})};function Zn(){return e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsx($n,{}),e.jsx("div",{className:"mt-6 border-t border-gray-200 pt-6",children:e.jsx(Fn,{})}),e.jsx(Gn,{}),e.jsx(Un,{}),e.jsx(Kn,{})]})}const tt=({onLaunchBuilder:s})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Content Builder"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Launch Content Builder"}),e.jsxs("button",{onClick:s,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4] transition-colors",children:[e.jsx(j,{path:Dt,size:1,className:"mr-2"}),"Launch Builder"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Enable content creation"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"enable-content-creation",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Enable content creation"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Auto-save drafts"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"auto-save-drafts",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Auto-save drafts"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Recent Activity"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Course published"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Sterilization Safety Protocols"})]}),e.jsx("span",{className:"text-xs text-gray-500",children:"2h ago"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Draft saved"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Inventory Management Guide"})]}),e.jsx("span",{className:"text-xs text-gray-500",children:"1d ago"})]})]})]})]}),Qn=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Publishing Workflow"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Require approval before publishing"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"require-approval",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Require approval before publishing"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Auto-publish to Library"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"auto-publish-library",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all"}),e.jsx("span",{className:"sr-only",children:"Auto-publish to Library"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Notify reviewers on submission"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"notify-reviewers",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Notify reviewers on submission"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Approval Roles"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Content Manager"}),e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Primary"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Department Head"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Secondary"})]})]})]})]}),Xn=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Content Workflow"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Enable draft review workflow"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"enable-draft-review",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Enable draft review workflow"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Auto-save drafts every 5 minutes"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"auto-save-drafts-5min",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Auto-save drafts every 5 minutes"})]})]})]})]})}),Jn=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"AI Content Suggestions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Enable AI suggestions"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"enable-ai-suggestions",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Enable AI suggestions"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Suggest based on content gaps"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"suggest-content-gaps",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Suggest based on content gaps"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Analyze user search patterns"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"analyze-search-patterns",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Analyze user search patterns"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"AI Configuration"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confidence-threshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Suggestion Confidence Threshold"}),e.jsxs("select",{id:"confidence-threshold",defaultValue:"0.8",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"0.7",children:"70% - Balanced"}),e.jsx("option",{value:"0.8",children:"80% - Recommended"}),e.jsx("option",{value:"0.9",children:"90% - High Quality"})]})]})})]})]}),ei=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Media Upload Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Max file size per upload"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"50 MB"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Auto-compress images"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"auto-compress-images",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Auto-compress images"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Generate thumbnails"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"generate-thumbnails",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Generate thumbnails"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Supported File Types"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-green-800 mb-2",children:"Images"}),e.jsx("p",{className:"text-xs text-green-700",children:"JPEG, PNG, GIF, WebP, HEIC"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-800 mb-2",children:"Videos"}),e.jsx("p",{className:"text-xs text-blue-700",children:"MP4, WebM, MOV, AVI"})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-purple-800 mb-2",children:"Audio"}),e.jsx("p",{className:"text-xs text-purple-700",children:"MP3, WAV, AAC, OGG"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-800 mb-2",children:"Documents"}),e.jsx("p",{className:"text-xs text-gray-700",children:"PDF, Word, PowerPoint, Excel"})]})]})]})]}),si=()=>{const s=Qt(),[a,t]=h.useState("builder"),r=()=>{s("/content-builder")},i=[{id:"builder",label:"Content Builder",icon:Cs},{id:"publishing",label:"Publishing",icon:Sa},{id:"workflow",label:"Workflow",icon:Cs},{id:"ai",label:"AI Suggestions",icon:Ea},{id:"media",label:"Media Settings",icon:wa}],m=()=>{switch(a){case"builder":return e.jsx(tt,{onLaunchBuilder:r});case"publishing":return e.jsx(Qn,{});case"workflow":return e.jsx(Xn,{});case"ai":return e.jsx(Jn,{});case"media":return e.jsx(ei,{});default:return e.jsx(tt,{onLaunchBuilder:r})}};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:i.map(d=>e.jsxs("button",{onClick:()=>t(d.id),className:`${a===d.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[e.jsx(j,{path:d.icon,size:1,className:"mr-2"}),d.label]},d.id))})}),e.jsx("div",{className:"py-4",children:m()})]})})},O=({id:s,checked:a,onChange:t,label:r,description:i})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm text-gray-700",children:r}),i&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i})]}),e.jsxs("label",{htmlFor:s,className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:s,className:"sr-only peer",checked:a,onChange:m=>t(m.target.checked)}),e.jsx("div",{className:`w-11 h-6 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all ${a?"bg-[#4ECDC4] after:translate-x-full":"bg-gray-200"}`}),e.jsx("span",{className:"sr-only",children:r})]})]}),W=({title:s,children:a})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:s}),e.jsx("div",{className:"space-y-3",children:a})]});var ti=Object.defineProperty,ai=Object.defineProperties,ri=Object.getOwnPropertyDescriptors,at=Object.getOwnPropertySymbols,ni=Object.prototype.hasOwnProperty,ii=Object.prototype.propertyIsEnumerable,rt=(s,a,t)=>a in s?ti(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,li=(s,a)=>{for(var t in a||(a={}))ni.call(a,t)&&rt(s,t,a[t]);if(at)for(var t of at(a))ii.call(a,t)&&rt(s,t,a[t]);return s},oi=(s,a)=>ai(s,ri(a));const ci=({settings:s,onSettingsChange:a})=>{const t=(r,i)=>{a(oi(li({},s),{[r]:i}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(j,{path:Y,size:1.5,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-800",children:"General Learning Settings"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Basic configuration for learning and training modules"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(W,{title:"Core Features",children:[e.jsx(O,{id:"enable-learning-paths",checked:s.enableLearningPaths,onChange:r=>t("enableLearningPaths",r),label:"Enable Learning Paths"}),e.jsx(O,{id:"enable-certifications",checked:s.enableCertifications,onChange:r=>t("enableCertifications",r),label:"Enable Certifications"}),e.jsx(O,{id:"enable-progress-tracking",checked:s.enableProgressTracking,onChange:r=>t("enableProgressTracking",r),label:"Enable Progress Tracking"}),e.jsx(O,{id:"enable-social-learning",checked:s.enableSocialLearning,onChange:r=>t("enableSocialLearning",r),label:"Enable Social Learning"})]}),e.jsxs(W,{title:"Content Management",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"default-content-type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Content Type"}),e.jsxs("select",{id:"default-content-type",value:s.defaultContentType,onChange:r=>t("defaultContentType",r.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"course",children:"Course"}),e.jsx("option",{value:"procedure",children:"Procedure"}),e.jsx("option",{value:"policy",children:"Policy"}),e.jsx("option",{value:"learning_pathway",children:"Learning Pathway"})]})]}),e.jsx(O,{id:"enable-content-rating",checked:s.enableContentRating,onChange:r=>t("enableContentRating",r),label:"Enable Content Rating"}),e.jsx(O,{id:"require-content-approval",checked:s.requireContentApproval,onChange:r=>t("requireContentApproval",r),label:"Require Content Approval"})]})]})]})})};var di=Object.defineProperty,mi=Object.defineProperties,ui=Object.getOwnPropertyDescriptors,nt=Object.getOwnPropertySymbols,xi=Object.prototype.hasOwnProperty,hi=Object.prototype.propertyIsEnumerable,it=(s,a,t)=>a in s?di(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,gi=(s,a)=>{for(var t in a||(a={}))xi.call(a,t)&&it(s,t,a[t]);if(nt)for(var t of nt(a))hi.call(a,t)&&it(s,t,a[t]);return s},pi=(s,a)=>mi(s,ui(a));const fi=({settings:s,onSettingsChange:a})=>{const t=(r,i)=>{a(pi(gi({},s),{[r]:i}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(j,{path:ge,size:1.5,className:"text-purple-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-800",children:"AI Learning Features"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Configure AI-powered learning capabilities"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(W,{title:"AI Learning Features",children:[e.jsx(O,{id:"personalized-recommendations",checked:s.personalizedRecommendations,onChange:r=>t("personalizedRecommendations",r),label:"Personalized Recommendations"}),e.jsx(O,{id:"skill-gap-analysis",checked:s.skillGapAnalysis,onChange:r=>t("skillGapAnalysis",r),label:"Skill Gap Analysis"}),e.jsx(O,{id:"learning-path-optimization",checked:s.learningPathOptimization,onChange:r=>t("learningPathOptimization",r),label:"Learning Path Optimization"}),e.jsx(O,{id:"adaptive-difficulty",checked:s.adaptiveDifficulty,onChange:r=>t("adaptiveDifficulty",r),label:"Adaptive Difficulty"})]}),e.jsxs(W,{title:"AI Configuration",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ai-confidence-threshold",className:"block text-sm font-medium text-gray-700 mb-1",children:"AI Confidence Threshold"}),e.jsx("input",{id:"ai-confidence-threshold",type:"range",min:"0.1",max:"1",step:"0.1",value:s.aiConfidenceThreshold,onChange:r=>t("aiConfidenceThreshold",parseFloat(r.target.value)),className:"w-full"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(s.aiConfidenceThreshold*100),"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"recommendation-limit",className:"block text-sm font-medium text-gray-700 mb-1",children:"Recommendation Limit"}),e.jsx("input",{id:"recommendation-limit",type:"number",min:"1",max:"20",value:s.recommendationLimit,onChange:r=>t("recommendationLimit",parseInt(r.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"data-retention-days",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Retention (Days)"}),e.jsx("input",{id:"data-retention-days",type:"number",min:"30",max:"1095",value:s.dataRetentionDays,onChange:r=>t("dataRetentionDays",parseInt(r.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]})]})]})]})})};var bi=Object.defineProperty,yi=Object.defineProperties,vi=Object.getOwnPropertyDescriptors,lt=Object.getOwnPropertySymbols,ji=Object.prototype.hasOwnProperty,Ni=Object.prototype.propertyIsEnumerable,ot=(s,a,t)=>a in s?bi(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,Ci=(s,a)=>{for(var t in a||(a={}))ji.call(a,t)&&ot(s,t,a[t]);if(lt)for(var t of lt(a))Ni.call(a,t)&&ot(s,t,a[t]);return s},_i=(s,a)=>yi(s,vi(a));const Si=({settings:s,onSettingsChange:a})=>{const t=(r,i)=>{a(_i(Ci({},s),{[r]:i}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(j,{path:Mt,size:1.5,className:"text-green-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-green-800",children:"Certification Management"}),e.jsx("p",{className:"text-sm text-green-700",children:"Configure certification and compliance tracking"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(W,{title:"Certification Features",children:[e.jsx(O,{id:"enable-auto-certification",checked:s.enableAutoCertification,onChange:r=>t("enableAutoCertification",r),label:"Enable Auto-Certification"}),e.jsx(O,{id:"require-re-certification",checked:s.requireReCertification,onChange:r=>t("requireReCertification",r),label:"Require Re-Certification"}),e.jsx(O,{id:"enable-certification-templates",checked:s.enableCertificationTemplates,onChange:r=>t("enableCertificationTemplates",r),label:"Enable Certification Templates"})]}),e.jsxs(W,{title:"Assessment Settings",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"passing-score-threshold",className:"block text-sm font-medium text-gray-700 mb-1",children:"Passing Score Threshold"}),e.jsx("input",{id:"passing-score-threshold",type:"number",min:"50",max:"100",value:s.passingScoreThreshold,onChange:r=>t("passingScoreThreshold",parseInt(r.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"max-assessment-attempts",className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Assessment Attempts"}),e.jsx("input",{id:"max-assessment-attempts",type:"number",min:"1",max:"10",value:s.maxAssessmentAttempts,onChange:r=>t("maxAssessmentAttempts",parseInt(r.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"certification-expiry-days",className:"block text-sm font-medium text-gray-700 mb-1",children:"Certification Expiry (Days)"}),e.jsx("input",{id:"certification-expiry-days",type:"number",min:"30",max:"1095",value:s.certificationExpiryDays,onChange:r=>t("certificationExpiryDays",parseInt(r.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]})]})]})]})})};var Ei=Object.defineProperty,wi=Object.defineProperties,Ti=Object.getOwnPropertyDescriptors,ct=Object.getOwnPropertySymbols,Ii=Object.prototype.hasOwnProperty,Ai=Object.prototype.propertyIsEnumerable,dt=(s,a,t)=>a in s?Ei(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,Pi=(s,a)=>{for(var t in a||(a={}))Ii.call(a,t)&&dt(s,t,a[t]);if(ct)for(var t of ct(a))Ai.call(a,t)&&dt(s,t,a[t]);return s},Oi=(s,a)=>wi(s,Ti(a));const Di=({settings:s,onSettingsChange:a})=>{const t=(r,i)=>{a(Oi(Pi({},s),{[r]:i}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(j,{path:ye,size:1.5,className:"text-orange-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-orange-800",children:"Learning Path Configuration"}),e.jsx("p",{className:"text-sm text-orange-700",children:"Configure learning paths and progress tracking"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(W,{title:"Path Features",children:[e.jsx(O,{id:"enable-custom-paths",checked:s.enableCustomPaths,onChange:r=>t("enableCustomPaths",r),label:"Enable Custom Learning Paths"}),e.jsx(O,{id:"enable-prerequisites",checked:s.enablePrerequisites,onChange:r=>t("enablePrerequisites",r),label:"Enable Prerequisites"}),e.jsx(O,{id:"enable-branching",checked:s.enableBranching,onChange:r=>t("enableBranching",r),label:"Enable Branching Paths"}),e.jsx(O,{id:"adaptive-path-generation",checked:s.adaptivePathGeneration,onChange:r=>t("adaptivePathGeneration",r),label:"AI Adaptive Path Generation"})]}),e.jsxs(W,{title:"Progress & Gamification",children:[e.jsx(O,{id:"enable-milestones",checked:s.enableMilestones,onChange:r=>t("enableMilestones",r),label:"Enable Learning Milestones"}),e.jsx(O,{id:"enable-progress-gamification",checked:s.enableProgressGamification,onChange:r=>t("enableProgressGamification",r),label:"Enable Progress Gamification"}),e.jsx(O,{id:"enable-learning-streaks",checked:s.enableLearningStreaks,onChange:r=>t("enableLearningStreaks",r),label:"Enable Learning Streaks"}),e.jsx(O,{id:"enable-achievement-badges",checked:s.enableAchievementBadges,onChange:r=>t("enableAchievementBadges",r),label:"Enable Achievement Badges"})]})]})]})})};var Ri=Object.defineProperty,ki=Object.defineProperties,Li=Object.getOwnPropertyDescriptors,mt=Object.getOwnPropertySymbols,Mi=Object.prototype.hasOwnProperty,$i=Object.prototype.propertyIsEnumerable,ut=(s,a,t)=>a in s?Ri(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,Fi=(s,a)=>{for(var t in a||(a={}))Mi.call(a,t)&&ut(s,t,a[t]);if(mt)for(var t of mt(a))$i.call(a,t)&&ut(s,t,a[t]);return s},Gi=(s,a)=>ki(s,Li(a));const Ui=({aiSettings:s,onAiSettingsChange:a})=>{const t=(r,i)=>{a(Gi(Fi({},s),{[r]:i}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(j,{path:le,size:1.5,className:"text-gray-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Advanced Configuration"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Advanced settings for power users"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(W,{title:"Data & Privacy",children:[e.jsx(O,{id:"data-sharing-enabled",checked:s.dataSharingEnabled,onChange:r=>t("dataSharingEnabled",r),label:"Enable Data Sharing for AI Training"}),e.jsx(O,{id:"local-ai-processing-enabled",checked:s.localAIProcessingEnabled,onChange:r=>t("localAIProcessingEnabled",r),label:"Local AI Processing"}),e.jsx(O,{id:"encrypted-data-transmission",checked:s.encryptedDataTransmission,onChange:r=>t("encryptedDataTransmission",r),label:"Encrypted Data Transmission"})]}),e.jsx(W,{title:"System Information",children:e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"AI Model Version:"})," ",s.modelVersion]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Data Retention:"})," ",s.dataRetentionDays," days"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Confidence Threshold:"})," ",Math.round(s.aiConfidenceThreshold*100),"%"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Recommendation Limit:"})," ",s.recommendationLimit," items"]})]})})]})]})})},zi=()=>{const[s,a]=h.useState({aiEnabled:!0,personalizedRecommendations:!0,skillGapAnalysis:!0,learningPathOptimization:!0,performancePrediction:!0,adaptiveDifficulty:!0,learningAnalyticsEnabled:!0,behaviorTracking:!0,progressPrediction:!0,engagementMetrics:!0,retentionAnalysis:!0,aiConfidenceThreshold:.8,recommendationLimit:5,dataRetentionDays:365,modelVersion:"v1.0",dataSharingEnabled:!1,localAIProcessingEnabled:!0,encryptedDataTransmission:!0,aiModelTraining:!1}),[t,r]=h.useState({enableLearningPaths:!0,enableCertifications:!0,enableProgressTracking:!0,enableSocialLearning:!1,defaultContentType:"course",enableContentRating:!0,enableComments:!0,requireContentApproval:!0,showLearningRecommendations:!0,enableLearningReminders:!0,adaptiveInterface:!0,mobileLearningEnabled:!0}),[i,m]=h.useState({enableAutoCertification:!0,certificationExpiryDays:365,requireReCertification:!0,enableCertificationTemplates:!0,complianceTrackingEnabled:!0,regulatoryUpdatesEnabled:!0,auditTrailEnabled:!0,complianceReportingEnabled:!0,enableAssessments:!0,passingScoreThreshold:80,maxAssessmentAttempts:3,enableRetakes:!0}),[d,c]=h.useState({enableCustomPaths:!0,enablePrerequisites:!0,enableBranching:!0,adaptivePathGeneration:!0,enableMilestones:!0,enableProgressGamification:!0,enableLearningStreaks:!0,enableAchievementBadges:!0,estimatedCompletionTracking:!0,enableStudyScheduling:!0,optimalStudyTimeRecommendations:!0,enableLearningReminders:!0});return{aiSettings:s,setAiSettings:a,generalSettings:t,setGeneralSettings:r,certificationSettings:i,setCertificationSettings:m,learningPathSettings:d,setLearningPathSettings:c}};var Hi=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const Bi=()=>{const[s,a]=h.useState("general"),[t,r]=h.useState(!1),[i,m]=h.useState(null),{aiSettings:d,setAiSettings:c,generalSettings:n,setGeneralSettings:o,certificationSettings:l,setCertificationSettings:u,learningPathSettings:g,setLearningPathSettings:b}=zi(),p=[{id:"general",label:"General Settings",icon:Y},{id:"ai",label:"AI & Analytics",icon:ge},{id:"certifications",label:"Certifications",icon:Mt},{id:"learning-paths",label:"Learning Paths",icon:ye},{id:"advanced",label:"Advanced",icon:le}],x=()=>Hi(null,null,function*(){try{r(!0),m(null),m({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>m(null),3e3)}catch(N){console.error(N),m({type:"error",text:"Failed to save settings. Please try again."})}finally{r(!1)}}),v=()=>{switch(s){case"general":return e.jsx(ci,{settings:n,onSettingsChange:o});case"ai":return e.jsx(fi,{settings:d,onSettingsChange:c});case"certifications":return e.jsx(Si,{settings:l,onSettingsChange:u});case"learning-paths":return e.jsx(Di,{settings:g,onSettingsChange:b});case"advanced":return e.jsx(Ui,{aiSettings:d,onAiSettingsChange:c});default:return null}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Learning & Training Settings"}),e.jsx("p",{className:"text-gray-600",children:"Configure AI-powered learning features and training modules"})]}),e.jsxs("button",{onClick:x,disabled:t,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4] disabled:opacity-50",children:[e.jsx(j,{path:ve,size:1,className:"mr-2"}),t?"Saving...":"Save Settings"]})]}),i&&e.jsx("div",{className:`rounded-md p-4 ${i.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(j,{path:i.type==="success"?ie:F,size:1.2,className:`mr-2 ${i.type==="success"?"text-green-400":"text-red-400"}`}),i.text]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:p.map(N=>e.jsxs("button",{onClick:()=>a(N.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${s===N.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(j,{path:N.icon,size:1}),e.jsx("span",{children:N.label})]},N.id))})}),e.jsx("div",{className:"tab-content-area",children:v()})]})},qi={aiEnabled:!1,predictiveCleaningEnabled:!1,smartScheduling:!1,contaminationPrediction:!1,resourceOptimization:!1,efficiencyAnalytics:!1,smartRoomManagementEnabled:!1,automaticPriorityAssignment:!1,riskAssessment:!1,trendAnalysis:!1,predictiveMaintenance:!1,supplyOptimizationEnabled:!1,staffScheduling:!1,costOptimization:!1,inventoryPrediction:!1,workloadBalancing:!1,qualityAssuranceEnabled:!1,complianceMonitoring:!1,auditTrailEnhancement:!1,performanceTracking:!1,automatedReporting:!1,realTimeMonitoringEnabled:!1,anomalyDetection:!1,smartNotifications:!1,statusUpdates:!1,emergencyAlerts:!1,aiConfidenceThreshold:.85,aiDataRetentionDays:90,realTimeProcessingEnabled:!1,batchProcessingEnabled:!1,dataSharingEnabled:!1,localAIProcessingEnabled:!1,encryptedDataTransmission:!0,aiModelTraining:!1},Vi={defaultCleaningDuration:45,qualityScoreThreshold:8,contaminationLevels:["low","medium","high","critical"],cleaningTypes:["routine","deep","emergency","post_procedure"],autoSchedulingEnabled:!1,bufferTimeMinutes:15,maxConcurrentCleanings:3,weekendCleaningEnabled:!0,complianceTrackingEnabled:!0,auditLogRetentionDays:365,regulatoryReportingEnabled:!1,certificationTracking:!1},Yi={emailNotificationsEnabled:!0,dailySummaryEnabled:!0,urgentAlertsEnabled:!0,completionNotificationsEnabled:!1,inAppNotificationsEnabled:!0,pushNotificationsEnabled:!1,soundEnabled:!0,adminNotificationsEnabled:!0,staffNotificationsEnabled:!1,supervisorNotificationsEnabled:!0},w={defaultCleaningDuration:{min:15,max:180},qualityScoreThreshold:{min:1,max:10},bufferTimeMinutes:{min:0,max:60},maxConcurrentCleanings:{min:1,max:10},auditLogRetentionDays:{min:30,max:2555},aiConfidenceThreshold:{min:.1,max:1,step:.05},aiDataRetentionDays:{min:30,max:1095}},Wi=[{id:"general",label:"General",icon:Y},{id:"ai",label:"AI & Analytics",icon:xe},{id:"protocols",label:"Cleaning Protocols",icon:ye},{id:"rooms",label:"Room Management",icon:Oe},{id:"checklists",label:"Checklists",icon:ye},{id:"notifications",label:"Notifications",icon:$t},{id:"compliance",label:"Compliance",icon:Oe},{id:"advanced",label:"Advanced",icon:le}],xt={email:[{key:"emailNotificationsEnabled",label:"Enable Email Notifications"},{key:"dailySummaryEnabled",label:"Daily Summary Reports"},{key:"urgentAlertsEnabled",label:"Urgent Alerts"},{key:"completionNotificationsEnabled",label:"Task Completion Notifications"}],inApp:[{key:"inAppNotificationsEnabled",label:"Enable In-App Notifications"},{key:"pushNotificationsEnabled",label:"Push Notifications"},{key:"soundEnabled",label:"Sound Alerts"}]},Ki=3e3,Zi=s=>{const a=[];return(s.aiConfidenceThreshold<w.aiConfidenceThreshold.min||s.aiConfidenceThreshold>w.aiConfidenceThreshold.max)&&a.push(`AI confidence threshold must be between ${w.aiConfidenceThreshold.min} and ${w.aiConfidenceThreshold.max}`),(s.aiDataRetentionDays<w.aiDataRetentionDays.min||s.aiDataRetentionDays>w.aiDataRetentionDays.max)&&a.push(`AI data retention days must be between ${w.aiDataRetentionDays.min} and ${w.aiDataRetentionDays.max}`),a},Qi=s=>{const a=[];return(s.defaultCleaningDuration<w.defaultCleaningDuration.min||s.defaultCleaningDuration>w.defaultCleaningDuration.max)&&a.push(`Default cleaning duration must be between ${w.defaultCleaningDuration.min} and ${w.defaultCleaningDuration.max} minutes`),(s.qualityScoreThreshold<w.qualityScoreThreshold.min||s.qualityScoreThreshold>w.qualityScoreThreshold.max)&&a.push(`Quality score threshold must be between ${w.qualityScoreThreshold.min} and ${w.qualityScoreThreshold.max}`),(s.bufferTimeMinutes<w.bufferTimeMinutes.min||s.bufferTimeMinutes>w.bufferTimeMinutes.max)&&a.push(`Buffer time must be between ${w.bufferTimeMinutes.min} and ${w.bufferTimeMinutes.max} minutes`),(s.maxConcurrentCleanings<w.maxConcurrentCleanings.min||s.maxConcurrentCleanings>w.maxConcurrentCleanings.max)&&a.push(`Max concurrent cleanings must be between ${w.maxConcurrentCleanings.min} and ${w.maxConcurrentCleanings.max}`),(s.auditLogRetentionDays<w.auditLogRetentionDays.min||s.auditLogRetentionDays>w.auditLogRetentionDays.max)&&a.push(`Audit log retention days must be between ${w.auditLogRetentionDays.min} and ${w.auditLogRetentionDays.max}`),a},Xi=s=>{const a=[];return!s.emailNotificationsEnabled&&!s.inAppNotificationsEnabled&&a.push("At least one notification method must be enabled"),a},Ji=(s,a,t)=>[...Zi(s),...Qi(a),...Xi(t)],el=(s,a,t)=>{const r=Ji(s,a,t);return{isValid:r.length===0,errors:r}};var sl=Object.defineProperty,tl=Object.defineProperties,al=Object.getOwnPropertyDescriptors,ht=Object.getOwnPropertySymbols,rl=Object.prototype.hasOwnProperty,nl=Object.prototype.propertyIsEnumerable,gt=(s,a,t)=>a in s?sl(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,Qe=(s,a)=>{for(var t in a||(a={}))rl.call(a,t)&&gt(s,t,a[t]);if(ht)for(var t of ht(a))nl.call(a,t)&&gt(s,t,a[t]);return s},il=(s,a)=>tl(s,al(a)),De=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const Bt={settings:"/api/environmental-cleaning/settings",aiSettings:"/api/environmental-cleaning/ai-settings",testSync:"/api/environmental-cleaning/test-sync",resetDefaults:"/api/environmental-cleaning/reset-defaults"},Xe={timeout:3e4,retries:3,headers:{"Content-Type":"application/json"}},ds=(s,a,...t)=>De(null,[s,a,...t],function*(r,i,m=Xe.retries){try{const d=new AbortController,c=setTimeout(()=>d.abort(),Xe.timeout),n=yield fetch(r,il(Qe({},i),{signal:d.signal,headers:Qe(Qe({},Xe.headers),i.headers)}));if(clearTimeout(c),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return yield n.json()}catch(d){if(m>0&&d instanceof Error&&d.name==="AbortError")return ds(r,i,m-1);throw d}}),ll=s=>De(null,null,function*(){try{const a=yield ds(Bt.settings,{method:"POST",body:JSON.stringify(s)});if(!a.success)throw new Error(a.error||"Failed to save settings")}catch(a){throw console.error("Error saving environmental cleaning settings:",a),new Error("Failed to save settings. Please try again.")}}),ol=s=>De(null,null,function*(){try{const a=yield ds(Bt.aiSettings,{method:"POST",body:JSON.stringify(s)});if(!a.success)throw new Error(a.error||"Failed to save AI settings")}catch(a){throw console.error("Error saving AI settings:",a),new Error("Failed to save AI settings. Please try again.")}}),cl=(s,a,t)=>De(null,null,function*(){try{s.aiEnabled&&(yield ol({aiSettings:s})),yield ll({protocols:a,notifications:t})}catch(r){throw console.error("Error saving all settings:",r),r}}),dl=({protocolSettings:s,onProtocolSettingChange:a})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(j,{path:Y,size:1.5,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-800",children:"General Settings"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Basic configuration for environmental cleaning"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"defaultCleaningDuration",className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Cleaning Duration (minutes)"}),e.jsx("input",{id:"defaultCleaningDuration",type:"number",value:s.defaultCleaningDuration,onChange:t=>a("defaultCleaningDuration",Number(t.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:w.defaultCleaningDuration.min,max:w.defaultCleaningDuration.max})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"qualityScoreThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Quality Score Threshold"}),e.jsx("input",{id:"qualityScoreThreshold",type:"number",value:s.qualityScoreThreshold,onChange:t=>a("qualityScoreThreshold",Number(t.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:w.qualityScoreThreshold.min,max:w.qualityScoreThreshold.max})]})]})]})}),ml=()=>e.jsx("div",{children:"Test"}),ul=({protocolSettings:s,onProtocolSettingChange:a})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(j,{path:ye,size:1.5,className:"text-green-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-green-800",children:"Cleaning Protocols"}),e.jsx("p",{className:"text-sm text-green-700",children:"Configure cleaning procedures and standards"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bufferTimeMinutes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Buffer Time (minutes)"}),e.jsx("input",{id:"bufferTimeMinutes",type:"number",value:s.bufferTimeMinutes,onChange:t=>a("bufferTimeMinutes",Number(t.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",min:w.bufferTimeMinutes.min,max:w.bufferTimeMinutes.max})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"maxConcurrentCleanings",className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Concurrent Cleanings"}),e.jsx("input",{id:"maxConcurrentCleanings",type:"number",value:s.maxConcurrentCleanings,onChange:t=>a("maxConcurrentCleanings",Number(t.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",min:w.maxConcurrentCleanings.min,max:w.maxConcurrentCleanings.max})]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"autoSchedulingEnabled",className:"text-sm font-medium text-gray-700",children:"Auto Scheduling"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable automatic cleaning schedule generation"})]}),e.jsx("button",{id:"autoSchedulingEnabled",onClick:()=>a("autoSchedulingEnabled",!s.autoSchedulingEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 ${s.autoSchedulingEnabled?"bg-green-600":"bg-gray-200"}`,"aria-label":"Auto Scheduling",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.autoSchedulingEnabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"weekendCleaningEnabled",className:"text-sm font-medium text-gray-700",children:"Weekend Cleaning"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Allow cleaning tasks on weekends"})]}),e.jsx("button",{id:"weekendCleaningEnabled",onClick:()=>a("weekendCleaningEnabled",!s.weekendCleaningEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 ${s.weekendCleaningEnabled?"bg-green-600":"bg-gray-200"}`,"aria-label":"Weekend Cleaning",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.weekendCleaningEnabled?"translate-x-6":"translate-x-1"}`})})]})]})]})}),xl=({notificationSettings:s,onNotificationSettingChange:a})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(j,{path:$t,size:1.5,className:"text-yellow-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-yellow-800",children:"Notification Settings"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Configure how and when you receive notifications"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Email Notifications"}),e.jsx("div",{className:"space-y-3",children:xt.email.map(({key:t,label:r})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:t,className:"text-sm text-gray-700",children:r}),e.jsx("button",{id:t,onClick:()=>a(t,!s[t]),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-1 ${s[t]?"bg-yellow-600":"bg-gray-200"}`,"aria-label":r,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${s[t]?"translate-x-5":"translate-x-1"}`})})]},t))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"In-App Notifications"}),e.jsx("div",{className:"space-y-3",children:xt.inApp.map(({key:t,label:r})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:t,className:"text-sm text-gray-700",children:r}),e.jsx("button",{id:t,onClick:()=>a(t,!s[t]),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-1 ${s[t]?"bg-yellow-600":"bg-gray-200"}`,"aria-label":r,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${s[t]?"translate-x-5":"translate-x-1"}`})})]},t))})]})]})]})}),hl=({protocolSettings:s,onProtocolSettingChange:a})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(j,{path:Oe,size:1.5,className:"text-red-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-red-800",children:"Compliance & Audit"}),e.jsx("p",{className:"text-sm text-red-700",children:"Configure compliance tracking and reporting"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"complianceTrackingEnabled",className:"text-sm font-medium text-gray-700",children:"Compliance Tracking"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Track regulatory compliance automatically"})]}),e.jsx("button",{id:"complianceTrackingEnabled",onClick:()=>a("complianceTrackingEnabled",!s.complianceTrackingEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 ${s.complianceTrackingEnabled?"bg-red-600":"bg-gray-200"}`,"aria-label":"Compliance Tracking",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.complianceTrackingEnabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"auditLogRetentionDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Audit Log Retention (days)"}),e.jsx("input",{id:"auditLogRetentionDays",type:"number",value:s.auditLogRetentionDays,onChange:t=>a("auditLogRetentionDays",Number(t.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",min:w.auditLogRetentionDays.min,max:w.auditLogRetentionDays.max})]})]})]})}),gl=({aiSettings:s,onAISettingChange:a})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(j,{path:le,size:1.5,className:"text-gray-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Advanced Settings"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Advanced configuration and system settings"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiConfidenceThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Confidence Threshold"}),e.jsx("input",{id:"aiConfidenceThreshold",type:"number",value:s.aiConfidenceThreshold,onChange:t=>a("aiConfidenceThreshold",Number(t.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500",min:w.aiConfidenceThreshold.min,max:w.aiConfidenceThreshold.max,step:w.aiConfidenceThreshold.step}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum confidence for AI predictions"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiDataRetentionDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Retention (days)"}),e.jsx("input",{id:"aiDataRetentionDays",type:"number",value:s.aiDataRetentionDays,onChange:t=>a("aiDataRetentionDays",Number(t.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500",min:w.aiDataRetentionDays.min,max:w.aiDataRetentionDays.max}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How long to keep AI training data"})]})]})]})});var pl=Object.defineProperty,fl=Object.defineProperties,bl=Object.getOwnPropertyDescriptors,pt=Object.getOwnPropertySymbols,yl=Object.prototype.hasOwnProperty,vl=Object.prototype.propertyIsEnumerable,ft=(s,a,t)=>a in s?pl(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,Je=(s,a)=>{for(var t in a||(a={}))yl.call(a,t)&&ft(s,t,a[t]);if(pt)for(var t of pt(a))vl.call(a,t)&&ft(s,t,a[t]);return s},es=(s,a)=>fl(s,bl(a)),jl=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const Nl=()=>{const[s,a]=h.useState(qi),[t,r]=h.useState(Vi),[i,m]=h.useState(Yi),[d,c]=h.useState(null),[n,o]=h.useState(!1);return{aiSettings:s,protocolSettings:t,notificationSettings:i,message:d,isLoading:n,handleAISettingChange:(x,v)=>{a(N=>es(Je({},N),{[x]:v}))},handleProtocolSettingChange:(x,v)=>{r(N=>es(Je({},N),{[x]:v}))},handleNotificationSettingChange:(x,v)=>{m(N=>es(Je({},N),{[x]:v}))},handleSaveSettings:()=>jl(null,null,function*(){try{o(!0),c(null);const x=el(s,t,i);if(!x.isValid){c({type:"error",text:x.errors[0]||"Validation failed"});return}yield cl(s,t,i),c({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>c(null),Ki)}catch(x){console.error(x),c({type:"error",text:"Failed to save settings. Please try again."})}finally{o(!1)}}),clearMessage:()=>c(null)}},Cl=()=>{const[s,a]=h.useState("general"),{aiSettings:t,protocolSettings:r,notificationSettings:i,message:m,isLoading:d,handleAISettingChange:c,handleProtocolSettingChange:n,handleNotificationSettingChange:o,handleSaveSettings:l}=Nl(),u=()=>{switch(s){case"general":return e.jsx(dl,{protocolSettings:r,onProtocolSettingChange:n});case"ai":return e.jsx(ml,{});case"protocols":return e.jsx(ul,{protocolSettings:r,onProtocolSettingChange:n});case"rooms":return e.jsx(na,{});case"checklists":return e.jsx(ra,{});case"notifications":return e.jsx(xl,{notificationSettings:i,onNotificationSettingChange:o});case"compliance":return e.jsx(hl,{protocolSettings:r,onProtocolSettingChange:n});case"advanced":return e.jsx(gl,{aiSettings:t,onAISettingChange:c});default:return null}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Environmental Cleaning Settings"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Configure comprehensive settings for environmental cleaning workflows, AI features, protocols, and compliance."})]}),m&&e.jsx("div",{className:`p-4 rounded-lg border ${m.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{path:m.type==="success"?ie:F,size:1,className:"text-current"}),m.text]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:Wi.map(g=>e.jsxs("button",{onClick:()=>a(g.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${s===g.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(j,{path:g.icon,size:1}),g.label||g.name]},g.id))})}),e.jsx("div",{className:"min-h-[400px]",children:u()}),e.jsx("div",{className:"flex justify-end pt-6 border-t",children:e.jsxs("button",{onClick:l,disabled:d,className:"px-6 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#45B7AF] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(j,{path:ve,size:1}),d?"Saving...":"Save Settings"]})})]})},re=({title:s,children:a})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700",children:s}),e.jsx("div",{className:"space-y-3",children:a})]});var _l=Object.defineProperty,Sl=Object.defineProperties,El=Object.getOwnPropertyDescriptors,bt=Object.getOwnPropertySymbols,wl=Object.prototype.hasOwnProperty,Tl=Object.prototype.propertyIsEnumerable,yt=(s,a,t)=>a in s?_l(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,Il=(s,a)=>{for(var t in a||(a={}))wl.call(a,t)&&yt(s,t,a[t]);if(bt)for(var t of bt(a))Tl.call(a,t)&&yt(s,t,a[t]);return s},Al=(s,a)=>Sl(s,El(a));const Pl=({settings:s,onSettingsChange:a})=>{const t=(r,i)=>{a(Al(Il({},s),{[r]:i}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h5",{className:"text-md font-medium text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(j,{path:Y,size:1,className:"text-gray-600"}),"General Settings"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(re,{title:"Core Features",children:[e.jsx(z,{id:"autoCalculateTotals",checked:s.autoCalculateTotals,onChange:r=>t("autoCalculateTotals",r),label:"Auto-calculate totals"}),e.jsx(z,{id:"requireApprovalForAdjustments",checked:s.requireApprovalForAdjustments,onChange:r=>t("requireApprovalForAdjustments",r),label:"Require approval for adjustments"}),e.jsx(z,{id:"allowNegativeQuantities",checked:s.allowNegativeQuantities,onChange:r=>t("allowNegativeQuantities",r),label:"Allow negative quantities"})]}),e.jsxs(re,{title:"System Features",children:[e.jsx(z,{id:"enableRealTimeUpdates",checked:s.enableRealTimeUpdates,onChange:r=>t("enableRealTimeUpdates",r),label:"Enable real-time updates"}),e.jsx(z,{id:"enableAuditTrails",checked:s.enableAuditTrails,onChange:r=>t("enableAuditTrails",r),label:"Enable audit trails"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"defaultTransactionType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Default transaction type"}),e.jsxs("select",{id:"defaultTransactionType",value:s.defaultTransactionType,onChange:r=>t("defaultTransactionType",r.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"in",children:"In"}),e.jsx("option",{value:"out",children:"Out"}),e.jsx("option",{value:"adjustment",children:"Adjustment"})]})]})]})]})]})})};var Ol=Object.defineProperty,Dl=Object.defineProperties,Rl=Object.getOwnPropertyDescriptors,vt=Object.getOwnPropertySymbols,kl=Object.prototype.hasOwnProperty,Ll=Object.prototype.propertyIsEnumerable,jt=(s,a,t)=>a in s?Ol(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,Ml=(s,a)=>{for(var t in a||(a={}))kl.call(a,t)&&jt(s,t,a[t]);if(vt)for(var t of vt(a))Ll.call(a,t)&&jt(s,t,a[t]);return s},$l=(s,a)=>Dl(s,Rl(a));const Fl=({settings:s,onSettingsChange:a})=>{const t=(r,i)=>{a($l(Ml({},s),{[r]:i}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h5",{className:"text-md font-medium text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(j,{path:os,size:1,className:"text-gray-600"}),"Stock Management"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(re,{title:"Stock Thresholds",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lowStockThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Low stock threshold"}),e.jsx("input",{id:"lowStockThreshold",type:"number",value:s.lowStockThreshold,onChange:r=>t("lowStockThreshold",parseInt(r.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"criticalStockThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Critical stock threshold"}),e.jsx("input",{id:"criticalStockThreshold",type:"number",value:s.criticalStockThreshold,onChange:r=>t("criticalStockThreshold",parseInt(r.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:"0"})]})]}),e.jsxs(re,{title:"Reorder Settings",children:[e.jsx(z,{id:"autoReorderEnabled",checked:s.autoReorderEnabled,onChange:r=>t("autoReorderEnabled",r),label:"Enable automatic reordering"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reorderBufferDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reorder buffer (days)"}),e.jsx("input",{id:"reorderBufferDays",type:"number",value:s.reorderBufferDays,onChange:r=>t("reorderBufferDays",parseInt(r.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:"1",max:"30"})]})]})]})]})})};var Gl=Object.defineProperty,Ul=Object.defineProperties,zl=Object.getOwnPropertyDescriptors,Nt=Object.getOwnPropertySymbols,Hl=Object.prototype.hasOwnProperty,Bl=Object.prototype.propertyIsEnumerable,Ct=(s,a,t)=>a in s?Gl(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,ql=(s,a)=>{for(var t in a||(a={}))Hl.call(a,t)&&Ct(s,t,a[t]);if(Nt)for(var t of Nt(a))Bl.call(a,t)&&Ct(s,t,a[t]);return s},Vl=(s,a)=>Ul(s,zl(a));const Yl=({settings:s,onSettingsChange:a})=>{const t=(r,i)=>{a(Vl(ql({},s),{[r]:i}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h5",{className:"text-md font-medium text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(j,{path:le,size:1,className:"text-gray-600"}),"Categories & Organization"]}),e.jsx("div",{className:"space-y-4",children:e.jsxs(re,{title:"Organization Features",children:[e.jsx(z,{id:"enableSubcategories",checked:s.enableSubcategories,onChange:r=>t("enableSubcategories",r),label:"Enable subcategories"}),e.jsx(z,{id:"enableCustomTags",checked:s.enableCustomTags,onChange:r=>t("enableCustomTags",r),label:"Enable custom tags"}),e.jsx(z,{id:"requireCategoryAssignment",checked:s.requireCategoryAssignment,onChange:r=>t("requireCategoryAssignment",r),label:"Require category assignment"})]})})]})})};var Wl=Object.defineProperty,Kl=Object.defineProperties,Zl=Object.getOwnPropertyDescriptors,_t=Object.getOwnPropertySymbols,Ql=Object.prototype.hasOwnProperty,Xl=Object.prototype.propertyIsEnumerable,St=(s,a,t)=>a in s?Wl(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,Jl=(s,a)=>{for(var t in a||(a={}))Ql.call(a,t)&&St(s,t,a[t]);if(_t)for(var t of _t(a))Xl.call(a,t)&&St(s,t,a[t]);return s},eo=(s,a)=>Kl(s,Zl(a));const so=({settings:s,onSettingsChange:a})=>{const t=(r,i)=>{a(eo(Jl({},s),{[r]:i}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h5",{className:"text-md font-medium text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(j,{path:ls,size:1,className:"text-gray-600"}),"Reporting & Analytics"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(re,{title:"Report Generation",children:[e.jsx(z,{id:"autoGenerateReports",checked:s.autoGenerateReports,onChange:r=>t("autoGenerateReports",r),label:"Auto-generate reports"}),e.jsx(z,{id:"includeSensitiveData",checked:s.includeSensitiveData,onChange:r=>t("includeSensitiveData",r),label:"Include sensitive data"})]}),e.jsxs(re,{title:"Report Configuration",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reportRetentionDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report retention (days)"}),e.jsx("input",{id:"reportRetentionDays",type:"number",value:s.reportRetentionDays,onChange:r=>t("reportRetentionDays",parseInt(r.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:"30",max:"1095"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reportFormat",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report format"}),e.jsxs("select",{id:"reportFormat",value:s.reportFormat,onChange:r=>t("reportFormat",r.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"PDF",children:"PDF"}),e.jsx("option",{value:"Excel",children:"Excel"}),e.jsx("option",{value:"CSV",children:"CSV"})]})]})]})]})]})})},to=()=>e.jsx("div",{children:"Test"});var Ae=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});function ao(){const[s,a]=h.useState([]),[t,r]=h.useState(!0),[i,m]=h.useState(""),[d,c]=h.useState(""),[n,o]=h.useState(null),[l,u]=h.useState(null),[g,b]=h.useState(""),[p,x]=h.useState(!1),v=h.useCallback(()=>Ae(null,null,function*(){r(!0);try{const E=yield ma(g);a(E)}catch(E){console.error("Failed to fetch locations",E)}finally{r(!1)}}),[g]);function N(){return Ae(this,null,function*(){if(!i||!d)return alert("Name and barcode are required");x(!0);try{yield ua(g,i,d,n!=null?n:void 0,l!=null?l:void 0),yield v(),m(""),c(""),u(null)}catch(E){alert("Failed to create location")}finally{x(!1)}})}function y(E){return Ae(this,null,function*(){if(confirm("Delete this location?"))try{yield ha(E),a(D=>D.filter(R=>R.id!==E))}catch(D){alert("Failed to delete location")}})}function _(E,D){return Ae(this,null,function*(){try{yield xa(E,D),yield v()}catch(R){alert("Failed to update status")}})}return h.useEffect(()=>{v()},[v]),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Location Management"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 space-y-2",children:[e.jsx("h2",{className:"text-lg font-medium",children:"Add New Location"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{className:"form-control",placeholder:"Location Name",value:i,onChange:E=>m(E.target.value)}),e.jsx("input",{className:"form-control",placeholder:"Barcode",value:d,onChange:E=>c(E.target.value)}),e.jsx("input",{className:"form-control",placeholder:"Capacity (optional)",type:"number",value:l!=null?l:"",onChange:E=>u(Number(E.target.value)||null)}),e.jsx(xs,{onClick:N,disabled:p,children:p?"Adding...":"Add Location"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsx("h2",{className:"text-lg font-medium mb-2",children:"Existing Locations"}),t?e.jsx("p",{className:"flex items-center gap-2",children:"Loading…"}):s.length===0?e.jsx("p",{className:"text-muted",children:"No locations found."}):e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Name"}),e.jsx("th",{className:"text-left p-2",children:"Barcode"}),e.jsx("th",{className:"text-left p-2",children:"Capacity"}),e.jsx("th",{className:"text-left p-2",children:"Status"}),e.jsx("th",{className:"text-left p-2",children:"Actions"})]})}),e.jsx("tbody",{children:s.map(E=>{var D;return e.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[e.jsx("td",{className:"p-2",children:E.name}),e.jsx("td",{className:"p-2 font-mono",children:E.barcode}),e.jsx("td",{className:"p-2",children:(D=E.capacity)!=null?D:"—"}),e.jsx("td",{className:"p-2",children:e.jsxs("select",{className:"form-select",value:E.status,onChange:R=>_(E.id,R.target.value),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"full",children:"Full"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})}),e.jsx("td",{className:"p-2",children:e.jsx(xs,{variant:"danger",size:"sm",onClick:()=>y(E.id),children:"Delete"})})]},E.id)})})]})]})]})}var ro=Object.defineProperty,no=Object.defineProperties,io=Object.getOwnPropertyDescriptors,Et=Object.getOwnPropertySymbols,lo=Object.prototype.hasOwnProperty,oo=Object.prototype.propertyIsEnumerable,wt=(s,a,t)=>a in s?ro(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,Pe=(s,a)=>{for(var t in a||(a={}))lo.call(a,t)&&wt(s,t,a[t]);if(Et)for(var t of Et(a))oo.call(a,t)&&wt(s,t,a[t]);return s},ss=(s,a)=>no(s,io(a)),ue=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const co=()=>{const{currentUser:s}=ne(),[a,t]=h.useState(null),[r,i]=h.useState(""),[m,d]=h.useState(!1),[c,n]=h.useState(null),[o,l]=h.useState({autoCalculateTotals:!0,requireApprovalForAdjustments:!0,allowNegativeQuantities:!1,requireReasonForAdjustments:!0,defaultTransactionType:"in",enableRealTimeUpdates:!0,enableAuditTrails:!0,lowStockThreshold:10,criticalStockThreshold:5,autoReorderEnabled:!1,reorderBufferDays:7,enableSubcategories:!0,enableCustomTags:!0,requireCategoryAssignment:!0,autoGenerateReports:!1,reportRetentionDays:365,includeSensitiveData:!1,reportFormat:"PDF",aiEnabled:!1,computerVisionEnabled:!1,smartCategorizationEnabled:!1,predictiveAnalyticsEnabled:!1,aiConfidenceThreshold:.8,autoCategorizationEnabled:!1,smartFormFillingEnabled:!1,maintenancePredictionsEnabled:!1,demandForecastingEnabled:!1,openaiApiKey:"",googleVisionApiKey:"",dataSharingEnabled:!1,localAIProcessingEnabled:!1,aiDataRetentionDays:90});h.useEffect(()=>{ue(null,null,function*(){try{const _=yield ns.getCurrentFacilityId(),E=new ga(_);n(E),u(E)}catch(_){console.error("Failed to initialize AI service:",_),i("Failed to initialize AI service")}})},[]);const u=y=>ue(null,null,function*(){try{d(!0);let _=yield y.loadSettings();_||(yield y.initializeSettings(),_=yield y.loadSettings()),t(_)}catch(_){console.error("Error loading AI settings:",_),i("Error loading AI settings")}finally{d(!1)}}),g=(y,_)=>{a&&t(ss(Pe({},a),{[y]:_}))},b=()=>ue(null,null,function*(){if(!(!c||!a))try{d(!0),(yield c.saveSettings(a))?(i("AI settings saved successfully"),setTimeout(()=>i(""),3e3)):i("Error saving AI settings")}catch(y){console.error("Error saving AI settings:",y),i("Error saving AI settings")}finally{d(!1)}}),p=()=>ue(null,null,function*(){if(c)try{d(!0),yield c.initializeSettings(),yield u(c),i("AI settings reset to defaults"),setTimeout(()=>i(""),3e3)}catch(y){console.error("Error resetting AI settings:",y),i("Error resetting AI settings")}finally{d(!1)}}),x=h.useCallback(()=>ue(null,null,function*(){if(s!=null&&s.id){d(!0);try{const y=localStorage.getItem("cliniio_ai_settings");if(y){const _=JSON.parse(y);l(E=>ss(Pe(Pe({},E),_),{openaiApiKey:_.openaiApiKey?"••••••••"+_.openaiApiKey.slice(-4):"",googleVisionApiKey:_.googleVisionApiKey?"••••••••"+_.googleVisionApiKey.slice(-4):""}))}}catch(y){console.error("Failed to load inventory settings:",y)}finally{d(!1)}}}),[s==null?void 0:s.id]);return h.useEffect(()=>{x()},[x]),{settings:o,setSettings:l,aiSettings:a,aiMessage:r,isLoading:m,handleInputChange:(y,_)=>{l(E=>ss(Pe({},E),{[y]:_}))},handleAISettingChange:g,handleAISettingsSave:b,handleAISettingsReset:p,saveSettings:()=>ue(null,null,function*(){if(s!=null&&s.id)try{const y={aiEnabled:o.aiEnabled,computerVisionEnabled:o.computerVisionEnabled,smartCategorizationEnabled:o.smartCategorizationEnabled,predictiveAnalyticsEnabled:o.predictiveAnalyticsEnabled,aiConfidenceThreshold:o.aiConfidenceThreshold,autoCategorizationEnabled:o.autoCategorizationEnabled,smartFormFillingEnabled:o.smartFormFillingEnabled,maintenancePredictionsEnabled:o.maintenancePredictionsEnabled,demandForecastingEnabled:o.demandForecastingEnabled,dataSharingEnabled:o.dataSharingEnabled,localAIProcessingEnabled:o.localAIProcessingEnabled,aiDataRetentionDays:o.aiDataRetentionDays};localStorage.setItem("cliniio_ai_settings",JSON.stringify(y))}catch(y){console.error("Failed to save inventory settings:",y)}}),loadSettings:x}};var mo=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const uo=()=>{const[s,a]=h.useState("general"),[t,r]=h.useState(!1),[i,m]=h.useState(null),{settings:d,setSettings:c,isLoading:n,saveSettings:o,loadSettings:l}=co(),u=[{id:"general",label:"General Settings",icon:Y},{id:"stock",label:"Stock Management",icon:os},{id:"categories",label:"Categories & Tags",icon:le},{id:"locations",label:"Location Management",icon:Ta},{id:"reporting",label:"Reporting & Analytics",icon:ls},{id:"ai",label:"AI & Machine Learning",icon:ge}],g=()=>mo(null,null,function*(){try{r(!0),m(null),yield o(),m({type:"success",text:"Settings saved successfully"}),setTimeout(()=>m(null),3e3)}catch(p){console.error(p),m({type:"error",text:"Failed to save settings"})}finally{r(!1)}}),b=()=>{switch(s){case"general":return e.jsx(Pl,{settings:d,onSettingsChange:c});case"stock":return e.jsx(Fl,{settings:d,onSettingsChange:c});case"categories":return e.jsx(Yl,{settings:d,onSettingsChange:c});case"locations":return e.jsx(ao,{});case"reporting":return e.jsx(so,{settings:d,onSettingsChange:c});case"ai":return e.jsx(to,{});default:return null}};return n?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading inventory settings..."})]}):e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Inventory Management Settings"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Configure inventory behavior, AI features, and system preferences"}),i&&e.jsx("div",{className:`p-4 rounded-lg border mb-6 ${i.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{path:i.type==="success"?ie:F,size:1,className:"text-current"}),i.text]})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:u.map(p=>e.jsxs("button",{onClick:()=>a(p.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${s===p.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(j,{path:p.icon,size:1}),e.jsx("span",{children:p.label})]},p.id))})})}),e.jsx("div",{className:"tab-content-area",children:b()}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsxs("button",{onClick:l,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:[e.jsx(j,{path:as,size:1,className:"inline mr-2"}),"Reset"]}),e.jsxs("button",{onClick:g,disabled:t,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:[e.jsx(j,{path:ve,size:1,className:"inline mr-2"}),t?"Saving...":"Save Settings"]})]})]})};var Tt=(s,a,t)=>new Promise((r,i)=>{var m=n=>{try{c(t.next(n))}catch(o){i(o)}},d=n=>{try{c(t.throw(n))}catch(o){i(o)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(m,d);c((t=t.apply(s,a)).next())});const ts=[{id:"profile",label:"Profile & Account",icon:Pt,description:"Manage your admin account information and personal settings."},{id:"system",label:"System Administration",icon:Y,description:"Manage users, roles, permissions, and system-wide settings."},{id:"content",label:"Content Management",icon:Ia,description:"Create, edit, and manage Knowledge Hub and Library content."},{id:"learning",label:"Learning & Training",icon:Aa,description:"Configure training modules, certifications, and learning paths."},{id:"cleaning",label:"Environmental Cleaning",icon:Pa,description:"Manage room cleaning schedules, protocols, and status."},{id:"inventory",label:"Inventory Management",icon:os,description:"Oversee inventory, categories, stock levels, and procurement."},{id:"sterilization",label:"Sterilization",icon:Oa,description:"Monitor sterilization cycles, equipment, and compliance."},{id:"system-config",label:"Billing",icon:Da,description:"Manage billing settings, payment methods, and subscription plans."},{id:"analytics",label:"AI and Analytics",icon:xe,description:"Configure AI features, view system analytics, and generate intelligent reports."}],It={profile:{bg:"bg-blue-100",icon:"text-blue-700"},system:{bg:"bg-green-100",icon:"text-green-800"},content:{bg:"bg-purple-200",icon:"text-purple-900"},learning:{bg:"bg-yellow-200",icon:"text-yellow-900"},cleaning:{bg:"bg-teal-100",icon:"text-teal-700"},inventory:{bg:"bg-blue-100",icon:"text-blue-700"},sterilization:{bg:"bg-purple-200",icon:"text-purple-900"},"system-config":{bg:"bg-green-100",icon:"text-green-800"},analytics:{bg:"bg-yellow-200",icon:"text-yellow-900"}},No=()=>{const[s]=Xt(),[a,t]=h.useState(null),[r,i]=h.useState(null),[m,d]=h.useState(0),[c,n]=h.useState(null),{currentUser:o}=ne(),l=Ft();h.useEffect(()=>{const b=s.get("section");b&&ts.some(p=>p.id===b)&&setTimeout(()=>t(b),0)},[s]),h.useEffect(()=>{function b(){return Tt(this,null,function*(){try{const{count:x,error:v}=yield I.from("audit_flags").select("*",{count:"exact",head:!0}).eq("resolved",!1);!v&&typeof x=="number"&&d(x)}catch(x){console.error("Failed to fetch compliance flags:",x)}})}b();const p=()=>{setTimeout(()=>{b()},300)};return window.addEventListener("complianceIssueResolved",p),()=>{window.removeEventListener("complianceIssueResolved",p)}},[]),h.useEffect(()=>{Tt(null,null,function*(){if(o!=null&&o.facility_id)try{const p=yield pa.getFacilitySettings(o.facility_id);p&&n(p)}catch(p){console.error("Error loading facility settings:",p)}})},[o==null?void 0:o.facility_id]);const u=b=>{try{i(null),t(p=>p===b?null:b)}catch(p){console.error("Error opening settings card:",p),i(p instanceof Error?p.message:"Failed to open settings")}},g=()=>{const b=[];for(let p=0;p<ts.length;p++){const x=ts[p];b.push(e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>u(x.id),className:`rounded-xl shadow p-6 border text-left transition-all duration-200 hover:shadow-md hover:scale-105 focus:outline-none w-full min-h-[180px] flex flex-col justify-between ${a===x.id?"ring-2 ring-[#4ECDC4]":""} ${x.id==="system"&&m>0||x.id==="analytics"&&l.hasIssues?"border-red-500 bg-red-100 shadow-red-200 shadow-lg":"bg-white border-gray-100"}`,type:"button",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`${It[x.id].bg} rounded-md p-2 mr-3`,children:e.jsx(j,{path:x.icon,size:1,className:It[x.id].icon})}),e.jsx("h3",{className:`text-base font-medium ${x.id==="system"&&m>0||x.id==="analytics"&&l.hasIssues?"text-red-800":"text-gray-700"}`,children:x.label})]}),x.id==="system"&&m>0&&e.jsx("div",{className:"bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center font-bold",children:"!"}),x.id==="analytics"&&l.hasIssues&&e.jsx("div",{className:"bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center font-bold",children:"!"})]}),e.jsx("p",{className:`text-sm mt-auto ${x.id==="system"&&m>0||x.id==="analytics"&&l.hasIssues?"text-red-600 font-medium":"text-gray-500"}`,children:x.id==="system"&&m>0?"⚠️ Compliance issues require attention":x.id==="analytics"&&l.hasIssues?`⚠️ AI usage ${l.isExceeded?"exceeded":"approaching"} limit (${Math.round(l.usagePercentage)}%)`:x.description})]})},x.id)),a===x.id&&b.push(e.jsxs("div",{className:"col-span-full bg-white border border-gray-200 rounded-xl shadow-lg p-6 animate-fade-in my-2",style:{gridColumn:"1 / -1"},children:[x.id==="profile"&&e.jsx(Z,{children:e.jsx(Er,{})}),x.id==="system"&&e.jsx(Z,{children:e.jsx(tn,{initialTab:s.get("tab"),complianceFlagCount:m})}),x.id==="system-config"&&e.jsx(Z,{children:e.jsx(an,{})}),x.id==="content"&&e.jsx(Z,{children:e.jsx(si,{})}),x.id==="learning"&&e.jsx(Z,{children:e.jsx(Bi,{})}),x.id==="cleaning"&&e.jsx(Z,{children:e.jsx(Cl,{})}),x.id==="inventory"&&e.jsx(Z,{children:e.jsx(uo,{})}),x.id==="sterilization"&&e.jsx(Z,{children:e.jsx(Zn,{})}),x.id==="analytics"&&e.jsx(Z,{children:e.jsx(In,{})})]},x.id+"-drawer"))}return b};return e.jsx(ia,{hasComplianceIssues:m>0,hasAIUsageIssues:l.hasIssues,children:e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("div",{className:"p-4 max-w-7xl w-full mx-auto flex-1 flex flex-col",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-[#5b5b5b] mb-1",children:"Admin Settings"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Configure system-wide settings, manage users, and control application features"})]}),r&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:e.jsxs("p",{className:"text-red-600 text-sm",children:["Error: ",r]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 flex-1",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:g()})})]})})})};export{No as default};
