import{j as e,A as Ur,m as Pt}from"./utils-DSBVV_PW.js";import{a as p,d as Br,u as Hr}from"./vendor-DoALFvsH.js";import{F as Ot,S as rt,I as Pr,E as Yr,L as Wr,u as _e,a as Dt,b as Kr,c as Qr,U as Rt,d as Ht,e as Zr}from"./main-DVBlW6kB.js";import{az as kt,bs as J,bt as Xr,bu as Or,I as b,aG as Jr,at as Yt,q as ne,z as ea,v as ta,ax as Et,aL as pe,o as sa,b2 as ke,s as P,bv as Me,bw as Lt,bx as Tt,ay as At,j as Mt,by as Ne,b as Ce,y as ra,h as aa,af as na,bz as ia,$ as $e,bA as la,b3 as Dr,bB as oa,ar as Se,bC as we,C as It,bD as Ve,b4 as $t,bE as he,bF as ca,bG as Le,bH as da,bI as Rr,Z as Fe,aM as ze,A as et,aa as Ft,a8 as zt,w as kr,b6 as Lr,b7 as Mr,aZ as $r,bq as ua,t as tt,bJ as ue,U as Te,b8 as ma,ae as pa,bk as ha,a$ as Ge,aS as ga,bK as xa,bL as fa,a9 as ba,bM as ya,bN as Fr,bn as va,bO as ja,aE as Na,aq as _a,bP as Ca,V as le}from"./login-CtXU169Q.js";import{I as Sa}from"./inventoryTransformers-BSO01pnq.js";import"./data-73RVSc-N.js";import"./ui-DETUEJ2B.js";const wa=({activeTab:r,onTabChange:t})=>{const s=[{id:"basic-info",label:"Basic Information",icon:kt},{id:"preferences",label:"Preferences",icon:J},{id:"mobile",label:"Mobile Scanner Shortcuts",icon:Xr},{id:"account",label:"Account Management",icon:Or}];return e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:s.map(a=>e.jsxs("button",{onClick:()=>t(a.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${r===a.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(b,{path:a.icon,size:1}),e.jsx("span",{children:a.label})]},a.id))})})})};var Ea=Object.defineProperty,Ta=Object.defineProperties,Aa=Object.getOwnPropertyDescriptors,Wt=Object.getOwnPropertySymbols,Ia=Object.prototype.hasOwnProperty,Pa=Object.prototype.propertyIsEnumerable,Kt=(r,t,s)=>t in r?Ea(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,ee=(r,t)=>{for(var s in t||(t={}))Ia.call(t,s)&&Kt(r,s,t[s]);if(Wt)for(var s of Wt(t))Pa.call(t,s)&&Kt(r,s,t[s]);return r},te=(r,t)=>Ta(r,Aa(t));const Oa=({basicInfoForm:r,setBasicInfoForm:t,userData:s,uploadingPhoto:a,uploadProfilePhoto:n,removeProfilePhoto:o})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx("input",{id:"first-name",type:"text",value:r.first_name,onChange:l=>t(c=>te(ee({},c),{first_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx("input",{id:"last-name",type:"text",value:r.last_name,onChange:l=>t(c=>te(ee({},c),{last_name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{id:"email",type:"email",value:r.email,onChange:l=>t(c=>te(ee({},c),{email:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{id:"phone",type:"tel",value:r.phone,onChange:l=>t(c=>te(ee({},c),{phone:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsx("input",{id:"department",type:"text",value:r.department,onChange:l=>t(c=>te(ee({},c),{department:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"position",className:"block text-sm font-medium text-gray-700 mb-2",children:"Position"}),e.jsx("input",{id:"position",type:"text",value:r.position,onChange:l=>t(c=>te(ee({},c),{position:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date-of-birth",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),e.jsx("input",{id:"date-of-birth",type:"date",value:r.date_of_birth,onChange:l=>t(c=>te(ee({},c),{date_of_birth:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),e.jsx("textarea",{id:"bio",value:r.bio||"",onChange:l=>t(c=>te(ee({},c),{bio:l.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tell us about yourself..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"preferred-language",className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Language"}),e.jsxs("select",{id:"preferred-language",value:r.preferred_language||"en",onChange:l=>t(c=>te(ee({},c),{preferred_language:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"}),e.jsx("option",{value:"pt",children:"Portuguese"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"timezone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),e.jsxs("select",{id:"timezone",value:r.timezone||"UTC",onChange:l=>t(c=>te(ee({},c),{timezone:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"Eastern Time"}),e.jsx("option",{value:"America/Chicago",children:"Central Time"}),e.jsx("option",{value:"America/Denver",children:"Mountain Time"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time"}),e.jsx("option",{value:"Europe/London",children:"London"}),e.jsx("option",{value:"Europe/Paris",children:"Paris"}),e.jsx("option",{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Profile Picture"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:a?e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#4ECDC4]"})}):s!=null&&s.avatar_url?e.jsx("img",{src:String(s.avatar_url),alt:"Profile",className:"w-20 h-20 rounded-full object-cover"}):e.jsx(b,{path:Jr,size:2,className:"text-gray-400"})}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("input",{type:"file",id:"profile-photo",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:l=>{var c;const i=(c=l.target.files)==null?void 0:c[0];i&&n(i),l.target.value=""},className:"hidden",disabled:a}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm cursor-pointer text-center disabled:opacity-50 disabled:cursor-not-allowed",onClick:l=>{if(a){l.preventDefault();return}document.getElementById("profile-photo").click()},disabled:a,children:a?"Uploading...":"Upload Photo"}),(s==null?void 0:s.avatar_url)&&e.jsx("button",{onClick:o,disabled:a,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Remove Photo"}),e.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG or GIF. Max size 2MB."}),a&&e.jsx("p",{className:"text-xs text-blue-600",children:"Uploading photo..."})]})]})]})]}),z=({id:r,checked:t,onChange:s,label:a,description:n,disabled:o=!1})=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:a}),n&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n})]}),e.jsxs("label",{htmlFor:r,className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{id:r,type:"checkbox",className:"sr-only peer",checked:t,onChange:l=>s(l.target.checked),disabled:o}),e.jsx("div",{className:`w-11 h-6 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all ${t?"bg-[#4ECDC4] after:translate-x-full":"bg-gray-200"} ${o?"opacity-50 cursor-not-allowed":"cursor-pointer"}`}),e.jsx("span",{className:"sr-only",children:a})]})]});let nt=null;const Da=()=>(nt||(nt=new(window.AudioContext||window.webkitAudioContext)),nt),Ra=(r,t=50)=>{const s=Da(),a=s.createOscillator(),n=s.createGain();switch(n.gain.value=t/100,a.connect(n),n.connect(s.destination),r){case"gentle-chime":a.frequency.setValueAtTime(800,s.currentTime),a.frequency.setValueAtTime(1e3,s.currentTime+.1),a.frequency.setValueAtTime(1200,s.currentTime+.2),a.type="sine";break;case"medical-alert":a.frequency.setValueAtTime(600,s.currentTime),a.frequency.setValueAtTime(800,s.currentTime+.15),a.type="square";break;case"soft-bell":a.frequency.setValueAtTime(1e3,s.currentTime),a.frequency.setValueAtTime(800,s.currentTime+.2),a.type="sine";break;case"digital-beep":a.frequency.setValueAtTime(1e3,s.currentTime),a.type="square";break;case"success-tone":a.frequency.setValueAtTime(800,s.currentTime),a.frequency.setValueAtTime(1e3,s.currentTime+.1),a.type="sine";break;case"warning-sound":a.frequency.setValueAtTime(400,s.currentTime),a.frequency.setValueAtTime(600,s.currentTime+.1),a.type="sawtooth";break;default:return}a.start(s.currentTime),a.stop(s.currentTime+.3)},ka=r=>{switch(r){case"short-pulse":return[100];case"double-tap":return[100,50,100];case"long-pulse":return[300];case"pattern":return[100,50,100,50,200];case"off":default:return[]}},zr=r=>{if("vibrate"in navigator){const t=ka(r);t.length>0&&navigator.vibrate(t)}else console.log("Vibration not supported on this device")},Vr=(r,t=50)=>{if(r!=="none")try{Ra(r,t)}catch(s){console.error("Error playing notification sound:",s)}},La=r=>{const{sound:t,volume:s,vibration:a,vibrationEnabled:n}=r.notifications;t&&t!=="none"&&Vr(t,s),n&&a&&a!=="off"&&zr(a)};var Ma=Object.defineProperty,$a=Object.defineProperties,Fa=Object.getOwnPropertyDescriptors,Qt=Object.getOwnPropertySymbols,za=Object.prototype.hasOwnProperty,Va=Object.prototype.propertyIsEnumerable,Zt=(r,t,s)=>t in r?Ma(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,it=(r,t)=>{for(var s in t||(t={}))za.call(t,s)&&Zt(r,s,t[s]);if(Qt)for(var s of Qt(t))Va.call(t,s)&&Zt(r,s,t[s]);return r},lt=(r,t)=>$a(r,Fa(t));const Ga=({preferences:r,setPreferences:t})=>{const s=(n,o)=>{t(lt(it({},r),{[n]:o}))},a=(n,o)=>{t(lt(it({},r),{notifications:lt(it({},r.notifications),{[n]:o})}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Appearance"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"theme",className:"block text-sm font-medium text-gray-600 mb-2",children:"Theme"}),e.jsxs("select",{id:"theme",value:r.theme,onChange:n=>s("theme",n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"light",children:"Light"}),e.jsx("option",{value:"dark",children:"Dark"}),e.jsx("option",{value:"auto",children:"Auto (System)"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Notifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(z,{id:"push-notifications",checked:r.notifications.push,onChange:n=>a("push",n),label:"Push Notifications (Browser)"}),r.notifications.push&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-3",children:"Notification Sounds"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notification-sound",className:"block text-sm font-medium text-gray-600 mb-2",children:"Default Sound"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{id:"notification-sound",value:r.notifications.sound||"gentle-chime",onChange:n=>a("sound",n.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"gentle-chime",children:"Gentle Chime"}),e.jsx("option",{value:"medical-alert",children:"Medical Alert"}),e.jsx("option",{value:"soft-bell",children:"Soft Bell"}),e.jsx("option",{value:"digital-beep",children:"Digital Beep"}),e.jsx("option",{value:"success-tone",children:"Success Tone"}),e.jsx("option",{value:"warning-sound",children:"Warning Sound"}),e.jsx("option",{value:"none",children:"No Sound"})]}),e.jsx("button",{type:"button",onClick:()=>Vr(r.notifications.sound||"gentle-chime",r.notifications.volume||50),className:"px-3 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Preview"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notification-volume",className:"block text-sm font-medium text-gray-600 mb-2",children:"Volume"}),e.jsx("input",{id:"notification-volume",type:"range",min:"0",max:"100",value:r.notifications.volume||50,onChange:n=>a("volume",parseInt(n.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"0%"}),e.jsxs("span",{children:[r.notifications.volume||50,"%"]}),e.jsx("span",{children:"100%"})]})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-3",children:"Vibration (Mobile Devices)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"vibration-pattern",className:"block text-sm font-medium text-gray-600 mb-2",children:"Vibration Pattern"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{id:"vibration-pattern",value:r.notifications.vibration||"short-pulse",onChange:n=>a("vibration",n.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"short-pulse",children:"Short Pulse"}),e.jsx("option",{value:"double-tap",children:"Double Tap"}),e.jsx("option",{value:"long-pulse",children:"Long Pulse"}),e.jsx("option",{value:"pattern",children:"Pattern"}),e.jsx("option",{value:"off",children:"Off"})]}),e.jsx("button",{type:"button",onClick:()=>zr(r.notifications.vibration||"short-pulse"),className:"px-3 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Test"})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(z,{id:"vibration-enabled",checked:r.notifications.vibrationEnabled!==!1,onChange:n=>a("vibrationEnabled",n),label:"Enable Vibration"})})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4 mt-4",children:e.jsx("button",{type:"button",onClick:()=>La(r),className:"w-full px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors",children:"Test Full Notification"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can customize notification preferences for specific features in each module."})]})]})]})};var qa=Object.defineProperty,Ua=Object.defineProperties,Ba=Object.getOwnPropertyDescriptors,Xt=Object.getOwnPropertySymbols,Ha=Object.prototype.hasOwnProperty,Ya=Object.prototype.propertyIsEnumerable,Jt=(r,t,s)=>t in r?qa(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Ae=(r,t)=>{for(var s in t||(t={}))Ha.call(t,s)&&Jt(r,s,t[s]);if(Xt)for(var s of Xt(t))Ya.call(t,s)&&Jt(r,s,t[s]);return r},Ie=(r,t)=>Ua(r,Ba(t)),es=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const Wa=()=>{const[r,t]=p.useState([{id:"clean-tool",name:"Clean Tool Scan",description:"Scan clean tools ready for use",icon:Yt,enabled:!1,shortcutSlot:null},{id:"dirty-tool",name:"Dirty Tool Scan",description:"Scan tools that need sterilization",icon:Yt,enabled:!1,shortcutSlot:null},{id:"problem-tool",name:"Problem Tool Scan",description:"Scan tools with issues/repair needs",icon:ne,enabled:!1,shortcutSlot:null},{id:"import-receipt",name:"Import Autoclave Receipt",description:"Import physical autoclave documentation",icon:ea,enabled:!1,shortcutSlot:null},{id:"package-tools",name:"Package Tools",description:"Package tools for sterilization",icon:ta,enabled:!1,shortcutSlot:null},{id:"single-scan",name:"Single Scan Mode",description:"Individual tool scanning",icon:Et,enabled:!1,shortcutSlot:null},{id:"batch-scan",name:"Batch Scan Mode",description:"Multiple tools at once",icon:Et,enabled:!1,shortcutSlot:null},{id:"add-inventory",name:"Add Inventory",description:"Scan new items to add",icon:pe,enabled:!1,shortcutSlot:null},{id:"use-inventory",name:"Use Inventory",description:"Scan items to remove/consume",icon:sa,enabled:!1,shortcutSlot:null},{id:"scan-room",name:"Scan Room",description:"Scan room barcodes for cleaning",icon:ke,enabled:!1,shortcutSlot:null},{id:"complete-cleaning",name:"Complete Cleaning",description:"Mark room as cleaned",icon:ke,enabled:!1,shortcutSlot:null},{id:"update-status",name:"Update Status",description:"Change room cleaning status",icon:ke,enabled:!1,shortcutSlot:null}]),s=(i,d)=>{if(d&&a().length===0){alert("No mobile shortcuts available. Please disable another workflow first or assign this workflow to an existing shortcut.");return}t(u=>u.map(m=>m.id===i?Ie(Ae({},m),{enabled:d,shortcutSlot:d?m.shortcutSlot:null}):m))},a=()=>{const i=r.filter(u=>u.enabled&&u.shortcutSlot!==null).map(u=>u.shortcutSlot);return["volume-up","volume-down","volume-up-double","volume-down-double","power-double","double-tap","shake","flip"].filter(u=>!i.includes(u))},n=(i,d)=>{d===null&&setTimeout(()=>{t(u=>u.map(m=>m.id===i&&m.shortcutSlot===null?Ie(Ae({},m),{enabled:!1}):m))},5e3),t(u=>u.map(m=>m.shortcutSlot===d&&m.id!==i?Ie(Ae({},m),{shortcutSlot:null}):m.id===i?Ie(Ae({},m),{shortcutSlot:d}):m))},o=i=>{var d;return((d=[{id:"volume-up",label:"Volume Up"},{id:"volume-down",label:"Volume Down"},{id:"volume-up-double",label:"Volume Up (2x)"},{id:"volume-down-double",label:"Volume Down (2x)"},{id:"power-double",label:"Power (2x)"},{id:"double-tap",label:"Double Tap"},{id:"shake",label:"Shake"},{id:"flip",label:"Flip"}].find(m=>m.id===i))==null?void 0:d.label)||i},l=()=>es(null,null,function*(){try{const{data:{user:i}}=yield P.auth.getUser();if(!i)return;const{data:d,error:u}=yield P.from("users").select("mobile_shortcuts").eq("id",i.id).single();if(u&&u.code!=="PGRST116")return;d!=null&&d.mobile_shortcuts&&typeof d.mobile_shortcuts=="object"&&t(m=>m.map(x=>{const h=d.mobile_shortcuts[x.id];return h?Ie(Ae({},x),{enabled:h.enabled,shortcutSlot:h.shortcut}):x}))}catch(i){}}),c=p.useCallback(()=>es(null,null,function*(){try{const{data:{user:i}}=yield P.auth.getUser();if(!i)return;const d=r.reduce((m,x)=>(x.enabled&&x.shortcutSlot&&(m[x.id]={enabled:x.enabled,shortcut:x.shortcutSlot}),m),{}),{error:u}=yield P.from("users").update({mobile_shortcuts:d,updated_at:new Date().toISOString()}).eq("id",i.id);u?console.error("Error saving mobile settings:",u):console.log("Mobile settings saved successfully")}catch(i){}}),[r]);return p.useEffect(()=>{l()},[]),p.useEffect(()=>{r.some(i=>i.enabled)&&c()},[r,c]),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Mobile Scanner Shortcuts"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Configure up to 4 mobile shortcuts for quick access to your most-used scanning workflows."}),e.jsx("div",{className:"space-y-4",children:r.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(b,{path:i.icon,size:1.2,className:"text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:i.name}),e.jsx("p",{className:"text-xs text-gray-500",children:i.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Enable"}),e.jsx(z,{id:`toggle-${i.id}`,label:`Enable ${i.name}`,checked:i.enabled,onChange:d=>s(i.id,d)})]}),i.enabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("select",{value:i.shortcutSlot||"",onChange:d=>n(i.id,d.target.value?d.target.value:null),className:`px-3 py-1 border rounded text-sm ${i.shortcutSlot?"border-gray-300":"border-red-300 bg-red-50"}`,children:[e.jsx("option",{value:"",children:"Select Shortcut"}),[{id:"volume-up",label:"Volume Up (Single Press)",description:"Press volume up button once"},{id:"volume-down",label:"Volume Down (Single Press)",description:"Press volume down button once"},{id:"volume-up-double",label:"Volume Up (Double Press)",description:"Press volume up button twice quickly"},{id:"volume-down-double",label:"Volume Down (Double Press)",description:"Press volume down button twice quickly"},{id:"power-double",label:"Power Button (Double Press)",description:"Press power button twice quickly"},{id:"double-tap",label:"Double Tap Screen",description:"Tap screen twice quickly"},{id:"shake",label:"Shake Device",description:"Shake your phone"},{id:"flip",label:"Flip Device",description:"Turn phone face down"}].map(d=>e.jsx("option",{value:d.id,disabled:r.some(u=>u.id!==i.id&&u.shortcutSlot===d.id),children:d.label},d.id))]}),!i.shortcutSlot&&e.jsx("p",{className:"text-xs text-red-500",children:"⚠️ Please select a mobile shortcut or this workflow will be disabled in 5 seconds"})]})]})]},i.id))}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h6",{className:"text-sm font-medium text-blue-700 mb-3",children:"Current Shortcuts"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[r.filter(i=>i.enabled&&i.shortcutSlot).map(i=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-2 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(b,{path:i.icon,size:1.2,className:"text-blue-600"})}),e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:i.name}),e.jsx("p",{className:"text-xs text-blue-500",children:o(i.shortcutSlot)})]},i.id)),r.filter(i=>i.enabled&&i.shortcutSlot).length===0&&e.jsxs("div",{className:"col-span-2 md:col-span-4 text-center py-4",children:[e.jsx("p",{className:"text-blue-500 text-sm",children:"No shortcuts configured yet"}),e.jsx("p",{className:"text-blue-400 text-xs",children:"Enable workflows and assign mobile shortcuts above"})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-3",children:"How to Use Mobile Shortcuts"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Enable workflows:"})," Use the toggles for scanning workflows you use frequently"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Assign shortcuts:"})," Choose mobile device actions (volume buttons, double tap, shake, etc.)"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Mobile access:"})," These shortcuts will trigger on your mobile device for quick scanning"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Unique assignments:"})," Each mobile shortcut can only be used by one workflow"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Quick launch:"})," Perform the assigned action to directly open that scanner workflow"]})]})]})]})})};var Ka=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const Qa=({userData:r,onPasswordChange:t,onOpenPasswordModal:s,onArchiveAccount:a,passwordError:n,passwordSuccess:o})=>{const[l,c]=p.useState(!1),[i,d]=p.useState(!1),[u,m]=p.useState(""),x=h=>Ka(null,null,function*(){yield t(h),c(!1)}),v=()=>{u.trim()&&(a(),d(!1),m(""))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Account Security"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:e.jsx(b,{path:Me,size:1,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium text-gray-700",children:"Password"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Last changed:"," ",r!=null&&r.password_changed_at?r.password_changed_at:"Never"]})]})]}),e.jsx("button",{onClick:s,className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Change Password"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"two-factor-toggle",className:"block text-sm font-medium text-gray-700",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Add an extra layer of security to your account"})]}),e.jsx("button",{id:"two-factor-toggle",disabled:!0,className:"px-4 py-2 rounded-md transition-colors text-sm bg-gray-400 text-white cursor-not-allowed opacity-60",title:"Coming Soon",children:"Coming Soon"})]}),e.jsx("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sessions-toggle",className:"block text-sm font-medium text-gray-700",children:"Login Sessions"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Active sessions:"," ",r!=null&&r.active_sessions?r.active_sessions:1]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Account Actions"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(b,{path:Lt,size:1,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium text-orange-700",children:"Archive Account"}),e.jsx("p",{className:"text-sm text-orange-600",children:"Archive your account - data is preserved but access is disabled"})]})]}),e.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-colors text-sm",children:"Archive Account"})]})})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Change Password"}),n&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-red-600 text-sm",children:n})}),o&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsx("p",{className:"text-green-600 text-sm",children:o})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"current-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),e.jsx("input",{id:"current-password",type:"password",placeholder:"Enter your current password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsx("input",{id:"new-password",type:"password",placeholder:"Enter new password (min 8 characters)",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsx("input",{id:"confirm-password",type:"password",placeholder:"Confirm new password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>x({currentPassword:"",newPassword:"",confirmPassword:""}),className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] rounded-md hover:bg-[#38b2ac]",children:"Change Password"})]})]})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-900 mb-4",children:"Archive Account"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Your account will be archived. This means:"}),e.jsxs("ul",{className:"text-sm text-gray-600 mb-4 space-y-1",children:[e.jsx("li",{children:"• Your data will be preserved"}),e.jsx("li",{children:"• You won't be able to access the system"}),e.jsx("li",{children:"• Your account can be restored by administrators"}),e.jsx("li",{children:"• All sessions will be terminated"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"This action can be reversed by contacting support."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"delete-reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for archiving (optional)"}),e.jsx("textarea",{id:"archive-reason",value:u,onChange:h=>m(h.target.value),placeholder:"Please let us know why you're archiving your account...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:v,className:"px-4 py-2 text-sm font-medium text-white bg-orange-600 rounded-md hover:bg-orange-700",children:"Archive Account"})]})]})})]})};var Za=Object.defineProperty,Xa=Object.defineProperties,Ja=Object.getOwnPropertyDescriptors,ts=Object.getOwnPropertySymbols,en=Object.prototype.hasOwnProperty,tn=Object.prototype.propertyIsEnumerable,ss=(r,t,s)=>t in r?Za(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,ot=(r,t)=>{for(var s in t||(t={}))en.call(t,s)&&ss(r,s,t[s]);if(ts)for(var s of ts(t))tn.call(t,s)&&ss(r,s,t[s]);return r},ct=(r,t)=>Xa(r,Ja(t)),sn=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const rn=({isOpen:r,onClose:t,onSubmit:s,error:a,success:n,isPasswordReset:o=!1})=>{const[l,c]=p.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[i,d]=p.useState(!1),[u,m]=p.useState(!1),x=()=>sn(null,null,function*(){yield s(l),n&&c({currentPassword:"*********",newPassword:"",confirmPassword:""})}),v=()=>{c({currentPassword:"*********",newPassword:"",confirmPassword:""}),t()};return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:o?"Reset Password":"Change Password"}),a&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-red-600 text-sm",children:a})}),n&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsx("p",{className:"text-green-600 text-sm",children:n})}),e.jsxs("div",{className:"space-y-4",children:[!o&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),e.jsx("div",{className:"relative",children:e.jsx("input",{id:"currentPassword",type:"password",placeholder:"Enter your current password",value:l.currentPassword||"*********",onChange:h=>c(ct(ot({},l),{currentPassword:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter your current password to verify your identity before changing."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:o?"Choose New Password":"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"newPassword",type:i?"text":"password",placeholder:"Enter new password (min 6 characters)",value:l.newPassword,onChange:h=>c(ct(ot({},l),{newPassword:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("button",{type:"button",onClick:()=>d(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(b,{path:i?Tt:At,size:1,className:"text-gray-400"})})]}),l.newPassword&&e.jsxs("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Password Requirements:"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[l.newPassword.length>=6?e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}):e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-300"}),e.jsxs("span",{className:`text-xs ${l.newPassword.length>=6?"text-green-700":"text-gray-500"}`,children:["At least 6 characters (",l.newPassword.length,"/6)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[l.newPassword===l.confirmPassword&&l.confirmPassword?e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}):e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-300"}),e.jsx("span",{className:`text-xs ${l.newPassword===l.confirmPassword&&l.confirmPassword?"text-green-700":"text-gray-500"}`,children:"Passwords match"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmPassword",type:u?"text":"password",value:l.confirmPassword,onChange:h=>c(ct(ot({},l),{confirmPassword:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(b,{path:u?Tt:At,size:1,className:"text-gray-400"})})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:v,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:x,className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] rounded-md hover:bg-[#38b2ac]",children:o?"Send Reset Email":"Save"})]})]})}):null};var an=Object.defineProperty,nn=Object.defineProperties,ln=Object.getOwnPropertyDescriptors,rs=Object.getOwnPropertySymbols,on=Object.prototype.hasOwnProperty,cn=Object.prototype.propertyIsEnumerable,as=(r,t,s)=>t in r?an(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,ns=(r,t)=>{for(var s in t||(t={}))on.call(t,s)&&as(r,s,t[s]);if(rs)for(var s of rs(t))cn.call(t,s)&&as(r,s,t[s]);return r},is=(r,t)=>nn(r,ln(t)),ge=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const dn=()=>{const{refreshUserData:r}=Mt(),t=Br(),[s,a]=p.useState("basic-info"),[n,o]=p.useState(null),[l,c]=p.useState(!0),[i,d]=p.useState(!1),[u,m]=p.useState(!1),[x,v]=p.useState(null),[h,g]=p.useState({first_name:"",last_name:"",email:"",phone:"",department:"",position:"",date_of_birth:"",bio:"",preferred_language:"en",timezone:"UTC"}),[j,_]=p.useState({theme:"light",notifications:{push:!0,sound:"gentle-chime",volume:50,vibration:"short-pulse",vibrationEnabled:!0}}),[N,y]=p.useState([]),[D,L]=p.useState(!1),[G,B]=p.useState(!1),[M,V]=p.useState(null),[H,E]=p.useState(null),$=[{id:"home",name:"Home Dashboard",icon:"mdiHome",url:"/home"},{id:"sterilization",name:"Sterilization",icon:"mdiTestTube",url:"/sterilization"},{id:"inventory",name:"Inventory",icon:"mdiPackageVariant",url:"/inventory"},{id:"environmental",name:"Environmental Clean",icon:"mdiBroom",url:"/environmental-clean"},{id:"knowledge",name:"Knowledge Hub",icon:"mdiBookOpenVariant",url:"/knowledge-hub"},{id:"library",name:"Library",icon:"mdiLibrary",url:"/library"},{id:"settings",name:"Settings",icon:"mdiCog",url:"/settings"}];p.useEffect(()=>{I()},[]),p.useEffect(()=>{const T=new URLSearchParams(t.search),C=T.get("tab"),k=T.get("openPasswordModal");C==="account"&&k==="true"&&(a("account"),L(!0),B(!0),window.history.replaceState({},"","/settings"))},[t.search]);const I=()=>ge(null,null,function*(){try{c(!0);const{data:{user:T}}=yield P.auth.getUser();if(T){let{data:C}=yield P.from("users").select("*").eq("id",T.id).single();if(!C){const{data:k}=yield P.from("users").select("facility_id").eq("id",T.id).single(),q={id:T.id,email:T.email||"",first_name:"",last_name:"",role:"user",phone:"",department:"",position:"",date_of_birth:"",bio:"",preferred_language:"en",timezone:"UTC",facility_id:(k==null?void 0:k.facility_id)||"550e8400-e29b-41d4-a716-446655440000"},{data:X,error:Ee}=yield P.from("users").insert(q).select().single();Ee?(console.error("Error creating default profile:",Ee),g({first_name:"",last_name:"",email:T.email||"",phone:"",department:"",position:"",date_of_birth:"",bio:"",preferred_language:"en",timezone:"UTC"})):C=X}if(C){console.log("Profile data found:",C);try{const{data:k}=yield P.from("user_sessions").select("id").eq("user_id",T.id).eq("is_active",!0),q=(k==null?void 0:k.length)||0,X={id:C.id,email:C.email||"",first_name:C.first_name||"",last_name:C.last_name||"",role:C.role||"",phone:C.phone||"",department:C.department||"",position:C.position||"",date_of_birth:C.date_of_birth||"",bio:C.bio||"",preferred_language:C.preferred_language||"en",timezone:C.timezone||"UTC",avatar_url:C.avatar_url,active_sessions:q};o(X)}catch(k){console.warn("Failed to fetch active sessions count:",k);const q={id:C.id,email:C.email||"",first_name:C.first_name||"",last_name:C.last_name||"",role:C.role||"",phone:C.phone||"",department:C.department||"",position:C.position||"",date_of_birth:C.date_of_birth||"",bio:C.bio||"",preferred_language:C.preferred_language||"en",timezone:C.timezone||"UTC",avatar_url:C.avatar_url,active_sessions:0};o(q)}g({first_name:C.first_name||"",last_name:C.last_name||"",email:C.email||T.email||"",phone:C.phone||"",department:C.department||"",position:C.position||"",date_of_birth:C.date_of_birth||"",bio:C.bio||"",preferred_language:C.preferred_language||"en",timezone:C.timezone||"UTC"}),console.log("Basic info form set to:",{first_name:C.first_name||"",last_name:C.last_name||"",email:C.email||T.email||""})}}}catch(T){console.error("Error fetching user data:",T)}finally{c(!1)}}),w=()=>ge(null,null,function*(){try{d(!0),v(null);const{data:{user:T}}=yield P.auth.getUser();if(!T)throw new Error("User not authenticated");const{data:C}=yield P.from("users").select("facility_id").eq("id",T.id).single(),k={id:T.id,email:T.email||"",first_name:h.first_name||"",last_name:h.last_name||"",role:"user",phone:h.phone||"",department:h.department||"",position:h.position||"",date_of_birth:h.date_of_birth||"",bio:h.bio||"",preferred_language:h.preferred_language||"en",timezone:h.timezone||"UTC",facility_id:(C==null?void 0:C.facility_id)||"550e8400-e29b-41d4-a716-446655440000",updated_at:new Date().toISOString()},{error:q}=yield P.from("users").upsert(k);if(q)throw q;m(!0),setTimeout(()=>m(!1),3e3),yield I()}catch(T){v(T instanceof Error?T.message:"An unknown error occurred")}finally{d(!1)}}),F=T=>ge(null,null,function*(){try{if(V(null),E(null),T.newPassword!==T.confirmPassword){V("New passwords do not match");return}if(T.newPassword.length<6){V("New password must be at least 6 characters long");return}if(G){const{data:{user:C}}=yield P.auth.getUser();if(!(C!=null&&C.email)){V("User not found");return}const{error:k}=yield P.auth.resetPasswordForEmail(C.email,{redirectTo:`${window.location.origin}/settings?tab=account&openPasswordModal=true`});if(k)throw k;E("Password reset email sent! Check your email for the reset link."),L(!1),B(!1)}else{const{error:C}=yield P.auth.updateUser({password:T.newPassword});if(C)throw C;E("Password updated successfully"),L(!1)}}catch(C){V(C instanceof Error?C.message:"An unknown error occurred")}}),S=()=>ge(null,null,function*(){try{const{data:{user:T}}=yield P.auth.getUser();if(!T)throw new Error("User not authenticated");const{error:C}=yield P.from("users").update({is_active:!1,archived_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",T.id);if(C)throw C;yield P.auth.signOut(),window.location.href="/login"}catch(T){console.error("Error archiving account:",T)}}),A=T=>ge(null,null,function*(){try{const{data:{user:C}}=yield P.auth.getUser();if(!C)throw new Error("User not authenticated");const k=T.name.split(".").pop(),X=`profile-photos/${`${C.id}-${Date.now()}.${k}`}`,{error:Ee}=yield P.storage.from("avatars").upload(X,T);if(Ee)throw Ee;const{data:{publicUrl:qt}}=P.storage.from("avatars").getPublicUrl(X),{error:Ut}=yield P.from("users").update({avatar_url:qt}).eq("id",C.id);if(Ut)throw Ut;o(Bt=>Bt?is(ns({},Bt),{avatar_url:qt}):null),r()}catch(C){console.error("Error uploading photo:",C)}}),Q=()=>ge(null,null,function*(){try{const{data:{user:T}}=yield P.auth.getUser();if(!T)throw new Error("User not authenticated");const{error:C}=yield P.from("users").update({avatar_url:null}).eq("id",T.id);if(C)throw C;o(k=>k?is(ns({},k),{avatar_url:void 0}):null)}catch(T){console.error("Error removing photo:",T)}});return l?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#4ECDC4]"})}):e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx("h4",{className:"text-lg font-semibold",children:"Profile & Account Settings"})}),e.jsx(wa,{activeTab:s,onTabChange:a}),s==="basic-info"&&e.jsx(Oa,{basicInfoForm:h,setBasicInfoForm:g,userData:n,uploadingPhoto:!1,uploadProfilePhoto:A,removeProfilePhoto:Q}),s==="preferences"&&e.jsx(Ga,{preferences:j,setPreferences:_}),s==="mobile"&&e.jsx(Wa,{mobileShortcuts:N,setMobileShortcuts:y,availableShortcuts:$}),s==="account"&&e.jsx(Qa,{userData:n,onPasswordChange:F,onOpenPasswordModal:()=>L(!0),onArchiveAccount:S,passwordError:M,passwordSuccess:H}),s==="basic-info"&&e.jsx("div",{className:"mt-6 flex justify-end space-x-3",children:e.jsx("button",{onClick:w,disabled:i,className:"px-6 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Saving...":"Save Changes"})}),u&&e.jsx("div",{className:"fixed bottom-6 right-6 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg",children:"Changes saved successfully!"}),x&&e.jsxs("div",{className:"fixed bottom-6 right-6 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg",children:["Error saving changes: ",x]}),e.jsx(rn,{isOpen:D,onClose:()=>{L(!1),B(!1)},onSubmit:F,error:M,success:H,isPasswordReset:G})]})};var un=Object.defineProperty,mn=Object.defineProperties,pn=Object.getOwnPropertyDescriptors,ls=Object.getOwnPropertySymbols,hn=Object.prototype.hasOwnProperty,gn=Object.prototype.propertyIsEnumerable,os=(r,t,s)=>t in r?un(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,qe=(r,t)=>{for(var s in t||(t={}))hn.call(t,s)&&os(r,s,t[s]);if(ls)for(var s of ls(t))gn.call(t,s)&&os(r,s,t[s]);return r},Ue=(r,t)=>mn(r,pn(t)),Be=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const xn=()=>{const[r,t]=p.useState(null),[s,a]=p.useState([]),[n,o]=p.useState(!0),[l,c]=p.useState(!1),[i,d]=p.useState(!1),[u,m]=p.useState({closure_date:"",closure_type:"holiday",description:"",is_recurring:!1});p.useEffect(()=>{Be(null,null,function*(){try{const N=yield Ot.getCurrentFacilityId();t(N)}catch(N){console.error("Failed to load facility ID:",N)}})},[]);const x=p.useCallback(()=>Be(null,null,function*(){if(r)try{o(!0);const{data:_,error:N}=yield P.from("office_closures").select("*").eq("facility_id",r).order("closure_date",{ascending:!0});if(N){console.error("Error loading closures:",N);return}a(_.map(y=>{var D;return{id:y.id,closure_date:y.closure_date,closure_type:y.closure_type,description:((D=y.data)==null?void 0:D.description)||"",is_recurring:y.is_recurring}})||[])}catch(_){console.error("Error loading closures:",_)}finally{o(!1)}}),[r]);p.useEffect(()=>{r&&x()},[r,x]);const v=()=>Be(null,null,function*(){if(!(!r||!u.closure_date))try{c(!0);const{error:_}=yield P.from("office_closures").insert({facility_id:r,closure_date:u.closure_date,closure_type:u.closure_type,description:u.description,is_recurring:u.is_recurring});if(_){console.error("Error adding closure:",_);return}m({closure_date:"",closure_type:"holiday",description:"",is_recurring:!1}),d(!1),x()}catch(_){console.error("Error adding closure:",_)}finally{c(!1)}}),h=_=>Be(null,null,function*(){try{const{error:N}=yield P.from("office_closures").delete().eq("id",_);if(N){console.error("Error deleting closure:",N);return}x()}catch(N){console.error("Error deleting closure:",N)}}),g=_=>{switch(_){case"holiday":return"Holiday";case"maintenance":return"Maintenance";case"custom":return"Custom";default:return _}},j=_=>{switch(_){case"holiday":return"bg-red-100 text-red-800";case"maintenance":return"bg-yellow-100 text-yellow-800";case"custom":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return n?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-2"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-16 bg-gray-200 rounded"}),e.jsx("div",{className:"h-16 bg-gray-200 rounded"})]})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700",children:"Office Closures & Holidays"}),e.jsx("button",{onClick:()=>d(!i),className:"px-3 py-1 text-sm bg-[#4ECDC4] text-white rounded-md hover:bg-[#45b8b0] transition-colors",children:i?"Cancel":"Add Closure"})]}),i&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"closureDate",className:"block text-xs text-gray-600 mb-1",children:"Date"}),e.jsx("input",{id:"closureDate",type:"date",value:u.closure_date,onChange:_=>m(N=>Ue(qe({},N),{closure_date:_.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"closureType",className:"block text-xs text-gray-600 mb-1",children:"Type"}),e.jsxs("select",{id:"closureType",value:u.closure_type,onChange:_=>m(N=>Ue(qe({},N),{closure_type:_.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"holiday",children:"Holiday"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"custom",children:"Custom"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"closureDescription",className:"block text-xs text-gray-600 mb-1",children:"Description"}),e.jsx("input",{id:"closureDescription",type:"text",value:u.description,onChange:_=>m(N=>Ue(qe({},N),{description:_.target.value})),placeholder:"e.g., Christmas Day, Annual Maintenance",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"recurring",checked:u.is_recurring,onChange:_=>m(N=>Ue(qe({},N),{is_recurring:_.target.checked})),className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("label",{htmlFor:"recurring",className:"text-sm text-gray-600",children:"Recurring annually"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:v,disabled:l||!u.closure_date,className:"px-3 py-1 text-sm bg-[#4ECDC4] text-white rounded hover:bg-[#45b8b0] disabled:opacity-50 transition-colors",children:l?"Adding...":"Add Closure"}),e.jsx("button",{onClick:()=>d(!1),className:"px-3 py-1 text-sm bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition-colors",children:"Cancel"})]})]}),e.jsx("div",{className:"space-y-2",children:s.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No office closures configured. Add holidays and maintenance days above."}):s.map(_=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${j(_.closure_type)}`,children:g(_.closure_type)}),_.is_recurring&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"Recurring"})]}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:new Date(_.closure_date).toLocaleDateString()}),_.description&&e.jsx("div",{className:"text-sm text-gray-600",children:_.description})]}),e.jsx("button",{onClick:()=>h(_.id),className:"ml-2 p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete closure",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},_.id))}),e.jsx("p",{className:"text-xs text-gray-500",children:"Office closures are automatically excluded from streak calculations. Users won't lose their streak on holidays or maintenance days."})]})};var fn=Object.defineProperty,bn=Object.defineProperties,yn=Object.getOwnPropertyDescriptors,cs=Object.getOwnPropertySymbols,vn=Object.prototype.hasOwnProperty,jn=Object.prototype.propertyIsEnumerable,ds=(r,t,s)=>t in r?fn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,He=(r,t)=>{for(var s in t||(t={}))vn.call(t,s)&&ds(r,s,t[s]);if(cs)for(var s of cs(t))jn.call(t,s)&&ds(r,s,t[s]);return r},Ye=(r,t)=>bn(r,yn(t)),dt=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const Nn=()=>{const[r,t]=p.useState(null),[s,a]=p.useState(!0),[n,o]=p.useState(!1),[l,c]=p.useState(()=>({workingDays:{monday:!0,tuesday:!0,wednesday:!0,thursday:!0,friday:!0,saturday:!1,sunday:!1},openHolidays:!1,startHour:8,endHour:17}));p.useEffect(()=>{dt(null,null,function*(){try{const j=yield Ot.getCurrentFacilityId();t(j)}catch(j){console.error("Failed to load facility ID:",j)}})},[]);const i=p.useCallback(()=>dt(null,null,function*(){if(r)try{a(!0);const{data:g,error:j}=yield P.from("facility_office_hours").select("*").eq("facility_id",r).single();if(j&&j.code!=="PGRST116"){console.error("Error loading office hours:",j);return}g&&c({workingDays:g.working_days,startHour:g.start_hour,endHour:g.end_hour,openHolidays:g.open_holidays})}catch(g){console.error("Error loading office hours:",g)}finally{a(!1)}}),[r]);p.useEffect(()=>{r&&i()},[r,i]);const d=g=>dt(null,null,function*(){if(r)try{o(!0);const{error:j}=yield P.from("facility_office_hours").upsert({facility_id:r,working_days:g.workingDays,start_hour:g.startHour,end_hour:g.endHour,open_holidays:g.openHolidays});if(j){console.error("Error saving office hours:",j);return}localStorage.setItem("officeHoursSettings",JSON.stringify(g))}catch(j){console.error("Error saving office hours:",j)}finally{o(!1)}}),u=g=>{const j=Ye(He({},l),{workingDays:Ye(He({},l.workingDays),{[g]:!l.workingDays[g]})});c(j),d(j)},m=()=>{const g=Ye(He({},l),{openHolidays:!l.openHolidays});c(g),d(g)},x=(g,j)=>{const _=Ye(He({},l),{[g==="start"?"startHour":"endHour"]:j});c(_),d(_)},v=g=>{const j=g>=12?"PM":"AM";return`${g===0?12:g>12?g-12:g}:00 ${j}`},h=()=>{const g=Object.entries(l.workingDays).filter(([,j])=>j).map(([j])=>j.charAt(0).toUpperCase()+j.slice(1));return g.length===0?"No days selected":g.length===7?"Every day":g.length===5&&!l.workingDays.saturday&&!l.workingDays.sunday?"Monday - Friday":g.join(", ")};return s?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-2",children:"Office Hours & Scheduling"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"These settings affect BI test scheduling, analytics calculations, and streak tracking"}),n&&e.jsx("div",{className:"text-sm text-blue-600 bg-blue-50 px-3 py-2 rounded-md",children:"Saving changes..."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"block text-sm font-medium text-gray-700",children:"Office Days"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(l.workingDays).map(([g,j])=>e.jsx("button",{onClick:()=>u(g),className:`px-3 py-2 text-sm font-medium rounded-md transition-colors ${j?"bg-[#4ECDC4] text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:g.charAt(0).toUpperCase()},g))}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Selected: ",h()]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"block text-sm font-medium text-gray-700",children:"Hours of Operation"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"block text-xs text-gray-500 mb-1",children:"Start Time"}),e.jsx("select",{value:l.startHour,onChange:g=>x("start",parseInt(g.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] text-sm",children:Array.from({length:24},(g,j)=>e.jsx("option",{value:j,children:v(j)},j))})]}),e.jsx("span",{className:"text-gray-500 mt-6",children:"to"}),e.jsxs("div",{children:[e.jsx("div",{className:"block text-xs text-gray-500 mb-1",children:"End Time"}),e.jsx("select",{value:l.endHour,onChange:g=>x("end",parseInt(g.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] text-sm",children:Array.from({length:24},(g,j)=>e.jsx("option",{value:j,children:v(j)},j))})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Operating hours: ",v(l.startHour)," -"," ",v(l.endHour)]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"block text-sm font-medium text-gray-700",children:"Holiday Operations"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:m,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${l.openHolidays?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l.openHolidays?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:"text-sm text-gray-700",children:l.openHolidays?"Open on holidays":"Closed on holidays"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:l.openHolidays?"BI tests and operations will continue on holidays":"BI tests due on holidays will be rescheduled to the next business day"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[e.jsx("h6",{className:"text-sm font-medium text-blue-800 mb-2",children:"Current Schedule Summary"}),e.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[e.jsxs("p",{children:["• Working days: ",h()]}),e.jsxs("p",{children:["• Hours: ",v(l.startHour)," -"," ",v(l.endHour)]}),e.jsxs("p",{children:["• Holidays: ",l.openHolidays?"Open":"Closed"]})]})]}),e.jsx(xn,{})]})},_n=({users:r,onEditUser:t,onDeleteUser:s,onAddUser:a,billingTierInfo:n})=>{const[o,l]=p.useState(""),[c,i]=p.useState("All Roles"),[d,u]=p.useState(!1),[m,x]=p.useState(""),v=r.filter(h=>{const g=h.full_name.toLowerCase().includes(o.toLowerCase())||h.email.toLowerCase().includes(o.toLowerCase()),j=c==="All Roles"||h.role===c;return g&&j});return e.jsxs("div",{className:"mb-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-3",children:"User Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-md",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Create New User"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Add new staff members to the system"})]}),e.jsx("button",{onClick:a,className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Add User"})]}),n&&n.usersToNextTier<=2&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-amber-800",children:"Billing Tier Warning"}),e.jsxs("div",{className:"mt-1 text-sm text-amber-700",children:[e.jsxs("p",{children:["You are ",n.usersToNextTier," user",n.usersToNextTier===1?"":"s"," away from the next pricing tier (",n.nextTier.name,"). Please review and remove any inactive users to avoid an increase in fees."]}),e.jsxs("p",{className:"mt-1 text-xs",children:["Current: ",n.activeUserCount," active users (",n.currentTier.name,")"]})]})]})]})}),e.jsxs("div",{className:"border border-gray-200 rounded-md overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h6",{className:"text-sm font-medium text-gray-700",children:["Active Users (",v.length,")"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Search users...",value:o,onChange:h=>l(h.target.value),className:"px-3 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),d?e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("input",{type:"text",placeholder:"New role",value:m,onChange:h=>x(h.target.value),className:"px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] w-20"}),e.jsx("button",{onClick:()=>{m.trim()&&(x(""),u(!1))},className:"px-2 py-1 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-xs",children:"Add"}),e.jsx("button",{onClick:()=>{x(""),u(!1)},className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"×"})]}):e.jsxs("select",{value:c,onChange:h=>{h.target.value==="add-new"?u(!0):i(h.target.value)},className:"px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{children:"All Roles"}),e.jsx("option",{children:"Admin"}),e.jsx("option",{children:"Technician"}),e.jsx("option",{children:"Nurse"}),e.jsx("option",{value:"add-new",children:"+ Add New Role"})]})]})]})}),e.jsx("div",{className:"max-h-64 overflow-y-auto scrollbar-hide",children:v.map((h,g)=>e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-blue-600",children:h.full_name.split(" ").map(j=>j[0]).join("")})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:h.full_name}),e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${h.role==="Admin"?"bg-red-100 text-red-800":h.role==="Technician"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:h.role}),e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${h.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:h.status})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsx("span",{children:h.email}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Last login: ",h.lastLogin]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>t(h),className:"p-1 text-gray-400 hover:text-gray-600",title:"Edit user",children:e.jsx(b,{path:Ne,size:.8})}),e.jsx("button",{onClick:()=>s(h),className:"p-1 text-gray-400 hover:text-red-600",title:"Delete user",children:e.jsx(b,{path:Lt,size:.8})})]})]},g))}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Showing ",v.length," of ",r.length," users"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-2 py-1 border border-gray-300 rounded hover:bg-white",children:"Previous"}),e.jsx("button",{className:"px-2 py-1 border border-gray-300 rounded bg-white",children:"1"}),e.jsx("button",{className:"px-2 py-1 border border-gray-300 rounded hover:bg-white",children:"2"}),e.jsx("button",{className:"px-2 py-1 border border-gray-300 rounded hover:bg-white",children:"Next"})]})]})})]})]})]})},Cn=({isOpen:r,onClose:t,user:s,mode:a,onSave:n})=>{var o,l;const[c,i]=p.useState(!1),[d,u]=p.useState(!1),[m,x]=p.useState(""),[v,h]=p.useState("");return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto scrollbar-hide",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a==="add"?"Add New User":`Edit: ${s==null?void 0:s.full_name}`}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:e.jsx(b,{path:Ce,size:1.2})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),e.jsx("input",{id:"firstName",type:"text",placeholder:"Enter first name",defaultValue:((o=s==null?void 0:s.full_name)==null?void 0:o.split(" ")[0])||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),e.jsx("input",{id:"lastName",type:"text",placeholder:"Enter last name",defaultValue:((l=s==null?void 0:s.full_name)==null?void 0:l.split(" ").slice(1).join(" "))||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),e.jsx("input",{id:"email",type:"email",placeholder:"user@clinic.com",defaultValue:(s==null?void 0:s.email)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),a==="add"&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"An invitation email will be sent to this address"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Role & Permissions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"userRole",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),c?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{id:"newRoleInput",type:"text",placeholder:"Enter new role name",value:m,onChange:g=>x(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{m.trim()&&(x(""),i(!1))},className:"px-3 py-1 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-xs",children:"Add Role"}),e.jsx("button",{onClick:()=>{x(""),i(!1)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"Cancel"})]})]}):e.jsxs("select",{id:"userRole",defaultValue:(s==null?void 0:s.role)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"",children:"Select a role"}),e.jsx("option",{value:"Admin",children:"Admin"}),e.jsx("option",{value:"Technician",children:"Technician"}),e.jsx("option",{value:"Nurse",children:"Nurse"}),e.jsx("option",{value:"add-new",children:"+ Add New Role"})]}),!c&&e.jsx("button",{onClick:()=>i(!0),className:"text-xs text-[#4ECDC4] hover:text-[#38b2ac] mt-1",children:"+ Add New Role"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"userDepartment",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),d?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{id:"newDepartmentInput",type:"text",placeholder:"Enter new department name",value:v,onChange:g=>h(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{v.trim()&&(h(""),u(!1))},className:"px-3 py-1 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-xs",children:"Add Department"}),e.jsx("button",{onClick:()=>{h(""),u(!1)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"Cancel"})]})]}):e.jsxs("select",{id:"userDepartment",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"",children:"Select department"}),e.jsx("option",{value:"Sterilization",children:"Sterilization"}),e.jsx("option",{value:"Environmental Cleaning",children:"Environmental Cleaning"}),e.jsx("option",{value:"Inventory",children:"Inventory"}),e.jsx("option",{value:"General",children:"General"}),e.jsx("option",{value:"add-new",children:"+ Add New Department"})]}),!d&&e.jsx("button",{onClick:()=>u(!0),className:"text-xs text-[#4ECDC4] hover:text-[#38b2ac] mt-1",children:"+ Add New Department"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Module Permissions"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{name:"Inventory Management",key:"inventory"},{name:"Sterilization",key:"sterilization"},{name:"Environmental Cleaning",key:"cleaning"},{name:"Knowledge Hub",key:"knowledge"},{name:"Settings",key:"settings"},{name:"Analytics",key:"analytics"},{name:"User Management",key:"users"},{name:"Reports",key:"reports"}].map(g=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:`module-${g.key}`,defaultChecked:(s==null?void 0:s.role)==="Admin"||["inventory","sterilization"].includes(g.key),className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("label",{htmlFor:`module-${g.key}`,className:"text-sm text-gray-700",children:g.name})]},g.key))})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700",children:"Two-Factor Authentication"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${s!=null&&s.twoFactorEnabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s!=null&&s.twoFactorEnabled?"Enabled":"Disabled"}),e.jsx("button",{className:"text-sm text-[#4ECDC4] hover:text-[#38b2ac]",children:s!=null&&s.twoFactorEnabled?"Disable":"Enable"})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-md p-3",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-[#4ECDC4] rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(b,{path:ra,size:1,className:"text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:s!=null&&s.twoFactorEnabled?"2FA is Active":"2FA is Not Configured"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:s!=null&&s.twoFactorEnabled?"User has two-factor authentication enabled for enhanced security.":"Enable two-factor authentication to add an extra layer of security to this account."}),!(s!=null&&s.twoFactorEnabled)&&e.jsx("button",{className:"px-3 py-1 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-xs",children:"Setup 2FA"})]})]})})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Security Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Force Password Change"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Require user to change password on next login"})]}),e.jsx("button",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-md hover:bg-orange-200 transition-colors text-xs",children:"Force Change"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Session Management"}),e.jsx("p",{className:"text-xs text-gray-500",children:"View and manage active sessions"})]}),e.jsx("button",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors text-xs",children:"View Sessions"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Access Logs"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Monitor login attempts and system access"})]}),e.jsx("button",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 transition-colors text-xs",children:"View Logs"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"IP Restrictions"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Configure allowed IP ranges for this user"})]}),e.jsx("button",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-md hover:bg-green-200 transition-colors text-xs",children:"Manage IPs"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Device Management"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Approve and manage mobile devices"})]}),e.jsx("button",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-md hover:bg-indigo-200 transition-colors text-xs",children:"Manage Devices"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Login Security"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Failed Login Attempts"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Account lockout after multiple failed attempts"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"1",max:"10",defaultValue:"5",className:"w-16 px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("span",{className:"text-xs text-gray-500",children:"attempts"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Lockout Duration"}),e.jsx("p",{className:"text-xs text-gray-500",children:"How long to lock account after failed attempts"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"5",max:"1440",defaultValue:"30",className:"w-16 px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("span",{className:"text-xs text-gray-500",children:"minutes"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Session Timeout"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Auto-logout after inactivity"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("select",{className:"px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"15",children:"15 minutes"}),e.jsx("option",{value:"30",selected:!0,children:"30 minutes"}),e.jsx("option",{value:"60",children:"1 hour"}),e.jsx("option",{value:"240",children:"4 hours"}),e.jsx("option",{value:"480",children:"8 hours"})]})})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Audit & Compliance"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Activity Monitoring"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Track user actions and system changes"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"activity-monitoring",defaultChecked:!0,className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("label",{htmlFor:"activity-monitoring",className:"text-xs text-gray-700",children:"Enabled"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Data Export Logs"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Log all data export activities"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"export-logs",defaultChecked:!0,className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("label",{htmlFor:"export-logs",className:"text-xs text-gray-700",children:"Enabled"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Sensitive Data Access"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Require additional verification for sensitive data"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"sensitive-data",defaultChecked:(s==null?void 0:s.role)==="Admin",className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("label",{htmlFor:"sensitive-data",className:"text-xs text-gray-700",children:"Required"})]})]})]})]}),a==="add"&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Invitation Settings"}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(b,{path:kt,size:1,className:"text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Email Invitation"}),e.jsx("p",{className:"text-xs text-blue-700 mb-2",children:"The user will receive an email invitation with a secure link to set up their account. They can choose their own password and complete their profile setup."}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-blue-600",children:[e.jsx("span",{children:"✓ Secure invitation link"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:"✓ Self-service password setup"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:"✓ Profile completion"})]})]})]})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>{n({}),t()},className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] rounded-md hover:bg-[#38b2ac]",children:a==="add"?"Send Invitation":"Save Changes"})]})]})}):null},Sn=({showDeleteModal:r,selectedUser:t,onCloseDeleteModal:s,onConfirmDelete:a})=>e.jsx(e.Fragment,{children:r&&t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 rounded-lg p-2 mr-3",children:e.jsx(b,{path:Lt,size:1.5,className:"text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete User"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Are you sure you want to delete this user? This action cannot be undone."}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-red-600",children:t==null?void 0:t.name.split(" ").map(n=>n[0]).join("")})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t==null?void 0:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t==null?void 0:t.email}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${(t==null?void 0:t.role)==="Admin"?"bg-red-100 text-red-800":(t==null?void 0:t.role)==="Technician"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:t==null?void 0:t.role}),e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${(t==null?void 0:t.status)==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t==null?void 0:t.status})]})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Delete User"})]})]})})});var wn=Object.defineProperty,us=Object.getOwnPropertySymbols,En=Object.prototype.hasOwnProperty,Tn=Object.prototype.propertyIsEnumerable,ms=(r,t,s)=>t in r?wn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,ps=(r,t)=>{for(var s in t||(t={}))En.call(t,s)&&ms(r,s,t[s]);if(us)for(var s of us(t))Tn.call(t,s)&&ms(r,s,t[s]);return r},xe=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});class An{constructor(){this.sessionStartTime=Date.now(),this.lastActivityTime=Date.now(),this.inactivityTimer=null,this.sessionTimer=null,this.warningTimer=null,this.isRememberMe=!1,this.config={sessionTimeout:480,inactiveTimeout:30,rememberMeDuration:7},this.loadConfig(),this.setupActivityListeners(),this.startTimers()}loadConfig(){const t=localStorage.getItem("cliniio_session_timeout"),s=localStorage.getItem("cliniio_inactive_timeout"),a=localStorage.getItem("cliniio_remember_me_duration");t&&(this.config.sessionTimeout=parseInt(t)),s&&(this.config.inactiveTimeout=parseInt(s)),a&&(this.config.rememberMeDuration=parseInt(a)),this.isRememberMe=localStorage.getItem("cliniio_remember_me")==="true",this.isRememberMe&&(this.config.sessionTimeout=this.config.rememberMeDuration*24*60)}setupActivityListeners(){["mousedown","mousemove","keypress","scroll","touchstart","click"].forEach(s=>{document.addEventListener(s,()=>this.updateActivity(),{passive:!0})}),document.addEventListener("visibilitychange",()=>{document.hidden?this.pauseTimers():this.resumeTimers()})}updateActivity(){this.lastActivityTime=Date.now(),this.resetInactivityTimer()}startTimers(){this.startSessionTimer(),this.startInactivityTimer()}startSessionTimer(){this.sessionTimer&&clearTimeout(this.sessionTimer);const t=this.config.sessionTimeout*60*1e3,s=Date.now()-this.sessionStartTime,a=Math.max(0,t-s),n=Math.max(0,a-300*1e3);n>0&&(this.warningTimer=setTimeout(()=>{this.showSessionWarning(a)},n)),this.sessionTimer=setTimeout(()=>{this.handleSessionExpired()},a)}startInactivityTimer(){this.inactivityTimer&&clearTimeout(this.inactivityTimer);const t=this.config.inactiveTimeout*60*1e3;this.inactivityTimer=setTimeout(()=>{this.handleInactivityTimeout()},t)}resetInactivityTimer(){this.inactivityTimer&&clearTimeout(this.inactivityTimer),this.startInactivityTimer()}pauseTimers(){this.sessionTimer&&clearTimeout(this.sessionTimer),this.inactivityTimer&&clearTimeout(this.inactivityTimer),this.warningTimer&&clearTimeout(this.warningTimer)}resumeTimers(){this.startTimers()}showSessionWarning(t){var s,a;const n=Math.ceil(t/6e4),o=document.createElement("div");o.id="session-warning",o.className="fixed top-4 right-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4 shadow-lg z-50 max-w-sm",o.innerHTML=`
      <div class="flex items-start">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3">
          <h3 class="text-sm font-medium text-yellow-800">Session Expiring Soon</h3>
          <div class="mt-2 text-sm text-yellow-700">
            <p>Your session will expire in ${n} minute${n!==1?"s":""}.</p>
          </div>
          <div class="mt-4 flex space-x-3">
            <button id="extend-session" class="bg-yellow-50 px-2 py-1 text-xs font-medium text-yellow-800 rounded-md border border-yellow-200 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500">
              Extend Session
            </button>
            <button id="dismiss-warning" class="bg-yellow-50 px-2 py-1 text-xs font-medium text-yellow-800 rounded-md border border-yellow-200 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500">
              Dismiss
            </button>
          </div>
        </div>
      </div>
    `,document.body.appendChild(o),(s=document.getElementById("extend-session"))==null||s.addEventListener("click",()=>{this.extendSession(),o.remove()}),(a=document.getElementById("dismiss-warning"))==null||a.addEventListener("click",()=>{o.remove()}),setTimeout(()=>{o.parentNode&&o.remove()},3e4)}extendSession(){return xe(this,null,function*(){try{const{data:t,error:s}=yield P.auth.refreshSession();if(s){console.error("Error extending session:",s);return}t.session&&(this.sessionStartTime=Date.now(),this.startTimers(),this.showMessage("Session extended successfully!","success"))}catch(t){console.error("Error extending session:",t),this.showMessage("Failed to extend session. Please log in again.","error")}})}handleSessionExpired(){return xe(this,null,function*(){console.log("🚨 SESSION EXPIRED - redirecting to login"),this.showMessage("Your session has expired. Please log in again.","error"),setTimeout(()=>xe(this,null,function*(){yield this.logout()}),2e3)})}handleInactivityTimeout(){return xe(this,null,function*(){this.showMessage("You have been inactive for too long. Logging out...","warning"),setTimeout(()=>xe(this,null,function*(){yield this.logout()}),2e3)})}showMessage(t,s){const a={success:"bg-green-50 border-green-200 text-green-800",error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800"},n=document.createElement("div");n.className=`fixed top-4 right-4 ${a[s]} border rounded-lg p-4 shadow-lg z-50 max-w-sm`,n.innerHTML=`
      <div class="flex items-start">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 ${s==="success"?"text-green-400":s==="error"?"text-red-400":"text-yellow-400"}" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3">
          <p class="text-sm font-medium">${t}</p>
        </div>
      </div>
    `,document.body.appendChild(n),setTimeout(()=>{n.parentNode&&n.remove()},5e3)}logout(){return xe(this,null,function*(){try{yield P.auth.signOut(),window.location.href="/login"}catch(t){console.error("Error during logout:",t),window.location.href="/login"}})}updateConfig(t){this.config=ps(ps({},this.config),t),this.startTimers()}setRememberMe(t){this.isRememberMe=t,localStorage.setItem("cliniio_remember_me",t.toString()),t?this.config.sessionTimeout=this.config.rememberMeDuration*24*60:this.config.sessionTimeout=480,this.startTimers()}getSessionInfo(){const t=Date.now(),s=t-this.sessionStartTime,a=Math.max(0,this.config.sessionTimeout*60*1e3-s),n=t-this.lastActivityTime,o=Math.max(0,this.config.inactiveTimeout*60*1e3-n);return{sessionStartTime:this.sessionStartTime,lastActivityTime:this.lastActivityTime,remainingTime:a,inactiveTimeRemaining:o}}destroy(){this.sessionTimer&&clearTimeout(this.sessionTimer),this.inactivityTimer&&clearTimeout(this.inactivityTimer),this.warningTimer&&clearTimeout(this.warningTimer),["mousedown","mousemove","keypress","scroll","touchstart","click"].forEach(s=>{document.removeEventListener(s,()=>this.updateActivity())})}}const Je=new An,In=({variant:r="compact",className:t=""})=>{const[s,a]=p.useState(Je.getSessionInfo()),[n,o]=p.useState(!1);p.useEffect(()=>{const d=setInterval(()=>{a(Je.getSessionInfo())},3e4);return()=>clearInterval(d)},[]);const l=d=>{const u=Math.floor(d/6e4),m=Math.floor(u/60);return m>0?`${m}h ${u%60}m`:`${u}m`},c=d=>d<300*1e3?"text-red-600":d<900*1e3?"text-yellow-600":"text-green-600",i=d=>d<300*1e3?e.jsx(aa,{className:"h-4 w-4"}):e.jsx(na,{className:"h-4 w-4"});return r==="compact"?e.jsxs("div",{className:`flex items-center space-x-2 ${t}`,children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[i(s.remainingTime),e.jsx("span",{className:`text-sm font-medium ${c(s.remainingTime)}`,children:l(s.remainingTime)})]}),e.jsx("button",{onClick:()=>o(!n),className:"text-xs text-gray-500 hover:text-gray-700 underline",children:n?"Hide":"Details"})]}):e.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-4 ${t}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Session Status"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[i(s.remainingTime),e.jsxs("span",{className:`text-sm font-medium ${c(s.remainingTime)}`,children:[l(s.remainingTime)," remaining"]})]})]}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Session started:"}),e.jsx("span",{children:new Date(s.sessionStartTime).toLocaleTimeString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Last activity:"}),e.jsx("span",{children:new Date(s.lastActivityTime).toLocaleTimeString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Inactive timeout:"}),e.jsx("span",{children:l(s.inactiveTimeRemaining)})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsx("button",{onClick:()=>Je.extendSession(),className:"w-full px-3 py-2 bg-blue-600 text-white text-xs rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Extend Session"})})]})};var Pn=Object.defineProperty,On=Object.defineProperties,Dn=Object.getOwnPropertyDescriptors,hs=Object.getOwnPropertySymbols,Rn=Object.prototype.hasOwnProperty,kn=Object.prototype.propertyIsEnumerable,gs=(r,t,s)=>t in r?Pn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Ln=(r,t)=>{for(var s in t||(t={}))Rn.call(t,s)&&gs(r,s,t[s]);if(hs)for(var s of hs(t))kn.call(t,s)&&gs(r,s,t[s]);return r},Mn=(r,t)=>On(r,Dn(t)),xs=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const $n=()=>{const{currentUser:r}=Mt(),[t,s]=p.useState({sessionTimeout:480,inactiveTimeout:30,rememberMeDuration:7,requireReauthForSensitive:!0,twoFactorEnabled:!1}),[a,n]=p.useState(!1),[o,l]=p.useState(!1),[c,i]=p.useState(null),d=p.useCallback(()=>xs(null,null,function*(){var x,v;if(r){n(!0);try{const{data:h,error:g}=yield P.from("user_security_settings").select("*").eq("user_id",r.id).single();g&&g.code!=="PGRST116"?console.error("Error loading security settings:",g):h&&s({sessionTimeout:h.session_timeout||480,inactiveTimeout:h.inactive_timeout||30,rememberMeDuration:h.remember_me_duration||7,requireReauthForSensitive:(x=h.require_reauth_for_sensitive)!=null?x:!0,twoFactorEnabled:(v=h.two_factor_enabled)!=null?v:!1})}catch(h){console.error("Error loading security settings:",h)}finally{n(!1)}}}),[r]);p.useEffect(()=>{d()},[d]);const u=()=>xs(null,null,function*(){if(r){l(!0),i(null);try{const{error:x}=yield P.from("user_security_settings").upsert({user_id:r.id,session_timeout:t.sessionTimeout,inactive_timeout:t.inactiveTimeout,remember_me_duration:t.rememberMeDuration,require_reauth_for_sensitive:t.requireReauthForSensitive,two_factor_enabled:t.twoFactorEnabled,updated_at:new Date().toISOString()});if(x)throw x;i({type:"success",text:"Security settings saved successfully!"}),localStorage.setItem("cliniio_session_timeout",t.sessionTimeout.toString()),localStorage.setItem("cliniio_inactive_timeout",t.inactiveTimeout.toString()),localStorage.setItem("cliniio_remember_me_duration",t.rememberMeDuration.toString()),Je.updateConfig({sessionTimeout:t.sessionTimeout,inactiveTimeout:t.inactiveTimeout,rememberMeDuration:t.rememberMeDuration})}catch(x){console.error("Error saving security settings:",x),i({type:"error",text:"Failed to save security settings. Please try again."})}finally{l(!1)}}}),m=(x,v)=>{s(h=>Mn(Ln({},h),{[x]:v}))};return a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(x=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},x))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Security & Sessions"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Configure how long you stay logged in and security preferences for your account."})]}),c&&e.jsx("div",{className:`p-4 rounded-lg ${c.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:c.text}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Session Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"session-timeout",className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Session Duration"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:"session-timeout",type:"number",min:"60",max:"1440",value:t.sessionTimeout,onChange:x=>m("sessionTimeout",parseInt(x.target.value)||480),className:"w-20 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"minutes (1-24 hours)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How long you stay logged in before being automatically logged out"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"inactive-timeout",className:"block text-sm font-medium text-gray-700 mb-2",children:"Inactive Timeout"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:"inactive-timeout",type:"number",min:"5",max:"120",value:t.inactiveTimeout,onChange:x=>m("inactiveTimeout",parseInt(x.target.value)||30),className:"w-20 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"minutes (5-120 minutes)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How long of inactivity before automatic logout"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"remember-me-duration",className:"block text-sm font-medium text-gray-700 mb-2",children:"Remember Me Duration"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:"remember-me-duration",type:"number",min:"1",max:"30",value:t.rememberMeDuration,onChange:x=>m("rememberMeDuration",parseInt(x.target.value)||7),className:"w-20 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"days (1-30 days)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'How long to stay logged in when using "Remember Me"'})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Security Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"require-reauth-toggle",className:"text-sm font-medium text-gray-700",children:"Require Re-authentication for Sensitive Actions"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ask for password confirmation before changing critical settings"})]}),e.jsx("button",{id:"require-reauth-toggle",onClick:()=>m("requireReauthForSensitive",!t.requireReauthForSensitive),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${t.requireReauthForSensitive?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t.requireReauthForSensitive?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"two-factor-toggle",className:"text-sm font-medium text-gray-700",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add an extra layer of security to your account (coming soon)"})]}),e.jsx("button",{id:"two-factor-toggle",disabled:!0,className:"relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 cursor-not-allowed",children:e.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white translate-x-1"})})]})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-4",children:"Current Session"}),e.jsx("div",{className:"text-sm text-blue-800 space-y-2",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Logged in as:"})," ",r==null?void 0:r.email]})}),e.jsx("div",{className:"mt-4",children:e.jsx(In,{variant:"detailed"})})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:u,disabled:o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Saving...":"Save Settings"})})]})},Fn=()=>{const[r]=p.useState([]),[t,s]=p.useState(!1),[a,n]=p.useState(!1),[o,l]=p.useState(!1),[c,i]=p.useState(null),[d,u]=p.useState("users"),x=(()=>{const y=r.filter(M=>M.status==="Active").length,D=[{min:0,max:5,name:"0-5 Users"},{min:6,max:15,name:"6-15 Users"},{min:16,max:21,name:"16-21 Users"},{min:22,max:1/0,name:"21+ Users"}],L=D.find(M=>y>=M.min&&y<=M.max),G=D.find(M=>M.min>y);if(!L||!G)return null;const B=G.min-y;return{currentTier:L,nextTier:G,usersToNextTier:B,activeUserCount:y}})(),v=y=>{i(y),n(!0)},h=y=>{i(y),l(!0)},g=()=>{s(!0)},j=()=>{s(!1),n(!1),l(!1),i(null)},_=y=>{console.log("Saving user:",y),j()},N=()=>{console.log("Deleting user:",c),j()};return e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"System Administration"}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>u("users"),className:`py-2 px-1 border-b-2 font-medium text-sm ${d==="users"?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"User Management"}),e.jsx("button",{onClick:()=>u("security"),className:`py-2 px-1 border-b-2 font-medium text-sm ${d==="security"?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Security & Sessions"})]})})}),d==="users"&&e.jsxs(e.Fragment,{children:[e.jsx(_n,{users:r,onEditUser:v,onDeleteUser:h,onAddUser:g,billingTierInfo:x}),e.jsx("div",{className:"mb-6 border-t pt-6",children:e.jsx(Nn,{})})]}),d==="security"&&e.jsx("div",{children:e.jsx($n,{})}),e.jsx(Cn,{isOpen:t||a,onClose:j,onSave:_,user:c,mode:a?"edit":"add"}),e.jsx(Sn,{showDeleteModal:o,selectedUser:c,onCloseDeleteModal:()=>l(!1),onConfirmDelete:N})]})},zn=()=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Billing & Subscription Settings"}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Current Plan"}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"text-base font-semibold text-blue-900",children:"Professional Plan"}),e.jsx("p",{className:"text-xs text-blue-700",children:"$299/month • 50 users • Full features"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Next billing: Jan 15, 2024"})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"Active"})})]})})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Payment Methods"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-5 bg-blue-600 rounded mr-2 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"VISA"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"•••• •••• •••• 4242"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Expires 12/25"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"inline-block bg-green-100 text-green-800 text-xs px-1 py-0.5 rounded-full",children:"Default"}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-xs",children:"Edit"})]})]}),e.jsx("button",{className:"w-full p-2 border-2 border-dashed border-gray-300 rounded-md text-gray-500 hover:border-gray-400 hover:text-gray-700 transition-colors text-xs",children:"+ Add Payment Method"})]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Billing Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company-name",className:"block text-xs font-medium text-gray-600 mb-1",children:"Company Name"}),e.jsx("input",{id:"company-name",type:"text",defaultValue:"Medical Center Inc.",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tax-id",className:"block text-xs font-medium text-gray-600 mb-1",children:"Tax ID"}),e.jsx("input",{id:"tax-id",type:"text",defaultValue:"12-3456789",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billing-email",className:"block text-xs font-medium text-gray-600 mb-1",children:"Billing Email"}),e.jsx("input",{id:"billing-email",type:"email",defaultValue:"billing@medicalcenter.com",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billing-phone",className:"block text-xs font-medium text-gray-600 mb-1",children:"Phone"}),e.jsx("input",{id:"billing-phone",type:"tel",defaultValue:"+1 (555) 123-4567",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billing-city",className:"block text-xs font-medium text-gray-600 mb-1",children:"City"}),e.jsx("input",{id:"billing-city",type:"text",defaultValue:"New York",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billing-state-zip",className:"block text-xs font-medium text-gray-600 mb-1",children:"State/ZIP"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{id:"billing-state",type:"text",defaultValue:"NY",className:"w-1/2 px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("input",{id:"billing-zip",type:"text",defaultValue:"10001",className:"w-1/2 px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]})]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Invoice Settings"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded-md",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Frequency"}),e.jsxs("select",{className:"px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{children:"Monthly"}),e.jsx("option",{children:"Quarterly"}),e.jsx("option",{children:"Annually"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded-md",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Auto-pay"}),e.jsx("input",{type:"checkbox",id:"auto-pay",className:"rounded",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded-md",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Reminders"}),e.jsx("input",{type:"checkbox",id:"payment-reminders",className:"rounded",defaultChecked:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Usage & Limits"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-2 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Users"}),e.jsx("span",{className:"text-xs text-gray-600",children:"35/50"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full",style:{width:"70%"}})})]}),e.jsxs("div",{className:"p-2 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Storage"}),e.jsx("span",{className:"text-xs text-gray-600",children:"2.1/10 GB"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-green-600 h-1.5 rounded-full",style:{width:"21%"}})})]}),e.jsxs("div",{className:"p-2 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"API Calls"}),e.jsx("span",{className:"text-xs text-gray-600",children:"45K/100K"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-yellow-600 h-1.5 rounded-full",style:{width:"45%"}})})]})]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Plan Management"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("button",{className:"p-2 border border-blue-300 bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100 transition-colors text-xs",children:"Upgrade"}),e.jsx("button",{className:"p-2 border border-gray-300 bg-gray-50 text-gray-700 rounded-md hover:bg-gray-100 transition-colors text-xs",children:"Downgrade"}),e.jsx("button",{className:"p-2 border border-red-300 bg-red-50 text-red-700 rounded-md hover:bg-red-100 transition-colors text-xs",children:"Cancel"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Save Changes"})})]});class Vn{constructor(t){this.facilityId=t}createDefaultSettings(){return{aiEnabled:!0,computerVision:{toolConditionAssessment:!0,barcodeQualityDetection:!0,toolTypeRecognition:!0,cleaningValidation:!0,damageDetection:!0,wearAnalysis:!0,imageRecognition:!0,qualityAssessment:!0},predictiveAnalytics:{cycleOptimization:!0,failurePrediction:!0,efficiencyOptimization:!0,resourcePlanning:!0,maintenancePrediction:!0,qualityPrediction:!0,demandForecasting:!0,costOptimization:!0,seasonalAnalysis:!0},smartWorkflow:{intelligentWorkflowSelection:!0,automatedProblemDetection:!0,smartPhaseTransitions:!0,batchOptimization:!0,toolGrouping:!0,cycleScheduling:!0,smartCategorization:!0,autoClassification:!0,smartFormFilling:!0},qualityAssurance:{biologicalIndicatorAnalysis:!0,complianceMonitoring:!0,auditTrailEnhancement:!0,riskAssessment:!0,qualityMetrics:!0,regulatoryCompliance:!0,smartValidation:!0,errorPrevention:!0},realTimeMonitoring:{anomalyDetection:!0,predictiveMaintenance:!0,qualityDriftDetection:!0,smartNotifications:!0,performanceMonitoring:!0,alertManagement:!0,statusUpdates:!0,emergencyAlerts:!0},analytics:{dataCollection:!0,realTimeUpdates:!0,historicalDataRetention:!0,exportCapabilities:!0,dashboardCustomization:!0,performanceMetrics:!0,efficiencyTracking:!0,costAnalysis:!0},intelligence:{riskAssessment:!0,alertSystem:!0,escalationRules:!0,aiRecommendations:!0,optimizationTips:!0,predictiveInsights:!0,trendAnalysis:!0,forecasting:!0},performance:{accuracyTracking:!0,responseTimeMonitoring:!0,errorRateTracking:!0,qualityMetrics:!0,benchmarkComparison:!0,performanceAlerts:!0,optimizationSuggestions:!0,modelHealthMonitoring:!0},privacy:{dataAnonymization:!0,thirdPartyPermissions:!0,complianceMonitoring:!0,auditTrail:!0,dataRetention:!0,encryption:!0,accessControl:!0,privacyCompliance:!0},integration:{externalServices:!0,apiRateLimiting:!0,webhookEndpoints:!0,dataSharing:!0,healthMonitoring:!0,syncScheduling:!0,backupSystems:!0,crossPlatformSync:!0},userExperience:{aiSuggestions:!0,learningPaths:!0,personalization:!0,accessibility:!0,languagePreferences:!0,notificationPreferences:!0,interfaceCustomization:!0,helpSystem:!0},environmental:{predictiveCleaning:!1,smartScheduling:!1,contaminationPrediction:!1,resourceOptimization:!1,efficiencyAnalytics:!1,smartRoomManagement:!1,automaticPriorityAssignment:!1,riskAssessment:!1,trendAnalysis:!1,predictiveMaintenance:!1,supplyOptimization:!1,staffScheduling:!1,costOptimization:!1,inventoryPrediction:!1,workloadBalancing:!1,qualityAssurance:!1,complianceMonitoring:!1,auditTrailEnhancement:!1,performanceTracking:!1,automatedReporting:!1,realTimeMonitoring:!1,anomalyDetection:!1,smartNotifications:!1,statusUpdates:!1,emergencyAlerts:!1},learning:{personalizedRecommendations:!1,skillGapAnalysis:!1,learningPathOptimization:!1,performancePrediction:!1,adaptiveDifficulty:!1,learningAnalytics:!1,behaviorTracking:!1,progressPrediction:!1,engagementMetrics:!1,retentionAnalysis:!1,learningEfficiency:!1,contentOptimization:!1,assessmentIntelligence:!1,certificationTracking:!1,competencyMapping:!1,learningInsights:!1},aiConfig:{aiConfidenceThreshold:.8,aiDataRetentionDays:365,realTimeProcessingEnabled:!0,batchProcessingEnabled:!0,dataSharingEnabled:!1,localAIProcessingEnabled:!0,encryptedDataTransmission:!0,aiModelTraining:!1},apiKeys:{},facilityId:this.facilityId,aiVersion:"1.0.0",updated_at:new Date().toISOString()}}mergeSettings(t,s,a,n,o){var l,c,i,d,u,m,x,v,h,g,j,_,N,y,D,L,G,B,M,V,H,E;return s&&(t.computerVision.toolConditionAssessment=(l=s.tool_condition_assessment)!=null?l:t.computerVision.toolConditionAssessment,t.computerVision.barcodeQualityDetection=(c=s.barcode_quality_detection)!=null?c:t.computerVision.barcodeQualityDetection,t.computerVision.toolTypeRecognition=(i=s.tool_type_recognition)!=null?i:t.computerVision.toolTypeRecognition,t.predictiveAnalytics.cycleOptimization=(d=s.cycle_optimization)!=null?d:t.predictiveAnalytics.cycleOptimization,t.predictiveAnalytics.failurePrediction=(u=s.failure_prediction)!=null?u:t.predictiveAnalytics.failurePrediction,t.aiConfig.aiConfidenceThreshold=(m=s.ai_confidence_threshold)!=null?m:t.aiConfig.aiConfidenceThreshold,t.aiConfig.aiDataRetentionDays=(x=s.ai_data_retention_days)!=null?x:t.aiConfig.aiDataRetentionDays),a&&(t.computerVision.imageRecognition=(v=a.image_recognition_enabled)!=null?v:t.computerVision.imageRecognition,t.computerVision.qualityAssessment=(h=a.quality_assessment_enabled)!=null?h:t.computerVision.qualityAssessment,t.predictiveAnalytics.demandForecasting=(g=a.demand_forecasting_enabled)!=null?g:t.predictiveAnalytics.demandForecasting,t.predictiveAnalytics.costOptimization=(j=a.cost_optimization_enabled)!=null?j:t.predictiveAnalytics.costOptimization,t.smartWorkflow.smartCategorization=(_=a.smart_categorization_enabled)!=null?_:t.smartWorkflow.smartCategorization),n&&(t.environmental.predictiveCleaning=(N=n.predictive_cleaning_enabled)!=null?N:t.environmental.predictiveCleaning,t.environmental.smartScheduling=(y=n.smart_scheduling)!=null?y:t.environmental.smartScheduling,t.environmental.contaminationPrediction=(D=n.contamination_prediction)!=null?D:t.environmental.contaminationPrediction,t.environmental.resourceOptimization=(L=n.resource_optimization)!=null?L:t.environmental.resourceOptimization,t.environmental.efficiencyAnalytics=(G=n.efficiency_analytics)!=null?G:t.environmental.efficiencyAnalytics),o&&(t.learning.personalizedRecommendations=(B=o.personalized_recommendations)!=null?B:t.learning.personalizedRecommendations,t.learning.skillGapAnalysis=(M=o.skill_gap_analysis)!=null?M:t.learning.skillGapAnalysis,t.learning.learningPathOptimization=(V=o.learning_path_optimization)!=null?V:t.learning.learningPathOptimization,t.learning.performancePrediction=(H=o.performance_prediction)!=null?H:t.learning.performancePrediction,t.learning.adaptiveDifficulty=(E=o.adaptive_difficulty)!=null?E:t.learning.adaptiveDifficulty),t}extractSterilizationSettings(t){var s,a,n,o,l,c,i;return{tool_condition_assessment:(s=t.computerVision)==null?void 0:s.toolConditionAssessment,barcode_quality_detection:(a=t.computerVision)==null?void 0:a.barcodeQualityDetection,tool_type_recognition:(n=t.computerVision)==null?void 0:n.toolTypeRecognition,cycle_optimization:(o=t.predictiveAnalytics)==null?void 0:o.cycleOptimization,failure_prediction:(l=t.predictiveAnalytics)==null?void 0:l.failurePrediction,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}extractInventorySettings(t){var s,a,n,o,l,c,i;return{image_recognition_enabled:(s=t.computerVision)==null?void 0:s.imageRecognition,quality_assessment_enabled:(a=t.computerVision)==null?void 0:a.qualityAssessment,demand_forecasting_enabled:(n=t.predictiveAnalytics)==null?void 0:n.demandForecasting,cost_optimization_enabled:(o=t.predictiveAnalytics)==null?void 0:o.costOptimization,smart_categorization_enabled:(l=t.smartWorkflow)==null?void 0:l.smartCategorization,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}extractEnvironmentalSettings(t){var s,a,n,o,l,c,i;return{predictive_cleaning_enabled:(s=t.environmental)==null?void 0:s.predictiveCleaning,smart_scheduling:(a=t.environmental)==null?void 0:a.smartScheduling,contamination_prediction:(n=t.environmental)==null?void 0:n.contaminationPrediction,resource_optimization:(o=t.environmental)==null?void 0:o.resourceOptimization,efficiency_analytics:(l=t.environmental)==null?void 0:l.efficiencyAnalytics,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}extractLearningSettings(t){var s,a,n,o,l,c,i;return{personalized_recommendations:(s=t.learning)==null?void 0:s.personalizedRecommendations,skill_gap_analysis:(a=t.learning)==null?void 0:a.skillGapAnalysis,learning_path_optimization:(n=t.learning)==null?void 0:n.learningPathOptimization,performance_prediction:(o=t.learning)==null?void 0:o.performancePrediction,adaptive_difficulty:(l=t.learning)==null?void 0:l.adaptiveDifficulty,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}}var We=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});class Gn{constructor(t){this.facilityId=t,this.sterilizationAI=new rt(t),this.inventoryAI=new Pr(t),this.environmentalAI=new Yr(t),this.learningAI=new Wr(t)}loadUnifiedSettings(){return We(this,null,function*(){try{const[t,s,a,n]=yield Promise.all([this.sterilizationAI.loadSettings(),this.inventoryAI.loadSettings(),this.environmentalAI.loadSettings(),this.learningAI.loadSettings()]),o=this.createDefaultSettings();return this.mergeSettings(o,t||void 0,s||void 0,a||void 0,n||void 0)}catch(t){return console.error("Error loading unified AI settings:",t),this.createDefaultSettings()}})}saveUnifiedSettings(t){return We(this,null,function*(){try{const s=this.extractSterilizationSettings(t),a=this.extractInventorySettings(t),n=this.extractEnvironmentalSettings(t),o=this.extractLearningSettings(t),[l,c,i,d]=yield Promise.all([this.sterilizationAI.saveSettings({facility_id:this.facilityId,ai_enabled:!0,ai_version:"1.0",computer_vision_enabled:s.tool_condition_assessment||!1,tool_condition_assessment:s.tool_condition_assessment||!1,barcode_quality_detection:s.barcode_quality_detection||!1,tool_type_recognition:s.tool_type_recognition||!1,cleaning_validation:!1,predictive_analytics_enabled:s.failure_prediction||!1,cycle_optimization:s.cycle_optimization||!1,failure_prediction:s.failure_prediction||!1,efficiency_optimization:!1,resource_planning:!1,smart_workflow_enabled:!1,ai_confidence_threshold:s.ai_confidence_threshold||.8,ai_data_retention_days:s.ai_data_retention_days||90}),this.inventoryAI.saveSettings(a),this.environmentalAI.saveSettings(n),this.learningAI.saveSettings(o)]);return l&&c&&i&&d}catch(s){return console.error("Error saving unified AI settings:",s),!1}})}applySettings(t){return We(this,null,function*(){try{return yield this.sterilizationAI.initialize(),yield this.environmentalAI.initialize(),yield this.learningAI.initialize(),this.applyFeatureFlags(t),!0}catch(s){return console.error("Error applying AI settings:",s),!1}})}getServiceStatus(){return We(this,null,function*(){try{const[t,s,a]=yield Promise.all([this.sterilizationAI.initialize(),this.environmentalAI.initialize(),this.learningAI.initialize()]);return{sterilization:t,inventory:!1,environmental:s,learning:a}}catch(t){return console.error("Error getting AI service status:",t),{sterilization:!1,inventory:!1,environmental:!1,learning:!1}}})}createDefaultSettings(){return{aiEnabled:!0,computerVision:{toolConditionAssessment:!0,barcodeQualityDetection:!0,toolTypeRecognition:!0,cleaningValidation:!0,damageDetection:!0,wearAnalysis:!0,imageRecognition:!0,qualityAssessment:!0},predictiveAnalytics:{cycleOptimization:!0,failurePrediction:!0,efficiencyOptimization:!0,resourcePlanning:!0,maintenancePrediction:!0,qualityPrediction:!0,demandForecasting:!0,costOptimization:!0,seasonalAnalysis:!0},smartWorkflow:{intelligentWorkflowSelection:!0,automatedProblemDetection:!0,smartPhaseTransitions:!0,batchOptimization:!0,toolGrouping:!0,cycleScheduling:!0,smartCategorization:!0,autoClassification:!0,smartFormFilling:!0},qualityAssurance:{biologicalIndicatorAnalysis:!0,complianceMonitoring:!0,auditTrailEnhancement:!0,riskAssessment:!0,qualityMetrics:!0,regulatoryCompliance:!0,smartValidation:!0,errorPrevention:!0},realTimeMonitoring:{anomalyDetection:!0,predictiveMaintenance:!0,qualityDriftDetection:!0,smartNotifications:!0,performanceMonitoring:!0,alertManagement:!0,statusUpdates:!0,emergencyAlerts:!0},analytics:{dataCollection:!0,realTimeUpdates:!0,historicalDataRetention:!0,exportCapabilities:!0,dashboardCustomization:!0,performanceMetrics:!0,efficiencyTracking:!0,costAnalysis:!0},intelligence:{riskAssessment:!0,alertSystem:!0,escalationRules:!0,aiRecommendations:!0,optimizationTips:!0,predictiveInsights:!0,trendAnalysis:!0,forecasting:!0},performance:{accuracyTracking:!0,responseTimeMonitoring:!0,errorRateTracking:!0,qualityMetrics:!0,benchmarkComparison:!0,performanceAlerts:!0,optimizationSuggestions:!0,modelHealthMonitoring:!0},privacy:{dataAnonymization:!0,thirdPartyPermissions:!0,complianceMonitoring:!0,auditTrail:!0,dataRetention:!0,encryption:!0,accessControl:!0,privacyCompliance:!0},integration:{externalServices:!0,apiRateLimiting:!0,webhookEndpoints:!0,dataSharing:!0,healthMonitoring:!0,syncScheduling:!0,backupSystems:!0,crossPlatformSync:!0},userExperience:{aiSuggestions:!0,learningPaths:!0,personalization:!0,accessibility:!0,languagePreferences:!0,notificationPreferences:!0,interfaceCustomization:!0,helpSystem:!0},environmental:{predictiveCleaning:!1,smartScheduling:!1,contaminationPrediction:!1,resourceOptimization:!1,efficiencyAnalytics:!1,smartRoomManagement:!1,automaticPriorityAssignment:!1,riskAssessment:!1,trendAnalysis:!1,predictiveMaintenance:!1,supplyOptimization:!1,staffScheduling:!1,costOptimization:!1,inventoryPrediction:!1,workloadBalancing:!1,qualityAssurance:!1,complianceMonitoring:!1,auditTrailEnhancement:!1,performanceTracking:!1,automatedReporting:!1,realTimeMonitoring:!1,anomalyDetection:!1,smartNotifications:!1,statusUpdates:!1,emergencyAlerts:!1},learning:{personalizedRecommendations:!1,skillGapAnalysis:!1,learningPathOptimization:!1,performancePrediction:!1,adaptiveDifficulty:!1,learningAnalytics:!1,behaviorTracking:!1,progressPrediction:!1,engagementMetrics:!1,retentionAnalysis:!1,learningEfficiency:!1,contentOptimization:!1,assessmentIntelligence:!1,certificationTracking:!1,competencyMapping:!1,learningInsights:!1},aiConfig:{aiConfidenceThreshold:.8,aiDataRetentionDays:365,realTimeProcessingEnabled:!0,batchProcessingEnabled:!0,dataSharingEnabled:!1,localAIProcessingEnabled:!0,encryptedDataTransmission:!0,aiModelTraining:!1},apiKeys:{},facilityId:this.facilityId,aiVersion:"1.0.0",updated_at:new Date().toISOString()}}mergeSettings(t,s,a,n,o){var l,c,i,d,u,m,x,v,h,g,j,_,N,y,D,L,G,B,M,V,H,E;return s&&(t.computerVision.toolConditionAssessment=(l=s.tool_condition_assessment)!=null?l:t.computerVision.toolConditionAssessment,t.computerVision.barcodeQualityDetection=(c=s.barcode_quality_detection)!=null?c:t.computerVision.barcodeQualityDetection,t.computerVision.toolTypeRecognition=(i=s.tool_type_recognition)!=null?i:t.computerVision.toolTypeRecognition,t.predictiveAnalytics.cycleOptimization=(d=s.cycle_optimization)!=null?d:t.predictiveAnalytics.cycleOptimization,t.predictiveAnalytics.failurePrediction=(u=s.failure_prediction)!=null?u:t.predictiveAnalytics.failurePrediction,t.aiConfig.aiConfidenceThreshold=(m=s.ai_confidence_threshold)!=null?m:t.aiConfig.aiConfidenceThreshold,t.aiConfig.aiDataRetentionDays=(x=s.ai_data_retention_days)!=null?x:t.aiConfig.aiDataRetentionDays),a&&(t.computerVision.imageRecognition=(v=a.image_recognition_enabled)!=null?v:t.computerVision.imageRecognition,t.computerVision.qualityAssessment=(h=a.quality_assessment_enabled)!=null?h:t.computerVision.qualityAssessment,t.predictiveAnalytics.demandForecasting=(g=a.demand_forecasting_enabled)!=null?g:t.predictiveAnalytics.demandForecasting,t.predictiveAnalytics.costOptimization=(j=a.cost_optimization_enabled)!=null?j:t.predictiveAnalytics.costOptimization,t.smartWorkflow.smartCategorization=(_=a.smart_categorization_enabled)!=null?_:t.smartWorkflow.smartCategorization),n&&(t.environmental.predictiveCleaning=(N=n.predictive_cleaning_enabled)!=null?N:t.environmental.predictiveCleaning,t.environmental.smartScheduling=(y=n.smart_scheduling)!=null?y:t.environmental.smartScheduling,t.environmental.contaminationPrediction=(D=n.contamination_prediction)!=null?D:t.environmental.contaminationPrediction,t.environmental.resourceOptimization=(L=n.resource_optimization)!=null?L:t.environmental.resourceOptimization,t.environmental.efficiencyAnalytics=(G=n.efficiency_analytics)!=null?G:t.environmental.efficiencyAnalytics),o&&(t.learning.personalizedRecommendations=(B=o.personalized_recommendations)!=null?B:t.learning.personalizedRecommendations,t.learning.skillGapAnalysis=(M=o.skill_gap_analysis)!=null?M:t.learning.skillGapAnalysis,t.learning.learningPathOptimization=(V=o.learning_path_optimization)!=null?V:t.learning.learningPathOptimization,t.learning.performancePrediction=(H=o.performance_prediction)!=null?H:t.learning.performancePrediction,t.learning.adaptiveDifficulty=(E=o.adaptive_difficulty)!=null?E:t.learning.adaptiveDifficulty),t}extractSterilizationSettings(t){var s,a,n,o,l,c,i;return{tool_condition_assessment:(s=t.computerVision)==null?void 0:s.toolConditionAssessment,barcode_quality_detection:(a=t.computerVision)==null?void 0:a.barcodeQualityDetection,tool_type_recognition:(n=t.computerVision)==null?void 0:n.toolTypeRecognition,cycle_optimization:(o=t.predictiveAnalytics)==null?void 0:o.cycleOptimization,failure_prediction:(l=t.predictiveAnalytics)==null?void 0:l.failurePrediction,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}extractInventorySettings(t){var s,a,n,o,l,c,i;return{image_recognition_enabled:(s=t.computerVision)==null?void 0:s.imageRecognition,quality_assessment_enabled:(a=t.computerVision)==null?void 0:a.qualityAssessment,demand_forecasting_enabled:(n=t.predictiveAnalytics)==null?void 0:n.demandForecasting,cost_optimization_enabled:(o=t.predictiveAnalytics)==null?void 0:o.costOptimization,smart_categorization_enabled:(l=t.smartWorkflow)==null?void 0:l.smartCategorization,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}extractEnvironmentalSettings(t){var s,a,n,o,l,c,i;return{predictive_cleaning_enabled:(s=t.environmental)==null?void 0:s.predictiveCleaning,smart_scheduling:(a=t.environmental)==null?void 0:a.smartScheduling,contamination_prediction:(n=t.environmental)==null?void 0:n.contaminationPrediction,resource_optimization:(o=t.environmental)==null?void 0:o.resourceOptimization,efficiency_analytics:(l=t.environmental)==null?void 0:l.efficiencyAnalytics,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}extractLearningSettings(t){var s,a,n,o,l,c,i;return{personalized_recommendations:(s=t.learning)==null?void 0:s.personalizedRecommendations,skill_gap_analysis:(a=t.learning)==null?void 0:a.skillGapAnalysis,learning_path_optimization:(n=t.learning)==null?void 0:n.learningPathOptimization,performance_prediction:(o=t.learning)==null?void 0:o.performancePrediction,adaptive_difficulty:(l=t.learning)==null?void 0:l.adaptiveDifficulty,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}applyFeatureFlags(t){console.log("Applying AI feature flags:",t)}}class qn{constructor(t){this.facilityId=t}isFeatureEnabled(t,s){return t.aiEnabled?this.getNestedValue(t,s)===!0:!1}validateApiKeys(t){const s=[];return t.openaiApiKey&&!this.isValidApiKey(t.openaiApiKey)&&s.push("Invalid OpenAI API key format"),t.googleVisionApiKey&&!this.isValidApiKey(t.googleVisionApiKey)&&s.push("Invalid Google Vision API key format"),t.azureComputerVisionKey&&!this.isValidApiKey(t.azureComputerVisionKey)&&s.push("Invalid Azure Computer Vision API key format"),{isValid:s.length===0,errors:s}}encryptApiKeys(t){return{openaiApiKey:t.openaiApiKey?this.encryptKey(t.openaiApiKey):void 0,googleVisionApiKey:t.googleVisionApiKey?this.encryptKey(t.googleVisionApiKey):void 0,azureComputerVisionKey:t.azureComputerVisionKey?this.encryptKey(t.azureComputerVisionKey):void 0}}decryptApiKeys(t){return{openaiApiKey:t.openaiApiKey?this.decryptKey(t.openaiApiKey):void 0,googleVisionApiKey:t.googleVisionApiKey?this.decryptKey(t.googleVisionApiKey):void 0,azureComputerVisionKey:t.azureComputerVisionKey?this.decryptKey(t.azureComputerVisionKey):void 0}}getRequiredApiKeys(t){const s=[];return(t.computerVision.toolConditionAssessment||t.computerVision.barcodeQualityDetection||t.computerVision.toolTypeRecognition||t.computerVision.imageRecognition||t.computerVision.qualityAssessment)&&s.push("googleVisionApiKey","azureComputerVisionKey"),(t.predictiveAnalytics.failurePrediction||t.predictiveAnalytics.cycleOptimization||t.predictiveAnalytics.demandForecasting)&&s.push("openaiApiKey"),(t.environmental.predictiveCleaning||t.environmental.contaminationPrediction||t.environmental.resourceOptimization)&&s.push("openaiApiKey"),(t.learning.personalizedRecommendations||t.learning.skillGapAnalysis||t.learning.learningPathOptimization)&&s.push("openaiApiKey"),[...new Set(s)]}hasRequiredApiKeys(t){const s=this.getRequiredApiKeys(t),a=Object.keys(t.apiKeys).filter(n=>t.apiKeys[n]);return s.every(n=>a.some(o=>o===n))}isValidApiKey(t){return t&&t.length>10&&!t.includes(" ")}encryptKey(t){return`encrypted_${t}`}decryptKey(t){return t.replace("encrypted_","")}getNestedValue(t,s){return s.split(".").reduce((a,n)=>a==null?void 0:a[n],t)}}var Un=Object.defineProperty,fs=Object.getOwnPropertySymbols,Bn=Object.prototype.hasOwnProperty,Hn=Object.prototype.propertyIsEnumerable,bs=(r,t,s)=>t in r?Un(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Ke=(r,t)=>{for(var s in t||(t={}))Bn.call(t,s)&&bs(r,s,t[s]);if(fs)for(var s of fs(t))Hn.call(t,s)&&bs(r,s,t[s]);return r};class Yn{constructor(t){this.facilityId=t}applyFeatureFlags(t){console.log("Applying AI feature flags:",t)}toggleFeature(t,s,a){const n=Ke({},t);return this.setNestedValue(n,s,a),n}toggleMultipleFeatures(t,s){const a=Ke({},t);return Object.entries(s).forEach(([n,o])=>{this.setNestedValue(a,n,o)}),a}enableCategory(t,s){const a=Ke({},t);if(typeof a[s]=="object"&&a[s]!==null){const n=a[s];Object.keys(n).forEach(o=>{n[o]=!0})}return a}disableCategory(t,s){const a=Ke({},t);if(typeof a[s]=="object"&&a[s]!==null){const n=a[s];Object.keys(n).forEach(o=>{n[o]=!1})}return a}getFeatureStatus(t,s){return this.getNestedValue(t,s)===!0}getCategoryStatus(t,s){if(typeof t[s]!="object"||t[s]===null)return{enabled:0,total:0,percentage:0};const a=t[s],n=Object.values(a),o=n.filter(Boolean).length,l=n.length;return{enabled:o,total:l,percentage:l>0?Math.round(o/l*100):0}}getDisabledFeatures(t){const s=[];return Object.entries(t.computerVision).forEach(([a,n])=>{n||s.push(`computerVision.${a}`)}),Object.entries(t.predictiveAnalytics).forEach(([a,n])=>{n||s.push(`predictiveAnalytics.${a}`)}),Object.entries(t.smartWorkflow).forEach(([a,n])=>{n||s.push(`smartWorkflow.${a}`)}),Object.entries(t.qualityAssurance).forEach(([a,n])=>{n||s.push(`qualityAssurance.${a}`)}),Object.entries(t.realTimeMonitoring).forEach(([a,n])=>{n||s.push(`realTimeMonitoring.${a}`)}),Object.entries(t.analytics).forEach(([a,n])=>{n||s.push(`analytics.${a}`)}),Object.entries(t.intelligence).forEach(([a,n])=>{n||s.push(`intelligence.${a}`)}),Object.entries(t.performance).forEach(([a,n])=>{n||s.push(`performance.${a}`)}),Object.entries(t.privacy).forEach(([a,n])=>{n||s.push(`privacy.${a}`)}),Object.entries(t.integration).forEach(([a,n])=>{n||s.push(`integration.${a}`)}),Object.entries(t.userExperience).forEach(([a,n])=>{n||s.push(`userExperience.${a}`)}),Object.entries(t.environmental).forEach(([a,n])=>{n||s.push(`environmental.${a}`)}),Object.entries(t.learning).forEach(([a,n])=>{n||s.push(`learning.${a}`)}),s}getEnabledFeatures(t){const s=[];return Object.entries(t.computerVision).forEach(([a,n])=>{n&&s.push(`computerVision.${a}`)}),Object.entries(t.predictiveAnalytics).forEach(([a,n])=>{n&&s.push(`predictiveAnalytics.${a}`)}),Object.entries(t.smartWorkflow).forEach(([a,n])=>{n&&s.push(`smartWorkflow.${a}`)}),Object.entries(t.qualityAssurance).forEach(([a,n])=>{n&&s.push(`qualityAssurance.${a}`)}),Object.entries(t.realTimeMonitoring).forEach(([a,n])=>{n&&s.push(`realTimeMonitoring.${a}`)}),Object.entries(t.analytics).forEach(([a,n])=>{n&&s.push(`analytics.${a}`)}),Object.entries(t.intelligence).forEach(([a,n])=>{n&&s.push(`intelligence.${a}`)}),Object.entries(t.performance).forEach(([a,n])=>{n&&s.push(`performance.${a}`)}),Object.entries(t.privacy).forEach(([a,n])=>{n&&s.push(`privacy.${a}`)}),Object.entries(t.integration).forEach(([a,n])=>{n&&s.push(`integration.${a}`)}),Object.entries(t.userExperience).forEach(([a,n])=>{n&&s.push(`userExperience.${a}`)}),Object.entries(t.environmental).forEach(([a,n])=>{n&&s.push(`environmental.${a}`)}),Object.entries(t.learning).forEach(([a,n])=>{n&&s.push(`learning.${a}`)}),s}getNestedValue(t,s){return s.split(".").reduce((a,n)=>a==null?void 0:a[n],t)}setNestedValue(t,s,a){const n=s.split("."),o=n.pop(),l=n.reduce((c,i)=>(i in c||(c[i]={}),c[i]),t);l[o]=a}}var Wn=Object.defineProperty,ys=Object.getOwnPropertySymbols,Kn=Object.prototype.hasOwnProperty,Qn=Object.prototype.propertyIsEnumerable,vs=(r,t,s)=>t in r?Wn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,ut=(r,t)=>{for(var s in t||(t={}))Kn.call(t,s)&&vs(r,s,t[s]);if(ys)for(var s of ys(t))Qn.call(t,s)&&vs(r,s,t[s]);return r};class Zn{constructor(t){this.facilityId=t}optimizePerformanceSettings(t){const s=ut({},t);return s.aiConfig.aiConfidenceThreshold=this.calculateOptimalConfidenceThreshold(t),s.aiConfig.aiDataRetentionDays=this.calculateOptimalDataRetention(t),s.aiConfig.realTimeProcessingEnabled=this.shouldEnableRealTimeProcessing(t),s.aiConfig.batchProcessingEnabled=this.shouldEnableBatchProcessing(t),s.aiConfig.dataSharingEnabled=this.shouldEnableDataSharing(t),s.aiConfig.localAIProcessingEnabled=this.shouldEnableLocalProcessing(t),s.aiConfig.encryptedDataTransmission=this.shouldEnableEncryption(t),s.aiConfig.aiModelTraining=this.shouldEnableModelTraining(t),s}getPerformanceRecommendations(t){const s=[];return t.aiConfig.aiConfidenceThreshold<.7&&s.push({recommendations:["Consider increasing AI confidence threshold to 0.8 or higher for better accuracy"],priority:"medium"}),t.aiConfig.aiDataRetentionDays>365&&s.push({recommendations:["Consider reducing data retention period to improve performance and reduce storage costs"],priority:"low"}),!t.aiConfig.realTimeProcessingEnabled&&!t.aiConfig.batchProcessingEnabled&&s.push({recommendations:["Enable at least one processing mode (real-time or batch) for AI functionality"],priority:"high"}),t.aiConfig.encryptedDataTransmission||s.push({recommendations:["Enable encrypted data transmission for better security"],priority:"high"}),!t.aiConfig.localAIProcessingEnabled&&t.privacy.dataAnonymization&&s.push({recommendations:["Consider enabling local AI processing for better privacy compliance"],priority:"medium"}),s}validatePerformanceSettings(t){const s=[],a=[];return(t.aiConfig.aiConfidenceThreshold<.1||t.aiConfig.aiConfidenceThreshold>1)&&s.push("AI confidence threshold must be between 0.1 and 1.0"),(t.aiConfig.aiDataRetentionDays<1||t.aiConfig.aiDataRetentionDays>2555)&&s.push("AI data retention days must be between 1 and 2555 (7 years)"),!t.aiConfig.realTimeProcessingEnabled&&!t.aiConfig.batchProcessingEnabled&&s.push("At least one processing mode must be enabled"),!t.aiConfig.encryptedDataTransmission&&t.privacy.dataAnonymization&&a.push("Consider enabling encrypted data transmission when using data anonymization"),!t.aiConfig.localAIProcessingEnabled&&t.privacy.privacyCompliance&&a.push("Consider enabling local AI processing for better privacy compliance"),{isValid:s.length===0,errors:s,warnings:a}}getPerformanceMetricsConfig(t){return{accuracyTracking:t.performance.accuracyTracking,responseTimeMonitoring:t.performance.responseTimeMonitoring,errorRateTracking:t.performance.errorRateTracking,qualityMetrics:t.performance.qualityMetrics,benchmarkComparison:t.performance.benchmarkComparison,performanceAlerts:t.performance.performanceAlerts,optimizationSuggestions:t.performance.optimizationSuggestions,modelHealthMonitoring:t.performance.modelHealthMonitoring}}updatePerformanceMetrics(t,s){const a=ut({},t);return Object.entries(s).forEach(([n,o])=>{o!==void 0&&(a.performance[n]=o)}),a}getPerformanceConfig(t){return{aiConfidenceThreshold:t.aiConfig.aiConfidenceThreshold,aiDataRetentionDays:t.aiConfig.aiDataRetentionDays,realTimeProcessingEnabled:t.aiConfig.realTimeProcessingEnabled,batchProcessingEnabled:t.aiConfig.batchProcessingEnabled,dataSharingEnabled:t.aiConfig.dataSharingEnabled,localAIProcessingEnabled:t.aiConfig.localAIProcessingEnabled,encryptedDataTransmission:t.aiConfig.encryptedDataTransmission,aiModelTraining:t.aiConfig.aiModelTraining}}updatePerformanceConfig(t,s){const a=ut({},t);return Object.entries(s).forEach(([n,o])=>{o!==void 0&&(a.aiConfig[n]=o)}),a}calculateOptimalConfidenceThreshold(t){let s=.8;return t.predictiveAnalytics.failurePrediction&&(s=Math.max(s,.9)),t.qualityAssurance.complianceMonitoring&&(s=Math.max(s,.85)),t.realTimeMonitoring.emergencyAlerts&&(s=Math.max(s,.95)),Math.min(s,.99)}calculateOptimalDataRetention(t){let s=365;return t.privacy.complianceMonitoring&&(s=Math.max(s,2555)),t.qualityAssurance.regulatoryCompliance&&(s=Math.max(s,1825)),t.performance.optimizationSuggestions&&(s=Math.min(s,180)),s}shouldEnableRealTimeProcessing(t){return t.realTimeMonitoring.anomalyDetection||t.realTimeMonitoring.emergencyAlerts||t.realTimeMonitoring.smartNotifications||t.analytics.realTimeUpdates}shouldEnableBatchProcessing(t){return t.predictiveAnalytics.demandForecasting||t.predictiveAnalytics.seasonalAnalysis||t.analytics.historicalDataRetention||t.performance.benchmarkComparison}shouldEnableDataSharing(t){return t.privacy.dataSharingEnabled&&!t.privacy.dataAnonymization}shouldEnableLocalProcessing(t){return t.privacy.dataAnonymization||t.privacy.privacyCompliance||t.privacy.accessControl}shouldEnableEncryption(t){return t.privacy.encryption||t.privacy.privacyCompliance||t.privacy.accessControl}shouldEnableModelTraining(t){return t.analytics.dataCollection&&(t.predictiveAnalytics.failurePrediction||t.predictiveAnalytics.cycleOptimization||t.learning.personalizedRecommendations)}}var oe=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});class Xn{constructor(t){this.facilityId=t}saveToUnifiedTable(t){return oe(this,null,function*(){try{const{error:s}=yield P.from("ai_settings").upsert({facility_id:this.facilityId,settings:t,updated_at:new Date().toISOString()},{onConflict:"facility_id"});return s?(console.error("Error saving to unified table:",s),!1):!0}catch(s){return console.error("Error saving to unified table:",s),!1}})}loadFromUnifiedTable(){return oe(this,null,function*(){try{const{data:t,error:s}=yield P.from("ai_settings").select("settings").eq("facility_id",this.facilityId).single();return s?(s.code==="PGRST116"||console.error("Error loading from unified table:",s),null):t==null?void 0:t.settings}catch(t){return console.error("Error loading from unified table:",t),null}})}deleteFromUnifiedTable(){return oe(this,null,function*(){try{const{error:t}=yield P.from("ai_settings").delete().eq("facility_id",this.facilityId);return t?(console.error("Error deleting from unified table:",t),!1):!0}catch(t){return console.error("Error deleting from unified table:",t),!1}})}settingsExist(){return oe(this,null,function*(){try{const{data:t,error:s}=yield P.from("ai_settings").select("facility_id").eq("facility_id",this.facilityId).single();return s?(s.code==="PGRST116"||console.error("Error checking if settings exist:",s),!1):!!t}catch(t){return console.error("Error checking if settings exist:",t),!1}})}getSettingsMetadata(){return oe(this,null,function*(){try{const{data:t,error:s}=yield P.from("ai_settings").select("updated_at, ai_version, created_at").eq("facility_id",this.facilityId).single();return s?(s.code==="PGRST116"||console.error("Error getting settings metadata:",s),null):{updated_at:(t==null?void 0:t.updated_at)||null,ai_version:(t==null?void 0:t.ai_version)||null,created_at:(t==null?void 0:t.created_at)||null}}catch(t){return console.error("Error getting settings metadata:",t),null}})}backupSettings(t){return oe(this,null,function*(){try{const{error:s}=yield P.from("ai_settings_backup").insert({facility_id:this.facilityId,settings:t,backup_date:new Date().toISOString(),ai_version:t.aiVersion});return s?(console.error("Error backing up settings:",s),!1):!0}catch(s){return console.error("Error backing up settings:",s),!1}})}restoreSettings(t){return oe(this,null,function*(){try{let s=P.from("ai_settings_backup").select("settings").eq("facility_id",this.facilityId).order("backup_date",{ascending:!1});t&&(s=s.eq("backup_date",t));const{data:a,error:n}=yield s.limit(1).single();return n?(n.code==="PGRST116"||console.error("Error restoring settings:",n),null):a==null?void 0:a.settings}catch(s){return console.error("Error restoring settings:",s),null}})}getAvailableBackups(){return oe(this,null,function*(){try{const{data:t,error:s}=yield P.from("ai_settings_backup").select("backup_date, ai_version").eq("facility_id",this.facilityId).order("backup_date",{ascending:!1});return s?(console.error("Error getting available backups:",s),[]):t||[]}catch(t){return console.error("Error getting available backups:",t),[]}})}exportSettingsToJson(t){return JSON.stringify(t,null,2)}importSettingsFromJson(t){try{const s=JSON.parse(t);if(!s.aiEnabled||!s.facilityId||!s.aiConfig)throw new Error("Invalid settings format");return s}catch(s){return console.error("Error importing settings from JSON:",s),null}}validateSettingsStructure(t){const s=[];return["aiEnabled","computerVision","predictiveAnalytics","smartWorkflow","qualityAssurance","realTimeMonitoring","analytics","intelligence","performance","privacy","integration","userExperience","environmental","learning","aiConfig","apiKeys","facilityId","aiVersion","updated_at"].forEach(n=>{n in t||s.push(`Missing required property: ${n}`)}),t.computerVision&&typeof t.computerVision!="object"&&s.push("computerVision must be an object"),t.predictiveAnalytics&&typeof t.predictiveAnalytics!="object"&&s.push("predictiveAnalytics must be an object"),t.aiConfig&&typeof t.aiConfig!="object"&&s.push("aiConfig must be an object"),t.aiConfig&&(typeof t.aiConfig.aiConfidenceThreshold!="number"&&s.push("aiConfig.aiConfidenceThreshold must be a number"),typeof t.aiConfig.aiDataRetentionDays!="number"&&s.push("aiConfig.aiDataRetentionDays must be a number")),{isValid:s.length===0,errors:s}}}var Qe=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});class Jn{constructor(t){this.facilityId=t,this.configProvider=new Vn(t),this.modelProvider=new Gn(t),this.apiKeyProvider=new qn(t),this.toggleProvider=new Yn(t),this.performanceProvider=new Zn(t),this.persistenceProvider=new Xn(t)}loadUnifiedSettings(){return Qe(this,null,function*(){return this.modelProvider.loadUnifiedSettings()})}saveUnifiedSettings(t){return Qe(this,null,function*(){const s=yield this.modelProvider.saveUnifiedSettings(t),a=yield this.persistenceProvider.saveToUnifiedTable(t);return s&&a})}applySettings(t){return Qe(this,null,function*(){return this.modelProvider.applySettings(t)})}isFeatureEnabled(t,s){return this.apiKeyProvider.isFeatureEnabled(t,s)}getServiceStatus(){return Qe(this,null,function*(){return this.modelProvider.getServiceStatus()})}}const ei=()=>{const{getCurrentFacilityId:r}=_e(),t=r();if(!t)throw new Error("Facility ID not available");return new Jn(t)},f={HEADER:{TITLE:"AI and Analytics Settings",SUBTITLE:"Configure AI features, analytics, and intelligence settings"},BUTTONS:{RESET:"Reset",SAVE:"Save Settings",SAVING:"Saving..."},MESSAGES:{LOADING:"Loading AI settings...",FACILITY_NOT_AVAILABLE:"Facility not available. Please select a facility first.",FAILED_TO_LOAD:"Failed to load AI settings. Please try refreshing the page.",SAVE_SUCCESS:"AI settings saved and applied successfully!",SAVE_ERROR:"Failed to save AI settings",RESET_SUCCESS:"Settings reset to defaults",RESET_ERROR:"Failed to reset settings"},SECTIONS:{AI_SERVICE_STATUS:"AI Service Status",ENABLE_AI_FEATURES:"Enable AI Features",AI_FEATURES:"AI Features",ANALYTICS_CONFIGURATION:"Analytics Configuration",INTELLIGENCE_SETTINGS:"Intelligence Settings",PERFORMANCE_MONITORING:"Performance Monitoring",DATA_PRIVACY_SECURITY:"Data Privacy & Security",INTEGRATION_SETTINGS:"Integration Settings",USER_EXPERIENCE:"User Experience"},FORM_GROUPS:{COMPUTER_VISION:"Computer Vision",PREDICTIVE_ANALYTICS:"Predictive Analytics",SMART_WORKFLOW:"Smart Workflow",DATA_COLLECTION:"Data Collection",REPORTING_EXPORT:"Reporting & Export",RISK_ALERTS:"Risk & Alerts",AI_INSIGHTS:"AI Insights",QUALITY_METRICS:"Quality Metrics",OPTIMIZATION:"Optimization",PRIVACY_CONTROLS:"Privacy Controls",SECURITY_FEATURES:"Security Features",EXTERNAL_SERVICES:"External Services",SYSTEM_HEALTH:"System Health",AI_ASSISTANCE:"AI Assistance",INTERFACE_HELP:"Interface & Help"},TOGGLE_LABELS:{TOOL_CONDITION_ASSESSMENT:"Tool Condition Assessment",BARCODE_QUALITY_DETECTION:"Barcode Quality Detection",DAMAGE_DETECTION:"Damage Detection",CYCLE_OPTIMIZATION:"Cycle Optimization",FAILURE_PREDICTION:"Failure Prediction",EFFICIENCY_OPTIMIZATION:"Efficiency Optimization",INTELLIGENT_WORKFLOW_SELECTION:"Intelligent Workflow Selection",AUTOMATED_PROBLEM_DETECTION:"Automated Problem Detection",DATA_COLLECTION:"Data Collection",REAL_TIME_UPDATES:"Real-time Updates",HISTORICAL_DATA_RETENTION:"Historical Data Retention",EXPORT_CAPABILITIES:"Export Capabilities",DASHBOARD_CUSTOMIZATION:"Dashboard Customization",RISK_ASSESSMENT:"Risk Assessment",ALERT_SYSTEM:"Alert System",ESCALATION_RULES:"Escalation Rules",AI_RECOMMENDATIONS:"AI Recommendations",OPTIMIZATION_TIPS:"Optimization Tips",ACCURACY_TRACKING:"Accuracy Tracking",RESPONSE_TIME_MONITORING:"Response Time Monitoring",ERROR_RATE_TRACKING:"Error Rate Tracking",PERFORMANCE_ALERTS:"Performance Alerts",MODEL_HEALTH_MONITORING:"Model Health Monitoring",DATA_ANONYMIZATION:"Data Anonymization",THIRD_PARTY_PERMISSIONS:"Third-party Permissions",COMPLIANCE_MONITORING:"Compliance Monitoring",ENCRYPTION:"Encryption",ACCESS_CONTROL:"Access Control",EXTERNAL_SERVICES:"External Services",API_RATE_LIMITING:"API Rate Limiting",WEBHOOK_ENDPOINTS:"Webhook Endpoints",HEALTH_MONITORING:"Health Monitoring",SYNC_SCHEDULING:"Sync Scheduling",AI_SUGGESTIONS:"AI Suggestions",LEARNING_PATHS:"Learning Paths",PERSONALIZATION:"Personalization",ACCESSIBILITY_FEATURES:"Accessibility Features",SMART_HELP_SYSTEM:"Smart Help System"},DESCRIPTIONS:{MASTER_AI_TOGGLE:"Master toggle for all AI-powered features across the system",TOOL_CONDITION_ASSESSMENT:"AI-powered tool wear and condition analysis",BARCODE_QUALITY_DETECTION:"Automatic barcode readability assessment",DAMAGE_DETECTION:"AI detection of tool damage and defects",CYCLE_OPTIMIZATION:"AI-powered sterilization cycle optimization",FAILURE_PREDICTION:"Predictive maintenance and failure alerts",EFFICIENCY_OPTIMIZATION:"AI-driven workflow efficiency improvements",INTELLIGENT_WORKFLOW_SELECTION:"AI-powered workflow recommendations",AUTOMATED_PROBLEM_DETECTION:"AI detection of workflow issues",DATA_COLLECTION:"Enable comprehensive data collection",REAL_TIME_UPDATES:"Live analytics and dashboard updates",HISTORICAL_DATA_RETENTION:"Long-term data storage and analysis",EXPORT_CAPABILITIES:"PDF, CSV, and Excel export options",DASHBOARD_CUSTOMIZATION:"Customizable analytics dashboards",RISK_ASSESSMENT:"AI-powered risk analysis and scoring",ALERT_SYSTEM:"Smart notification and alert system",ESCALATION_RULES:"Automatic alert escalation based on priority",AI_RECOMMENDATIONS:"Intelligent recommendations and suggestions",OPTIMIZATION_TIPS:"AI-generated optimization suggestions",ACCURACY_TRACKING:"Monitor AI prediction accuracy",RESPONSE_TIME_MONITORING:"Track AI response times and performance",ERROR_RATE_TRACKING:"Monitor and track error rates",PERFORMANCE_ALERTS:"Alerts for performance issues",MODEL_HEALTH_MONITORING:"AI model performance and health tracking",DATA_ANONYMIZATION:"Automatically anonymize sensitive data",THIRD_PARTY_PERMISSIONS:"Control third-party AI service access",COMPLIANCE_MONITORING:"Monitor regulatory compliance",ENCRYPTION:"End-to-end data encryption",ACCESS_CONTROL:"Role-based access control for AI features",EXTERNAL_SERVICES:"Connect to external AI and analytics services",API_RATE_LIMITING:"Control API usage and rate limits",WEBHOOK_ENDPOINTS:"Enable webhook notifications and integrations",HEALTH_MONITORING:"Monitor integration system health",SYNC_SCHEDULING:"Automated data synchronization",AI_SUGGESTIONS:"Contextual AI-powered suggestions",LEARNING_PATHS:"Personalized AI learning recommendations",PERSONALIZATION:"AI-driven interface personalization",ACCESSIBILITY_FEATURES:"AI-powered accessibility enhancements",SMART_HELP_SYSTEM:"AI-powered contextual help and guidance"},STATUS:{ACTIVE:"Available",INACTIVE:"In Use"}},js={MESSAGE_DISPLAY:5e3,RESET_MESSAGE_DISPLAY:3e3},R=({id:r,checked:t,onChange:s,label:a,description:n,disabled:o=!1})=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:a}),n&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n})]}),e.jsxs("label",{htmlFor:r,className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{id:r,type:"checkbox",className:"sr-only peer",checked:t,onChange:l=>s(l.target.checked),disabled:o}),e.jsx("div",{className:`w-11 h-6 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all ${t?"bg-[#4ECDC4] after:translate-x-full":"bg-gray-200"} ${o?"opacity-50 cursor-not-allowed":"cursor-pointer"}`}),e.jsx("span",{className:"sr-only",children:a})]})]}),K=({title:r,children:t})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 border-b border-gray-200 pb-2",children:r}),e.jsx("div",{className:"space-y-4",children:t})]}),ti=({settings:r,updateMasterAI:t,updateComputerVision:s,updatePredictiveAnalytics:a,updateSmartWorkflow:n})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:f.SECTIONS.ENABLE_AI_FEATURES}),e.jsx("p",{className:"text-sm text-gray-500",children:f.DESCRIPTIONS.MASTER_AI_TOGGLE})]}),e.jsx(R,{id:"aiEnabled",checked:r.aiEnabled,onChange:t,label:""})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(b,{path:ia,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:f.SECTIONS.AI_FEATURES})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:f.FORM_GROUPS.COMPUTER_VISION,children:[e.jsx(R,{id:"toolConditionAssessment",checked:r.computerVision.toolConditionAssessment,onChange:o=>s("toolConditionAssessment",o),label:f.TOGGLE_LABELS.TOOL_CONDITION_ASSESSMENT,description:f.DESCRIPTIONS.TOOL_CONDITION_ASSESSMENT,disabled:!r.aiEnabled}),e.jsx(R,{id:"barcodeQualityDetection",checked:r.computerVision.barcodeQualityDetection,onChange:o=>s("barcodeQualityDetection",o),label:f.TOGGLE_LABELS.BARCODE_QUALITY_DETECTION,description:f.DESCRIPTIONS.BARCODE_QUALITY_DETECTION,disabled:!r.aiEnabled}),e.jsx(R,{id:"damageDetection",checked:r.computerVision.damageDetection,onChange:o=>s("damageDetection",o),label:f.TOGGLE_LABELS.DAMAGE_DETECTION,description:f.DESCRIPTIONS.DAMAGE_DETECTION,disabled:!r.aiEnabled})]}),e.jsxs(K,{title:f.FORM_GROUPS.PREDICTIVE_ANALYTICS,children:[e.jsx(R,{id:"cycleOptimization",checked:r.predictiveAnalytics.cycleOptimization,onChange:o=>a("cycleOptimization",o),label:f.TOGGLE_LABELS.CYCLE_OPTIMIZATION,description:f.DESCRIPTIONS.CYCLE_OPTIMIZATION,disabled:!r.aiEnabled}),e.jsx(R,{id:"failurePrediction",checked:r.predictiveAnalytics.failurePrediction,onChange:o=>a("failurePrediction",o),label:f.TOGGLE_LABELS.FAILURE_PREDICTION,description:f.DESCRIPTIONS.FAILURE_PREDICTION,disabled:!r.aiEnabled}),e.jsx(R,{id:"efficiencyOptimization",checked:r.predictiveAnalytics.efficiencyOptimization,onChange:o=>a("efficiencyOptimization",o),label:f.TOGGLE_LABELS.EFFICIENCY_OPTIMIZATION,description:f.DESCRIPTIONS.EFFICIENCY_OPTIMIZATION,disabled:!r.aiEnabled})]}),e.jsxs(K,{title:f.FORM_GROUPS.SMART_WORKFLOW,children:[e.jsx(R,{id:"intelligentWorkflowSelection",checked:r.smartWorkflow.intelligentWorkflowSelection,onChange:o=>n("intelligentWorkflowSelection",o),label:f.TOGGLE_LABELS.INTELLIGENT_WORKFLOW_SELECTION,description:f.DESCRIPTIONS.INTELLIGENT_WORKFLOW_SELECTION,disabled:!r.aiEnabled}),e.jsx(R,{id:"automatedProblemDetection",checked:r.smartWorkflow.automatedProblemDetection,onChange:o=>n("automatedProblemDetection",o),label:f.TOGGLE_LABELS.AUTOMATED_PROBLEM_DETECTION,description:f.DESCRIPTIONS.AUTOMATED_PROBLEM_DETECTION,disabled:!r.aiEnabled})]})]})]})})]}),si=({settings:r,updateAnalytics:t})=>e.jsxs(K,{title:f.FORM_GROUPS.REPORTING_EXPORT,children:[e.jsx(R,{id:"exportCapabilities",checked:r.analytics.exportCapabilities,onChange:s=>t("exportCapabilities",s),label:f.TOGGLE_LABELS.EXPORT_CAPABILITIES,description:f.DESCRIPTIONS.EXPORT_CAPABILITIES,disabled:!r.aiEnabled}),e.jsx(R,{id:"dashboardCustomization",checked:r.analytics.dashboardCustomization,onChange:s=>t("dashboardCustomization",s),label:f.TOGGLE_LABELS.DASHBOARD_CUSTOMIZATION,description:f.DESCRIPTIONS.DASHBOARD_CUSTOMIZATION,disabled:!r.aiEnabled})]}),ri=({settings:r,updateAnalytics:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(b,{path:$e,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:f.SECTIONS.ANALYTICS_CONFIGURATION})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:f.FORM_GROUPS.DATA_COLLECTION,children:[e.jsx(R,{id:"dataCollection",checked:r.analytics.dataCollection,onChange:s=>t("dataCollection",s),label:f.TOGGLE_LABELS.DATA_COLLECTION,description:f.DESCRIPTIONS.DATA_COLLECTION,disabled:!r.aiEnabled}),e.jsx(R,{id:"realTimeUpdates",checked:r.analytics.realTimeUpdates,onChange:s=>t("realTimeUpdates",s),label:f.TOGGLE_LABELS.REAL_TIME_UPDATES,description:f.DESCRIPTIONS.REAL_TIME_UPDATES,disabled:!r.aiEnabled}),e.jsx(R,{id:"historicalDataRetention",checked:r.analytics.historicalDataRetention,onChange:s=>t("historicalDataRetention",s),label:f.TOGGLE_LABELS.HISTORICAL_DATA_RETENTION,description:f.DESCRIPTIONS.HISTORICAL_DATA_RETENTION,disabled:!r.aiEnabled})]}),e.jsx(si,{settings:r,updateAnalytics:t})]})]}),ai=({settings:r,updatePerformance:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(b,{path:la,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:f.SECTIONS.PERFORMANCE_MONITORING})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:f.FORM_GROUPS.QUALITY_METRICS,children:[e.jsx(R,{id:"accuracyTracking",checked:r.performance.accuracyTracking,onChange:s=>t("accuracyTracking",s),label:f.TOGGLE_LABELS.ACCURACY_TRACKING,description:f.DESCRIPTIONS.ACCURACY_TRACKING,disabled:!r.aiEnabled}),e.jsx(R,{id:"responseTimeMonitoring",checked:r.performance.responseTimeMonitoring,onChange:s=>t("responseTimeMonitoring",s),label:f.TOGGLE_LABELS.RESPONSE_TIME_MONITORING,description:f.DESCRIPTIONS.RESPONSE_TIME_MONITORING,disabled:!r.aiEnabled}),e.jsx(R,{id:"errorRateTracking",checked:r.performance.errorRateTracking,onChange:s=>t("errorRateTracking",s),label:f.TOGGLE_LABELS.ERROR_RATE_TRACKING,description:f.DESCRIPTIONS.ERROR_RATE_TRACKING,disabled:!r.aiEnabled})]}),e.jsxs(K,{title:f.FORM_GROUPS.OPTIMIZATION,children:[e.jsx(R,{id:"performanceAlerts",checked:r.performance.performanceAlerts,onChange:s=>t("performanceAlerts",s),label:f.TOGGLE_LABELS.PERFORMANCE_ALERTS,description:f.DESCRIPTIONS.PERFORMANCE_ALERTS,disabled:!r.aiEnabled}),e.jsx(R,{id:"modelHealthMonitoring",checked:r.performance.modelHealthMonitoring,onChange:s=>t("modelHealthMonitoring",s),label:f.TOGGLE_LABELS.MODEL_HEALTH_MONITORING,description:f.DESCRIPTIONS.MODEL_HEALTH_MONITORING,disabled:!r.aiEnabled})]})]})]}),ni=({settings:r,updatePrivacy:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(b,{path:Dr,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:f.SECTIONS.DATA_PRIVACY_SECURITY})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:f.FORM_GROUPS.PRIVACY_CONTROLS,children:[e.jsx(R,{id:"dataAnonymization",checked:r.privacy.dataAnonymization,onChange:s=>t("dataAnonymization",s),label:f.TOGGLE_LABELS.DATA_ANONYMIZATION,description:f.DESCRIPTIONS.DATA_ANONYMIZATION,disabled:!r.aiEnabled}),e.jsx(R,{id:"thirdPartyPermissions",checked:r.privacy.thirdPartyPermissions,onChange:s=>t("thirdPartyPermissions",s),label:f.TOGGLE_LABELS.THIRD_PARTY_PERMISSIONS,description:f.DESCRIPTIONS.THIRD_PARTY_PERMISSIONS,disabled:!r.aiEnabled}),e.jsx(R,{id:"complianceMonitoring",checked:r.privacy.complianceMonitoring,onChange:s=>t("complianceMonitoring",s),label:f.TOGGLE_LABELS.COMPLIANCE_MONITORING,description:f.DESCRIPTIONS.COMPLIANCE_MONITORING,disabled:!r.aiEnabled})]}),e.jsxs(K,{title:f.FORM_GROUPS.SECURITY_FEATURES,children:[e.jsx(R,{id:"encryption",checked:r.privacy.encryption,onChange:s=>t("encryption",s),label:f.TOGGLE_LABELS.ENCRYPTION,description:f.DESCRIPTIONS.ENCRYPTION,disabled:!r.aiEnabled}),e.jsx(R,{id:"accessControl",checked:r.privacy.accessControl,onChange:s=>t("accessControl",s),label:f.TOGGLE_LABELS.ACCESS_CONTROL,description:f.DESCRIPTIONS.ACCESS_CONTROL,disabled:!r.aiEnabled})]})]})]}),ii=({settings:r,updateIntegration:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(b,{path:oa,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:f.SECTIONS.INTEGRATION_SETTINGS})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:f.FORM_GROUPS.EXTERNAL_SERVICES,children:[e.jsx(R,{id:"externalServices",checked:r.integration.externalServices,onChange:s=>t("externalServices",s),label:f.TOGGLE_LABELS.EXTERNAL_SERVICES,description:f.DESCRIPTIONS.EXTERNAL_SERVICES,disabled:!r.aiEnabled}),e.jsx(R,{id:"apiRateLimiting",checked:r.integration.apiRateLimiting,onChange:s=>t("apiRateLimiting",s),label:f.TOGGLE_LABELS.API_RATE_LIMITING,description:f.DESCRIPTIONS.API_RATE_LIMITING,disabled:!r.aiEnabled}),e.jsx(R,{id:"webhookEndpoints",checked:r.integration.webhookEndpoints,onChange:s=>t("webhookEndpoints",s),label:f.TOGGLE_LABELS.WEBHOOK_ENDPOINTS,description:f.DESCRIPTIONS.WEBHOOK_ENDPOINTS,disabled:!r.aiEnabled})]}),e.jsxs(K,{title:f.FORM_GROUPS.SYSTEM_HEALTH,children:[e.jsx(R,{id:"healthMonitoring",checked:r.integration.healthMonitoring,onChange:s=>t("healthMonitoring",s),label:f.TOGGLE_LABELS.HEALTH_MONITORING,description:f.DESCRIPTIONS.HEALTH_MONITORING,disabled:!r.aiEnabled}),e.jsx(R,{id:"syncScheduling",checked:r.integration.syncScheduling,onChange:s=>t("syncScheduling",s),label:f.TOGGLE_LABELS.SYNC_SCHEDULING,description:f.DESCRIPTIONS.SYNC_SCHEDULING,disabled:!r.aiEnabled})]})]})]}),li=({serviceStatus:r})=>e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-800 mb-3",children:f.SECTIONS.AI_SERVICE_STATUS}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(r).map(([t,s])=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{path:s?Se:ne,size:1,className:s?"text-green-600":"text-red-500"}),e.jsx("span",{className:"text-sm capitalize",children:t}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${s?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s?f.STATUS.ACTIVE:f.STATUS.INACTIVE})]},t))})]}),oi=({settings:r,updateUserExperience:t})=>e.jsxs(K,{title:f.FORM_GROUPS.INTERFACE_HELP,children:[e.jsx(R,{id:"accessibility",checked:r.userExperience.accessibility,onChange:s=>t("accessibility",s),label:f.TOGGLE_LABELS.ACCESSIBILITY_FEATURES,description:f.DESCRIPTIONS.ACCESSIBILITY_FEATURES,disabled:!r.aiEnabled}),e.jsx(R,{id:"helpSystem",checked:r.userExperience.helpSystem,onChange:s=>t("helpSystem",s),label:f.TOGGLE_LABELS.SMART_HELP_SYSTEM,description:f.DESCRIPTIONS.SMART_HELP_SYSTEM,disabled:!r.aiEnabled})]}),ci=({settings:r,updateUserExperience:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(b,{path:Or,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:f.SECTIONS.USER_EXPERIENCE})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:f.FORM_GROUPS.AI_ASSISTANCE,children:[e.jsx(R,{id:"aiSuggestions",checked:r.userExperience.aiSuggestions,onChange:s=>t("aiSuggestions",s),label:f.TOGGLE_LABELS.AI_SUGGESTIONS,description:f.DESCRIPTIONS.AI_SUGGESTIONS,disabled:!r.aiEnabled}),e.jsx(R,{id:"learningPaths",checked:r.userExperience.learningPaths,onChange:s=>t("learningPaths",s),label:f.TOGGLE_LABELS.LEARNING_PATHS,description:f.DESCRIPTIONS.LEARNING_PATHS,disabled:!r.aiEnabled}),e.jsx(R,{id:"personalization",checked:r.userExperience.personalization,onChange:s=>t("personalization",s),label:f.TOGGLE_LABELS.PERSONALIZATION,description:f.DESCRIPTIONS.PERSONALIZATION,disabled:!r.aiEnabled})]}),e.jsx(oi,{settings:r,updateUserExperience:t})]})]}),di=({isSaving:r,onResetToDefaults:t,onSaveSettings:s})=>e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{path:we,size:1.5,className:"text-[#4ECDC4]"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-semibold text-gray-800",children:f.HEADER.TITLE}),e.jsx("p",{className:"text-sm text-gray-600",children:f.HEADER.SUBTITLE})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(b,{path:It,size:1}),f.BUTTONS.RESET]}),e.jsxs("button",{onClick:s,disabled:r,className:"flex items-center gap-2 px-4 py-2 text-sm text-white bg-[#4ECDC4] hover:bg-[#3db8b0] rounded-lg disabled:opacity-50",children:[e.jsx(b,{path:r?It:Ve,size:1,className:r?"animate-spin":""}),r?f.BUTTONS.SAVING:f.BUTTONS.SAVE]})]})]}),ui=({settings:r,updateIntelligence:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(b,{path:we,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:f.SECTIONS.INTELLIGENCE_SETTINGS})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:f.FORM_GROUPS.RISK_ALERTS,children:[e.jsx(R,{id:"riskAssessment",checked:r.intelligence.riskAssessment,onChange:s=>t("riskAssessment",s),label:f.TOGGLE_LABELS.RISK_ASSESSMENT,description:f.DESCRIPTIONS.RISK_ASSESSMENT,disabled:!r.aiEnabled}),e.jsx(R,{id:"alertSystem",checked:r.intelligence.alertSystem,onChange:s=>t("alertSystem",s),label:f.TOGGLE_LABELS.ALERT_SYSTEM,description:f.DESCRIPTIONS.ALERT_SYSTEM,disabled:!r.aiEnabled}),e.jsx(R,{id:"escalationRules",checked:r.intelligence.escalationRules,onChange:s=>t("escalationRules",s),label:f.TOGGLE_LABELS.ESCALATION_RULES,description:f.DESCRIPTIONS.ESCALATION_RULES,disabled:!r.aiEnabled})]}),e.jsxs(K,{title:f.FORM_GROUPS.AI_INSIGHTS,children:[e.jsx(R,{id:"aiRecommendations",checked:r.intelligence.aiRecommendations,onChange:s=>t("aiRecommendations",s),label:f.TOGGLE_LABELS.AI_RECOMMENDATIONS,description:f.DESCRIPTIONS.AI_RECOMMENDATIONS,disabled:!r.aiEnabled}),e.jsx(R,{id:"optimizationTips",checked:r.intelligence.optimizationTips,onChange:s=>t("optimizationTips",s),label:f.TOGGLE_LABELS.OPTIMIZATION_TIPS,description:f.DESCRIPTIONS.OPTIMIZATION_TIPS,disabled:!r.aiEnabled})]})]})]});var mi=Object.defineProperty,pi=Object.defineProperties,hi=Object.getOwnPropertyDescriptors,Ns=Object.getOwnPropertySymbols,gi=Object.prototype.hasOwnProperty,xi=Object.prototype.propertyIsEnumerable,_s=(r,t,s)=>t in r?mi(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Y=(r,t)=>{for(var s in t||(t={}))gi.call(t,s)&&_s(r,s,t[s]);if(Ns)for(var s of Ns(t))xi.call(t,s)&&_s(r,s,t[s]);return r},W=(r,t)=>pi(r,hi(t)),Ze=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const fi=()=>{const{getCurrentFacilityId:r}=_e(),t=r(),s=ei(),[a,n]=p.useState(null),[o,l]=p.useState(!1),[c,i]=p.useState(!1),[d,u]=p.useState(null),[m,x]=p.useState(null),v=p.useCallback(()=>Ze(null,null,function*(){if(s){l(!0);try{const E=yield s.loadUnifiedSettings();n(E)}catch(E){console.error("Failed to load AI settings:",E),u({type:"error",text:f.MESSAGES.SAVE_ERROR})}finally{l(!1)}}}),[s]),h=p.useCallback(()=>Ze(null,null,function*(){if(s)try{const E=yield s.getServiceStatus();x(E)}catch(E){console.error("Failed to load service status:",E)}}),[s]);p.useEffect(()=>{s&&(v(),h())},[s,v,h]);const g=()=>Ze(null,null,function*(){if(!(!s||!a)){i(!0);try{(yield s.saveUnifiedSettings(a))?(yield s.applySettings(a),u({type:"success",text:f.MESSAGES.SAVE_SUCCESS}),setTimeout(()=>u(null),js.MESSAGE_DISPLAY),yield h()):u({type:"error",text:f.MESSAGES.SAVE_ERROR})}catch(E){console.error("Failed to save AI settings:",E),u({type:"error",text:f.MESSAGES.SAVE_ERROR})}finally{i(!1)}}}),j=()=>Ze(null,null,function*(){if(s)try{const E=yield s.loadUnifiedSettings();n(E),u({type:"success",text:f.MESSAGES.RESET_SUCCESS}),setTimeout(()=>u(null),js.RESET_MESSAGE_DISPLAY)}catch(E){console.error("Failed to reset settings:",E),u({type:"error",text:f.MESSAGES.RESET_ERROR})}}),_=(E,$)=>{a&&n(I=>I?W(Y({},I),{computerVision:W(Y({},I.computerVision),{[E]:$})}):null)},N=(E,$)=>{a&&n(I=>I?W(Y({},I),{predictiveAnalytics:W(Y({},I.predictiveAnalytics),{[E]:$})}):null)},y=(E,$)=>{a&&n(I=>I?W(Y({},I),{smartWorkflow:W(Y({},I.smartWorkflow),{[E]:$})}):null)},D=(E,$)=>{a&&n(I=>I?W(Y({},I),{analytics:W(Y({},I.analytics),{[E]:$})}):null)},L=(E,$)=>{a&&n(I=>I?W(Y({},I),{intelligence:W(Y({},I.intelligence),{[E]:$})}):null)},G=(E,$)=>{a&&n(I=>I?W(Y({},I),{performance:W(Y({},I.performance),{[E]:$})}):null)},B=(E,$)=>{a&&n(I=>I?W(Y({},I),{privacy:W(Y({},I.privacy),{[E]:$})}):null)},M=(E,$)=>{a&&n(I=>I?W(Y({},I),{integration:W(Y({},I.integration),{[E]:$})}):null)},V=(E,$)=>{a&&n(I=>I?W(Y({},I),{userExperience:W(Y({},I.userExperience),{[E]:$})}):null)},H=E=>{a&&n($=>$?W(Y({},$),{aiEnabled:E}):null)};return t?o?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#4ECDC4] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:f.MESSAGES.LOADING})]}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsx(di,{isSaving:c,onResetToDefaults:j,onSaveSettings:g}),m&&e.jsx(li,{serviceStatus:m}),d&&e.jsx("div",{className:`p-4 rounded-lg border ${d.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{path:d.type==="success"?Se:ne,size:1}),d.text]})}),e.jsx(ti,{settings:a,updateMasterAI:H,updateComputerVision:_,updatePredictiveAnalytics:N,updateSmartWorkflow:y}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(ri,{settings:a,updateAnalytics:D}),e.jsx(ui,{settings:a,updateIntelligence:L}),e.jsx(ai,{settings:a,updatePerformance:G}),e.jsx(ni,{settings:a,updatePrivacy:B}),e.jsx(ii,{settings:a,updateIntegration:M}),e.jsx(ci,{settings:a,updateUserExperience:V})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(b,{path:ne,size:2,className:"text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:f.MESSAGES.FAILED_TO_LOAD})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(b,{path:ne,size:2,className:"text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:f.MESSAGES.FACILITY_NOT_AVAILABLE})]})},de={AI_VERSION:"1.0.0",AI_CONFIDENCE_THRESHOLD:.85,AI_DATA_RETENTION_DAYS:90,ENCRYPTED_DATA_TRANSMISSION:!0},mt={COMPUTER_VISION:[{key:"tool_condition_assessment",label:"Tool Condition Assessment",desc:"AI-powered visual inspection of tool wear and damage"},{key:"barcode_quality_detection",label:"Barcode Quality Detection",desc:"Automated barcode readability assessment"},{key:"tool_type_recognition",label:"Tool Type Recognition",desc:"Automatic tool identification from images"},{key:"cleaning_validation",label:"Cleaning Validation",desc:"Visual verification of cleaning effectiveness"}],PREDICTIVE_ANALYTICS:[{key:"cycle_optimization",label:"Cycle Optimization",desc:"AI-driven sterilization cycle parameter optimization"},{key:"failure_prediction",label:"Failure Prediction",desc:"Predictive maintenance and equipment failure alerts"},{key:"efficiency_optimization",label:"Efficiency Optimization",desc:"Process efficiency analysis and recommendations"},{key:"resource_planning",label:"Resource Planning",desc:"Intelligent resource allocation and scheduling"}],SMART_WORKFLOW:[{key:"intelligent_workflow_selection",label:"Intelligent Workflow Selection",desc:"AI-powered workflow recommendation based on tool type and condition"},{key:"automated_problem_detection",label:"Automated Problem Detection",desc:"Real-time issue identification and alerting"},{key:"smart_phase_transitions",label:"Smart Phase Transitions",desc:"Intelligent sterilization phase management"},{key:"batch_optimization",label:"Batch Optimization",desc:"Optimal tool grouping and batch processing"}]},bi=[{value:"unwrapped",label:"Unwrapped (3 min, 132°C)"},{value:"pouches",label:"Pouches (5 min, 132°C)"},{value:"packs",label:"Packs (30 min, 121°C)"},{value:"handpieces",label:"Handpieces (6 min, 132°C)"},{value:"custom",label:"Custom"}],yi=[{value:3,label:"3 months"},{value:6,label:"6 months"},{value:12,label:"1 year (recommended)"},{value:18,label:"18 months"},{value:24,label:"2 years"}],vi=[{value:30,label:"30 days"},{value:60,label:"60 days"},{value:90,label:"90 days (recommended)"},{value:180,label:"180 days"},{value:365,label:"1 year"}],ce={TEMPERATURE:{min:100,max:150},PRESSURE:{min:10,max:30},STERILIZE_TIME:{min:1,max:60},DRY_TIME:{min:10,max:60}},pt={min:.5,max:1,step:.05},Cs=3e3;var Vt=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const ji=r=>Vt(null,null,function*(){try{return yield new rt(r).loadSettings()}catch(t){return console.error("Failed to load AI settings:",t),null}}),Ss=(r,t)=>Vt(null,null,function*(){try{return yield new rt(r).saveSettings(t)}catch(s){return console.error("Failed to save AI settings:",s),!1}}),Ni=r=>Vt(null,null,function*(){try{const t={facility_id:r,ai_enabled:!1,ai_version:de.AI_VERSION,computer_vision_enabled:!1,tool_condition_assessment:!1,barcode_quality_detection:!1,tool_type_recognition:!1,cleaning_validation:!1,predictive_analytics_enabled:!1,cycle_optimization:!1,failure_prediction:!1,efficiency_optimization:!1,resource_planning:!1,smart_workflow_enabled:!1,intelligent_workflow_selection:!1,automated_problem_detection:!1,smart_phase_transitions:!1,batch_optimization:!1,quality_assurance_enabled:!1,biological_indicator_analysis:!1,compliance_monitoring:!1,audit_trail_enhancement:!1,risk_assessment:!1,scanner_intelligence_enabled:!1,multi_format_barcode_support:!1,tool_history_integration:!1,smart_validation:!1,error_prevention:!1,real_time_monitoring_enabled:!1,anomaly_detection:!1,predictive_maintenance:!1,quality_drift_detection:!1,smart_notifications:!1,ai_confidence_threshold:de.AI_CONFIDENCE_THRESHOLD,ai_data_retention_days:de.AI_DATA_RETENTION_DAYS,real_time_processing_enabled:!1,batch_processing_enabled:!1,data_sharing_enabled:!1,local_ai_processing_enabled:!1,encrypted_data_transmission:de.ENCRYPTED_DATA_TRANSMISSION,ai_model_training:!1,auto_optimization_enabled:!1,performance_monitoring:!1,resource_optimization:!1,openai_api_key_encrypted:"",google_vision_api_key_encrypted:"",azure_computer_vision_key_encrypted:""};return yield new rt(r).saveSettings(t)}catch(t){return console.error("Failed to reset AI settings:",t),!1}}),ht=r=>({facility_id:r,ai_enabled:!1,ai_version:de.AI_VERSION,computer_vision_enabled:!1,tool_condition_assessment:!1,barcode_quality_detection:!1,tool_type_recognition:!1,cleaning_validation:!1,predictive_analytics_enabled:!1,cycle_optimization:!1,failure_prediction:!1,efficiency_optimization:!1,resource_planning:!1,smart_workflow_enabled:!1,intelligent_workflow_selection:!1,automated_problem_detection:!1,smart_phase_transitions:!1,batch_optimization:!1,quality_assurance_enabled:!1,biological_indicator_analysis:!1,compliance_monitoring:!1,audit_trail_enhancement:!1,risk_assessment:!1,scanner_intelligence_enabled:!1,multi_format_barcode_support:!1,tool_history_integration:!1,smart_validation:!1,error_prevention:!1,real_time_monitoring_enabled:!1,anomaly_detection:!1,predictive_maintenance:!1,quality_drift_detection:!1,smart_notifications:!1,ai_confidence_threshold:de.AI_CONFIDENCE_THRESHOLD,ai_data_retention_days:de.AI_DATA_RETENTION_DAYS,real_time_processing_enabled:!1,batch_processing_enabled:!1,data_sharing_enabled:!1,local_ai_processing_enabled:!1,encrypted_data_transmission:de.ENCRYPTED_DATA_TRANSMISSION,ai_model_training:!1,auto_optimization_enabled:!1,performance_monitoring:!1,resource_optimization:!1,openai_api_key_encrypted:"",google_vision_api_key_encrypted:"",azure_computer_vision_key_encrypted:""}),fe=(r,t,s,a)=>{console.log("Setting changed:",{setting:r,oldValue:t,newValue:s,facilityId:a,timestamp:new Date().toISOString()})},_i=(r,t)=>{console.log("Save attempt:",{facilityId:t,timestamp:new Date().toISOString(),settingsCount:Object.keys(r).length,aiEnabled:r.ai_enabled})},gt=(r,t,s)=>{console.log("Save result:",{success:r,facilityId:t,timestamp:new Date().toISOString(),error:s||null})},Ci=r=>{console.log("Reset attempt:",{facilityId:r,timestamp:new Date().toISOString()})},xt=(r,t,s)=>{console.log("Reset result:",{success:r,facilityId:t,timestamp:new Date().toISOString(),error:s||null})},Si=(r,t,s)=>{console.log("AI feature toggle:",{feature:r,enabled:t,facilityId:s,timestamp:new Date().toISOString()})},be=(r,t,s)=>{console.log("Cycle settings change:",{cycleType:r,changes:t,facilityId:s,timestamp:new Date().toISOString()})},ws=(r,t,s)=>{console.log("Enforcement toggle:",{type:r,enabled:t,facilityId:s,timestamp:new Date().toISOString()})},Es=(r,t,s)=>{console.log("Receipt settings change:",{setting:r,value:t,facilityId:s,timestamp:new Date().toISOString()})},wi=()=>{const{enforceBI:r,enforceCI:t,toggleEnforceBI:s,toggleEnforceCI:a}=Dt(),[n,o]=p.useState(!1),[l,c]=p.useState(!1),{getCurrentFacilityId:i}=_e();return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Sterilization Enforcement"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"enforceBI",className:"text-sm font-medium",children:"Biological Indicator Management"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable daily BI test requirements and compliance tracking"})]}),e.jsx("button",{onClick:()=>{const d=i();d&&ws("BI",!r,d),s()},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${r?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r?"translate-x-6":"translate-x-1"}`})})]}),r&&e.jsxs("div",{className:"ml-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"BI tests are being enforced"})]}),e.jsxs("button",{onClick:()=>o(!n),className:"text-xs text-blue-600 hover:text-blue-800",children:[n?"Hide":"Show"," BI test history"]}),n&&e.jsxs("div",{className:"p-3 bg-gray-50 rounded-md text-xs text-gray-600",children:[e.jsx("p",{children:"• Last BI test: 2024-01-15 (PASS)"}),e.jsx("p",{children:"• Next required: 2024-01-16"}),e.jsx("p",{children:"• Tests passed this month: 15"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"enforceCI",className:"text-sm font-medium",children:"Chemical Indicator Management"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Require CI strip verification for each sterilization cycle"})]}),e.jsx("button",{onClick:()=>{const d=i();d&&ws("CI",!t,d),a()},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${t?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t?"translate-x-6":"translate-x-1"}`})})]}),t&&e.jsxs("div",{className:"ml-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"CI strips are being enforced"})]}),e.jsxs("button",{onClick:()=>c(!l),className:"text-xs text-blue-600 hover:text-blue-800",children:[l?"Hide":"Show"," CI strip history"]}),l&&e.jsxs("div",{className:"p-3 bg-gray-50 rounded-md text-xs text-gray-600",children:[e.jsx("p",{children:"• CI strips used today: 8"}),e.jsx("p",{children:"• All strips passed verification"}),e.jsx("p",{children:"• Last failure: None in current month"})]})]})]})]})},Ei=()=>{const{cycleSettings:r,defaultCycleType:t,allowCustomCycles:s,setDefaultCycleType:a,setAllowCustomCycles:n,updateCycleSettings:o,resetCycleSettings:l}=Dt(),[c,i]=p.useState(null),{getCurrentFacilityId:d}=_e();return e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Autoclave Cycle Customization"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"defaultCycle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Cycle Type"}),e.jsx("select",{id:"defaultCycle",value:t,onChange:u=>{const m=d();m&&be("defaultCycleType",{cycleType:u.target.value},m),a(u.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",children:bi.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This cycle type will be selected by default for new sterilization runs"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"allowCustomCycles",className:"text-sm font-medium",children:"Allow Custom Cycle Parameters"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable users to modify temperature, pressure, and timing for special cases"})]}),e.jsx("button",{id:"allowCustomCycles",onClick:()=>{const u=d();u&&be("allowCustomCycles",{enabled:!s},u),n(!s)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${s?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Cycle Presets"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(r).map(([u,m])=>e.jsxs("div",{className:"border border-gray-200 rounded-md p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"text-sm font-medium",children:m.name}),u==="custom"&&s&&e.jsx("button",{onClick:()=>i(c===u?null:u),className:"text-xs text-blue-600 hover:text-blue-800",children:c===u?"Save":"Edit"})]}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("p",{children:["Temperature: ",m.temperature,"°C"]}),e.jsxs("p",{children:["Pressure: ",m.pressure," PSI"]}),e.jsxs("p",{children:["Sterilize Time: ",m.sterilizeTime," min"]}),e.jsxs("p",{children:["Dry Time: ",m.dryTime," min"]}),e.jsxs("p",{children:["Total Time: ",m.totalTime," min"]})]}),u==="custom"&&s&&c===u&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customTemperature",className:"text-xs text-gray-500",children:"Temperature (°C)"}),e.jsx("input",{id:"customTemperature",type:"number",value:m.temperature,onChange:x=>{const v=d();v&&be("custom",{temperature:Number(x.target.value)},v),o("custom",{temperature:Number(x.target.value)})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:ce.TEMPERATURE.min,max:ce.TEMPERATURE.max})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customPressure",className:"text-xs text-gray-500",children:"Pressure (PSI)"}),e.jsx("input",{id:"customPressure",type:"number",value:m.pressure,onChange:x=>{const v=d();v&&be("custom",{pressure:Number(x.target.value)},v),o("custom",{pressure:Number(x.target.value)})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:ce.PRESSURE.min,max:ce.PRESSURE.max})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customSterilizeTime",className:"text-xs text-gray-500",children:"Sterilize (min)"}),e.jsx("input",{id:"customSterilizeTime",type:"number",value:m.sterilizeTime,onChange:x=>{const v=d();v&&be("custom",{sterilizeTime:Number(x.target.value)},v),o("custom",{sterilizeTime:Number(x.target.value)})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:ce.STERILIZE_TIME.min,max:ce.STERILIZE_TIME.max})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customDryTime",className:"text-xs text-gray-500",children:"Dry (min)"}),e.jsx("input",{id:"customDryTime",type:"number",value:m.dryTime,onChange:x=>{const v=d();v&&be("custom",{dryTime:Number(x.target.value)},v),o("custom",{dryTime:Number(x.target.value)})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:ce.DRY_TIME.min,max:ce.DRY_TIME.max})]})]})]})]},u))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:l,className:"px-4 py-2 text-sm text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:"Reset to Defaults"})})]})]})},Ti=()=>{const{autoclaveReceiptSettings:r,setAutoclaveHasPrinter:t,setReceiptRetentionMonths:s}=Dt(),{getCurrentFacilityId:a}=_e();return e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Autoclave Receipt Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"autoclaveHasPrinter",className:"text-sm font-medium",children:"Autoclave Has Printer"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable receipt upload functionality for autoclave cycles"})]}),e.jsx("button",{id:"autoclaveHasPrinter",onClick:()=>{const n=a();n&&Es("autoclaveHasPrinter",!r.autoclaveHasPrinter,n),t(!r.autoclaveHasPrinter)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${r.autoclaveHasPrinter?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.autoclaveHasPrinter?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"retentionPeriod",className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Retention Period"}),e.jsx("select",{id:"retentionPeriod",value:r.receiptRetentionMonths,onChange:n=>{const o=a();o&&Es("receiptRetentionMonths",Number(n.target.value),o),s(Number(n.target.value))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",children:yi.map(n=>e.jsx("option",{value:n.value,children:n.label},n.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Receipts will be automatically deleted after this period"})]}),r.autoclaveHasPrinter&&e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-md",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Receipt Management Active"}),e.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[e.jsx("p",{children:"• Users can upload autoclave receipts via camera or file"}),e.jsx("p",{children:"• Receipts are linked to sterilization batch codes"}),e.jsxs("p",{children:["• Automatic cleanup after"," ",r.receiptRetentionMonths," months"]}),e.jsx("p",{children:"• Available for audit and compliance review"})]})]})]})]})};var Ai=Object.defineProperty,Ii=Object.defineProperties,Pi=Object.getOwnPropertyDescriptors,Ts=Object.getOwnPropertySymbols,Oi=Object.prototype.hasOwnProperty,Di=Object.prototype.propertyIsEnumerable,As=(r,t,s)=>t in r?Ai(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Ri=(r,t)=>{for(var s in t||(t={}))Oi.call(t,s)&&As(r,s,t[s]);if(Ts)for(var s of Ts(t))Di.call(t,s)&&As(r,s,t[s]);return r},ki=(r,t)=>Ii(r,Pi(t)),ft=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const Li=()=>{const{getCurrentFacilityId:r}=_e(),[t,s]=p.useState(()=>{const u=r();return ht(u||"")}),[a,n]=p.useState(null),[o,l]=p.useState(!1),c=(u,m)=>{const x=r();x&&Si(u,m,x),s(v=>ki(Ri({},v),{[u]:m}))},i=()=>ft(null,null,function*(){try{l(!0);const u=r();if(!u){n({type:"error",text:"User facility not found"});return}_i(t,u),(yield Ss(u,t))?(gt(!0,u),n({type:"success",text:"AI settings saved successfully!"}),setTimeout(()=>n(null),Cs)):(gt(!1,u,"Save operation failed"),n({type:"error",text:"Failed to save AI settings"}))}catch(u){gt(!1,r()||"",u instanceof Error?u.message:"Unknown error"),n({type:"error",text:"Failed to save AI settings"})}finally{l(!1)}}),d=()=>ft(null,null,function*(){try{l(!0);const u=r();if(!u){n({type:"error",text:"User facility not found"});return}Ci(u);const m=ht(u);s(m),(yield Ni(u))?(xt(!0,u),n({type:"success",text:"AI settings reset to defaults"}),setTimeout(()=>n(null),Cs)):(xt(!1,u,"Reset operation failed"),n({type:"error",text:"Failed to reset AI settings"}))}catch(u){xt(!1,r()||"",u instanceof Error?u.message:"Unknown error"),n({type:"error",text:"Failed to reset AI settings"})}finally{l(!1)}});return p.useEffect(()=>{ft(null,null,function*(){const m=r();if(m)try{const x=yield ji(m);if(x)s(x);else{const v=ht(m);s(v),yield Ss(m,v)}}catch(x){console.error("Failed to load AI settings:",x)}})},[r]),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"AI-Powered Sterilization Features"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure intelligent automation and machine learning capabilities"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:d,className:"px-3 py-2 text-sm text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:"Reset"}),e.jsxs("button",{onClick:i,disabled:o,className:"px-4 py-2 text-sm bg-[#4ECDC4] text-white rounded-md hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] disabled:opacity-50",children:[e.jsx(b,{path:Ve,size:.8,className:"inline mr-1"}),"Save AI Settings"]})]})]}),a&&e.jsx("div",{className:`p-4 rounded-lg border mb-6 ${a.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{path:a.type==="success"?Se:ne,size:1,className:"text-current"}),a.text]})}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(b,{path:we,size:1.5,className:"text-purple-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-800",children:"Master AI Control"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Enable or disable all AI features globally"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiEnabledToggle",className:"text-sm font-medium text-purple-800",children:"Enable AI Features"}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Master switch for all sterilization AI capabilities"})]}),e.jsx("button",{id:"aiEnabledToggle",onClick:()=>{const u=r();u&&fe("ai_enabled",t.ai_enabled,!t.ai_enabled,u),c("ai_enabled",!t.ai_enabled)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 ${t.ai_enabled?"bg-purple-600":"bg-gray-200"}`,"aria-label":`${t.ai_enabled?"Disable":"Enable"} AI Features`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t.ai_enabled?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(b,{path:J,size:1.2,className:"text-blue-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Computer Vision"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:mt.COMPUTER_VISION.map(({key:u,label:m,desc:x})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`${u}Toggle`,className:"text-sm font-medium text-gray-700",children:m}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:x})]}),e.jsx("button",{id:`${u}Toggle`,onClick:()=>{const v=r();v&&fe(u,t[u],!t[u],v),c(u,!t[u])},disabled:!t.ai_enabled,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 ${t[u]?"bg-blue-600":"bg-gray-200"} ${t.ai_enabled?"":"opacity-50 cursor-not-allowed"}`,"aria-label":`${t[u]?"Disable":"Enable"} ${m}`,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${t[u]?"translate-x-5":"translate-x-1"}`})})]},u))})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(b,{path:$t,size:1.2,className:"text-green-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Predictive Analytics"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:mt.PREDICTIVE_ANALYTICS.map(({key:u,label:m,desc:x})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`${u}Toggle`,className:"text-sm font-medium text-gray-700",children:m}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:x})]}),e.jsx("button",{id:`${u}Toggle`,onClick:()=>{const v=r();v&&fe(u,t[u],!t[u],v),c(u,!t[u])},disabled:!t.ai_enabled,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1 ${t[u]?"bg-green-600":"bg-gray-200"} ${t.ai_enabled?"":"opacity-50 cursor-not-allowed"}`,"aria-label":`${t[u]?"Disable":"Enable"} ${m}`,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${t[u]?"translate-x-5":"translate-x-1"}`})})]},u))})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(b,{path:J,size:1.2,className:"text-orange-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Smart Workflow Automation"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:mt.SMART_WORKFLOW.map(({key:u,label:m,desc:x})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`${u}Toggle`,className:"text-sm font-medium text-gray-700",children:m}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:x})]}),e.jsx("button",{id:`${u}Toggle`,onClick:()=>{const v=r();v&&fe(u,t[u],!t[u],v),c(u,!t[u])},disabled:!t.ai_enabled,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-1 ${t[u]?"bg-orange-600":"bg-gray-200"} ${t.ai_enabled?"":"opacity-50 cursor-not-allowed"}`,"aria-label":`${t[u]?"Disable":"Enable"} ${m}`,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${t[u]?"translate-x-5":"translate-x-1"}`})})]},u))})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(b,{path:he,size:1.2,className:"text-purple-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"AI Configuration"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiConfidenceThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Confidence Threshold"}),e.jsx("input",{id:"aiConfidenceThreshold",type:"range",min:pt.min,max:pt.max,step:pt.step,value:t.ai_confidence_threshold,onChange:u=>{const m=r();m&&fe("ai_confidence_threshold",t.ai_confidence_threshold,parseFloat(u.target.value),m),c("ai_confidence_threshold",parseFloat(u.target.value))},disabled:!t.ai_enabled,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer disabled:opacity-50"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"50%"}),e.jsxs("span",{children:[Math.round(t.ai_confidence_threshold*100),"%"]}),e.jsx("span",{children:"100%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiDataRetentionDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Retention (Days)"}),e.jsx("select",{id:"aiDataRetentionDays",value:t.ai_data_retention_days,onChange:u=>{const m=r();m&&fe("ai_data_retention_days",t.ai_data_retention_days,parseInt(u.target.value),m),c("ai_data_retention_days",parseInt(u.target.value))},disabled:!t.ai_enabled,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] disabled:opacity-50",children:vi.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))})]})]})})]})]})]})};function Mi(){return e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsx(wi,{}),e.jsx(Ei,{}),e.jsx(Ti,{}),e.jsx(Li,{})]})}const $i=()=>{const r=Hr(),[t,s]=p.useState("builder"),a=()=>{r("/content-builder")},n=[{id:"builder",label:"Content Builder",icon:Ne},{id:"publishing",label:"Publishing",icon:ca},{id:"workflow",label:"Workflow",icon:Ne},{id:"ai",label:"AI Suggestions",icon:Le},{id:"media",label:"Media Settings",icon:da}],o=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Content Builder"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Launch Content Builder"}),e.jsxs("button",{onClick:a,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4] transition-colors",children:[e.jsx(b,{path:pe,size:1,className:"mr-2"}),"Launch Builder"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Enable content creation"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"enable-content-creation",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Enable content creation"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Auto-save drafts"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"auto-save-drafts",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Auto-save drafts"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Recent Activity"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Course published"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Sterilization Safety Protocols"})]}),e.jsx("span",{className:"text-xs text-gray-500",children:"2h ago"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Draft saved"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Inventory Management Guide"})]}),e.jsx("span",{className:"text-xs text-gray-500",children:"1d ago"})]})]})]})]}),l=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Content Workflow"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Enable draft review workflow"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"enable-draft-review",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Enable draft review workflow"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Auto-save drafts every 5 minutes"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"auto-save-drafts-5min",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Auto-save drafts every 5 minutes"})]})]})]})]})}),c=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Publishing Workflow"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Require approval before publishing"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"require-approval",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Require approval before publishing"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Auto-publish to Library"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"auto-publish-library",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all"}),e.jsx("span",{className:"sr-only",children:"Auto-publish to Library"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Notify reviewers on submission"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"notify-reviewers",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Notify reviewers on submission"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Approval Roles"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Content Manager"}),e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Primary"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Department Head"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Secondary"})]})]})]})]}),i=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"AI Content Suggestions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Enable AI suggestions"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"enable-ai-suggestions",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Enable AI suggestions"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Suggest based on content gaps"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"suggest-content-gaps",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Suggest based on content gaps"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Analyze user search patterns"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"analyze-search-patterns",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Analyze user search patterns"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"AI Configuration"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confidence-threshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Suggestion Confidence Threshold"}),e.jsxs("select",{id:"confidence-threshold",defaultValue:"0.8",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"0.7",children:"70% - Balanced"}),e.jsx("option",{value:"0.8",children:"80% - Recommended"}),e.jsx("option",{value:"0.9",children:"90% - High Quality"})]})]})})]})]}),d=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Media Upload Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Max file size per upload"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"50 MB"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Auto-compress images"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"auto-compress-images",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Auto-compress images"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Generate thumbnails"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"generate-thumbnails",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Generate thumbnails"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Supported File Types"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-green-800 mb-2",children:"Images"}),e.jsx("p",{className:"text-xs text-green-700",children:"JPEG, PNG, GIF, WebP, HEIC"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-800 mb-2",children:"Videos"}),e.jsx("p",{className:"text-xs text-blue-700",children:"MP4, WebM, MOV, AVI"})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-purple-800 mb-2",children:"Audio"}),e.jsx("p",{className:"text-xs text-purple-700",children:"MP3, WAV, AAC, OGG"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-800 mb-2",children:"Documents"}),e.jsx("p",{className:"text-xs text-gray-700",children:"PDF, Word, PowerPoint, Excel"})]})]})]})]}),u=()=>{switch(t){case"builder":return o();case"publishing":return c();case"workflow":return l();case"ai":return i();case"media":return d();default:return o()}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Content Management Settings"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure content publishing, workflows, AI suggestions, and media settings"})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:n.map(m=>e.jsxs("button",{onClick:()=>s(m.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${t===m.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(b,{path:m.icon,size:1}),e.jsx("span",{children:m.label})]},m.id))})})}),e.jsx("div",{className:"py-4",children:u()})]})},U=({id:r,checked:t,onChange:s,label:a,description:n})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm text-gray-700",children:a}),n&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n})]}),e.jsxs("label",{htmlFor:r,className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:r,className:"sr-only peer",checked:t,onChange:o=>s(o.target.checked)}),e.jsx("div",{className:`w-11 h-6 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all ${t?"bg-[#4ECDC4] after:translate-x-full":"bg-gray-200"}`}),e.jsx("span",{className:"sr-only",children:a})]})]}),ie=({title:r,children:t})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:r}),e.jsx("div",{className:"space-y-3",children:t})]});var Fi=Object.defineProperty,zi=Object.defineProperties,Vi=Object.getOwnPropertyDescriptors,Is=Object.getOwnPropertySymbols,Gi=Object.prototype.hasOwnProperty,qi=Object.prototype.propertyIsEnumerable,Ps=(r,t,s)=>t in r?Fi(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Ui=(r,t)=>{for(var s in t||(t={}))Gi.call(t,s)&&Ps(r,s,t[s]);if(Is)for(var s of Is(t))qi.call(t,s)&&Ps(r,s,t[s]);return r},Bi=(r,t)=>zi(r,Vi(t));const Hi=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(Bi(Ui({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(b,{path:J,size:1.5,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-800",children:"General Learning Settings"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Basic configuration for learning and training modules"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(ie,{title:"Core Features",children:[e.jsx(U,{id:"enable-learning-paths",checked:r.enableLearningPaths,onChange:a=>s("enableLearningPaths",a),label:"Enable Learning Paths"}),e.jsx(U,{id:"enable-certifications",checked:r.enableCertifications,onChange:a=>s("enableCertifications",a),label:"Enable Certifications"}),e.jsx(U,{id:"enable-progress-tracking",checked:r.enableProgressTracking,onChange:a=>s("enableProgressTracking",a),label:"Enable Progress Tracking"}),e.jsx(U,{id:"enable-social-learning",checked:r.enableSocialLearning,onChange:a=>s("enableSocialLearning",a),label:"Enable Social Learning"})]}),e.jsxs(ie,{title:"Content Management",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"default-content-type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Content Type"}),e.jsxs("select",{id:"default-content-type",value:r.defaultContentType,onChange:a=>s("defaultContentType",a.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"course",children:"Course"}),e.jsx("option",{value:"procedure",children:"Procedure"}),e.jsx("option",{value:"policy",children:"Policy"}),e.jsx("option",{value:"learning_pathway",children:"Learning Pathway"})]})]}),e.jsx(U,{id:"enable-content-rating",checked:r.enableContentRating,onChange:a=>s("enableContentRating",a),label:"Enable Content Rating"}),e.jsx(U,{id:"require-content-approval",checked:r.requireContentApproval,onChange:a=>s("requireContentApproval",a),label:"Require Content Approval"})]})]})]})})};var Yi=Object.defineProperty,Wi=Object.defineProperties,Ki=Object.getOwnPropertyDescriptors,Os=Object.getOwnPropertySymbols,Qi=Object.prototype.hasOwnProperty,Zi=Object.prototype.propertyIsEnumerable,Ds=(r,t,s)=>t in r?Yi(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Xi=(r,t)=>{for(var s in t||(t={}))Qi.call(t,s)&&Ds(r,s,t[s]);if(Os)for(var s of Os(t))Zi.call(t,s)&&Ds(r,s,t[s]);return r},Ji=(r,t)=>Wi(r,Ki(t));const el=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(Ji(Xi({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(b,{path:we,size:1.5,className:"text-purple-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-800",children:"AI Learning Features"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Configure AI-powered learning capabilities"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(ie,{title:"AI Learning Features",children:[e.jsx(U,{id:"personalized-recommendations",checked:r.personalizedRecommendations,onChange:a=>s("personalizedRecommendations",a),label:"Personalized Recommendations"}),e.jsx(U,{id:"skill-gap-analysis",checked:r.skillGapAnalysis,onChange:a=>s("skillGapAnalysis",a),label:"Skill Gap Analysis"}),e.jsx(U,{id:"learning-path-optimization",checked:r.learningPathOptimization,onChange:a=>s("learningPathOptimization",a),label:"Learning Path Optimization"}),e.jsx(U,{id:"adaptive-difficulty",checked:r.adaptiveDifficulty,onChange:a=>s("adaptiveDifficulty",a),label:"Adaptive Difficulty"})]}),e.jsxs(ie,{title:"AI Configuration",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ai-confidence-threshold",className:"block text-sm font-medium text-gray-700 mb-1",children:"AI Confidence Threshold"}),e.jsx("input",{id:"ai-confidence-threshold",type:"range",min:"0.1",max:"1",step:"0.1",value:r.aiConfidenceThreshold,onChange:a=>s("aiConfidenceThreshold",parseFloat(a.target.value)),className:"w-full"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(r.aiConfidenceThreshold*100),"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"recommendation-limit",className:"block text-sm font-medium text-gray-700 mb-1",children:"Recommendation Limit"}),e.jsx("input",{id:"recommendation-limit",type:"number",min:"1",max:"20",value:r.recommendationLimit,onChange:a=>s("recommendationLimit",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"data-retention-days",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Retention (Days)"}),e.jsx("input",{id:"data-retention-days",type:"number",min:"30",max:"1095",value:r.dataRetentionDays,onChange:a=>s("dataRetentionDays",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]})]})]})]})})};var tl=Object.defineProperty,sl=Object.defineProperties,rl=Object.getOwnPropertyDescriptors,Rs=Object.getOwnPropertySymbols,al=Object.prototype.hasOwnProperty,nl=Object.prototype.propertyIsEnumerable,ks=(r,t,s)=>t in r?tl(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,il=(r,t)=>{for(var s in t||(t={}))al.call(t,s)&&ks(r,s,t[s]);if(Rs)for(var s of Rs(t))nl.call(t,s)&&ks(r,s,t[s]);return r},ll=(r,t)=>sl(r,rl(t));const ol=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(ll(il({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(b,{path:Rr,size:1.5,className:"text-green-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-green-800",children:"Certification Management"}),e.jsx("p",{className:"text-sm text-green-700",children:"Configure certification and compliance tracking"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(ie,{title:"Certification Features",children:[e.jsx(U,{id:"enable-auto-certification",checked:r.enableAutoCertification,onChange:a=>s("enableAutoCertification",a),label:"Enable Auto-Certification"}),e.jsx(U,{id:"require-re-certification",checked:r.requireReCertification,onChange:a=>s("requireReCertification",a),label:"Require Re-Certification"}),e.jsx(U,{id:"enable-certification-templates",checked:r.enableCertificationTemplates,onChange:a=>s("enableCertificationTemplates",a),label:"Enable Certification Templates"})]}),e.jsxs(ie,{title:"Assessment Settings",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"passing-score-threshold",className:"block text-sm font-medium text-gray-700 mb-1",children:"Passing Score Threshold"}),e.jsx("input",{id:"passing-score-threshold",type:"number",min:"50",max:"100",value:r.passingScoreThreshold,onChange:a=>s("passingScoreThreshold",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"max-assessment-attempts",className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Assessment Attempts"}),e.jsx("input",{id:"max-assessment-attempts",type:"number",min:"1",max:"10",value:r.maxAssessmentAttempts,onChange:a=>s("maxAssessmentAttempts",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"certification-expiry-days",className:"block text-sm font-medium text-gray-700 mb-1",children:"Certification Expiry (Days)"}),e.jsx("input",{id:"certification-expiry-days",type:"number",min:"30",max:"1095",value:r.certificationExpiryDays,onChange:a=>s("certificationExpiryDays",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]})]})]})]})})};var cl=Object.defineProperty,dl=Object.defineProperties,ul=Object.getOwnPropertyDescriptors,Ls=Object.getOwnPropertySymbols,ml=Object.prototype.hasOwnProperty,pl=Object.prototype.propertyIsEnumerable,Ms=(r,t,s)=>t in r?cl(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,hl=(r,t)=>{for(var s in t||(t={}))ml.call(t,s)&&Ms(r,s,t[s]);if(Ls)for(var s of Ls(t))pl.call(t,s)&&Ms(r,s,t[s]);return r},gl=(r,t)=>dl(r,ul(t));const xl=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(gl(hl({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(b,{path:Fe,size:1.5,className:"text-orange-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-orange-800",children:"Learning Path Configuration"}),e.jsx("p",{className:"text-sm text-orange-700",children:"Configure learning paths and progress tracking"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(ie,{title:"Path Features",children:[e.jsx(U,{id:"enable-custom-paths",checked:r.enableCustomPaths,onChange:a=>s("enableCustomPaths",a),label:"Enable Custom Learning Paths"}),e.jsx(U,{id:"enable-prerequisites",checked:r.enablePrerequisites,onChange:a=>s("enablePrerequisites",a),label:"Enable Prerequisites"}),e.jsx(U,{id:"enable-branching",checked:r.enableBranching,onChange:a=>s("enableBranching",a),label:"Enable Branching Paths"}),e.jsx(U,{id:"adaptive-path-generation",checked:r.adaptivePathGeneration,onChange:a=>s("adaptivePathGeneration",a),label:"AI Adaptive Path Generation"})]}),e.jsxs(ie,{title:"Progress & Gamification",children:[e.jsx(U,{id:"enable-milestones",checked:r.enableMilestones,onChange:a=>s("enableMilestones",a),label:"Enable Learning Milestones"}),e.jsx(U,{id:"enable-progress-gamification",checked:r.enableProgressGamification,onChange:a=>s("enableProgressGamification",a),label:"Enable Progress Gamification"}),e.jsx(U,{id:"enable-learning-streaks",checked:r.enableLearningStreaks,onChange:a=>s("enableLearningStreaks",a),label:"Enable Learning Streaks"}),e.jsx(U,{id:"enable-achievement-badges",checked:r.enableAchievementBadges,onChange:a=>s("enableAchievementBadges",a),label:"Enable Achievement Badges"})]})]})]})})};var fl=Object.defineProperty,bl=Object.defineProperties,yl=Object.getOwnPropertyDescriptors,$s=Object.getOwnPropertySymbols,vl=Object.prototype.hasOwnProperty,jl=Object.prototype.propertyIsEnumerable,Fs=(r,t,s)=>t in r?fl(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Nl=(r,t)=>{for(var s in t||(t={}))vl.call(t,s)&&Fs(r,s,t[s]);if($s)for(var s of $s(t))jl.call(t,s)&&Fs(r,s,t[s]);return r},_l=(r,t)=>bl(r,yl(t));const Cl=({aiSettings:r,onAiSettingsChange:t})=>{const s=(a,n)=>{t(_l(Nl({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(b,{path:he,size:1.5,className:"text-gray-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Advanced Configuration"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Advanced settings for power users"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(ie,{title:"Data & Privacy",children:[e.jsx(U,{id:"data-sharing-enabled",checked:r.dataSharingEnabled,onChange:a=>s("dataSharingEnabled",a),label:"Enable Data Sharing for AI Training"}),e.jsx(U,{id:"local-ai-processing-enabled",checked:r.localAIProcessingEnabled,onChange:a=>s("localAIProcessingEnabled",a),label:"Local AI Processing"}),e.jsx(U,{id:"encrypted-data-transmission",checked:r.encryptedDataTransmission,onChange:a=>s("encryptedDataTransmission",a),label:"Encrypted Data Transmission"})]}),e.jsx(ie,{title:"System Information",children:e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"AI Model Version:"})," ",r.modelVersion]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Data Retention:"})," ",r.dataRetentionDays," days"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Confidence Threshold:"})," ",Math.round(r.aiConfidenceThreshold*100),"%"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Recommendation Limit:"})," ",r.recommendationLimit," items"]})]})})]})]})})},Sl=()=>{const[r,t]=p.useState({aiEnabled:!0,personalizedRecommendations:!0,skillGapAnalysis:!0,learningPathOptimization:!0,performancePrediction:!0,adaptiveDifficulty:!0,learningAnalyticsEnabled:!0,behaviorTracking:!0,progressPrediction:!0,engagementMetrics:!0,retentionAnalysis:!0,aiConfidenceThreshold:.8,recommendationLimit:5,dataRetentionDays:365,modelVersion:"v1.0",dataSharingEnabled:!1,localAIProcessingEnabled:!0,encryptedDataTransmission:!0,aiModelTraining:!1}),[s,a]=p.useState({enableLearningPaths:!0,enableCertifications:!0,enableProgressTracking:!0,enableSocialLearning:!1,defaultContentType:"course",enableContentRating:!0,enableComments:!0,requireContentApproval:!0,showLearningRecommendations:!0,enableLearningReminders:!0,adaptiveInterface:!0,mobileLearningEnabled:!0}),[n,o]=p.useState({enableAutoCertification:!0,certificationExpiryDays:365,requireReCertification:!0,enableCertificationTemplates:!0,complianceTrackingEnabled:!0,regulatoryUpdatesEnabled:!0,auditTrailEnabled:!0,complianceReportingEnabled:!0,enableAssessments:!0,passingScoreThreshold:80,maxAssessmentAttempts:3,enableRetakes:!0}),[l,c]=p.useState({enableCustomPaths:!0,enablePrerequisites:!0,enableBranching:!0,adaptivePathGeneration:!0,enableMilestones:!0,enableProgressGamification:!0,enableLearningStreaks:!0,enableAchievementBadges:!0,estimatedCompletionTracking:!0,enableStudyScheduling:!0,optimalStudyTimeRecommendations:!0,enableLearningReminders:!0});return{aiSettings:r,setAiSettings:t,generalSettings:s,setGeneralSettings:a,certificationSettings:n,setCertificationSettings:o,learningPathSettings:l,setLearningPathSettings:c}};var wl=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const El=()=>{const[r,t]=p.useState("general"),[s,a]=p.useState(!1),[n,o]=p.useState(null),{aiSettings:l,setAiSettings:c,generalSettings:i,setGeneralSettings:d,certificationSettings:u,setCertificationSettings:m,learningPathSettings:x,setLearningPathSettings:v}=Sl(),h=[{id:"general",label:"General Settings",icon:J},{id:"ai",label:"AI & Analytics",icon:we},{id:"certifications",label:"Certifications",icon:Rr},{id:"learning-paths",label:"Learning Paths",icon:Fe},{id:"advanced",label:"Advanced",icon:he}],g=()=>wl(null,null,function*(){try{a(!0),o(null),o({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>o(null),3e3)}catch(_){console.error(_),o({type:"error",text:"Failed to save settings. Please try again."})}finally{a(!1)}}),j=()=>{switch(r){case"general":return e.jsx(Hi,{settings:i,onSettingsChange:d});case"ai":return e.jsx(el,{settings:l,onSettingsChange:c});case"certifications":return e.jsx(ol,{settings:u,onSettingsChange:m});case"learning-paths":return e.jsx(xl,{settings:x,onSettingsChange:v});case"advanced":return e.jsx(Cl,{aiSettings:l,onAiSettingsChange:c});default:return null}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Learning & Training Settings"}),e.jsx("p",{className:"text-gray-600",children:"Configure AI-powered learning features and training modules"})]}),e.jsxs("button",{onClick:g,disabled:s,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4] disabled:opacity-50",children:[e.jsx(b,{path:Ve,size:1,className:"mr-2"}),s?"Saving...":"Save Settings"]})]}),n&&e.jsx("div",{className:`rounded-md p-4 ${n.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{path:n.type==="success"?Se:ne,size:1.2,className:`mr-2 ${n.type==="success"?"text-green-400":"text-red-400"}`}),n.text]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:h.map(_=>e.jsxs("button",{onClick:()=>t(_.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${r===_.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(b,{path:_.icon,size:1}),e.jsx("span",{children:_.label})]},_.id))})}),e.jsx("div",{className:"tab-content-area",children:j()})]})};var Tl=Object.defineProperty,Al=Object.defineProperties,Il=Object.getOwnPropertyDescriptors,zs=Object.getOwnPropertySymbols,Pl=Object.prototype.hasOwnProperty,Ol=Object.prototype.propertyIsEnumerable,Vs=(r,t,s)=>t in r?Tl(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Dl=(r,t)=>{for(var s in t||(t={}))Pl.call(t,s)&&Vs(r,s,t[s]);if(zs)for(var s of zs(t))Ol.call(t,s)&&Vs(r,s,t[s]);return r},Rl=(r,t)=>Al(r,Il(t));const kl={id:"dental",name:"Dental Practice",description:"Statuses optimized for dental offices and clinics",category:"Specialty Care",statuses:[{name:"Pre-Procedure Ready",color:"#16a34a",icon:"check-circle",description:"Dental chair prepared, instruments sterilized, ready for patient",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Post-Procedure Cleaning",color:"#dc2626",icon:"broom",description:"Biohazard cleanup required after dental procedure",requiresVerification:!0,autoTransition:!1,alertLevel:"high"},{name:"Sterilization Cycle",color:"#ca8a04",icon:"progress-clock",description:"Instruments currently in autoclave sterilization cycle",requiresVerification:!1,autoTransition:!0,transitionTo:"Pre-Procedure Ready",alertLevel:"medium"},{name:"Patient in Chair",color:"#3b82f6",icon:"account",description:"Patient currently in dental chair, room occupied",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"X-Ray Room Ready",color:"#8b5cf6",icon:"radiology-box",description:"X-ray room prepared and ready for imaging",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Equipment Maintenance",color:"#ea580c",icon:"wrench",description:"Dental equipment under maintenance or repair",requiresVerification:!1,autoTransition:!1,alertLevel:"medium"}]},Ll={id:"primary_care",name:"Primary Care",description:"Statuses for general practice and family medicine",category:"General Practice",statuses:[{name:"Patient Exam Room",color:"#3b82f6",icon:"account",description:"Patient currently in exam room for consultation",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Waiting for Labs",color:"#ca8a04",icon:"progress-clock",description:"Room waiting for lab results or test completion",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Vaccination Ready",color:"#16a34a",icon:"needle",description:"Vaccination station prepared and ready",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Chronic Care Visit",color:"#8b5cf6",icon:"account-clock",description:"Extended visit for chronic condition management",requiresVerification:!1,autoTransition:!1,alertLevel:"medium"},{name:"Wellness Check",color:"#059669",icon:"heart-pulse",description:"Routine physical examination in progress",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Follow-up Visit",color:"#3b82f6",icon:"calendar-check",description:"Follow-up appointment for previous condition",requiresVerification:!1,autoTransition:!1,alertLevel:"low"}]},Ml={id:"private_surgery",name:"Private Surgery",description:"Statuses for surgical centers and operating rooms",category:"Surgical",statuses:[{name:"Pre-Op Ready",color:"#16a34a",icon:"check-circle",description:"Pre-operative room prepared for patient",requiresVerification:!0,autoTransition:!1,alertLevel:"medium"},{name:"Surgery in Progress",color:"#dc2626",icon:"scissors-cutting",description:"Active surgery currently in progress",requiresVerification:!1,autoTransition:!1,alertLevel:"critical"},{name:"Post-Op Recovery",color:"#3b82f6",icon:"bed",description:"Post-operative recovery room occupied",requiresVerification:!1,autoTransition:!1,alertLevel:"high"},{name:"Sterile Instruments",color:"#8b5cf6",icon:"package-variant",description:"Surgical instruments sterilized and ready",requiresVerification:!0,autoTransition:!1,alertLevel:"medium"},{name:"Anesthesia Ready",color:"#ca8a04",icon:"gas-cylinder",description:"Anesthesia equipment prepared and ready",requiresVerification:!0,autoTransition:!1,alertLevel:"high"},{name:"Surgical Suite Clean",color:"#16a34a",icon:"broom",description:"Surgical suite cleaned and sanitized post-procedure",requiresVerification:!0,autoTransition:!1,alertLevel:"medium"}]},$l={id:"emergency_room",name:"Emergency Room",description:"Statuses for emergency departments and urgent care",category:"Emergency",statuses:[{name:"Trauma Bay Ready",color:"#16a34a",icon:"ambulance",description:"Trauma bay prepared for emergency patient",requiresVerification:!1,autoTransition:!1,alertLevel:"critical"},{name:"Code Blue",color:"#dc2626",icon:"alert-circle",description:"Cardiac arrest or medical emergency in progress",requiresVerification:!1,autoTransition:!1,alertLevel:"critical"},{name:"Isolation Room",color:"#ea580c",icon:"shield-lock",description:"Isolation room for infectious disease patients",requiresVerification:!0,autoTransition:!1,alertLevel:"high"},{name:"Waiting for Specialist",color:"#ca8a04",icon:"account-clock",description:"Patient waiting for specialist consultation",requiresVerification:!1,autoTransition:!1,alertLevel:"medium"},{name:"Discharge Pending",color:"#8b5cf6",icon:"exit-to-app",description:"Patient ready for discharge, paperwork pending",requiresVerification:!1,autoTransition:!1,alertLevel:"low"}]},Fl={id:"laboratory",name:"Laboratory",description:"Statuses for medical laboratories and testing facilities",category:"Diagnostic",statuses:[{name:"Sample Processing",color:"#ca8a04",icon:"test-tube",description:"Laboratory samples currently being processed",requiresVerification:!1,autoTransition:!1,alertLevel:"medium"},{name:"Equipment Calibration",color:"#ea580c",icon:"wrench",description:"Laboratory equipment under calibration",requiresVerification:!1,autoTransition:!1,alertLevel:"medium"},{name:"Quality Control",color:"#8b5cf6",icon:"clipboard-check",description:"Quality control testing in progress",requiresVerification:!0,autoTransition:!1,alertLevel:"high"},{name:"Results Ready",color:"#16a34a",icon:"file-document",description:"Test results completed and ready for review",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Hazardous Materials",color:"#dc2626",icon:"biohazard",description:"Hazardous materials handling in progress",requiresVerification:!0,autoTransition:!1,alertLevel:"critical"}]},Gr=[kl,Ll,Ml,$l,Fl];function st(r){return Gr.find(t=>t.id===r)}function Gs(r){return r.statuses.map(t=>Rl(Dl({},t),{id:t.name.toLowerCase().replace(/\s+/g,"_"),isDefault:!1,isCore:!1,isPublished:!1}))}function zl(r,t){const s=[];for(const a of r.statuses)for(const n of t){if(a.name.toLowerCase()===n.name.toLowerCase()){s.push({bundleStatus:a.name,existingStatus:n.name,similarity:1});continue}const o=a.name.toLowerCase().split(/\s+/),l=n.name.toLowerCase().split(/\s+/),c=o.filter(i=>l.includes(i));if(c.length>0){const i=c.length/Math.max(o.length,l.length);i>=.5&&s.push({bundleStatus:a.name,existingStatus:n.name,similarity:i})}}return s.sort((a,n)=>n.similarity-a.similarity)}const Vl=({rooms:r,onEditRoom:t,onDeleteRoom:s,onToggleActive:a})=>e.jsx("div",{className:"space-y-2",children:r.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:n.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[n.department," • ",n.floor]}),n.barcode&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Barcode: ",n.barcode]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>a(n.id,n.isActive),className:`px-3 py-1 text-sm rounded-md transition-colors ${n.isActive?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"}`,children:n.isActive?"Active":"Inactive"}),e.jsx("button",{onClick:()=>t(n),className:"p-1 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:e.jsx(b,{path:Ne,size:.8})}),e.jsx("button",{onClick:()=>s(n.id),className:"p-1 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:e.jsx(b,{path:ze,size:.8})})]})]},n.id))}),Gl=()=>{const r=["OR001","ICU101","SUP001","ER001","LAB001","RAD001","PHY001","ADM001"];return r[Math.floor(Math.random()*r.length)]};var ql=Object.defineProperty,Ul=Object.defineProperties,Bl=Object.getOwnPropertyDescriptors,qs=Object.getOwnPropertySymbols,Hl=Object.prototype.hasOwnProperty,Yl=Object.prototype.propertyIsEnumerable,Us=(r,t,s)=>t in r?ql(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Pe=(r,t)=>{for(var s in t||(t={}))Hl.call(t,s)&&Us(r,s,t[s]);if(qs)for(var s of qs(t))Yl.call(t,s)&&Us(r,s,t[s]);return r},Oe=(r,t)=>Ul(r,Bl(t));const Wl=({isOpen:r,onClose:t,room:s,mode:a,onSave:n})=>{const[o,l]=p.useState({name:"",department:"",floor:"",barcode:""}),c=["Surgery","Intensive Care","Emergency","Logistics","Administration","Laboratory"];p.useEffect(()=>{l(s&&a==="edit"?{name:s.name||"",department:s.department||"",floor:s.floor||"",barcode:s.barcode||""}:{name:"",department:"",floor:"",barcode:""})},[s,a,r]);const i=()=>{o.name&&o.department&&o.floor&&(n(o),t())};return r?e.jsxs("div",{className:"mb-4 p-3 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"text-md font-medium mb-3",children:a==="add"?"Add New Room":"Edit Room"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"room-name",className:"block text-xs font-medium text-gray-700 mb-1",children:"Room Name"}),e.jsx("input",{id:"room-name",type:"text",value:o.name,onChange:d=>l(Oe(Pe({},o),{name:d.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Operating Room 1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"room-barcode",className:"block text-xs font-medium text-gray-700 mb-1",children:"Barcode"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{id:"room-barcode",type:"text",value:o.barcode,onChange:d=>l(Oe(Pe({},o),{barcode:d.target.value})),className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., OR001"}),e.jsxs("button",{type:"button",onClick:()=>l(Oe(Pe({},o),{barcode:Gl()})),className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors flex items-center gap-1 text-xs",title:"Generate random barcode",children:[e.jsx(b,{path:Et,size:.6}),e.jsx("span",{children:"Gen"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"room-department",className:"block text-xs font-medium text-gray-700 mb-1",children:"Department"}),e.jsxs("select",{id:"room-department",value:o.department,onChange:d=>l(Oe(Pe({},o),{department:d.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Department"}),c.map(d=>e.jsx("option",{value:d,children:d},d))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"room-floor",className:"block text-xs font-medium text-gray-700 mb-1",children:"Floor"}),e.jsx("input",{id:"room-floor",type:"text",value:o.floor,onChange:d=>l(Oe(Pe({},o),{floor:d.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 2nd Floor"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs("button",{onClick:i,className:"flex items-center px-3 py-1 bg-[#4ECDC4] text-white text-sm rounded-md hover:bg-[#38b2ac] transition-colors",children:[e.jsx(b,{path:a==="add"?pe:et,size:.8,className:"mr-1"}),a==="add"?"Add Room":"Update Room"]}),e.jsxs("button",{onClick:t,className:"flex items-center px-3 py-1 bg-gray-500 text-white text-sm rounded-md hover:bg-gray-600 transition-colors",children:[e.jsx(b,{path:Ce,size:.8,className:"mr-1"}),"Cancel"]})]})]}):null},Kl=({coreStatuses:r,customStatuses:t,onEditStatus:s,onDeleteStatus:a,onTogglePublishStatus:n})=>e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Core Status Types (Required)"}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:r.map(o=>e.jsxs("div",{className:"p-2 rounded-lg border bg-white border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-1",style:{backgroundColor:o.color}}),e.jsx("span",{className:"font-medium text-xs",children:o.name}),e.jsx(b,{path:Dr,size:.4,className:"text-gray-300 ml-1",title:"Core status - always available"})]}),e.jsx("span",{className:"px-1 py-0.5 bg-blue-100 text-blue-600 text-xs rounded",children:"Core"})]}),e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:o.description})]},o.id))}),e.jsxs("div",{className:"mb-3 flex items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Custom Status Types (Optional)"}),e.jsxs("div",{className:"relative ml-2 tooltip-container",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-bold cursor-help",children:"i"}),e.jsxs("div",{className:"tooltip-content",children:[e.jsx("div",{className:"mb-1 font-medium",children:"💡 Data Integrity Protection"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{children:"• Similar statuses (≥90% match) are blocked"}),e.jsx("div",{children:"• Very similar statuses (≥80% match) show warnings"}),e.jsx("div",{children:"• Smart suggestions help you choose better names"}),e.jsx("div",{children:"• All statuses start as drafts for testing"})]}),e.jsx("div",{className:"tooltip-arrow"})]})]})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Custom statuses start as drafts. Click the eye icon to publish them and make them visible in the cleaning workflow."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-4",children:t.map(o=>e.jsxs("div",{className:`p-3 rounded-lg border ${o.isPublished?"bg-purple-100 border-purple-300":"bg-gray-100 border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:o.color}}),e.jsx("span",{className:"font-medium text-sm",children:o.name}),e.jsx("span",{className:`ml-2 px-1 py-0.5 text-xs rounded ${o.isPublished?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"}`,children:o.isPublished?"Published":"Draft"})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>s(o),className:"p-1 text-purple-600 hover:bg-purple-100 rounded",title:"Edit status",children:e.jsx(b,{path:Ne,size:.6})}),e.jsx("button",{onClick:()=>n(o.id,!o.isPublished),className:`p-1 rounded ${o.isPublished?"text-orange-600 hover:bg-orange-100":"text-green-600 hover:bg-green-100"}`,title:o.isPublished?"Unpublish status":"Publish status",children:e.jsx(b,{path:o.isPublished?Tt:At,size:.6})}),e.jsx("button",{onClick:()=>a(o.id),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete status",children:e.jsx(b,{path:ze,size:.6})})]})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:o.description}),e.jsxs("div",{className:"text-xs text-purple-600",children:[o.requiresVerification&&e.jsx("span",{className:"mr-2",children:"✓ Verification"}),o.autoTransition&&e.jsx("span",{className:"mr-2",children:"✓ Auto Transition"}),o.alertLevel&&o.alertLevel!=="low"&&e.jsxs("span",{className:"mr-2",children:["⚠ ",o.alertLevel]})]})]},o.id))})]}),Ql=({customStatuses:r,onLoadBundle:t,onReplaceWithBundle:s})=>{var a;const[n,o]=p.useState(""),[l,c]=p.useState(!1),[i,d]=p.useState([]),u=h=>{o(h);const g=st(h);if(g){const j=zl(g,r);d(j),c(!0)}},m=()=>{t(n),o(""),c(!1),d([])},x=()=>{s(n),o(""),c(!1),d([])},v=()=>{o(""),c(!1),d([])};return e.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-green-800 mb-2",children:"🚀 Quick Setup: Pre-configured Status Bundles"}),e.jsx("p",{className:"text-xs text-green-700 mb-3",children:"Select a bundle to quickly add relevant statuses for your healthcare specialty. All statuses start as drafts."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 mb-3",children:Gr.map(h=>e.jsxs("button",{onClick:()=>u(h.id),className:`p-2 text-left rounded border transition-colors ${n===h.id?"bg-green-100 border-green-400 text-green-800":"bg-white border-green-200 hover:bg-green-50 text-green-700"}`,children:[e.jsx("div",{className:"font-medium text-xs",children:h.name}),e.jsx("div",{className:"text-xs opacity-75",children:h.description}),e.jsxs("div",{className:"text-xs opacity-60",children:[h.statuses.length," statuses"]})]},h.id))}),l&&n&&e.jsxs("div",{className:"mt-3 p-3 bg-white border border-green-300 rounded",children:[e.jsxs("h6",{className:"text-sm font-medium text-green-800 mb-2",children:["Bundle Preview: ",(a=st(n))==null?void 0:a.name]}),i.length>0&&e.jsxs("div",{className:"mb-3 p-2 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsxs("p",{className:"text-xs text-yellow-800 mb-1",children:["⚠️ Found ",i.length," similar statuses:"]}),e.jsx("ul",{className:"text-xs text-yellow-700 space-y-1",children:i.slice(0,3).map((h,g)=>e.jsxs("li",{children:['• "',h.bundleStatus,'" similar to "',h.existingStatus,'"']},g))})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:m,className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700",children:"Add New Statuses Only"}),e.jsx("button",{onClick:x,className:"px-3 py-1 text-xs bg-orange-600 text-white rounded hover:bg-orange-700",children:"Replace All Custom Statuses"}),e.jsx("button",{onClick:v,className:"px-3 py-1 text-xs bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"})]})]})]})},Zl=()=>{const{rooms:r,addRoom:t,updateRoom:s,deleteRoom:a}=Kr(),{getCoreStatusTypes:n,getCustomStatusTypes:o,addStatusType:l,deleteStatusType:c,publishStatusType:i,unpublishStatusType:d}=Qr(),u=n(),m=o(),[x,v]=p.useState(!1),[h,g]=p.useState(null),[j,_]=p.useState(!1),[N,y]=p.useState(!1),[,D]=p.useState(!1),L=S=>{t({name:S.name||"",department:S.department||"",floor:S.floor||"",barcode:S.barcode,isActive:!0}),v(!1)},G=S=>{h&&(s(h.id,S),g(null))},B=S=>{g(S)},M=()=>{v(!1),g(null)},V=(S,A)=>{s(S,{isActive:!A})},H=S=>{a(S)},E=()=>{},$=S=>{c(S)},I=(S,A)=>{A?i(S):d(S)},w=S=>{const A=st(S);if(!A)return;const Q=Gs(A),T=m.map(k=>k.name.toLowerCase());Q.filter(k=>!T.includes(k.name.toLowerCase())).forEach(k=>{l(k)})},F=S=>{const A=st(S);if(!A)return;m.forEach(T=>{c(T.id)}),Gs(A).forEach(T=>{l(T)})};return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>_(!j),className:"flex items-center text-xl font-semibold text-gray-800 hover:text-gray-600 transition-colors",children:[e.jsx(b,{path:j?Ft:zt,size:1.2,className:"mr-2"}),"Room Management",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",r.filter(S=>S.isActive).length," active)"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>y(!N),className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[e.jsx(b,{path:J,size:1,className:"mr-2"}),"Status Types"]}),e.jsxs("button",{onClick:()=>v(!0),className:"flex items-center px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors",children:[e.jsx(b,{path:pe,size:1,className:"mr-2"}),"Add Room"]})]})]}),N&&e.jsxs("div",{className:"mb-6 p-4 border border-purple-200 rounded-lg bg-purple-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-purple-800",children:"Custom Status Types"}),e.jsxs("button",{onClick:()=>D(!0),className:"flex items-center px-3 py-1 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors text-sm",children:[e.jsx(b,{path:pe,size:.8,className:"mr-1"}),"Add Custom Status"]})]}),e.jsx(Ql,{customStatuses:m,onLoadBundle:w,onReplaceWithBundle:F}),e.jsx(Kl,{coreStatuses:u,customStatuses:m,onEditStatus:E,onDeleteStatus:$,onTogglePublishStatus:I})]}),e.jsx(Wl,{isOpen:x||!!h,onClose:M,room:h,mode:x?"add":"edit",onSave:x?L:G}),j&&e.jsx(Vl,{rooms:r,onEditRoom:B,onDeleteRoom:H,onToggleActive:V})]})},Xl={title:"",category:"setup",autoSchedule:!1,scheduleFrequency:"weekly",scheduleDay:"monday",scheduleTime:"09:00",schedulePriority:"medium",schedulePoints:50,scheduleDuration:30,triggerRoomStatus:!1,triggerStaffSchedule:!1,triggerAdminDecision:!1};var Jl=Object.defineProperty,eo=Object.defineProperties,to=Object.getOwnPropertyDescriptors,Bs=Object.getOwnPropertySymbols,so=Object.prototype.hasOwnProperty,ro=Object.prototype.propertyIsEnumerable,Hs=(r,t,s)=>t in r?Jl(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,ao=(r,t)=>{for(var s in t||(t={}))so.call(t,s)&&Hs(r,s,t[s]);if(Bs)for(var s of Bs(t))ro.call(t,s)&&Hs(r,s,t[s]);return r},no=(r,t)=>eo(r,to(t)),Ys=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const io=(r,t)=>{const[s,a]=p.useState(Xl),[n,o]=p.useState(!1),[l,c]=p.useState(!1),[i,d]=p.useState([]);p.useEffect(()=>{r?a({title:r.title,category:r.category,autoSchedule:r.autoSchedule||!1,scheduleFrequency:r.scheduleFrequency||"weekly",scheduleDay:r.scheduleDay||"monday",scheduleTime:r.scheduleTime||"09:00",schedulePriority:r.schedulePriority||"medium",schedulePoints:r.schedulePoints||50,scheduleDuration:r.scheduleDuration||30,triggerRoomStatus:r.triggerRoomStatus||!1,triggerStaffSchedule:r.triggerStaffSchedule||!1,triggerAdminDecision:r.triggerAdminDecision||!1}):t&&a({title:"",category:"setup",autoSchedule:!1,scheduleFrequency:"weekly",scheduleDay:"monday",scheduleTime:"09:00",schedulePriority:"medium",schedulePoints:50,scheduleDuration:30,triggerRoomStatus:!1,triggerStaffSchedule:!1,triggerAdminDecision:!1})},[r,t]);const u=()=>Ys(null,null,function*(){c(!0);try{try{const h=yield Rt.askAI(`Generate 8 checklist title suggestions for the ${s.category} category. Each title should be descriptive and follow healthcare facility naming conventions.`,`Category: ${s.category}`),g=x(h);d(g),o(!0)}catch(h){console.warn("AI service failed, using fallback suggestions:",h);const g=yield v(s.category);d(g),o(!0)}}catch(h){console.error("Error generating AI suggestions:",h);const g=yield v(s.category);d(g),o(!0)}finally{c(!1)}}),m=h=>{a(g=>no(ao({},g),{title:h})),o(!1)},x=h=>{try{const g=h.match(/\[[\s\S]*\]/);if(g){const N=JSON.parse(g[0]);if(Array.isArray(N))return N.map(y=>typeof y=="string"?y:y.title||y.name||y.suggestion||"Untitled Checklist")}const j=h.split(`
`).filter(N=>N.trim()),_=[];for(const N of j)if(N.match(/^\d+\./)){const y=N.replace(/^\d+\.\s*/,"").trim();y&&_.push(y)}else N.trim()&&!N.toLowerCase().includes("category")&&!N.toLowerCase().includes("suggestions")&&_.push(N.trim());return _.length>0?_:["AI-generated checklist","Custom checklist","Professional checklist"]}catch(g){return console.error("Error parsing AI response:",g),["AI-generated checklist","Custom checklist","Professional checklist"]}},v=h=>Ys(null,null,function*(){return yield new Promise(j=>setTimeout(j,1e3)),{setup:["Treatment Room Setup Checklist","Surgical Suite Preparation","Examination Room Setup","Emergency Room Preparation","Laboratory Setup Protocol","Radiology Room Setup","Pharmacy Setup Checklist","Reception Area Setup"],patient:["Patient Room Cleaning Protocol","Isolation Room Procedures","Post-Procedure Room Cleanup","Patient Equipment Sanitization","Bedside Supply Restocking","Patient Safety Equipment Check","Infection Control Protocol","Patient Comfort Items Setup"],weekly:["Weekly Deep Cleaning Protocol","Equipment Maintenance Schedule","Supply Inventory Audit","Safety Equipment Inspection","Emergency Equipment Check","Compliance Documentation Review","Staff Training Verification","Quality Assurance Audit"],public:["Waiting Room Maintenance","Lobby Cleaning Protocol","Restroom Sanitization","Common Area Disinfection","Public Equipment Cleaning","Visitor Area Maintenance","Cafeteria Cleaning Protocol","Parking Area Maintenance"],deep:["Post-Contamination Deep Clean","Equipment Sterilization Protocol","Ventilation System Cleaning","Structural Disinfection","Biohazard Cleanup Protocol","Emergency Response Cleanup","Infection Outbreak Response","Facility-Wide Sanitization"]}[h]||[]});return{checklistFormData:s,showAIChecklistSuggestions:n,isGeneratingSuggestions:l,aiChecklistSuggestions:i,setChecklistFormData:a,setShowAIChecklistSuggestions:o,generateAIChecklistSuggestions:u,applyAIChecklistSuggestion:m}},lo=[{id:"setup",title:"Setup/Take Down",icon:kr,color:"#FF6B6B"},{id:"patient",title:"Per Patient",icon:Lr,color:"#4ECDC4"},{id:"weekly",title:"Weekly",icon:Mr,color:"#45B7D1"},{id:"public",title:"Public Spaces",icon:$r,color:"#96CEB4"},{id:"deep",title:"Deep Clean",icon:ke,color:"#FF9F1C"}];var oo=Object.defineProperty,co=Object.defineProperties,uo=Object.getOwnPropertyDescriptors,Ws=Object.getOwnPropertySymbols,mo=Object.prototype.hasOwnProperty,po=Object.prototype.propertyIsEnumerable,Ks=(r,t,s)=>t in r?oo(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Qs=(r,t)=>{for(var s in t||(t={}))mo.call(t,s)&&Ks(r,s,t[s]);if(Ws)for(var s of Ws(t))po.call(t,s)&&Ks(r,s,t[s]);return r},Zs=(r,t)=>co(r,uo(t));const ho=({checklistFormData:r,setChecklistFormData:t,showAIChecklistSuggestions:s,isGeneratingSuggestions:a,aiChecklistSuggestions:n,onGenerateAISuggestions:o,onApplyAISuggestion:l,onCloseAISuggestions:c})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"checklist-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Checklist Title"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{id:"checklist-title",type:"text",value:r.title,onChange:i=>t(Zs(Qs({},r),{title:i.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",placeholder:"e.g., Treatment Room Setup"}),e.jsxs("button",{onClick:o,disabled:a,className:"flex items-center px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:bg-gray-400 transition-colors",title:"Get AI suggestions for checklist titles",children:[e.jsx(b,{path:ua,size:.8,className:"mr-1"}),a?"...":"AI"]})]}),s&&e.jsxs("div",{className:"mt-3 p-3 border border-purple-200 rounded-lg bg-purple-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h5",{className:"text-sm font-medium text-purple-800 flex items-center",children:[e.jsx(b,{path:Le,size:.8,className:"mr-1"}),"AI Suggestions"]}),e.jsx("button",{onClick:c,className:"text-purple-600 hover:text-purple-800",children:e.jsx(b,{path:Ce,size:.8})})]}),e.jsx("div",{className:"space-y-2",children:n.map((i,d)=>e.jsx("button",{onClick:()=>l(i),className:"w-full text-left p-2 text-sm text-purple-700 hover:bg-purple-100 rounded-md transition-colors",children:i},d))})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"checklist-category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsx("select",{id:"checklist-category",value:r.category,onChange:i=>t(Zs(Qs({},r),{category:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:lo.map(i=>e.jsx("option",{value:i.id,children:i.title},i.id))})]})]});var go=Object.defineProperty,xo=Object.defineProperties,fo=Object.getOwnPropertyDescriptors,Xs=Object.getOwnPropertySymbols,bo=Object.prototype.hasOwnProperty,yo=Object.prototype.propertyIsEnumerable,Js=(r,t,s)=>t in r?go(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,se=(r,t)=>{for(var s in t||(t={}))bo.call(t,s)&&Js(r,s,t[s]);if(Xs)for(var s of Xs(t))yo.call(t,s)&&Js(r,s,t[s]);return r},re=(r,t)=>xo(r,fo(t));const vo=({checklistFormData:r,setChecklistFormData:t})=>e.jsxs("div",{className:"mt-6 p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-md font-medium text-blue-800 flex items-center",children:[e.jsx(b,{path:tt,size:1,className:"mr-2"}),"Scheduling Configuration"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.autoSchedule||!1,onChange:s=>t(re(se({},r),{autoSchedule:s.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm text-blue-700",children:"Enable Auto-Scheduling"})]})]}),r.autoSchedule&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schedule-frequency",className:"block text-sm font-medium text-blue-700 mb-1",children:"Frequency"}),e.jsxs("select",{id:"schedule-frequency",value:r.scheduleFrequency||"weekly",onChange:s=>t(re(se({},r),{scheduleFrequency:s.target.value})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"per_patient",children:"Per Patient"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"bi_weekly",children:"Bi-Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),(r.scheduleFrequency==="weekly"||r.scheduleFrequency==="bi_weekly"||r.scheduleFrequency==="monthly")&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schedule-day",className:"block text-sm font-medium text-blue-700 mb-1",children:"Schedule Day"}),e.jsxs("select",{id:"schedule-day",value:r.scheduleDay||"monday",onChange:s=>t(re(se({},r),{scheduleDay:s.target.value})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"monday",children:"Monday"}),e.jsx("option",{value:"tuesday",children:"Tuesday"}),e.jsx("option",{value:"wednesday",children:"Wednesday"}),e.jsx("option",{value:"thursday",children:"Thursday"}),e.jsx("option",{value:"friday",children:"Friday"}),e.jsx("option",{value:"saturday",children:"Saturday"}),e.jsx("option",{value:"sunday",children:"Sunday"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schedule-time",className:"block text-sm font-medium text-blue-700 mb-1",children:"Schedule Time"}),e.jsx("input",{id:"schedule-time",type:"time",value:r.scheduleTime||"09:00",onChange:s=>t(re(se({},r),{scheduleTime:s.target.value})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schedule-priority",className:"block text-sm font-medium text-blue-700 mb-1",children:"Priority"}),e.jsxs("select",{id:"schedule-priority",value:r.schedulePriority||"medium",onChange:s=>t(re(se({},r),{schedulePriority:s.target.value})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schedule-points",className:"block text-sm font-medium text-blue-700 mb-1",children:"Points"}),e.jsx("input",{id:"schedule-points",type:"number",value:r.schedulePoints||50,onChange:s=>t(re(se({},r),{schedulePoints:parseInt(s.target.value)})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schedule-duration",className:"block text-sm font-medium text-blue-700 mb-1",children:"Duration (minutes)"}),e.jsx("input",{id:"schedule-duration",type:"number",value:r.scheduleDuration||30,onChange:s=>t(re(se({},r),{scheduleDuration:parseInt(s.target.value)})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-700 mb-2",children:"Trigger Conditions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.triggerRoomStatus||!1,onChange:s=>t(re(se({},r),{triggerRoomStatus:s.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm text-blue-700",children:"Trigger on room status change"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.triggerStaffSchedule||!1,onChange:s=>t(re(se({},r),{triggerStaffSchedule:s.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm text-blue-700",children:"Trigger based on staff availability"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.triggerAdminDecision||!1,onChange:s=>t(re(se({},r),{triggerAdminDecision:s.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm text-blue-700",children:"Require admin approval"})]})]})]})]})]}),jo=({selectedChecklist:r,onSaveDraft:t,onPublish:s,isValid:a=!0})=>e.jsxs("div",{className:"flex justify-end mt-4 space-x-3",children:[e.jsxs("button",{onClick:t,disabled:!a,className:`flex items-center px-6 py-2 rounded-lg font-semibold text-lg ${a?"bg-gray-500 text-white hover:bg-gray-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(b,{path:et,size:1,className:"mr-2"}),"Save Draft"]}),r&&e.jsxs("button",{onClick:s,disabled:!a,className:`flex items-center px-6 py-2 rounded-lg font-semibold text-lg ${a?"bg-[#4ECDC4] text-white hover:bg-[#3db8b0]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(b,{path:et,size:1,className:"mr-2"}),"Publish"]})]}),No=({selectedChecklist:r,isAddingChecklist:t,onSaveDraft:s,onPublish:a})=>{const{checklistFormData:n,showAIChecklistSuggestions:o,isGeneratingSuggestions:l,aiChecklistSuggestions:c,setChecklistFormData:i,setShowAIChecklistSuggestions:d,generateAIChecklistSuggestions:u,applyAIChecklistSuggestion:m}=io(r,t),x=()=>{n.title&&n.category&&s(n)},v=()=>{n.title&&n.category&&(s(n),a())},h=n.title.trim()!==""&&n.category!==null;return e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsx("h4",{className:"text-md font-medium mb-3",children:"Checklist Details"}),e.jsx(ho,{checklistFormData:n,setChecklistFormData:i,showAIChecklistSuggestions:o,isGeneratingSuggestions:l,aiChecklistSuggestions:c,onGenerateAISuggestions:u,onApplyAISuggestion:m,onCloseAISuggestions:()=>d(!1)}),e.jsx(vo,{checklistFormData:n,setChecklistFormData:i}),e.jsx(jo,{selectedChecklist:r,onSaveDraft:x,onPublish:v,isValid:h})]})},_o=[{id:"setup",title:"Setup/Take Down",icon:kr,color:"#FF6B6B"},{id:"patient",title:"Per Patient",icon:Lr,color:"#4ECDC4"},{id:"weekly",title:"Weekly",icon:Mr,color:"#45B7D1"},{id:"public",title:"Public Spaces",icon:$r,color:"#96CEB4"},{id:"deep",title:"Deep Clean",icon:ke,color:"#FF9F1C"}],Co=({checklists:r,onEditChecklist:t,onDeleteChecklist:s})=>{const[a,n]=p.useState(new Set(["setup"])),o=l=>{n(c=>{const i=new Set(c);return i.has(l)?i.delete(l):i.add(l),i})};return e.jsx("div",{className:"space-y-6",children:_o.map(l=>{const c=r.filter(m=>m.category===l.id),i=c.filter(m=>m.status==="published"),d=c.filter(m=>m.status==="draft"),u=a.has(l.id);return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("button",{onClick:()=>o(l.id),className:"flex items-center w-full text-left hover:bg-gray-50 p-2 -m-2 rounded-md transition-colors",children:[e.jsx(b,{path:l.icon,size:1.2,color:l.color,className:"mr-2"}),e.jsx("h3",{className:"text-lg font-medium text-gray-800",children:l.title}),e.jsxs("span",{className:"ml-2 px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:[i.length," published, ",d.length," ","draft"]}),e.jsx(b,{path:u?Ft:zt,size:1,className:"ml-auto text-gray-400"})]}),u&&e.jsx(e.Fragment,{children:c.length===0?e.jsx("p",{className:"text-gray-500 text-sm italic mt-4",children:"No checklists created yet."}):e.jsxs("div",{className:"space-y-3 mt-4",children:[i.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Published Checklists"}),i.map(m=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:m.title}),e.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[m.items.length," item",m.items.length!==1?"s":""]}),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${m.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:m.status==="published"?"Published":"Draft"}),m.autoSchedule&&e.jsxs("span",{className:"ml-2 px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full flex items-center",children:[e.jsx(b,{path:tt,size:.7,className:"mr-1"}),"Auto-Scheduled"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>t(m),className:"px-3 py-1 text-sm text-[#4ECDC4] hover:bg-[#4ECDC4] hover:text-white rounded-md transition-colors",children:"Edit & Manage"}),e.jsx("button",{onClick:()=>s(m.id),className:"p-1 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:e.jsx(b,{path:ze,size:.8})})]})]})},m.id))]}),d.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Draft Checklists"}),d.map(m=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:m.title}),e.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[m.items.length," item",m.items.length!==1?"s":""]}),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${m.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:m.status==="published"?"Published":"Draft"}),m.autoSchedule&&e.jsxs("span",{className:"ml-2 px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full flex items-center",children:[e.jsx(b,{path:tt,size:.7,className:"mr-1"}),"Auto-Scheduled"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>t(m),className:"px-3 py-1 text-sm text-[#4ECDC4] hover:bg-[#4ECDC4] hover:text-white rounded-md transition-colors",children:"Edit & Manage"}),e.jsx("button",{onClick:()=>s(m.id),className:"p-1 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:e.jsx(b,{path:ze,size:.8})})]})]})},m.id))]})]})})]},l.id)})})},So=r=>{var t,s;if(!((t=r.data)!=null&&t.expiration)&&!r.expiryDate)return null;const a=new Date(String(((s=r.data)==null?void 0:s.expiration)||r.expiryDate||"")),n=new Date,o=new Date;return o.setDate(n.getDate()+30),a<n?{status:"expired",color:"text-red-600",bgColor:"bg-red-50"}:a<=o?{status:"expiring-soon",color:"text-orange-600",bgColor:"bg-orange-50"}:{status:"valid",color:"text-green-600",bgColor:"bg-green-50"}},wo=r=>new Date(r).toLocaleDateString(),bt=(r,t)=>({searchQuery:r.trim()||void 0,category:t.category||void 0,manufacturer:t.manufacturer||void 0,supplier:t.supplier||void 0,reorder_point:t.reorder_point?parseInt(t.reorder_point):void 0,expiryDate:t.expiryDate||void 0,sortBy:t.sortBy,sortDirection:t.sortDirection}),er=()=>({category:"",location:"",status:"",manufacturer:"",supplier:"",reorder_point:"",expiryDate:"",sortBy:"name",sortDirection:"asc"});var ae=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const yt=(r,t=0)=>typeof r=="number"&&!isNaN(r)?r:t,tr=(r,t="Unknown")=>typeof r=="string"&&r.trim()!==""?r:t,vt=r=>r instanceof Error?r.message:typeof r=="string"?r:"An unknown error occurred";class ye{static getItemsFromSupabase(t){return ae(this,null,function*(){try{const s=ue.getFilterSummary(t);if(!ue.validateFilters(t))throw new Error("Invalid filter parameters");const a=ue.applyFiltersToTable(P,"inventory_items",t),{data:n,error:o,count:l}=yield a.order("created_at",{ascending:!1});if(o)throw console.error("Error fetching items from Supabase:",o),o;return{data:(n==null?void 0:n.map(i=>Sa.transformFromSupabase(i)))||[],error:null,count:l||0}}catch(s){throw console.error("Failed to fetch items from Supabase:",s),s}})}static getItemByIdFromSupabase(t){return ae(this,null,function*(){try{return yield Te.getItemById(t)}catch(s){return console.error("Error fetching item by ID:",s),null}})}static createItemInSupabase(t){return ae(this,null,function*(){try{return yield Te.processItemCreation(t)}catch(s){throw console.error("Error creating item:",s),new Error(`Failed to create item: ${vt(s)}`)}})}static updateItemInSupabase(t,s){return ae(this,null,function*(){try{return yield Te.processItemUpdate(t,s)}catch(a){throw console.error("Error updating item:",a),new Error(`Failed to update item: ${vt(a)}`)}})}static deleteItemFromSupabase(t){return ae(this,null,function*(){try{yield Te.processItemDeletion(t)}catch(s){throw new Error(`Failed to delete item: ${vt(s)}`)}})}static getCategories(){return ae(this,null,function*(){try{const t=yield ue.applyFiltersToCategories(P,"inventory_items");if(!t)throw console.error("❌ Error fetching categories"),new Error("Failed to fetch categories");return ue.extractUniqueValues(t.data,"category").sort()}catch(t){return console.error("Error fetching categories:",t),[]}})}static getCategoriesFromSupabase(){return ae(this,null,function*(){return this.getCategories()})}static getLocations(){return ae(this,null,function*(){try{const t=yield ue.applyFiltersToLocations(P,"inventory_items");if(!t)throw console.error("❌ Error fetching locations"),new Error("Failed to fetch locations");return ue.extractUniqueValues(t.data,"location").sort()}catch(t){return console.error("Error fetching locations:",t),[]}})}static getLocationsFromSupabase(){return ae(this,null,function*(){return this.getLocations()})}static getInventoryStatsFromSupabase(){return ae(this,null,function*(){try{const t=yield Te.getItems(),s=t.length,a=t.filter(l=>l.status==="active").length,n=t.reduce((l,c)=>l+yt(c.unit_cost),0),o={};return t.forEach(l=>{const c=tr(l.category);o[c]=(o[c]||0)+1}),{totalItems:s,activeItems:a,totalValue:n,categories:o}}catch(t){return console.error("Error fetching inventory stats:",t),{totalItems:0,activeItems:0,totalValue:0,categories:{}}}})}static calculateTotalValue(t){try{return t.reduce((a,n)=>{const o=yt(n.unit_cost),l=yt(n.quantity,1);return a+o*l},0)}catch(s){return console.error("Error calculating total value:",s),0}}static getCategoryBreakdown(t){try{const s={};return t.forEach(a=>{const n=tr(a.category);s[n]=(s[n]||0)+1}),s}catch(s){return console.error("Error calculating category breakdown:",s),{}}}}var Eo=Object.defineProperty,To=Object.defineProperties,Ao=Object.getOwnPropertyDescriptors,sr=Object.getOwnPropertySymbols,Io=Object.prototype.hasOwnProperty,Po=Object.prototype.propertyIsEnumerable,rr=(r,t,s)=>t in r?Eo(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,ar=(r,t)=>{for(var s in t||(t={}))Io.call(t,s)&&rr(r,s,t[s]);if(sr)for(var s of sr(t))Po.call(t,s)&&rr(r,s,t[s]);return r},Oo=(r,t)=>To(r,Ao(t)),ve=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});class Do{searchInventoryItems(t){return ve(this,null,function*(){try{const s=Oo(ar(ar({search:t.searchQuery,category:t.category},t.manufacturer&&{search:`${t.searchQuery||""} ${t.manufacturer}`.trim()}),t.supplier&&{search:`${t.searchQuery||""} ${t.supplier}`.trim()}),{minQuantity:t.reorder_point}),a=yield ye.getItemsFromSupabase(s);if(a.error)return console.error("Error fetching inventory items:",a.error),[];let n=a.data||[];if(t.manufacturer&&!t.searchQuery&&(n=n.filter(o=>{var l;return((l=o.data)==null?void 0:l.manufacturer)===t.manufacturer})),t.supplier&&!t.searchQuery&&(n=n.filter(o=>{var l;return((l=o.data)==null?void 0:l.supplier)===t.supplier})),t.expiryDate){const o=new Date,l=new Date;l.setDate(o.getDate()+30),n=n.filter(c=>{var i,d;if(!((i=c.data)!=null&&i.expiration)&&!c.expiration_date)return!1;const u=new Date(String(((d=c.data)==null?void 0:d.expiration)||c.expiration_date||""));switch(t.expiryDate){case"expired":return u<o;case"expiring-soon":return u>=o&&u<=l;case"valid":return u>l;default:return!0}})}return t.sortBy&&n.sort((o,l)=>{var c,i;let d,u;switch(t.sortBy){case"name":d=o.name||"",u=l.name||"";break;case"category":d=o.category||"",u=l.category||"";break;case"quantity":d=o.quantity||0,u=l.quantity||0;break;case"expiration":d=new Date(String(((c=o.data)==null?void 0:c.expiration)||o.expiration_date||"")),u=new Date(String(((i=l.data)==null?void 0:i.expiration)||l.expiration_date||""));break;case"unit_cost":d=o.unit_cost||0,u=l.unit_cost||0;break;default:return 0}return t.sortDirection==="desc"?d>u?-1:d<u?1:0:d<u?-1:d>u?1:0}),n}catch(s){return console.error("Error in searchInventoryItems:",s),[]}})}getCategories(){return ve(this,null,function*(){try{const t=yield ye.getItemsFromSupabase();return t.error?(console.error("Error fetching categories:",t.error),[]):Array.from(new Set((t.data||[]).map(a=>a.category).filter(a=>!!a))).sort()}catch(t){return console.error("Error in getCategories:",t),[]}})}getManufacturers(){return ve(this,null,function*(){try{const t=yield ye.getItemsFromSupabase();return t.error?(console.error("Error fetching manufacturers:",t.error),[]):Array.from(new Set((t.data||[]).map(a=>{var n;return(n=a.data)==null?void 0:n.manufacturer}).filter(a=>!!a))).sort()}catch(t){return console.error("Error in getManufacturers:",t),[]}})}getSuppliers(){return ve(this,null,function*(){try{const t=yield ye.getItemsFromSupabase();return t.error?(console.error("Error fetching suppliers:",t.error),[]):Array.from(new Set((t.data||[]).map(a=>{var n;return(n=a.data)==null?void 0:n.supplier}).filter(a=>!!a))).sort()}catch(t){return console.error("Error in getSuppliers:",t),[]}})}getLocations(){return ve(this,null,function*(){try{const t=yield ye.getItemsFromSupabase();return t.error?(console.error("Error fetching locations:",t.error),[]):Array.from(new Set((t.data||[]).map(a=>a.location).filter(a=>!!a))).sort()}catch(t){return console.error("Error in getLocations:",t),[]}})}getStatuses(){return ve(this,null,function*(){try{const t=yield ye.getItemsFromSupabase();return t.error?(console.error("Error fetching statuses:",t.error),[]):Array.from(new Set((t.data||[]).map(a=>a.status).filter(a=>!!a))).sort()}catch(t){return console.error("Error in getStatuses:",t),[]}})}}const me=new Do;var jt=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const Ro=()=>{const[r,t]=p.useState([]),[s,a]=p.useState(!1),[n,o]=p.useState(null),[l,c]=p.useState([]),[i,d]=p.useState([]),[u,m]=p.useState([]),[x,v]=p.useState([]),[h,g]=p.useState([]);p.useEffect(()=>{jt(null,null,function*(){try{const[y,D,L,G,B]=yield Promise.all([me.getCategories(),me.getLocations(),me.getStatuses(),me.getManufacturers(),me.getSuppliers()]);c(y),d(D),m(L),v(G),g(B)}catch(y){o(y instanceof Error?y.message:"Failed to load filter options")}})},[]);const j=p.useCallback(N=>jt(null,null,function*(){a(!0),o(null);try{const y=yield me.searchInventoryItems(N);t(y)}catch(y){o(y instanceof Error?y.message:"Failed to search inventory")}finally{a(!1)}}),[]),_=p.useCallback(()=>jt(null,null,function*(){a(!0),o(null);try{const N=yield me.searchInventoryItems({});t(N)}catch(N){o(N instanceof Error?N.message:"Failed to clear search")}finally{a(!1)}}),[]);return{inventoryItems:r,isLoading:s,error:n,categories:l,locations:i,statuses:u,manufacturers:x,suppliers:h,searchInventory:j,clearSearch:_}},ko=({isOpen:r,selectedItems:t=[],onSelectItems:s,onClose:a})=>{const{inventoryItems:n,isLoading:o,error:l,categories:c,locations:i,statuses:d,searchInventory:u,clearSearch:m}=Ro(),[x,v]=p.useState(""),[h,g]=p.useState(!1),[j,_]=p.useState(er()),[N,y]=p.useState(t);return p.useEffect(()=>{if(!r)return;const M=setTimeout(()=>{if(x.trim()||Object.values(j).some(V=>V!=="")){const V=bt(x,j);u(V)}},300);return()=>clearTimeout(M)},[x,j,r,u]),p.useEffect(()=>{if(r){m(),y(t);const M=bt(x,j);u(M)}},[r,t,m,u,x,j]),p.useEffect(()=>{y(t)},[t]),{searchQuery:x,showFilters:h,filters:j,localSelectedItems:N,inventoryItems:n,isLoading:o,error:l,categories:c,locations:i,statuses:d,setSearchQuery:v,setShowFilters:g,setFilters:_,handleClearFilters:()=>{_(er()),v(""),m().then(()=>{setTimeout(()=>{u({})},100)})},handleItemToggle:M=>{const V=N.some(H=>H.id===M.id);y(V?H=>H.filter(E=>E.id!==M.id):H=>[...H,M])},handleConfirmSelection:()=>{s(N),a()},handleSearch:()=>{const M=bt(x,j);u(M)}}},Lo=({onClose:r})=>e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Search Inventory Items"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Select items for your checklist with advanced filtering"})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(b,{path:Ce,size:1.5})})]}),Mo=({searchQuery:r,onSearchChange:t,onSearch:s})=>{const a=n=>{n.key==="Enter"&&s()};return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(b,{path:ma,size:1,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search items...",value:r,onChange:n=>t(n.target.value),onKeyPress:a,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsx("button",{onClick:s,className:"w-full mt-2 px-4 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3db8b0] transition-colors",children:"Search"})]})};var $o=Object.defineProperty,Fo=Object.defineProperties,zo=Object.getOwnPropertyDescriptors,nr=Object.getOwnPropertySymbols,Vo=Object.prototype.hasOwnProperty,Go=Object.prototype.propertyIsEnumerable,ir=(r,t,s)=>t in r?$o(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,qo=(r,t)=>{for(var s in t||(t={}))Vo.call(t,s)&&ir(r,s,t[s]);if(nr)for(var s of nr(t))Go.call(t,s)&&ir(r,s,t[s]);return r},Uo=(r,t)=>Fo(r,zo(t));const Bo=({filters:r,onFiltersChange:t,onClearFilters:s,categories:a,showFilters:n,onToggleFilters:o})=>{const l=(c,i)=>{t(Uo(qo({},r),{[c]:i}))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("button",{onClick:o,className:"flex items-center space-x-2 text-gray-700 hover:text-gray-900",children:[e.jsx(b,{path:pa,size:1}),e.jsx("span",{children:"Filters"}),e.jsx(b,{path:ha,size:1,className:`transform transition-transform ${n?"rotate-180":""}`})]})}),e.jsx(Ur,{children:n&&e.jsxs(Pt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"space-y-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{id:"category-filter",value:r.category,onChange:c=>l("category",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"",children:"All Categories"}),a.map(c=>e.jsx("option",{value:c,children:c},c))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"min-quantity-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Quantity"}),e.jsx("input",{id:"min-quantity-filter",type:"number",value:r.reorder_point,onChange:c=>l("reorder_point",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"max-quantity-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Quantity"}),e.jsx("input",{id:"max-quantity-filter",type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",placeholder:"∞"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"expiry-status-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Status"}),e.jsxs("select",{id:"expiry-status-filter",value:r.expiryDate,onChange:c=>l("expiryDate",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"",children:"All Items"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"expiring-soon",children:"Expiring Soon (30 days)"}),e.jsx("option",{value:"valid",children:"Valid"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sort-by-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),e.jsxs("select",{id:"sort-by-filter",value:r.sortBy,onChange:c=>l("sortBy",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"category",children:"Category"}),e.jsx("option",{value:"quantity",children:"Quantity"}),e.jsx("option",{value:"expiration",children:"Expiration"}),e.jsx("option",{value:"unit_cost",children:"Unit Cost"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sort-direction-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Direction"}),e.jsxs("select",{id:"sort-direction-filter",value:r.sortDirection,onChange:c=>l("sortDirection",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"asc",children:"Ascending"}),e.jsx("option",{value:"desc",children:"Descending"})]})]})]}),e.jsx("button",{onClick:s,className:"w-full px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Clear Filters"})]})})]})},Ho=({selectedItems:r})=>e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Selected Items"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r.length," item",r.length!==1?"s":""," ","selected"]}),r.length>0&&e.jsxs("div",{className:"mt-2 space-y-1",children:[r.slice(0,3).map(t=>e.jsx("div",{className:"text-xs text-gray-600 truncate",children:t.name},t.id)),r.length>3&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",r.length-3," more"]})]})]}),Yo=({item:r,isSelected:t,onToggle:s})=>{var a,n,o,l,c;const i=So(r);return e.jsx(Pt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`border rounded-lg p-4 cursor-pointer transition-all ${t?"border-[#4ECDC4] bg-[#4ECDC4]/5":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>s(r),children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:r.name}),t&&e.jsx("span",{className:"px-2 py-1 text-xs bg-[#4ECDC4] text-white rounded-full",children:"Selected"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(b,{path:Ge,size:.8}),e.jsx("span",{children:r.category})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(b,{path:ga,size:.8}),e.jsx("span",{children:r.location})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"font-medium",children:"Quantity:"}),e.jsxs("span",{children:[r.quantity||0," ",String(((a=r.data)==null?void 0:a.unit)||"units")]})]})]}),e.jsxs("div",{className:"space-y-1",children:[(n=r.data)!=null&&n.manufacturer?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(b,{path:xa,size:.8}),e.jsx("span",{children:String(r.data.manufacturer)})]}):null,(o=r.data)!=null&&o.supplier?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(b,{path:fa,size:.8}),e.jsx("span",{children:String(r.data.supplier)})]}):null,(l=r.data)!=null&&l.expiration||r.expiryDate?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(b,{path:tt,size:.8}),e.jsxs("span",{children:["Expires:"," ",wo(String(((c=r.data)==null?void 0:c.expiration)||r.expiryDate||""))]})]}):null]})]}),i&&e.jsxs("div",{className:`mt-2 inline-block px-2 py-1 text-xs rounded-full ${i.bgColor} ${i.color}`,children:[i.status==="expired"&&"Expired",i.status==="expiring-soon"&&"Expiring Soon",i.status==="valid"&&"Valid"]})]})})})},Wo=({inventoryItems:r,selectedItems:t,onItemToggle:s,isLoading:a,error:n})=>e.jsxs("div",{className:"w-2/3 p-6 overflow-y-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Search Results"}),e.jsx("p",{className:"text-sm text-gray-600",children:a?"Searching...":`${r.length} items found`})]})}),n&&e.jsxs("div",{className:"flex items-center space-x-2 text-red-500 mb-4",children:[e.jsx(b,{path:ne,size:1}),e.jsx("span",{children:n})]}),a&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{path:ba,size:1,className:"animate-spin text-[#4ECDC4]"}),e.jsx("span",{className:"text-gray-600",children:"Searching inventory..."})]})}),!a&&!n&&e.jsx("div",{className:"space-y-3",children:r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(b,{path:Ge,size:3,className:"mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No items found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search criteria."})]}):r.map(o=>{const l=t.some(c=>c.id===o.id);return e.jsx(Yo,{item:o,isSelected:l,onToggle:s},o.id)})})]}),Ko=({isOpen:r,onClose:t,onSelectItems:s,selectedItems:a=[]})=>{const{searchQuery:n,showFilters:o,filters:l,localSelectedItems:c,inventoryItems:i,isLoading:d,error:u,categories:m,locations:x,statuses:v,setSearchQuery:h,setShowFilters:g,setFilters:j,handleClearFilters:_,handleItemToggle:N,handleConfirmSelection:y,handleSearch:D}=ko({isOpen:r,selectedItems:a,onSelectItems:s,onClose:t});return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(Pt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[e.jsx(Lo,{onClose:t}),e.jsxs("div",{className:"flex h-[calc(90vh-140px)]",children:[e.jsxs("div",{className:"w-1/3 border-r border-gray-200 p-6 overflow-y-auto",children:[e.jsx(Mo,{searchQuery:n,onSearchChange:h,onSearch:D}),e.jsx(Bo,{filters:l,onFiltersChange:j,onClearFilters:_,categories:m,locations:x,statuses:v,showFilters:o,onToggleFilters:()=>g(!o)}),e.jsx(Ho,{selectedItems:c})]}),e.jsx(Wo,{inventoryItems:i,selectedItems:c,onItemToggle:N,isLoading:d,error:u})]}),e.jsx("div",{className:"flex justify-end p-6 border-t border-gray-200",children:e.jsxs("button",{onClick:y,disabled:c.length===0,className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3db8b0] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Confirm Selection (",c.length,")"]})})]})}):null};var Qo=Object.defineProperty,Zo=Object.defineProperties,Xo=Object.getOwnPropertyDescriptors,lr=Object.getOwnPropertySymbols,Jo=Object.prototype.hasOwnProperty,ec=Object.prototype.propertyIsEnumerable,or=(r,t,s)=>t in r?Qo(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,De=(r,t)=>{for(var s in t||(t={}))Jo.call(t,s)&&or(r,s,t[s]);if(lr)for(var s of lr(t))ec.call(t,s)&&or(r,s,t[s]);return r},Re=(r,t)=>Zo(r,Xo(t)),cr=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const tc=({selectedChecklist:r,onAddItem:t,onUpdateItem:s,onDeleteItem:a,onGenerateAIItemSuggestions:n,showAIItemSuggestions:o,isGeneratingSuggestions:l,aiItemSuggestions:c,onApplyAIItemSuggestion:i,onCloseAISuggestions:d,showSuccessMessage:u})=>{const[m,x]=p.useState(!1),[v,h]=p.useState([]),[g,j]=p.useState(!1),[_,N]=p.useState(null),[y,D]=p.useState({title:"",instructions:"",inventoryItemIds:[],sdsId:""}),[L,G]=p.useState(!1),B=()=>{y.title&&y.instructions&&r&&(t({title:y.title,instructions:y.instructions,requiredInventory:v.map(w=>({id:w.id,name:w.name||"",required:1,available:w.quantity||0,used:0,unit:"unit"})),sdsId:y.sdsId||void 0}),D({title:"",instructions:"",inventoryItemIds:[],sdsId:""}),h([]),j(!1))},M=w=>{y.title&&y.instructions&&r&&(s(w,{title:y.title,instructions:y.instructions,requiredInventory:v.map(F=>({id:F.id,name:F.name||"",required:1,available:F.quantity||0,used:0,unit:"unit"})),sdsId:y.sdsId||void 0}),D({title:"",instructions:"",inventoryItemIds:[],sdsId:""}),h([]),N(null))},V=w=>{var F;N(w.id),D({title:w.title,instructions:w.instructions,inventoryItemIds:((F=w.requiredInventory)==null?void 0:F.map(A=>A.id))||[],sdsId:w.sdsId||""});const S=(w.requiredInventory||[]).map(A=>({id:A.id,facility_id:"unknown",name:A.name,quantity:A.available,data:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),reorder_point:null,expiration_date:null,unit_cost:null,category:"Unknown",status:"Unknown",location:"Unknown"}));h(S)},H=w=>{h(w)},E=(w,F)=>cr(null,null,function*(){if(w.trim()){G(!0);try{try{const S=yield Rt.askAI(`Generate detailed instructions for checklist item "${w}" in the ${F||(r==null?void 0:r.category)} category. Provide step-by-step instructions that are clear and actionable.`,`Category: ${F||(r==null?void 0:r.category)}, Title: ${w}`);D(A=>Re(De({},A),{instructions:S}))}catch(S){console.warn("AI service failed, using fallback description:",S);const A=yield I(w,F||(r==null?void 0:r.category));D(Q=>Re(De({},Q),{instructions:A}))}}catch(S){console.error("Error generating AI description:",S),D(A=>Re(De({},A),{instructions:`Complete ${w.toLowerCase()} following established procedures and safety protocols.`}))}finally{G(!1)}}}),$=w=>{if(D(F=>Re(De({},F),{title:w})),w.length>=5&&!y.instructions){const F=setTimeout(()=>{E(w)},1e3);return()=>clearTimeout(F)}},I=(w,F)=>cr(null,null,function*(){return yield new Promise(A=>setTimeout(A,800)),{setup:`Perform ${w.toLowerCase()} according to facility protocols. Ensure all equipment is properly prepared and safety measures are in place.`,patient:`Complete ${w.toLowerCase()} with patient safety as the priority. Follow infection control protocols and maintain patient privacy.`,weekly:`Conduct thorough ${w.toLowerCase()} as part of weekly maintenance schedule. Document all activities and report any issues.`,public:`Execute ${w.toLowerCase()} in public areas following facility standards. Maintain professional appearance and ensure accessibility.`,deep:`Perform intensive ${w.toLowerCase()} using specialized equipment and procedures. Follow all safety protocols and containment measures.`}[F]||`Complete ${w.toLowerCase()} following established procedures and safety protocols.`});return e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-md font-medium",children:"Checklist Items"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:n,disabled:l,className:"flex items-center px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:bg-gray-400 transition-colors",title:"Get AI suggestions for checklist items",children:[e.jsx(b,{path:ya,size:.8,className:"mr-1"}),l?"Generating...":"AI Suggestions"]}),e.jsxs("button",{onClick:()=>{j(!0),N(null),D({title:"",instructions:"",inventoryItemIds:[],sdsId:""}),h([])},className:"flex items-center px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors",children:[e.jsx(b,{path:pe,size:1,className:"mr-2"}),"Add Item"]})]})]}),o&&e.jsxs("div",{className:"mb-4 p-4 border border-purple-200 rounded-lg bg-purple-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h5",{className:"text-sm font-medium text-purple-800 flex items-center",children:[e.jsx(b,{path:Le,size:.8,className:"mr-1"}),"AI Item Suggestions"]}),e.jsx("button",{onClick:d,className:"text-purple-600 hover:text-purple-800",children:e.jsx(b,{path:Ce,size:.8})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:c.map((w,F)=>e.jsxs("div",{className:"border border-purple-200 rounded-lg p-3 bg-white",children:[e.jsx("h6",{className:"font-medium text-purple-800 mb-1",children:w.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:w.instructions}),w.suggestedInventory.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Suggested: "}),e.jsx("span",{className:"text-xs text-purple-600",children:w.suggestedInventory.join(", ")})]}),e.jsx("button",{onClick:()=>i(w),className:"w-full px-3 py-1 text-sm bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors",children:"Use This Item"})]},F))})]}),u&&e.jsx("div",{className:"mb-4 p-3 border border-green-200 rounded-lg bg-green-50",children:e.jsxs("div",{className:"flex items-center text-green-800",children:[e.jsx(b,{path:et,size:.8,className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:u})]})}),e.jsxs("div",{className:"space-y-3 mb-4",children:[r.items.map(w=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-3 bg-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-gray-800",children:w.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:w.instructions}),w.requiredInventory&&w.requiredInventory.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Required: "}),w.requiredInventory.map(F=>F.name).join(", ")]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-3",children:[e.jsx("button",{onClick:()=>V(w),className:"p-1 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:e.jsx(b,{path:Ne,size:.8})}),e.jsx("button",{onClick:()=>a(w.id),className:"p-1 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:e.jsx(b,{path:ze,size:.8})})]})]})},w.id)),r.items.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:'No items added yet. Click "Add Item" to get started.'})]}),g&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[e.jsx("h5",{className:"font-medium mb-3",children:_?"Edit Item":"Add New Item"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"item-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Title"}),e.jsx("input",{id:"item-title",type:"text",value:y.title,onChange:w=>$(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",placeholder:"e.g., Clean and sanitize surfaces"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center",children:["Instructions",L&&e.jsxs("span",{className:"ml-2 text-xs text-blue-600 flex items-center",children:[e.jsx(b,{path:Le,size:.6,className:"mr-1 animate-pulse"}),"AI generating..."]})]}),y.title&&!L&&e.jsxs("button",{type:"button",onClick:()=>E(y.title),className:"text-xs text-blue-600 hover:text-blue-800 flex items-center",title:"Generate AI description",children:[e.jsx(b,{path:Le,size:.6,className:"mr-1"}),"AI Generate"]})]}),e.jsx("textarea",{value:y.instructions,onChange:w=>D(Re(De({},y),{instructions:w.target.value})),className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] ${L?"bg-blue-50 border-blue-200":""}`,rows:3,placeholder:L?"AI is generating instructions...":"Detailed instructions for this task...",disabled:L})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"inventory-select",className:"block text-sm font-medium text-gray-700 mb-1",children:"Required Inventory"}),e.jsx("button",{id:"inventory-select",onClick:()=>x(!0),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-left focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:v.length>0?`${v.length} item(s) selected`:"Click to select required inventory items"}),v.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:v.map(w=>e.jsxs("div",{className:"text-sm text-gray-600",children:["• ",w.name]},w.id))})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{j(!1),N(null),D({title:"",instructions:"",inventoryItemIds:[],sdsId:""}),h([])},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{onClick:()=>_?M(_):B(),className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac]",children:_?"Update Item":"Add Item"})]})]})]}),e.jsx(Ko,{isOpen:m,onClose:()=>x(!1),onSelectItems:H,selectedItems:v})]})};var sc=Object.defineProperty,rc=Object.defineProperties,ac=Object.getOwnPropertyDescriptors,dr=Object.getOwnPropertySymbols,nc=Object.prototype.hasOwnProperty,ic=Object.prototype.propertyIsEnumerable,ur=(r,t,s)=>t in r?sc(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,lc=(r,t)=>{for(var s in t||(t={}))nc.call(t,s)&&ur(r,s,t[s]);if(dr)for(var s of dr(t))ic.call(t,s)&&ur(r,s,t[s]);return r},oc=(r,t)=>rc(r,ac(t)),mr=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const cc=()=>{const{checklists:r,updateChecklist:t,deleteChecklist:s,publishChecklist:a,addItemToChecklist:n,updateChecklistItem:o,deleteChecklistItem:l}=Ht(),[c,i]=p.useState(!1),[d,u]=p.useState(null),[m,x]=p.useState(!1),v=S=>{if(d)t(d.id,S);else{const{addChecklist:A}=Ht.getState();A(oc(lc({},S),{title:S.title||"New Checklist",items:[],status:"draft"}))}u(null),i(!1)},h=()=>{d&&(a(d.id),u(null))},g=S=>{u(S)},j=()=>{i(!1),u(null)},_=S=>{if(d){n(d.id,S);const A=r.find(Q=>Q.id===d.id);A&&u(A)}},N=(S,A)=>{d&&o(d.id,S,A)},y=S=>{d&&l(d.id,S)},[D,L]=p.useState(!1),[G,B]=p.useState(!1),[M,V]=p.useState([]),[H,E]=p.useState(null),$=()=>mr(null,null,function*(){if(d){B(!0);try{try{const S=yield Rt.askAI(`Generate 5-7 detailed checklist items for "${d.title}" in the ${d.category} category. Each item should include title, detailed instructions, and suggested inventory requirements.`,`Category: ${d.category}, Title: ${d.title}`),A=w(S);V(A),L(!0)}catch(S){console.warn("AI service failed, using fallback suggestions:",S);const A=yield F(d.category);V(A),L(!0)}}catch(S){console.error("Error generating AI item suggestions:",S);const A=yield F(d.category);V(A),L(!0)}finally{B(!1)}}}),I=S=>{if(!d)return;n(d.id,{title:S.title,instructions:S.instructions,requiredInventory:[],sdsId:void 0});const A=r.find(Q=>Q.id===d.id);A&&u(A),L(!1),E(`✅ Added "${S.title}" to checklist`),setTimeout(()=>E(null),3e3)},w=S=>{try{const A=S.match(/\[[\s\S]*\]/);if(A){const k=JSON.parse(A[0]);if(Array.isArray(k))return k.map(q=>{var X;return{title:q.title||q.name||"Untitled Item",instructions:q.instructions||((X=q.data)==null?void 0:X.description)||q.steps||"No instructions provided",suggestedInventory:Array.isArray(q.suggestedInventory)?q.suggestedInventory:Array.isArray(q.inventory)?q.inventory:Array.isArray(q.requirements)?q.requirements:[]}})}const Q=S.split(`
`).filter(k=>k.trim()),T=[];let C=null;for(const k of Q)if(k.match(/^\d+\./))C&&T.push(C),C={title:k.replace(/^\d+\.\s*/,"").trim(),instructions:"",suggestedInventory:[]};else if(C&&k.trim())if(k.toLowerCase().includes("inventory")||k.toLowerCase().includes("supplies")){const q=k.match(/[^:]+:\s*(.+)/);q&&(C.suggestedInventory=q[1].split(",").map(X=>X.trim()))}else C.instructions+=(C.instructions?" ":"")+k.trim();return C&&T.push(C),T.length>0?T:[{title:"AI-generated item",instructions:S.substring(0,200)+"...",suggestedInventory:[]}]}catch(A){return console.error("Error parsing AI response:",A),[{title:"AI-generated item",instructions:S.substring(0,200)+"...",suggestedInventory:[]}]}},F=S=>mr(null,null,function*(){return yield new Promise(Q=>setTimeout(Q,1500)),[{title:"Surface Disinfection",instructions:"Use EPA-approved disinfectant wipes. Clean all high-touch surfaces including door handles, light switches, and equipment controls. Allow 3-5 minutes contact time for proper disinfection.",suggestedInventory:["Disinfectant Wipes","Nitrile Gloves","Safety Goggles"]},{title:"Equipment Sanitization",instructions:"Clean all medical equipment with appropriate cleaning agents. Pay special attention to patient contact surfaces. Verify equipment is operational after cleaning.",suggestedInventory:["Equipment Cleaning Solution","Microfiber Cloths","Alcohol Wipes"]},{title:"Supply Restocking",instructions:"Check all supply levels and restock as needed. Verify expiration dates on all items. Ensure emergency supplies are readily accessible.",suggestedInventory:["Various Medical Supplies","Storage Containers","Labeling Materials"]},{title:"Safety Equipment Check",instructions:"Verify all safety equipment is present and functional. Test emergency systems and alarms. Check fire extinguishers and emergency exits.",suggestedInventory:["Safety Equipment","Testing Tools","Documentation Forms"]},{title:"Quality Control Verification",instructions:"Perform final quality control check. Verify all cleaning standards have been met. Document completion and any issues found.",suggestedInventory:["Quality Control Checklist","Documentation Forms","Camera for Documentation"]}]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>x(!m),className:"flex items-center text-xl font-semibold text-gray-800 hover:text-gray-600 transition-colors",children:[e.jsx(b,{path:m?Ft:zt,size:1.2,className:"mr-2"}),"Checklist Management",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",r.length," total)"]})]}),e.jsxs("button",{onClick:()=>{i(!0),u(null)},className:"flex items-center px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors",children:[e.jsx(b,{path:pe,size:1,className:"mr-2"}),"Add Checklist"]})]}),m&&e.jsx(Co,{checklists:r,onEditChecklist:g,onDeleteChecklist:s})]}),(d||c)&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto scrollbar-hide",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800",children:c?"Add New Checklist":`Edit: ${d==null?void 0:d.title}`}),e.jsx("button",{onClick:j,className:"p-1 text-gray-500 hover:text-gray-700",children:e.jsx(b,{path:Ce,size:1.2})})]}),e.jsx(No,{selectedChecklist:d,isAddingChecklist:c,onCancel:j,onSaveDraft:v,onPublish:h}),d&&e.jsx(tc,{selectedChecklist:d,onAddItem:_,onUpdateItem:N,onDeleteItem:y,onGenerateAIItemSuggestions:$,showAIItemSuggestions:D,isGeneratingSuggestions:G,aiItemSuggestions:M,onApplyAIItemSuggestion:I,onCloseAISuggestions:()=>L(!1),showSuccessMessage:H})]})})]})},dc={aiEnabled:!1,predictiveCleaningEnabled:!1,smartScheduling:!1,contaminationPrediction:!1,resourceOptimization:!1,efficiencyAnalytics:!1,smartRoomManagementEnabled:!1,automaticPriorityAssignment:!1,riskAssessment:!1,trendAnalysis:!1,predictiveMaintenance:!1,supplyOptimizationEnabled:!1,staffScheduling:!1,costOptimization:!1,inventoryPrediction:!1,workloadBalancing:!1,qualityAssuranceEnabled:!1,complianceMonitoring:!1,auditTrailEnhancement:!1,performanceTracking:!1,automatedReporting:!1,realTimeMonitoringEnabled:!1,anomalyDetection:!1,smartNotifications:!1,statusUpdates:!1,emergencyAlerts:!1,aiConfidenceThreshold:.85,aiDataRetentionDays:90,realTimeProcessingEnabled:!1,batchProcessingEnabled:!1,dataSharingEnabled:!1,localAIProcessingEnabled:!1,encryptedDataTransmission:!0,aiModelTraining:!1},uc={defaultCleaningDuration:45,qualityScoreThreshold:8,contaminationLevels:["low","medium","high","critical"],cleaningTypes:["routine","deep","emergency","post_procedure"],autoSchedulingEnabled:!1,bufferTimeMinutes:15,maxConcurrentCleanings:3,weekendCleaningEnabled:!0,complianceTrackingEnabled:!0,auditLogRetentionDays:365,regulatoryReportingEnabled:!1,certificationTracking:!1},mc={emailNotificationsEnabled:!0,dailySummaryEnabled:!0,urgentAlertsEnabled:!0,completionNotificationsEnabled:!1,inAppNotificationsEnabled:!0,pushNotificationsEnabled:!1,soundEnabled:!0,adminNotificationsEnabled:!0,staffNotificationsEnabled:!1,supervisorNotificationsEnabled:!0},O={defaultCleaningDuration:{min:15,max:180},qualityScoreThreshold:{min:1,max:10},bufferTimeMinutes:{min:0,max:60},maxConcurrentCleanings:{min:1,max:10},auditLogRetentionDays:{min:30,max:2555},aiConfidenceThreshold:{min:.1,max:1,step:.05},aiDataRetentionDays:{min:30,max:1095}},pc=[{id:"general",label:"General",icon:J},{id:"ai",label:"AI & Analytics",icon:$e},{id:"protocols",label:"Cleaning Protocols",icon:Fe},{id:"rooms",label:"Room Management",icon:Me},{id:"checklists",label:"Checklists",icon:Fe},{id:"notifications",label:"Notifications",icon:Fr},{id:"compliance",label:"Compliance",icon:Me},{id:"advanced",label:"Advanced",icon:he}],pr={predictiveCleaning:[{key:"smartScheduling",label:"Smart Scheduling",desc:"AI-powered cleaning schedule optimization"},{key:"contaminationPrediction",label:"Contamination Prediction",desc:"Predict when rooms need cleaning"},{key:"resourceOptimization",label:"Resource Optimization",desc:"Optimize supplies and staff allocation"},{key:"efficiencyAnalytics",label:"Efficiency Analytics",desc:"Track and improve cleaning efficiency"}],smartRoomManagement:[{key:"automaticPriorityAssignment",label:"Automatic Priority Assignment",desc:"AI-driven room priority calculation"},{key:"riskAssessment",label:"Risk Assessment",desc:"Automated contamination risk analysis"},{key:"trendAnalysis",label:"Trend Analysis",desc:"Identify cleaning pattern trends"},{key:"predictiveMaintenance",label:"Predictive Maintenance",desc:"Equipment maintenance predictions"}]},hr={email:[{key:"emailNotificationsEnabled",label:"Enable Email Notifications"},{key:"dailySummaryEnabled",label:"Daily Summary Reports"},{key:"urgentAlertsEnabled",label:"Urgent Alerts"},{key:"completionNotificationsEnabled",label:"Task Completion Notifications"}],inApp:[{key:"inAppNotificationsEnabled",label:"Enable In-App Notifications"},{key:"pushNotificationsEnabled",label:"Push Notifications"},{key:"soundEnabled",label:"Sound Alerts"}]},hc=3e3,gc=r=>{const t=[];return(r.aiConfidenceThreshold<O.aiConfidenceThreshold.min||r.aiConfidenceThreshold>O.aiConfidenceThreshold.max)&&t.push(`AI confidence threshold must be between ${O.aiConfidenceThreshold.min} and ${O.aiConfidenceThreshold.max}`),(r.aiDataRetentionDays<O.aiDataRetentionDays.min||r.aiDataRetentionDays>O.aiDataRetentionDays.max)&&t.push(`AI data retention days must be between ${O.aiDataRetentionDays.min} and ${O.aiDataRetentionDays.max}`),t},xc=r=>{const t=[];return(r.defaultCleaningDuration<O.defaultCleaningDuration.min||r.defaultCleaningDuration>O.defaultCleaningDuration.max)&&t.push(`Default cleaning duration must be between ${O.defaultCleaningDuration.min} and ${O.defaultCleaningDuration.max} minutes`),(r.qualityScoreThreshold<O.qualityScoreThreshold.min||r.qualityScoreThreshold>O.qualityScoreThreshold.max)&&t.push(`Quality score threshold must be between ${O.qualityScoreThreshold.min} and ${O.qualityScoreThreshold.max}`),(r.bufferTimeMinutes<O.bufferTimeMinutes.min||r.bufferTimeMinutes>O.bufferTimeMinutes.max)&&t.push(`Buffer time must be between ${O.bufferTimeMinutes.min} and ${O.bufferTimeMinutes.max} minutes`),(r.maxConcurrentCleanings<O.maxConcurrentCleanings.min||r.maxConcurrentCleanings>O.maxConcurrentCleanings.max)&&t.push(`Max concurrent cleanings must be between ${O.maxConcurrentCleanings.min} and ${O.maxConcurrentCleanings.max}`),(r.auditLogRetentionDays<O.auditLogRetentionDays.min||r.auditLogRetentionDays>O.auditLogRetentionDays.max)&&t.push(`Audit log retention days must be between ${O.auditLogRetentionDays.min} and ${O.auditLogRetentionDays.max}`),t},fc=r=>{const t=[];return!r.emailNotificationsEnabled&&!r.inAppNotificationsEnabled&&t.push("At least one notification method must be enabled"),t},bc=(r,t,s)=>[...gc(r),...xc(t),...fc(s)],yc=(r,t,s)=>{const a=bc(r,t,s);return{isValid:a.length===0,errors:a}};var vc=Object.defineProperty,jc=Object.defineProperties,Nc=Object.getOwnPropertyDescriptors,gr=Object.getOwnPropertySymbols,_c=Object.prototype.hasOwnProperty,Cc=Object.prototype.propertyIsEnumerable,xr=(r,t,s)=>t in r?vc(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Nt=(r,t)=>{for(var s in t||(t={}))_c.call(t,s)&&xr(r,s,t[s]);if(gr)for(var s of gr(t))Cc.call(t,s)&&xr(r,s,t[s]);return r},Sc=(r,t)=>jc(r,Nc(t)),at=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const qr={settings:"/api/environmental-cleaning/settings",aiSettings:"/api/environmental-cleaning/ai-settings",testSync:"/api/environmental-cleaning/test-sync",resetDefaults:"/api/environmental-cleaning/reset-defaults"},_t={timeout:3e4,retries:3,headers:{"Content-Type":"application/json"}},Gt=(r,t,...s)=>at(null,[r,t,...s],function*(a,n,o=_t.retries){try{const l=new AbortController,c=setTimeout(()=>l.abort(),_t.timeout),i=yield fetch(a,Sc(Nt({},n),{signal:l.signal,headers:Nt(Nt({},_t.headers),n.headers)}));if(clearTimeout(c),!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return yield i.json()}catch(l){if(o>0&&l instanceof Error&&l.name==="AbortError")return Gt(a,n,o-1);throw l}}),wc=r=>at(null,null,function*(){try{const t=yield Gt(qr.settings,{method:"POST",body:JSON.stringify(r)});if(!t.success)throw new Error(t.error||"Failed to save settings")}catch(t){throw console.error("Error saving environmental cleaning settings:",t),new Error("Failed to save settings. Please try again.")}}),Ec=r=>at(null,null,function*(){try{const t=yield Gt(qr.aiSettings,{method:"POST",body:JSON.stringify(r)});if(!t.success)throw new Error(t.error||"Failed to save AI settings")}catch(t){throw console.error("Error saving AI settings:",t),new Error("Failed to save AI settings. Please try again.")}}),Tc=(r,t,s)=>at(null,null,function*(){try{r.aiEnabled&&(yield Ec({aiSettings:r})),yield wc({protocols:t,notifications:s})}catch(a){throw console.error("Error saving all settings:",a),a}}),Ac=({protocolSettings:r,onProtocolSettingChange:t})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(b,{path:J,size:1.5,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-800",children:"General Settings"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Basic configuration for environmental cleaning"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"defaultCleaningDuration",className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Cleaning Duration (minutes)"}),e.jsx("input",{id:"defaultCleaningDuration",type:"number",value:r.defaultCleaningDuration,onChange:s=>t("defaultCleaningDuration",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:O.defaultCleaningDuration.min,max:O.defaultCleaningDuration.max})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"qualityScoreThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Quality Score Threshold"}),e.jsx("input",{id:"qualityScoreThreshold",type:"number",value:r.qualityScoreThreshold,onChange:s=>t("qualityScoreThreshold",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:O.qualityScoreThreshold.min,max:O.qualityScoreThreshold.max})]})]})]})}),Ic=({aiSettings:r,onAISettingChange:t})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(b,{path:$e,size:1.5,className:"text-purple-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-800",children:"Master AI Control"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Enable or disable all AI features globally"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiEnabled",className:"text-sm font-medium text-purple-800",children:"Enable AI Features"}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Master switch for all environmental cleaning AI capabilities"})]}),e.jsx("button",{id:"aiEnabled",onClick:()=>t("aiEnabled",!r.aiEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 ${r.aiEnabled?"bg-purple-600":"bg-gray-200"}`,"aria-label":"Enable AI Features",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.aiEnabled?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(b,{path:$e,size:1.2,className:"text-green-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Predictive Cleaning"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:pr.predictiveCleaning.map(({key:s,label:a,desc:n})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:s,className:"text-sm font-medium text-gray-700",children:a}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n})]}),e.jsx("button",{id:s,onClick:()=>t(s,!r[s]),disabled:!r.aiEnabled,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1 ${r[s]?"bg-green-600":"bg-gray-200"} ${r.aiEnabled?"":"opacity-50 cursor-not-allowed"}`,"aria-label":a,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${r[s]?"translate-x-5":"translate-x-1"}`})})]},s))})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(b,{path:Me,size:1.2,className:"text-blue-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Smart Room Management"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:pr.smartRoomManagement.map(({key:s,label:a,desc:n})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:a}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n})]}),e.jsx("button",{onClick:()=>t(s,!r[s]),disabled:!r.aiEnabled,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 ${r[s]?"bg-blue-600":"bg-gray-200"} ${r.aiEnabled?"":"opacity-50 cursor-not-allowed"}`,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${r[s]?"translate-x-5":"translate-x-1"}`})})]},s))})]})]})]}),Pc=({protocolSettings:r,onProtocolSettingChange:t})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(b,{path:Fe,size:1.5,className:"text-green-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-green-800",children:"Cleaning Protocols"}),e.jsx("p",{className:"text-sm text-green-700",children:"Configure cleaning procedures and standards"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bufferTimeMinutes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Buffer Time (minutes)"}),e.jsx("input",{id:"bufferTimeMinutes",type:"number",value:r.bufferTimeMinutes,onChange:s=>t("bufferTimeMinutes",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",min:O.bufferTimeMinutes.min,max:O.bufferTimeMinutes.max})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"maxConcurrentCleanings",className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Concurrent Cleanings"}),e.jsx("input",{id:"maxConcurrentCleanings",type:"number",value:r.maxConcurrentCleanings,onChange:s=>t("maxConcurrentCleanings",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",min:O.maxConcurrentCleanings.min,max:O.maxConcurrentCleanings.max})]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"autoSchedulingEnabled",className:"text-sm font-medium text-gray-700",children:"Auto Scheduling"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable automatic cleaning schedule generation"})]}),e.jsx("button",{id:"autoSchedulingEnabled",onClick:()=>t("autoSchedulingEnabled",!r.autoSchedulingEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 ${r.autoSchedulingEnabled?"bg-green-600":"bg-gray-200"}`,"aria-label":"Auto Scheduling",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.autoSchedulingEnabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"weekendCleaningEnabled",className:"text-sm font-medium text-gray-700",children:"Weekend Cleaning"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Allow cleaning tasks on weekends"})]}),e.jsx("button",{id:"weekendCleaningEnabled",onClick:()=>t("weekendCleaningEnabled",!r.weekendCleaningEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 ${r.weekendCleaningEnabled?"bg-green-600":"bg-gray-200"}`,"aria-label":"Weekend Cleaning",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.weekendCleaningEnabled?"translate-x-6":"translate-x-1"}`})})]})]})]})}),Oc=({notificationSettings:r,onNotificationSettingChange:t})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(b,{path:Fr,size:1.5,className:"text-yellow-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-yellow-800",children:"Notification Settings"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Configure how and when you receive notifications"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Email Notifications"}),e.jsx("div",{className:"space-y-3",children:hr.email.map(({key:s,label:a})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:s,className:"text-sm text-gray-700",children:a}),e.jsx("button",{id:s,onClick:()=>t(s,!r[s]),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-1 ${r[s]?"bg-yellow-600":"bg-gray-200"}`,"aria-label":a,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${r[s]?"translate-x-5":"translate-x-1"}`})})]},s))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"In-App Notifications"}),e.jsx("div",{className:"space-y-3",children:hr.inApp.map(({key:s,label:a})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:s,className:"text-sm text-gray-700",children:a}),e.jsx("button",{id:s,onClick:()=>t(s,!r[s]),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-1 ${r[s]?"bg-yellow-600":"bg-gray-200"}`,"aria-label":a,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${r[s]?"translate-x-5":"translate-x-1"}`})})]},s))})]})]})]})}),Dc=({protocolSettings:r,onProtocolSettingChange:t})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(b,{path:Me,size:1.5,className:"text-red-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-red-800",children:"Compliance & Audit"}),e.jsx("p",{className:"text-sm text-red-700",children:"Configure compliance tracking and reporting"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"complianceTrackingEnabled",className:"text-sm font-medium text-gray-700",children:"Compliance Tracking"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Track regulatory compliance automatically"})]}),e.jsx("button",{id:"complianceTrackingEnabled",onClick:()=>t("complianceTrackingEnabled",!r.complianceTrackingEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 ${r.complianceTrackingEnabled?"bg-red-600":"bg-gray-200"}`,"aria-label":"Compliance Tracking",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.complianceTrackingEnabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"auditLogRetentionDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Audit Log Retention (days)"}),e.jsx("input",{id:"auditLogRetentionDays",type:"number",value:r.auditLogRetentionDays,onChange:s=>t("auditLogRetentionDays",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",min:O.auditLogRetentionDays.min,max:O.auditLogRetentionDays.max})]})]})]})}),Rc=({aiSettings:r,onAISettingChange:t})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(b,{path:he,size:1.5,className:"text-gray-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Advanced Settings"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Advanced configuration and system settings"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiConfidenceThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Confidence Threshold"}),e.jsx("input",{id:"aiConfidenceThreshold",type:"number",value:r.aiConfidenceThreshold,onChange:s=>t("aiConfidenceThreshold",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500",min:O.aiConfidenceThreshold.min,max:O.aiConfidenceThreshold.max,step:O.aiConfidenceThreshold.step}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum confidence for AI predictions"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiDataRetentionDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Retention (days)"}),e.jsx("input",{id:"aiDataRetentionDays",type:"number",value:r.aiDataRetentionDays,onChange:s=>t("aiDataRetentionDays",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500",min:O.aiDataRetentionDays.min,max:O.aiDataRetentionDays.max}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How long to keep AI training data"})]})]})]})});var kc=Object.defineProperty,Lc=Object.defineProperties,Mc=Object.getOwnPropertyDescriptors,fr=Object.getOwnPropertySymbols,$c=Object.prototype.hasOwnProperty,Fc=Object.prototype.propertyIsEnumerable,br=(r,t,s)=>t in r?kc(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Ct=(r,t)=>{for(var s in t||(t={}))$c.call(t,s)&&br(r,s,t[s]);if(fr)for(var s of fr(t))Fc.call(t,s)&&br(r,s,t[s]);return r},St=(r,t)=>Lc(r,Mc(t)),zc=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const Vc=()=>{const[r,t]=p.useState(dc),[s,a]=p.useState(uc),[n,o]=p.useState(mc),[l,c]=p.useState(null),[i,d]=p.useState(!1);return{aiSettings:r,protocolSettings:s,notificationSettings:n,message:l,isLoading:i,handleAISettingChange:(g,j)=>{t(_=>St(Ct({},_),{[g]:j}))},handleProtocolSettingChange:(g,j)=>{a(_=>St(Ct({},_),{[g]:j}))},handleNotificationSettingChange:(g,j)=>{o(_=>St(Ct({},_),{[g]:j}))},handleSaveSettings:()=>zc(null,null,function*(){try{d(!0),c(null);const g=yc(r,s,n);if(!g.isValid){c({type:"error",text:g.errors[0]||"Validation failed"});return}yield Tc(r,s,n),c({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>c(null),hc)}catch(g){console.error(g),c({type:"error",text:"Failed to save settings. Please try again."})}finally{d(!1)}}),clearMessage:()=>c(null)}},Gc=()=>{const[r,t]=p.useState("general"),{aiSettings:s,protocolSettings:a,notificationSettings:n,message:o,isLoading:l,handleAISettingChange:c,handleProtocolSettingChange:i,handleNotificationSettingChange:d,handleSaveSettings:u}=Vc(),m=()=>{switch(r){case"general":return e.jsx(Ac,{protocolSettings:a,onProtocolSettingChange:i});case"ai":return e.jsx(Ic,{aiSettings:s,onAISettingChange:c});case"protocols":return e.jsx(Pc,{protocolSettings:a,onProtocolSettingChange:i});case"rooms":return e.jsx(Zl,{});case"checklists":return e.jsx(cc,{});case"notifications":return e.jsx(Oc,{notificationSettings:n,onNotificationSettingChange:d});case"compliance":return e.jsx(Dc,{protocolSettings:a,onProtocolSettingChange:i});case"advanced":return e.jsx(Rc,{aiSettings:s,onAISettingChange:c});default:return null}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Environmental Cleaning Settings"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Configure comprehensive settings for environmental cleaning workflows, AI features, protocols, and compliance."})]}),o&&e.jsx("div",{className:`p-4 rounded-lg border ${o.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{path:o.type==="success"?Se:ne,size:1,className:"text-current"}),o.text]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:pc.map(x=>e.jsxs("button",{onClick:()=>t(x.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${r===x.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(b,{path:x.icon,size:1}),x.label||x.name]},x.id))})}),e.jsx("div",{className:"min-h-[400px]",children:m()}),e.jsx("div",{className:"flex justify-end pt-6 border-t",children:e.jsxs("button",{onClick:u,disabled:l,className:"px-6 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#45B7AF] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(b,{path:Ve,size:1}),l?"Saving...":"Save Settings"]})})]})},Z=({title:r,children:t})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700",children:r}),e.jsx("div",{className:"space-y-3",children:t})]});var qc=Object.defineProperty,Uc=Object.defineProperties,Bc=Object.getOwnPropertyDescriptors,yr=Object.getOwnPropertySymbols,Hc=Object.prototype.hasOwnProperty,Yc=Object.prototype.propertyIsEnumerable,vr=(r,t,s)=>t in r?qc(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Wc=(r,t)=>{for(var s in t||(t={}))Hc.call(t,s)&&vr(r,s,t[s]);if(yr)for(var s of yr(t))Yc.call(t,s)&&vr(r,s,t[s]);return r},Kc=(r,t)=>Uc(r,Bc(t));const Qc=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(Kc(Wc({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h5",{className:"text-md font-medium text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(b,{path:J,size:1,className:"text-gray-600"}),"General Settings"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(Z,{title:"Core Features",children:[e.jsx(z,{id:"autoCalculateTotals",checked:r.autoCalculateTotals,onChange:a=>s("autoCalculateTotals",a),label:"Auto-calculate totals"}),e.jsx(z,{id:"requireApprovalForAdjustments",checked:r.requireApprovalForAdjustments,onChange:a=>s("requireApprovalForAdjustments",a),label:"Require approval for adjustments"}),e.jsx(z,{id:"allowNegativeQuantities",checked:r.allowNegativeQuantities,onChange:a=>s("allowNegativeQuantities",a),label:"Allow negative quantities"})]}),e.jsxs(Z,{title:"System Features",children:[e.jsx(z,{id:"enableRealTimeUpdates",checked:r.enableRealTimeUpdates,onChange:a=>s("enableRealTimeUpdates",a),label:"Enable real-time updates"}),e.jsx(z,{id:"enableAuditTrails",checked:r.enableAuditTrails,onChange:a=>s("enableAuditTrails",a),label:"Enable audit trails"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"defaultTransactionType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Default transaction type"}),e.jsxs("select",{id:"defaultTransactionType",value:r.defaultTransactionType,onChange:a=>s("defaultTransactionType",a.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"in",children:"In"}),e.jsx("option",{value:"out",children:"Out"}),e.jsx("option",{value:"adjustment",children:"Adjustment"})]})]})]})]})]})})};var Zc=Object.defineProperty,Xc=Object.defineProperties,Jc=Object.getOwnPropertyDescriptors,jr=Object.getOwnPropertySymbols,ed=Object.prototype.hasOwnProperty,td=Object.prototype.propertyIsEnumerable,Nr=(r,t,s)=>t in r?Zc(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,sd=(r,t)=>{for(var s in t||(t={}))ed.call(t,s)&&Nr(r,s,t[s]);if(jr)for(var s of jr(t))td.call(t,s)&&Nr(r,s,t[s]);return r},rd=(r,t)=>Xc(r,Jc(t));const ad=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(rd(sd({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h5",{className:"text-md font-medium text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(b,{path:Ge,size:1,className:"text-gray-600"}),"Stock Management"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(Z,{title:"Stock Thresholds",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lowStockThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Low stock threshold"}),e.jsx("input",{id:"lowStockThreshold",type:"number",value:r.lowStockThreshold,onChange:a=>s("lowStockThreshold",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"criticalStockThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Critical stock threshold"}),e.jsx("input",{id:"criticalStockThreshold",type:"number",value:r.criticalStockThreshold,onChange:a=>s("criticalStockThreshold",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:"0"})]})]}),e.jsxs(Z,{title:"Reorder Settings",children:[e.jsx(z,{id:"autoReorderEnabled",checked:r.autoReorderEnabled,onChange:a=>s("autoReorderEnabled",a),label:"Enable automatic reordering"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reorderBufferDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reorder buffer (days)"}),e.jsx("input",{id:"reorderBufferDays",type:"number",value:r.reorderBufferDays,onChange:a=>s("reorderBufferDays",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:"1",max:"30"})]})]})]})]})})};var nd=Object.defineProperty,id=Object.defineProperties,ld=Object.getOwnPropertyDescriptors,_r=Object.getOwnPropertySymbols,od=Object.prototype.hasOwnProperty,cd=Object.prototype.propertyIsEnumerable,Cr=(r,t,s)=>t in r?nd(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,dd=(r,t)=>{for(var s in t||(t={}))od.call(t,s)&&Cr(r,s,t[s]);if(_r)for(var s of _r(t))cd.call(t,s)&&Cr(r,s,t[s]);return r},ud=(r,t)=>id(r,ld(t));const md=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(ud(dd({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h5",{className:"text-md font-medium text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(b,{path:he,size:1,className:"text-gray-600"}),"Categories & Organization"]}),e.jsx("div",{className:"space-y-4",children:e.jsxs(Z,{title:"Organization Features",children:[e.jsx(z,{id:"enableSubcategories",checked:r.enableSubcategories,onChange:a=>s("enableSubcategories",a),label:"Enable subcategories"}),e.jsx(z,{id:"enableCustomTags",checked:r.enableCustomTags,onChange:a=>s("enableCustomTags",a),label:"Enable custom tags"}),e.jsx(z,{id:"requireCategoryAssignment",checked:r.requireCategoryAssignment,onChange:a=>s("requireCategoryAssignment",a),label:"Require category assignment"})]})})]})})};var pd=Object.defineProperty,hd=Object.defineProperties,gd=Object.getOwnPropertyDescriptors,Sr=Object.getOwnPropertySymbols,xd=Object.prototype.hasOwnProperty,fd=Object.prototype.propertyIsEnumerable,wr=(r,t,s)=>t in r?pd(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,bd=(r,t)=>{for(var s in t||(t={}))xd.call(t,s)&&wr(r,s,t[s]);if(Sr)for(var s of Sr(t))fd.call(t,s)&&wr(r,s,t[s]);return r},yd=(r,t)=>hd(r,gd(t));const vd=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(yd(bd({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h5",{className:"text-md font-medium text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(b,{path:$t,size:1,className:"text-gray-600"}),"Reporting & Analytics"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(Z,{title:"Report Generation",children:[e.jsx(z,{id:"autoGenerateReports",checked:r.autoGenerateReports,onChange:a=>s("autoGenerateReports",a),label:"Auto-generate reports"}),e.jsx(z,{id:"includeSensitiveData",checked:r.includeSensitiveData,onChange:a=>s("includeSensitiveData",a),label:"Include sensitive data"})]}),e.jsxs(Z,{title:"Report Configuration",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reportRetentionDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report retention (days)"}),e.jsx("input",{id:"reportRetentionDays",type:"number",value:r.reportRetentionDays,onChange:a=>s("reportRetentionDays",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:"30",max:"1095"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reportFormat",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report format"}),e.jsxs("select",{id:"reportFormat",value:r.reportFormat,onChange:a=>s("reportFormat",a.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"PDF",children:"PDF"}),e.jsx("option",{value:"Excel",children:"Excel"}),e.jsx("option",{value:"CSV",children:"CSV"})]})]})]})]})]})})},jd=({aiSettings:r,onAISettingChange:t,onAISettingsSave:s,onAISettingsReset:a,isLoading:n,aiMessage:o})=>r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI-Powered Features"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:a,disabled:n,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:"Reset to Defaults"}),e.jsx("button",{onClick:s,disabled:n,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:n?"Saving...":"Save AI Settings"})]})]}),o&&e.jsx("div",{className:`p-3 rounded-md ${o.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:o}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Enable AI Features"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Master toggle for all AI-powered inventory features"})]}),e.jsx(z,{id:"ai_enabled",checked:r.ai_enabled,onChange:l=>t("ai_enabled",l),label:""})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsx(Z,{title:"Computer Vision",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(z,{id:"barcode_scanning_enabled",checked:r.barcode_scanning_enabled,onChange:l=>t("barcode_scanning_enabled",l),label:"Barcode Scanning AI",disabled:!r.ai_enabled}),e.jsx(z,{id:"image_recognition_enabled",checked:r.image_recognition_enabled,onChange:l=>t("image_recognition_enabled",l),label:"Image Recognition",disabled:!r.ai_enabled}),e.jsx(z,{id:"quality_assessment_enabled",checked:r.quality_assessment_enabled,onChange:l=>t("quality_assessment_enabled",l),label:"Quality Assessment",disabled:!r.ai_enabled}),e.jsx(z,{id:"damage_detection_enabled",checked:r.damage_detection_enabled,onChange:l=>t("damage_detection_enabled",l),label:"Damage Detection",disabled:!r.ai_enabled})]})})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsx(Z,{title:"Predictive Analytics",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(z,{id:"demand_forecasting_enabled",checked:r.demand_forecasting_enabled,onChange:l=>t("demand_forecasting_enabled",l),label:"Demand Forecasting",disabled:!r.ai_enabled}),e.jsx(z,{id:"cost_optimization_enabled",checked:r.cost_optimization_enabled,onChange:l=>t("cost_optimization_enabled",l),label:"Cost Optimization",disabled:!r.ai_enabled}),e.jsx(z,{id:"seasonal_analysis_enabled",checked:r.seasonal_analysis_enabled,onChange:l=>t("seasonal_analysis_enabled",l),label:"Seasonal Analysis",disabled:!r.ai_enabled})]})})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsx(Z,{title:"Smart Categorization",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(z,{id:"smart_categorization_enabled",checked:r.smart_categorization_enabled,onChange:l=>t("smart_categorization_enabled",l),label:"Smart Categorization",disabled:!r.ai_enabled}),e.jsx(z,{id:"auto_classification_enabled",checked:r.auto_classification_enabled,onChange:l=>t("auto_classification_enabled",l),label:"Auto Classification",disabled:!r.ai_enabled}),e.jsx(z,{id:"smart_form_filling_enabled",checked:r.smart_form_filling_enabled,onChange:l=>t("smart_form_filling_enabled",l),label:"Smart Form Filling",disabled:!r.ai_enabled})]})})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsx(Z,{title:"AI Configuration",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ai_confidence_threshold",className:"block text-sm font-medium text-gray-700",children:"Confidence Threshold"}),e.jsx("input",{id:"ai_confidence_threshold",type:"range",min:"0.5",max:"1.0",step:"0.05",value:r.ai_confidence_threshold,onChange:l=>t("ai_confidence_threshold",parseFloat(l.target.value)),disabled:!r.ai_enabled,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer disabled:opacity-50"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[(r.ai_confidence_threshold*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ai_data_retention_days",className:"block text-sm font-medium text-gray-700",children:"Data Retention (days)"}),e.jsx("input",{id:"ai_data_retention_days",type:"number",min:"30",max:"365",value:r.ai_data_retention_days,onChange:l=>t("ai_data_retention_days",parseInt(l.target.value)),disabled:!r.ai_enabled,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm disabled:opacity-50"})]})]})})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsx(Z,{title:"Privacy & Performance",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(z,{id:"encrypted_data_transmission",checked:r.encrypted_data_transmission,onChange:l=>t("encrypted_data_transmission",l),label:"Encrypted Data Transmission",disabled:!r.ai_enabled}),e.jsx(z,{id:"local_ai_processing_enabled",checked:r.local_ai_processing_enabled,onChange:l=>t("local_ai_processing_enabled",l),label:"Local AI Processing",disabled:!r.ai_enabled}),e.jsx(z,{id:"performance_monitoring",checked:r.performance_monitoring,onChange:l=>t("performance_monitoring",l),label:"Performance Monitoring",disabled:!r.ai_enabled})]})})})]})]}):e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("span",{className:"text-gray-600",children:"Loading AI settings..."})]})})});var Nd=Object.defineProperty,_d=Object.defineProperties,Cd=Object.getOwnPropertyDescriptors,Er=Object.getOwnPropertySymbols,Sd=Object.prototype.hasOwnProperty,wd=Object.prototype.propertyIsEnumerable,Tr=(r,t,s)=>t in r?Nd(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Xe=(r,t)=>{for(var s in t||(t={}))Sd.call(t,s)&&Tr(r,s,t[s]);if(Er)for(var s of Er(t))wd.call(t,s)&&Tr(r,s,t[s]);return r},wt=(r,t)=>_d(r,Cd(t)),je=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const Ed=()=>{const{currentUser:r}=Mt(),[t,s]=p.useState(null),[a,n]=p.useState(""),[o,l]=p.useState(!1),[c,i]=p.useState(null),[d,u]=p.useState({autoCalculateTotals:!0,requireApprovalForAdjustments:!0,allowNegativeQuantities:!1,requireReasonForAdjustments:!0,defaultTransactionType:"in",enableRealTimeUpdates:!0,enableAuditTrails:!0,lowStockThreshold:10,criticalStockThreshold:5,autoReorderEnabled:!1,reorderBufferDays:7,enableSubcategories:!0,enableCustomTags:!0,requireCategoryAssignment:!0,autoGenerateReports:!1,reportRetentionDays:365,includeSensitiveData:!1,reportFormat:"PDF",aiEnabled:!1,computerVisionEnabled:!1,smartCategorizationEnabled:!1,predictiveAnalyticsEnabled:!1,aiConfidenceThreshold:.8,autoCategorizationEnabled:!1,smartFormFillingEnabled:!1,maintenancePredictionsEnabled:!1,demandForecastingEnabled:!1,openaiApiKey:"",googleVisionApiKey:"",dataSharingEnabled:!1,localAIProcessingEnabled:!1,aiDataRetentionDays:90});p.useEffect(()=>{je(null,null,function*(){try{const y=yield Ot.getCurrentFacilityId(),D=new Pr(y);i(D),m(D)}catch(y){console.error("Failed to initialize AI service:",y),n("Failed to initialize AI service")}})},[]);const m=N=>je(null,null,function*(){try{l(!0);let y=yield N.loadSettings();y||(yield N.initializeSettings(),y=yield N.loadSettings()),s(y)}catch(y){console.error("Error loading AI settings:",y),n("Error loading AI settings")}finally{l(!1)}}),x=(N,y)=>{t&&s(wt(Xe({},t),{[N]:y}))},v=()=>je(null,null,function*(){if(!(!c||!t))try{l(!0),(yield c.saveSettings(t))?(n("AI settings saved successfully"),setTimeout(()=>n(""),3e3)):n("Error saving AI settings")}catch(N){console.error("Error saving AI settings:",N),n("Error saving AI settings")}finally{l(!1)}}),h=()=>je(null,null,function*(){if(c)try{l(!0),yield c.initializeSettings(),yield m(c),n("AI settings reset to defaults"),setTimeout(()=>n(""),3e3)}catch(N){console.error("Error resetting AI settings:",N),n("Error resetting AI settings")}finally{l(!1)}}),g=p.useCallback(()=>je(null,null,function*(){if(r!=null&&r.id){l(!0);try{const N=localStorage.getItem("cliniio_ai_settings");if(N){const y=JSON.parse(N);u(D=>wt(Xe(Xe({},D),y),{openaiApiKey:y.openaiApiKey?"••••••••"+y.openaiApiKey.slice(-4):"",googleVisionApiKey:y.googleVisionApiKey?"••••••••"+y.googleVisionApiKey.slice(-4):""}))}}catch(N){console.error("Failed to load inventory settings:",N)}finally{l(!1)}}}),[r==null?void 0:r.id]);return p.useEffect(()=>{g()},[g]),{settings:d,setSettings:u,aiSettings:t,aiMessage:a,isLoading:o,handleInputChange:(N,y)=>{u(D=>wt(Xe({},D),{[N]:y}))},handleAISettingChange:x,handleAISettingsSave:v,handleAISettingsReset:h,saveSettings:()=>je(null,null,function*(){if(r!=null&&r.id)try{const N={aiEnabled:d.aiEnabled,computerVisionEnabled:d.computerVisionEnabled,smartCategorizationEnabled:d.smartCategorizationEnabled,predictiveAnalyticsEnabled:d.predictiveAnalyticsEnabled,aiConfidenceThreshold:d.aiConfidenceThreshold,autoCategorizationEnabled:d.autoCategorizationEnabled,smartFormFillingEnabled:d.smartFormFillingEnabled,maintenancePredictionsEnabled:d.maintenancePredictionsEnabled,demandForecastingEnabled:d.demandForecastingEnabled,dataSharingEnabled:d.dataSharingEnabled,localAIProcessingEnabled:d.localAIProcessingEnabled,aiDataRetentionDays:d.aiDataRetentionDays};localStorage.setItem("cliniio_ai_settings",JSON.stringify(N))}catch(N){console.error("Failed to save inventory settings:",N)}}),loadSettings:g}};var Td=(r,t,s)=>new Promise((a,n)=>{var o=i=>{try{c(s.next(i))}catch(d){n(d)}},l=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,l);c((s=s.apply(r,t)).next())});const Ad=()=>{const[r,t]=p.useState("general"),[s,a]=p.useState(!1),[n,o]=p.useState(null),{settings:l,setSettings:c,aiSettings:i,aiMessage:d,isLoading:u,handleAISettingChange:m,handleAISettingsSave:x,handleAISettingsReset:v,saveSettings:h,loadSettings:g}=Ed(),j=[{id:"general",label:"General Settings",icon:J},{id:"stock",label:"Stock Management",icon:Ge},{id:"categories",label:"Categories & Tags",icon:he},{id:"reporting",label:"Reporting & Analytics",icon:$t},{id:"ai",label:"AI & Machine Learning",icon:we}],_=()=>Td(null,null,function*(){try{a(!0),o(null),yield h(),o({type:"success",text:"Settings saved successfully"}),setTimeout(()=>o(null),3e3)}catch(y){console.error(y),o({type:"error",text:"Failed to save settings"})}finally{a(!1)}}),N=()=>{switch(r){case"general":return e.jsx(Qc,{settings:l,onSettingsChange:c});case"stock":return e.jsx(ad,{settings:l,onSettingsChange:c});case"categories":return e.jsx(md,{settings:l,onSettingsChange:c});case"reporting":return e.jsx(vd,{settings:l,onSettingsChange:c});case"ai":return e.jsx(jd,{aiSettings:i,onAISettingChange:m,onAISettingsSave:x,onAISettingsReset:v,isLoading:u,aiMessage:d});default:return null}};return u?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading inventory settings..."})]}):e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Inventory Management Settings"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Configure inventory behavior, AI features, and system preferences"}),n&&e.jsx("div",{className:`p-4 rounded-lg border mb-6 ${n.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{path:n.type==="success"?Se:ne,size:1,className:"text-current"}),n.text]})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:j.map(y=>e.jsxs("button",{onClick:()=>t(y.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${r===y.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(b,{path:y.icon,size:1}),e.jsx("span",{children:y.label})]},y.id))})})}),e.jsx("div",{className:"tab-content-area",children:N()}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsxs("button",{onClick:g,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:[e.jsx(b,{path:It,size:1,className:"inline mr-2"}),"Reset"]}),e.jsxs("button",{onClick:_,disabled:s,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:[e.jsx(b,{path:Ve,size:1,className:"inline mr-2"}),s?"Saving...":"Save Settings"]})]})]})},Ar=[{id:"profile",label:"Profile & Account",icon:kt,description:"Manage your admin account information and personal settings."},{id:"system",label:"System Administration",icon:J,description:"Manage users, roles, permissions, and system-wide settings."},{id:"content",label:"Content Management",icon:va,description:"Create, edit, and manage Knowledge Hub and Library content."},{id:"learning",label:"Learning & Training",icon:ja,description:"Configure training modules, certifications, and learning paths."},{id:"cleaning",label:"Environmental Cleaning",icon:Na,description:"Manage room cleaning schedules, protocols, and status."},{id:"inventory",label:"Inventory Management",icon:Ge,description:"Oversee inventory, categories, stock levels, and procurement."},{id:"sterilization",label:"Sterilization",icon:_a,description:"Monitor sterilization cycles, equipment, and compliance."},{id:"system-config",label:"Billing",icon:Ca,description:"Manage billing settings, payment methods, and subscription plans."},{id:"analytics",label:"AI and Analytics",icon:$e,description:"Configure AI features, view system analytics, and generate intelligent reports."}],Ir={profile:{bg:"bg-blue-100",icon:"text-blue-700"},system:{bg:"bg-green-100",icon:"text-green-800"},content:{bg:"bg-purple-200",icon:"text-purple-900"},learning:{bg:"bg-yellow-200",icon:"text-yellow-900"},cleaning:{bg:"bg-teal-100",icon:"text-teal-700"},inventory:{bg:"bg-blue-100",icon:"text-blue-700"},sterilization:{bg:"bg-purple-200",icon:"text-purple-900"},"system-config":{bg:"bg-green-100",icon:"text-green-800"},analytics:{bg:"bg-yellow-200",icon:"text-yellow-900"}},Md=()=>{const[r,t]=p.useState(null),[s,a]=p.useState(null),n=l=>{try{a(null),t(c=>c===l?null:l)}catch(c){console.error("Error opening settings card:",c),a(c instanceof Error?c.message:"Failed to open settings")}},o=()=>{const l=[];for(let c=0;c<Ar.length;c++){const i=Ar[c];l.push(e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>n(i.id),className:`bg-white rounded-xl shadow p-6 border border-gray-100 text-left transition-all duration-200 hover:shadow-md hover:scale-105 focus:outline-none w-full min-h-[180px] flex flex-col justify-between ${r===i.id?"ring-2 ring-[#4ECDC4]":""}`,type:"button",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("span",{className:`${Ir[i.id].bg} rounded-md p-2 mr-3`,children:e.jsx(b,{path:i.icon,size:1,className:Ir[i.id].icon})}),e.jsx("h3",{className:"text-base font-medium text-gray-700",children:i.label})]}),e.jsx("p",{className:"text-gray-500 text-sm mt-auto",children:i.description})]})},i.id)),r===i.id&&l.push(e.jsxs("div",{className:"col-span-full bg-white border border-gray-200 rounded-xl shadow-lg p-6 animate-fade-in my-2",style:{gridColumn:"1 / -1"},children:[i.id==="profile"&&e.jsx(le,{fallback:e.jsx("div",{className:"text-red-600 p-4",children:"Failed to load Profile Settings"}),children:e.jsx(dn,{})}),i.id==="system"&&e.jsx(le,{fallback:e.jsx("div",{className:"text-red-600 p-4",children:"Failed to load System Administration Settings"}),children:e.jsx(Fn,{})}),i.id==="system-config"&&e.jsx(le,{fallback:e.jsx("div",{className:"text-red-600 p-4",children:"Failed to load Billing Settings"}),children:e.jsx(zn,{})}),i.id==="content"&&e.jsx(le,{fallback:e.jsx("div",{className:"text-red-600 p-4",children:"Failed to load Content Management Settings"}),children:e.jsx($i,{})}),i.id==="learning"&&e.jsx(le,{fallback:e.jsx("div",{className:"text-red-600 p-4",children:"Failed to load Learning & Training Settings"}),children:e.jsx(El,{})}),i.id==="cleaning"&&e.jsx(le,{fallback:e.jsx("div",{className:"text-red-600 p-4",children:"Failed to load Environmental Cleaning Settings"}),children:e.jsx(Gc,{})}),i.id==="inventory"&&e.jsx(le,{fallback:e.jsx("div",{className:"text-red-600 p-4",children:"Failed to load Inventory Management Settings"}),children:e.jsx(Ad,{})}),i.id==="sterilization"&&e.jsx(le,{fallback:e.jsx("div",{className:"text-red-600 p-4",children:"Failed to load Sterilization Settings"}),children:e.jsx(Mi,{})}),i.id==="analytics"&&e.jsx(le,{fallback:e.jsx("div",{className:"text-red-600 p-4",children:"Failed to load AI Analytics Settings"}),children:e.jsx(fi,{})})]},i.id+"-drawer"))}return l};return e.jsx(Zr,{children:e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("div",{className:"p-4 max-w-7xl w-full mx-auto flex-1 flex flex-col",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-[#5b5b5b] mb-1",children:"Admin Settings"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Configure system-wide settings, manage users, and control application features"})]}),s&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:e.jsxs("p",{className:"text-red-600 text-sm",children:["Error: ",s]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 flex-1",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:o()})})]})})})};export{Md as default};
