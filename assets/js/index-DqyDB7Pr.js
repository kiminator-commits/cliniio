import{j as e,A as ca,m as Ft}from"./utils-DSBVV_PW.js";import{a as g,d as da,u as ua}from"./vendor-DoALFvsH.js";import{F as lt,S as ot,I as Ur,E as ma,L as pa,u as Se,a as zt,b as ga,f as ha,c as xa,d as fa,U as Vt,e as Xt,g as ba}from"./main-hcQsQQ-J.js";import{U as Gt,aB as ee,aC as ya,aD as Br,I as v,$ as va,O as Jt,c as ne,i as ja,e as Na,S as kt,a4 as he,a as _a,af as Le,aE as Me,aF as qt,aG as Lt,T as $t,aH as Ce,b as we,h as Ca,aI as Sa,u as Fe,aJ as wa,ag as Hr,aK as Ea,M as Ee,aL as Te,l as Mt,aM as Ge,ah as Ut,aN as xe,aO as Ta,aP as $e,aQ as Aa,aR as Yr,t as ze,a5 as Ve,a7 as es,j as tt,F as Bt,D as Ht,f as Wr,aj as Kr,ak as Qr,aa as Zr,aA as Ia,d as st,al as Pa,H as Oa,aw as Da,ac as qe,a6 as Ra,aS as ka,aT as La,E as $a,aU as Ma,aV as Xr,ay as Fa,aW as za,Z as Va,L as Ga,aX as qa}from"./errors-CdY1Sgot.js";import{s as O,u as ct,f as Ua,y as Ba,O as ut,a1 as ue,I as Ie,E as le}from"./login-BkZ1x_Cy.js";import{I as Ha}from"./inventoryTransformers-Cr0oYokb.js";import"./data-73RVSc-N.js";import"./ui-DETUEJ2B.js";const Ya=({activeTab:r,onTabChange:t})=>{const s=[{id:"basic-info",label:"Basic Information",icon:Gt},{id:"preferences",label:"Preferences",icon:ee},{id:"mobile",label:"Mobile Scanner Shortcuts",icon:ya},{id:"account",label:"Account Management",icon:Br}];return e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:s.map(a=>e.jsxs("button",{onClick:()=>t(a.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${r===a.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(v,{path:a.icon,size:1}),e.jsx("span",{children:a.label})]},a.id))})})})};var Wa=Object.defineProperty,Ka=Object.defineProperties,Qa=Object.getOwnPropertyDescriptors,ts=Object.getOwnPropertySymbols,Za=Object.prototype.hasOwnProperty,Xa=Object.prototype.propertyIsEnumerable,ss=(r,t,s)=>t in r?Wa(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,te=(r,t)=>{for(var s in t||(t={}))Za.call(t,s)&&ss(r,s,t[s]);if(ts)for(var s of ts(t))Xa.call(t,s)&&ss(r,s,t[s]);return r},se=(r,t)=>Ka(r,Qa(t));const Ja=({basicInfoForm:r,setBasicInfoForm:t,userData:s,uploadingPhoto:a,uploadProfilePhoto:n,removeProfilePhoto:l})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx("input",{id:"first-name",type:"text",value:r.first_name,onChange:o=>t(c=>se(te({},c),{first_name:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx("input",{id:"last-name",type:"text",value:r.last_name,onChange:o=>t(c=>se(te({},c),{last_name:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{id:"email",type:"email",value:r.email,onChange:o=>t(c=>se(te({},c),{email:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{id:"phone",type:"tel",value:r.phone,onChange:o=>t(c=>se(te({},c),{phone:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsx("input",{id:"department",type:"text",value:r.department,onChange:o=>t(c=>se(te({},c),{department:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"position",className:"block text-sm font-medium text-gray-700 mb-2",children:"Position"}),e.jsx("input",{id:"position",type:"text",value:r.position,onChange:o=>t(c=>se(te({},c),{position:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date-of-birth",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),e.jsx("input",{id:"date-of-birth",type:"date",value:r.date_of_birth,onChange:o=>t(c=>se(te({},c),{date_of_birth:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),e.jsx("textarea",{id:"bio",value:r.bio||"",onChange:o=>t(c=>se(te({},c),{bio:o.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tell us about yourself..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"preferred-language",className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Language"}),e.jsxs("select",{id:"preferred-language",value:r.preferred_language||"en",onChange:o=>t(c=>se(te({},c),{preferred_language:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"}),e.jsx("option",{value:"pt",children:"Portuguese"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"timezone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),e.jsxs("select",{id:"timezone",value:r.timezone||"UTC",onChange:o=>t(c=>se(te({},c),{timezone:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"Eastern Time"}),e.jsx("option",{value:"America/Chicago",children:"Central Time"}),e.jsx("option",{value:"America/Denver",children:"Mountain Time"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time"}),e.jsx("option",{value:"Europe/London",children:"London"}),e.jsx("option",{value:"Europe/Paris",children:"Paris"}),e.jsx("option",{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Profile Picture"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:a?e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#4ECDC4]"})}):s!=null&&s.avatar_url?e.jsx("img",{src:String(s.avatar_url),alt:"Profile",className:"w-20 h-20 rounded-full object-cover"}):e.jsx(v,{path:va,size:2,className:"text-gray-400"})}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("input",{type:"file",id:"profile-photo",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:o=>{var c;const i=(c=o.target.files)==null?void 0:c[0];i&&n(i),o.target.value=""},className:"hidden",disabled:a}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm cursor-pointer text-center disabled:opacity-50 disabled:cursor-not-allowed",onClick:o=>{if(a){o.preventDefault();return}document.getElementById("profile-photo").click()},disabled:a,children:a?"Uploading...":"Upload Photo"}),(s==null?void 0:s.avatar_url)&&e.jsx("button",{onClick:l,disabled:a,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Remove Photo"}),e.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG or GIF. Max size 2MB."}),a&&e.jsx("p",{className:"text-xs text-blue-600",children:"Uploading photo..."})]})]})]})]}),V=({id:r,checked:t,onChange:s,label:a,description:n,disabled:l=!1})=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:a}),n&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n})]}),e.jsxs("label",{htmlFor:r,className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{id:r,type:"checkbox",className:"sr-only peer",checked:t,onChange:o=>s(o.target.checked),disabled:l}),e.jsx("div",{className:`w-11 h-6 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all ${t?"bg-[#4ECDC4] after:translate-x-full":"bg-gray-200"} ${l?"opacity-50 cursor-not-allowed":"cursor-pointer"}`}),e.jsx("span",{className:"sr-only",children:a})]})]});let mt=null;const en=()=>(mt||(mt=new(window.AudioContext||window.webkitAudioContext)),mt),tn=(r,t=50)=>{const s=en(),a=s.createOscillator(),n=s.createGain();switch(n.gain.value=t/100,a.connect(n),n.connect(s.destination),r){case"gentle-chime":a.frequency.setValueAtTime(800,s.currentTime),a.frequency.setValueAtTime(1e3,s.currentTime+.1),a.frequency.setValueAtTime(1200,s.currentTime+.2),a.type="sine";break;case"medical-alert":a.frequency.setValueAtTime(600,s.currentTime),a.frequency.setValueAtTime(800,s.currentTime+.15),a.type="square";break;case"soft-bell":a.frequency.setValueAtTime(1e3,s.currentTime),a.frequency.setValueAtTime(800,s.currentTime+.2),a.type="sine";break;case"digital-beep":a.frequency.setValueAtTime(1e3,s.currentTime),a.type="square";break;case"success-tone":a.frequency.setValueAtTime(800,s.currentTime),a.frequency.setValueAtTime(1e3,s.currentTime+.1),a.type="sine";break;case"warning-sound":a.frequency.setValueAtTime(400,s.currentTime),a.frequency.setValueAtTime(600,s.currentTime+.1),a.type="sawtooth";break;default:return}a.start(s.currentTime),a.stop(s.currentTime+.3)},sn=r=>{switch(r){case"short-pulse":return[100];case"double-tap":return[100,50,100];case"long-pulse":return[300];case"pattern":return[100,50,100,50,200];case"off":default:return[]}},Jr=r=>{if("vibrate"in navigator){const t=sn(r);t.length>0&&navigator.vibrate(t)}else console.log("Vibration not supported on this device")},ea=(r,t=50)=>{if(r!=="none")try{tn(r,t)}catch(s){console.error("Error playing notification sound:",s)}},rn=r=>{const{sound:t,volume:s,vibration:a,vibrationEnabled:n}=r.notifications;t&&t!=="none"&&ea(t,s),n&&a&&a!=="off"&&Jr(a)};var an=Object.defineProperty,nn=Object.defineProperties,ln=Object.getOwnPropertyDescriptors,rs=Object.getOwnPropertySymbols,on=Object.prototype.hasOwnProperty,cn=Object.prototype.propertyIsEnumerable,as=(r,t,s)=>t in r?an(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,pt=(r,t)=>{for(var s in t||(t={}))on.call(t,s)&&as(r,s,t[s]);if(rs)for(var s of rs(t))cn.call(t,s)&&as(r,s,t[s]);return r},gt=(r,t)=>nn(r,ln(t));const dn=({preferences:r,setPreferences:t})=>{const s=(n,l)=>{t(gt(pt({},r),{[n]:l}))},a=(n,l)=>{t(gt(pt({},r),{notifications:gt(pt({},r.notifications),{[n]:l})}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Appearance"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"theme",className:"block text-sm font-medium text-gray-600 mb-2",children:"Theme"}),e.jsxs("select",{id:"theme",value:r.theme,onChange:n=>s("theme",n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"light",children:"Light"}),e.jsx("option",{value:"dark",children:"Dark"}),e.jsx("option",{value:"auto",children:"Auto (System)"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Notifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(V,{id:"push-notifications",checked:r.notifications.push,onChange:n=>a("push",n),label:"Push Notifications (Browser)"}),r.notifications.push&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-3",children:"Notification Sounds"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notification-sound",className:"block text-sm font-medium text-gray-600 mb-2",children:"Default Sound"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{id:"notification-sound",value:r.notifications.sound||"gentle-chime",onChange:n=>a("sound",n.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"gentle-chime",children:"Gentle Chime"}),e.jsx("option",{value:"medical-alert",children:"Medical Alert"}),e.jsx("option",{value:"soft-bell",children:"Soft Bell"}),e.jsx("option",{value:"digital-beep",children:"Digital Beep"}),e.jsx("option",{value:"success-tone",children:"Success Tone"}),e.jsx("option",{value:"warning-sound",children:"Warning Sound"}),e.jsx("option",{value:"none",children:"No Sound"})]}),e.jsx("button",{type:"button",onClick:()=>ea(r.notifications.sound||"gentle-chime",r.notifications.volume||50),className:"px-3 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Preview"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notification-volume",className:"block text-sm font-medium text-gray-600 mb-2",children:"Volume"}),e.jsx("input",{id:"notification-volume",type:"range",min:"0",max:"100",value:r.notifications.volume||50,onChange:n=>a("volume",parseInt(n.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"0%"}),e.jsxs("span",{children:[r.notifications.volume||50,"%"]}),e.jsx("span",{children:"100%"})]})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-3",children:"Vibration (Mobile Devices)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"vibration-pattern",className:"block text-sm font-medium text-gray-600 mb-2",children:"Vibration Pattern"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{id:"vibration-pattern",value:r.notifications.vibration||"short-pulse",onChange:n=>a("vibration",n.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"short-pulse",children:"Short Pulse"}),e.jsx("option",{value:"double-tap",children:"Double Tap"}),e.jsx("option",{value:"long-pulse",children:"Long Pulse"}),e.jsx("option",{value:"pattern",children:"Pattern"}),e.jsx("option",{value:"off",children:"Off"})]}),e.jsx("button",{type:"button",onClick:()=>Jr(r.notifications.vibration||"short-pulse"),className:"px-3 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Test"})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(V,{id:"vibration-enabled",checked:r.notifications.vibrationEnabled!==!1,onChange:n=>a("vibrationEnabled",n),label:"Enable Vibration"})})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4 mt-4",children:e.jsx("button",{type:"button",onClick:()=>rn(r),className:"w-full px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors",children:"Test Full Notification"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can customize notification preferences for specific features in each module."})]})]})]})};var un=Object.defineProperty,mn=Object.defineProperties,pn=Object.getOwnPropertyDescriptors,ns=Object.getOwnPropertySymbols,gn=Object.prototype.hasOwnProperty,hn=Object.prototype.propertyIsEnumerable,is=(r,t,s)=>t in r?un(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Pe=(r,t)=>{for(var s in t||(t={}))gn.call(t,s)&&is(r,s,t[s]);if(ns)for(var s of ns(t))hn.call(t,s)&&is(r,s,t[s]);return r},Oe=(r,t)=>mn(r,pn(t)),ls=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const xn=()=>{const[r,t]=g.useState([{id:"clean-tool",name:"Clean Tool Scan",description:"Scan clean tools ready for use",icon:Jt,enabled:!1,shortcutSlot:null},{id:"dirty-tool",name:"Dirty Tool Scan",description:"Scan tools that need sterilization",icon:Jt,enabled:!1,shortcutSlot:null},{id:"problem-tool",name:"Problem Tool Scan",description:"Scan tools with issues/repair needs",icon:ne,enabled:!1,shortcutSlot:null},{id:"import-receipt",name:"Import Autoclave Receipt",description:"Import physical autoclave documentation",icon:ja,enabled:!1,shortcutSlot:null},{id:"package-tools",name:"Package Tools",description:"Package tools for sterilization",icon:Na,enabled:!1,shortcutSlot:null},{id:"single-scan",name:"Single Scan Mode",description:"Individual tool scanning",icon:kt,enabled:!1,shortcutSlot:null},{id:"batch-scan",name:"Batch Scan Mode",description:"Multiple tools at once",icon:kt,enabled:!1,shortcutSlot:null},{id:"add-inventory",name:"Add Inventory",description:"Scan new items to add",icon:he,enabled:!1,shortcutSlot:null},{id:"use-inventory",name:"Use Inventory",description:"Scan items to remove/consume",icon:_a,enabled:!1,shortcutSlot:null},{id:"scan-room",name:"Scan Room",description:"Scan room barcodes for cleaning",icon:Le,enabled:!1,shortcutSlot:null},{id:"complete-cleaning",name:"Complete Cleaning",description:"Mark room as cleaned",icon:Le,enabled:!1,shortcutSlot:null},{id:"update-status",name:"Update Status",description:"Change room cleaning status",icon:Le,enabled:!1,shortcutSlot:null}]),s=(i,d)=>{if(d&&a().length===0){alert("No mobile shortcuts available. Please disable another workflow first or assign this workflow to an existing shortcut.");return}t(u=>u.map(m=>m.id===i?Oe(Pe({},m),{enabled:d,shortcutSlot:d?m.shortcutSlot:null}):m))},a=()=>{const i=r.filter(u=>u.enabled&&u.shortcutSlot!==null).map(u=>u.shortcutSlot);return["volume-up","volume-down","volume-up-double","volume-down-double","power-double","double-tap","shake","flip"].filter(u=>!i.includes(u))},n=(i,d)=>{d===null&&setTimeout(()=>{t(u=>u.map(m=>m.id===i&&m.shortcutSlot===null?Oe(Pe({},m),{enabled:!1}):m))},5e3),t(u=>u.map(m=>m.shortcutSlot===d&&m.id!==i?Oe(Pe({},m),{shortcutSlot:null}):m.id===i?Oe(Pe({},m),{shortcutSlot:d}):m))},l=i=>{var d;return((d=[{id:"volume-up",label:"Volume Up"},{id:"volume-down",label:"Volume Down"},{id:"volume-up-double",label:"Volume Up (2x)"},{id:"volume-down-double",label:"Volume Down (2x)"},{id:"power-double",label:"Power (2x)"},{id:"double-tap",label:"Double Tap"},{id:"shake",label:"Shake"},{id:"flip",label:"Flip"}].find(m=>m.id===i))==null?void 0:d.label)||i},o=()=>ls(null,null,function*(){try{const{data:{user:i}}=yield O.auth.getUser();if(!i)return;const{data:d,error:u}=yield O.from("users").select("mobile_shortcuts").eq("id",i.id).single();if(u&&u.code!=="PGRST116")return;d!=null&&d.mobile_shortcuts&&typeof d.mobile_shortcuts=="object"&&t(m=>m.map(h=>{const p=d.mobile_shortcuts[h.id];return p?Oe(Pe({},h),{enabled:p.enabled,shortcutSlot:p.shortcut}):h}))}catch(i){}}),c=g.useCallback(()=>ls(null,null,function*(){try{const{data:{user:i}}=yield O.auth.getUser();if(!i)return;const d=r.reduce((m,h)=>(h.enabled&&h.shortcutSlot&&(m[h.id]={enabled:h.enabled,shortcut:h.shortcutSlot}),m),{}),{error:u}=yield O.from("users").update({mobile_shortcuts:d,updated_at:new Date().toISOString()}).eq("id",i.id);u?console.error("Error saving mobile settings:",u):console.log("Mobile settings saved successfully")}catch(i){}}),[r]);return g.useEffect(()=>{o()},[]),g.useEffect(()=>{r.some(i=>i.enabled)&&c()},[r,c]),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Mobile Scanner Shortcuts"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Configure up to 4 mobile shortcuts for quick access to your most-used scanning workflows."}),e.jsx("div",{className:"space-y-4",children:r.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(v,{path:i.icon,size:1.2,className:"text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:i.name}),e.jsx("p",{className:"text-xs text-gray-500",children:i.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Enable"}),e.jsx(V,{id:`toggle-${i.id}`,label:`Enable ${i.name}`,checked:i.enabled,onChange:d=>s(i.id,d)})]}),i.enabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("select",{value:i.shortcutSlot||"",onChange:d=>n(i.id,d.target.value?d.target.value:null),className:`px-3 py-1 border rounded text-sm ${i.shortcutSlot?"border-gray-300":"border-red-300 bg-red-50"}`,children:[e.jsx("option",{value:"",children:"Select Shortcut"}),[{id:"volume-up",label:"Volume Up (Single Press)",description:"Press volume up button once"},{id:"volume-down",label:"Volume Down (Single Press)",description:"Press volume down button once"},{id:"volume-up-double",label:"Volume Up (Double Press)",description:"Press volume up button twice quickly"},{id:"volume-down-double",label:"Volume Down (Double Press)",description:"Press volume down button twice quickly"},{id:"power-double",label:"Power Button (Double Press)",description:"Press power button twice quickly"},{id:"double-tap",label:"Double Tap Screen",description:"Tap screen twice quickly"},{id:"shake",label:"Shake Device",description:"Shake your phone"},{id:"flip",label:"Flip Device",description:"Turn phone face down"}].map(d=>e.jsx("option",{value:d.id,disabled:r.some(u=>u.id!==i.id&&u.shortcutSlot===d.id),children:d.label},d.id))]}),!i.shortcutSlot&&e.jsx("p",{className:"text-xs text-red-500",children:"⚠️ Please select a mobile shortcut or this workflow will be disabled in 5 seconds"})]})]})]},i.id))}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h6",{className:"text-sm font-medium text-blue-700 mb-3",children:"Current Shortcuts"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[r.filter(i=>i.enabled&&i.shortcutSlot).map(i=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-2 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(v,{path:i.icon,size:1.2,className:"text-blue-600"})}),e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:i.name}),e.jsx("p",{className:"text-xs text-blue-500",children:l(i.shortcutSlot)})]},i.id)),r.filter(i=>i.enabled&&i.shortcutSlot).length===0&&e.jsxs("div",{className:"col-span-2 md:col-span-4 text-center py-4",children:[e.jsx("p",{className:"text-blue-500 text-sm",children:"No shortcuts configured yet"}),e.jsx("p",{className:"text-blue-400 text-xs",children:"Enable workflows and assign mobile shortcuts above"})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-3",children:"How to Use Mobile Shortcuts"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Enable workflows:"})," Use the toggles for scanning workflows you use frequently"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Assign shortcuts:"})," Choose mobile device actions (volume buttons, double tap, shake, etc.)"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Mobile access:"})," These shortcuts will trigger on your mobile device for quick scanning"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Unique assignments:"})," Each mobile shortcut can only be used by one workflow"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Quick launch:"})," Perform the assigned action to directly open that scanner workflow"]})]})]})]})})};var fn=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const bn=({userData:r,onPasswordChange:t,onOpenPasswordModal:s,onArchiveAccount:a,passwordError:n,passwordSuccess:l})=>{const[o,c]=g.useState(!1),[i,d]=g.useState(!1),[u,m]=g.useState(""),h=p=>fn(null,null,function*(){yield t(p),c(!1)}),j=()=>{u.trim()&&(a(),d(!1),m(""))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Account Security"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:e.jsx(v,{path:Me,size:1,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium text-gray-700",children:"Password"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Last changed:"," ",r!=null&&r.password_changed_at?r.password_changed_at:"Never"]})]})]}),e.jsx("button",{onClick:s,className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Change Password"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"two-factor-toggle",className:"block text-sm font-medium text-gray-700",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Add an extra layer of security to your account"})]}),e.jsx("button",{id:"two-factor-toggle",disabled:!0,className:"px-4 py-2 rounded-md transition-colors text-sm bg-gray-400 text-white cursor-not-allowed opacity-60",title:"Coming Soon",children:"Coming Soon"})]}),e.jsx("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sessions-toggle",className:"block text-sm font-medium text-gray-700",children:"Login Sessions"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Active sessions:"," ",r!=null&&r.active_sessions?r.active_sessions:1]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Account Actions"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(v,{path:qt,size:1,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium text-orange-700",children:"Archive Account"}),e.jsx("p",{className:"text-sm text-orange-600",children:"Archive your account - data is preserved but access is disabled"})]})]}),e.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-colors text-sm",children:"Archive Account"})]})})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Change Password"}),n&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-red-600 text-sm",children:n})}),l&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsx("p",{className:"text-green-600 text-sm",children:l})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"current-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),e.jsx("input",{id:"current-password",type:"password",placeholder:"Enter your current password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsx("input",{id:"new-password",type:"password",placeholder:"Enter new password (min 8 characters)",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsx("input",{id:"confirm-password",type:"password",placeholder:"Confirm new password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>h({currentPassword:"",newPassword:"",confirmPassword:""}),className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] rounded-md hover:bg-[#38b2ac]",children:"Change Password"})]})]})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-900 mb-4",children:"Archive Account"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Your account will be archived. This means:"}),e.jsxs("ul",{className:"text-sm text-gray-600 mb-4 space-y-1",children:[e.jsx("li",{children:"• Your data will be preserved"}),e.jsx("li",{children:"• You won't be able to access the system"}),e.jsx("li",{children:"• Your account can be restored by administrators"}),e.jsx("li",{children:"• All sessions will be terminated"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"This action can be reversed by contacting support."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"delete-reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for archiving (optional)"}),e.jsx("textarea",{id:"archive-reason",value:u,onChange:p=>m(p.target.value),placeholder:"Please let us know why you're archiving your account...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:j,className:"px-4 py-2 text-sm font-medium text-white bg-orange-600 rounded-md hover:bg-orange-700",children:"Archive Account"})]})]})})]})};var yn=Object.defineProperty,vn=Object.defineProperties,jn=Object.getOwnPropertyDescriptors,os=Object.getOwnPropertySymbols,Nn=Object.prototype.hasOwnProperty,_n=Object.prototype.propertyIsEnumerable,cs=(r,t,s)=>t in r?yn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,ht=(r,t)=>{for(var s in t||(t={}))Nn.call(t,s)&&cs(r,s,t[s]);if(os)for(var s of os(t))_n.call(t,s)&&cs(r,s,t[s]);return r},xt=(r,t)=>vn(r,jn(t)),Cn=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Sn=({isOpen:r,onClose:t,onSubmit:s,error:a,success:n,isPasswordReset:l=!1})=>{const[o,c]=g.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[i,d]=g.useState(!1),[u,m]=g.useState(!1),h=()=>Cn(null,null,function*(){yield s(o),n&&c({currentPassword:"*********",newPassword:"",confirmPassword:""})}),j=()=>{c({currentPassword:"*********",newPassword:"",confirmPassword:""}),t()};return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:l?"Reset Password":"Change Password"}),a&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-red-600 text-sm",children:a})}),n&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsx("p",{className:"text-green-600 text-sm",children:n})}),e.jsxs("div",{className:"space-y-4",children:[!l&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),e.jsx("div",{className:"relative",children:e.jsx("input",{id:"currentPassword",type:"password",placeholder:"Enter your current password",value:o.currentPassword||"*********",onChange:p=>c(xt(ht({},o),{currentPassword:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter your current password to verify your identity before changing."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:l?"Choose New Password":"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"newPassword",type:i?"text":"password",placeholder:"Enter new password (min 6 characters)",value:o.newPassword,onChange:p=>c(xt(ht({},o),{newPassword:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("button",{type:"button",onClick:()=>d(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(v,{path:i?Lt:$t,size:1,className:"text-gray-400"})})]}),o.newPassword&&e.jsxs("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Password Requirements:"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[o.newPassword.length>=6?e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}):e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-300"}),e.jsxs("span",{className:`text-xs ${o.newPassword.length>=6?"text-green-700":"text-gray-500"}`,children:["At least 6 characters (",o.newPassword.length,"/6)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[o.newPassword===o.confirmPassword&&o.confirmPassword?e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}):e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-300"}),e.jsx("span",{className:`text-xs ${o.newPassword===o.confirmPassword&&o.confirmPassword?"text-green-700":"text-gray-500"}`,children:"Passwords match"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmPassword",type:u?"text":"password",value:o.confirmPassword,onChange:p=>c(xt(ht({},o),{confirmPassword:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(v,{path:u?Lt:$t,size:1,className:"text-gray-400"})})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:j,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:h,className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] rounded-md hover:bg-[#38b2ac]",children:l?"Send Reset Email":"Save"})]})]})}):null};var wn=Object.defineProperty,En=Object.defineProperties,Tn=Object.getOwnPropertyDescriptors,ds=Object.getOwnPropertySymbols,An=Object.prototype.hasOwnProperty,In=Object.prototype.propertyIsEnumerable,us=(r,t,s)=>t in r?wn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,ms=(r,t)=>{for(var s in t||(t={}))An.call(t,s)&&us(r,s,t[s]);if(ds)for(var s of ds(t))In.call(t,s)&&us(r,s,t[s]);return r},ps=(r,t)=>En(r,Tn(t)),fe=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Pn=()=>{const{refreshUserData:r}=ct(),t=da(),[s,a]=g.useState("basic-info"),[n,l]=g.useState(null),[o,c]=g.useState(!0),[i,d]=g.useState(!1),[u,m]=g.useState(!1),[h,j]=g.useState(null),[p,x]=g.useState({first_name:"",last_name:"",email:"",phone:"",department:"",position:"",date_of_birth:"",bio:"",preferred_language:"en",timezone:"UTC"}),[N,_]=g.useState({theme:"light",notifications:{push:!0,sound:"gentle-chime",volume:50,vibration:"short-pulse",vibrationEnabled:!0}}),[b,f]=g.useState([]),[A,R]=g.useState(!1),[M,B]=g.useState(!1),[$,G]=g.useState(null),[H,E]=g.useState(null),F=[{id:"home",name:"Home Dashboard",icon:"mdiHome",url:"/home"},{id:"sterilization",name:"Sterilization",icon:"mdiTestTube",url:"/sterilization"},{id:"inventory",name:"Inventory",icon:"mdiPackageVariant",url:"/inventory"},{id:"environmental",name:"Environmental Clean",icon:"mdiBroom",url:"/environmental-clean"},{id:"knowledge",name:"Knowledge Hub",icon:"mdiBookOpenVariant",url:"/knowledge-hub"},{id:"library",name:"Library",icon:"mdiLibrary",url:"/library"},{id:"settings",name:"Settings",icon:"mdiCog",url:"/settings"}];g.useEffect(()=>{P()},[]),g.useEffect(()=>{const T=new URLSearchParams(t.search),C=T.get("tab"),L=T.get("openPasswordModal");C==="account"&&L==="true"&&(a("account"),R(!0),B(!0),window.history.replaceState({},"","/settings"))},[t.search]);const P=()=>fe(null,null,function*(){try{c(!0);const{data:{user:T}}=yield O.auth.getUser();if(T){let{data:C}=yield O.from("users").select("*").eq("id",T.id).single();if(!C){const{data:L}=yield O.from("users").select("facility_id").eq("id",T.id).single(),q={id:T.id,email:T.email||"",first_name:"",last_name:"",role:"user",phone:"",department:"",position:"",date_of_birth:"",bio:"",preferred_language:"en",timezone:"UTC",facility_id:(L==null?void 0:L.facility_id)||"550e8400-e29b-41d4-a716-446655440000"},{data:X,error:Ae}=yield O.from("users").insert(q).select().single();Ae?(console.error("Error creating default profile:",Ae),x({first_name:"",last_name:"",email:T.email||"",phone:"",department:"",position:"",date_of_birth:"",bio:"",preferred_language:"en",timezone:"UTC"})):C=X}if(C){console.log("Profile data found:",C);try{const{data:L}=yield O.from("user_sessions").select("id").eq("user_id",T.id).eq("is_active",!0),q=(L==null?void 0:L.length)||0,X={id:C.id,email:C.email||"",first_name:C.first_name||"",last_name:C.last_name||"",role:C.role||"",phone:C.phone||"",department:C.department||"",position:C.position||"",date_of_birth:C.date_of_birth||"",bio:C.bio||"",preferred_language:C.preferred_language||"en",timezone:C.timezone||"UTC",avatar_url:C.avatar_url,active_sessions:q};l(X)}catch(L){console.warn("Failed to fetch active sessions count:",L);const q={id:C.id,email:C.email||"",first_name:C.first_name||"",last_name:C.last_name||"",role:C.role||"",phone:C.phone||"",department:C.department||"",position:C.position||"",date_of_birth:C.date_of_birth||"",bio:C.bio||"",preferred_language:C.preferred_language||"en",timezone:C.timezone||"UTC",avatar_url:C.avatar_url,active_sessions:0};l(q)}x({first_name:C.first_name||"",last_name:C.last_name||"",email:C.email||T.email||"",phone:C.phone||"",department:C.department||"",position:C.position||"",date_of_birth:C.date_of_birth||"",bio:C.bio||"",preferred_language:C.preferred_language||"en",timezone:C.timezone||"UTC"}),console.log("Basic info form set to:",{first_name:C.first_name||"",last_name:C.last_name||"",email:C.email||T.email||""})}}}catch(T){console.error("Error fetching user data:",T)}finally{c(!1)}}),w=()=>fe(null,null,function*(){try{d(!0),j(null);const{data:{user:T}}=yield O.auth.getUser();if(!T)throw new Error("User not authenticated");const{data:C}=yield O.from("users").select("facility_id").eq("id",T.id).single(),L={id:T.id,email:T.email||"",first_name:p.first_name||"",last_name:p.last_name||"",role:"user",phone:p.phone||"",department:p.department||"",position:p.position||"",date_of_birth:p.date_of_birth||"",bio:p.bio||"",preferred_language:p.preferred_language||"en",timezone:p.timezone||"UTC",facility_id:(C==null?void 0:C.facility_id)||"550e8400-e29b-41d4-a716-446655440000",updated_at:new Date().toISOString()},{error:q}=yield O.from("users").upsert(L);if(q)throw q;m(!0),setTimeout(()=>m(!1),3e3),yield P()}catch(T){j(T instanceof Error?T.message:"An unknown error occurred")}finally{d(!1)}}),z=T=>fe(null,null,function*(){try{if(G(null),E(null),T.newPassword!==T.confirmPassword){G("New passwords do not match");return}if(T.newPassword.length<6){G("New password must be at least 6 characters long");return}if(M){const{data:{user:C}}=yield O.auth.getUser();if(!(C!=null&&C.email)){G("User not found");return}const{error:L}=yield O.auth.resetPasswordForEmail(C.email,{redirectTo:`${window.location.origin}/settings?tab=account&openPasswordModal=true`});if(L)throw L;E("Password reset email sent! Check your email for the reset link."),R(!1),B(!1)}else{const{error:C}=yield O.auth.updateUser({password:T.newPassword});if(C)throw C;E("Password updated successfully"),R(!1)}}catch(C){G(C instanceof Error?C.message:"An unknown error occurred")}}),S=()=>fe(null,null,function*(){try{const{data:{user:T}}=yield O.auth.getUser();if(!T)throw new Error("User not authenticated");const{error:C}=yield O.from("users").update({is_active:!1,archived_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",T.id);if(C)throw C;yield O.auth.signOut(),window.location.href="/login"}catch(T){console.error("Error archiving account:",T)}}),I=T=>fe(null,null,function*(){try{const{data:{user:C}}=yield O.auth.getUser();if(!C)throw new Error("User not authenticated");const L=T.name.split(".").pop(),X=`profile-photos/${`${C.id}-${Date.now()}.${L}`}`,{error:Ae}=yield O.storage.from("avatars").upload(X,T);if(Ae)throw Ae;const{data:{publicUrl:Kt}}=O.storage.from("avatars").getPublicUrl(X),{error:Qt}=yield O.from("users").update({avatar_url:Kt}).eq("id",C.id);if(Qt)throw Qt;l(Zt=>Zt?ps(ms({},Zt),{avatar_url:Kt}):null),r()}catch(C){console.error("Error uploading photo:",C)}}),Q=()=>fe(null,null,function*(){try{const{data:{user:T}}=yield O.auth.getUser();if(!T)throw new Error("User not authenticated");const{error:C}=yield O.from("users").update({avatar_url:null}).eq("id",T.id);if(C)throw C;l(L=>L?ps(ms({},L),{avatar_url:void 0}):null)}catch(T){console.error("Error removing photo:",T)}});return o?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#4ECDC4]"})}):e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx("h4",{className:"text-lg font-semibold",children:"Profile & Account Settings"})}),e.jsx(Ya,{activeTab:s,onTabChange:a}),s==="basic-info"&&e.jsx(Ja,{basicInfoForm:p,setBasicInfoForm:x,userData:n,uploadingPhoto:!1,uploadProfilePhoto:I,removeProfilePhoto:Q}),s==="preferences"&&e.jsx(dn,{preferences:N,setPreferences:_}),s==="mobile"&&e.jsx(xn,{mobileShortcuts:b,setMobileShortcuts:f,availableShortcuts:F}),s==="account"&&e.jsx(bn,{userData:n,onPasswordChange:z,onOpenPasswordModal:()=>R(!0),onArchiveAccount:S,passwordError:$,passwordSuccess:H}),s==="basic-info"&&e.jsx("div",{className:"mt-6 flex justify-end space-x-3",children:e.jsx("button",{onClick:w,disabled:i,className:"px-6 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Saving...":"Save Changes"})}),u&&e.jsx("div",{className:"fixed bottom-6 right-6 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg",children:"Changes saved successfully!"}),h&&e.jsxs("div",{className:"fixed bottom-6 right-6 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg",children:["Error saving changes: ",h]}),e.jsx(Sn,{isOpen:A,onClose:()=>{R(!1),B(!1)},onSubmit:z,error:$,success:H,isPasswordReset:M})]})};var On=Object.defineProperty,Dn=Object.defineProperties,Rn=Object.getOwnPropertyDescriptors,gs=Object.getOwnPropertySymbols,kn=Object.prototype.hasOwnProperty,Ln=Object.prototype.propertyIsEnumerable,hs=(r,t,s)=>t in r?On(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Ue=(r,t)=>{for(var s in t||(t={}))kn.call(t,s)&&hs(r,s,t[s]);if(gs)for(var s of gs(t))Ln.call(t,s)&&hs(r,s,t[s]);return r},Be=(r,t)=>Dn(r,Rn(t)),He=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const $n=()=>{const[r,t]=g.useState(null),[s,a]=g.useState([]),[n,l]=g.useState(!0),[o,c]=g.useState(!1),[i,d]=g.useState(!1),[u,m]=g.useState({closure_date:"",closure_type:"holiday",description:"",is_recurring:!1});g.useEffect(()=>{He(null,null,function*(){try{const b=yield lt.getCurrentFacilityId();t(b)}catch(b){console.error("Failed to load facility ID:",b)}})},[]);const h=g.useCallback(()=>He(null,null,function*(){if(r)try{l(!0);const{data:_,error:b}=yield O.from("office_closures").select("*").eq("facility_id",r).order("closure_date",{ascending:!0});if(b){console.error("Error loading closures:",b);return}a(_.map(f=>{var A;return{id:f.id,closure_date:f.closure_date,closure_type:f.closure_type,description:((A=f.data)==null?void 0:A.description)||"",is_recurring:f.is_recurring}})||[])}catch(_){console.error("Error loading closures:",_)}finally{l(!1)}}),[r]);g.useEffect(()=>{r&&h()},[r,h]);const j=()=>He(null,null,function*(){if(!(!r||!u.closure_date))try{c(!0);const{error:_}=yield O.from("office_closures").insert({facility_id:r,closure_date:u.closure_date,closure_type:u.closure_type,description:u.description,is_recurring:u.is_recurring});if(_){console.error("Error adding closure:",_);return}m({closure_date:"",closure_type:"holiday",description:"",is_recurring:!1}),d(!1),h()}catch(_){console.error("Error adding closure:",_)}finally{c(!1)}}),p=_=>He(null,null,function*(){try{const{error:b}=yield O.from("office_closures").delete().eq("id",_);if(b){console.error("Error deleting closure:",b);return}h()}catch(b){console.error("Error deleting closure:",b)}}),x=_=>{switch(_){case"holiday":return"Holiday";case"maintenance":return"Maintenance";case"custom":return"Custom";default:return _}},N=_=>{switch(_){case"holiday":return"bg-red-100 text-red-800";case"maintenance":return"bg-yellow-100 text-yellow-800";case"custom":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return n?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-2"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-16 bg-gray-200 rounded"}),e.jsx("div",{className:"h-16 bg-gray-200 rounded"})]})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700",children:"Office Closures & Holidays"}),e.jsx("button",{onClick:()=>d(!i),className:"px-3 py-1 text-sm bg-[#4ECDC4] text-white rounded-md hover:bg-[#45b8b0] transition-colors",children:i?"Cancel":"Add Closure"})]}),i&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"closureDate",className:"block text-xs text-gray-600 mb-1",children:"Date"}),e.jsx("input",{id:"closureDate",type:"date",value:u.closure_date,onChange:_=>m(b=>Be(Ue({},b),{closure_date:_.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"closureType",className:"block text-xs text-gray-600 mb-1",children:"Type"}),e.jsxs("select",{id:"closureType",value:u.closure_type,onChange:_=>m(b=>Be(Ue({},b),{closure_type:_.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"holiday",children:"Holiday"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"custom",children:"Custom"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"closureDescription",className:"block text-xs text-gray-600 mb-1",children:"Description"}),e.jsx("input",{id:"closureDescription",type:"text",value:u.description,onChange:_=>m(b=>Be(Ue({},b),{description:_.target.value})),placeholder:"e.g., Christmas Day, Annual Maintenance",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"recurring",checked:u.is_recurring,onChange:_=>m(b=>Be(Ue({},b),{is_recurring:_.target.checked})),className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("label",{htmlFor:"recurring",className:"text-sm text-gray-600",children:"Recurring annually"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:j,disabled:o||!u.closure_date,className:"px-3 py-1 text-sm bg-[#4ECDC4] text-white rounded hover:bg-[#45b8b0] disabled:opacity-50 transition-colors",children:o?"Adding...":"Add Closure"}),e.jsx("button",{onClick:()=>d(!1),className:"px-3 py-1 text-sm bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition-colors",children:"Cancel"})]})]}),e.jsx("div",{className:"space-y-2",children:s.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No office closures configured. Add holidays and maintenance days above."}):s.map(_=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N(_.closure_type)}`,children:x(_.closure_type)}),_.is_recurring&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"Recurring"})]}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:new Date(_.closure_date).toLocaleDateString()}),_.description&&e.jsx("div",{className:"text-sm text-gray-600",children:_.description})]}),e.jsx("button",{onClick:()=>p(_.id),className:"ml-2 p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete closure",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},_.id))}),e.jsx("p",{className:"text-xs text-gray-500",children:"Office closures are automatically excluded from streak calculations. Users won't lose their streak on holidays or maintenance days."})]})};var Mn=Object.defineProperty,Fn=Object.defineProperties,zn=Object.getOwnPropertyDescriptors,xs=Object.getOwnPropertySymbols,Vn=Object.prototype.hasOwnProperty,Gn=Object.prototype.propertyIsEnumerable,fs=(r,t,s)=>t in r?Mn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Ye=(r,t)=>{for(var s in t||(t={}))Vn.call(t,s)&&fs(r,s,t[s]);if(xs)for(var s of xs(t))Gn.call(t,s)&&fs(r,s,t[s]);return r},We=(r,t)=>Fn(r,zn(t)),ft=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const qn=()=>{const[r,t]=g.useState(null),[s,a]=g.useState(!0),[n,l]=g.useState(!1),[o,c]=g.useState(()=>({workingDays:{monday:!0,tuesday:!0,wednesday:!0,thursday:!0,friday:!0,saturday:!1,sunday:!1},openHolidays:!1,startHour:8,endHour:17}));g.useEffect(()=>{ft(null,null,function*(){try{const N=yield lt.getCurrentFacilityId();t(N)}catch(N){console.error("Failed to load facility ID:",N)}})},[]);const i=g.useCallback(()=>ft(null,null,function*(){if(r)try{a(!0);const{data:x,error:N}=yield O.from("facility_office_hours").select("*").eq("facility_id",r).single();if(N&&N.code!=="PGRST116"){console.error("Error loading office hours:",N);return}x&&c({workingDays:x.working_days,startHour:x.start_hour,endHour:x.end_hour,openHolidays:x.open_holidays})}catch(x){console.error("Error loading office hours:",x)}finally{a(!1)}}),[r]);g.useEffect(()=>{r&&i()},[r,i]);const d=x=>ft(null,null,function*(){if(r)try{l(!0);const{error:N}=yield O.from("facility_office_hours").upsert({facility_id:r,working_days:x.workingDays,start_hour:x.startHour,end_hour:x.endHour,open_holidays:x.openHolidays});if(N){console.error("Error saving office hours:",N);return}localStorage.setItem("officeHoursSettings",JSON.stringify(x))}catch(N){console.error("Error saving office hours:",N)}finally{l(!1)}}),u=x=>{const N=We(Ye({},o),{workingDays:We(Ye({},o.workingDays),{[x]:!o.workingDays[x]})});c(N),d(N)},m=()=>{const x=We(Ye({},o),{openHolidays:!o.openHolidays});c(x),d(x)},h=(x,N)=>{const _=We(Ye({},o),{[x==="start"?"startHour":"endHour"]:N});c(_),d(_)},j=x=>{const N=x>=12?"PM":"AM";return`${x===0?12:x>12?x-12:x}:00 ${N}`},p=()=>{const x=Object.entries(o.workingDays).filter(([,N])=>N).map(([N])=>N.charAt(0).toUpperCase()+N.slice(1));return x.length===0?"No days selected":x.length===7?"Every day":x.length===5&&!o.workingDays.saturday&&!o.workingDays.sunday?"Monday - Friday":x.join(", ")};return s?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-2",children:"Office Hours & Scheduling"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"These settings affect BI test scheduling, analytics calculations, and streak tracking"}),n&&e.jsx("div",{className:"text-sm text-blue-600 bg-blue-50 px-3 py-2 rounded-md",children:"Saving changes..."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"block text-sm font-medium text-gray-700",children:"Office Days"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(o.workingDays).map(([x,N])=>e.jsx("button",{onClick:()=>u(x),className:`px-3 py-2 text-sm font-medium rounded-md transition-colors ${N?"bg-[#4ECDC4] text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:x.charAt(0).toUpperCase()},x))}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Selected: ",p()]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"block text-sm font-medium text-gray-700",children:"Hours of Operation"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"block text-xs text-gray-500 mb-1",children:"Start Time"}),e.jsx("select",{value:o.startHour,onChange:x=>h("start",parseInt(x.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] text-sm",children:Array.from({length:24},(x,N)=>e.jsx("option",{value:N,children:j(N)},N))})]}),e.jsx("span",{className:"text-gray-500 mt-6",children:"to"}),e.jsxs("div",{children:[e.jsx("div",{className:"block text-xs text-gray-500 mb-1",children:"End Time"}),e.jsx("select",{value:o.endHour,onChange:x=>h("end",parseInt(x.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] text-sm",children:Array.from({length:24},(x,N)=>e.jsx("option",{value:N,children:j(N)},N))})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Operating hours: ",j(o.startHour)," -"," ",j(o.endHour)]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"block text-sm font-medium text-gray-700",children:"Holiday Operations"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:m,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${o.openHolidays?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o.openHolidays?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:"text-sm text-gray-700",children:o.openHolidays?"Open on holidays":"Closed on holidays"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:o.openHolidays?"BI tests and operations will continue on holidays":"BI tests due on holidays will be rescheduled to the next business day"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[e.jsx("h6",{className:"text-sm font-medium text-blue-800 mb-2",children:"Current Schedule Summary"}),e.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[e.jsxs("p",{children:["• Working days: ",p()]}),e.jsxs("p",{children:["• Hours: ",j(o.startHour)," -"," ",j(o.endHour)]}),e.jsxs("p",{children:["• Holidays: ",o.openHolidays?"Open":"Closed"]})]})]}),e.jsx($n,{})]})},Un=({users:r,onEditUser:t,onDeleteUser:s,onAddUser:a,billingTierInfo:n})=>{const[l,o]=g.useState(""),[c,i]=g.useState("All Roles"),[d,u]=g.useState(!1),[m,h]=g.useState(""),j=r.filter(p=>{const x=(p.full_name||"").toLowerCase().includes(l.toLowerCase())||p.email.toLowerCase().includes(l.toLowerCase()),N=c==="All Roles"||p.role===c;return x&&N});return e.jsxs("div",{className:"mb-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-3",children:"User Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-md",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Create New User"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Add new staff members to the system"})]}),e.jsx("button",{onClick:a,className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Add User"})]}),n&&n.usersToNextTier<=2&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-amber-800",children:"Billing Tier Warning"}),e.jsxs("div",{className:"mt-1 text-sm text-amber-700",children:[e.jsxs("p",{children:["You are ",n.usersToNextTier," user",n.usersToNextTier===1?"":"s"," away from the next pricing tier (",n.nextTier.name,"). Please review and remove any inactive users to avoid an increase in fees."]}),e.jsxs("p",{className:"mt-1 text-xs",children:["Current: ",n.activeUserCount," active users (",n.currentTier.name,")"]})]})]})]})}),e.jsxs("div",{className:"border border-gray-200 rounded-md overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h6",{className:"text-sm font-medium text-gray-700",children:["Active Users (",j.length,")"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Search users...",value:l,onChange:p=>o(p.target.value),className:"px-3 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),d?e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("input",{type:"text",placeholder:"New role",value:m,onChange:p=>h(p.target.value),className:"px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] w-20"}),e.jsx("button",{onClick:()=>{m.trim()&&(h(""),u(!1))},className:"px-2 py-1 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-xs",children:"Add"}),e.jsx("button",{onClick:()=>{h(""),u(!1)},className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"×"})]}):e.jsxs("select",{value:c,onChange:p=>{p.target.value==="add-new"?u(!0):i(p.target.value)},className:"px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{children:"All Roles"}),e.jsx("option",{children:"Admin"}),e.jsx("option",{children:"Technician"}),e.jsx("option",{children:"Nurse"}),e.jsx("option",{value:"add-new",children:"+ Add New Role"})]})]})]})}),e.jsx("div",{className:"max-h-64 overflow-y-auto scrollbar-hide",children:j.map((p,x)=>e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-blue-600",children:(p.full_name||"Unknown").split(" ").map(N=>N[0]).join("")})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:p.full_name||"Unknown User"}),e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${p.role==="Admin"?"bg-red-100 text-red-800":p.role==="Technician"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:p.role}),e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${p.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:p.status})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsx("span",{children:p.email}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Last login: ",p.lastLogin]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>t(p),className:"p-1 text-gray-400 hover:text-gray-600",title:"Edit user",children:e.jsx(v,{path:Ce,size:.8})}),e.jsx("button",{onClick:()=>s(p),className:"p-1 text-gray-400 hover:text-red-600",title:"Delete user",children:e.jsx(v,{path:qt,size:.8})})]})]},x))}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Showing ",j.length," of ",r.length," users"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-2 py-1 border border-gray-300 rounded hover:bg-white",children:"Previous"}),e.jsx("button",{className:"px-2 py-1 border border-gray-300 rounded bg-white",children:"1"}),e.jsx("button",{className:"px-2 py-1 border border-gray-300 rounded hover:bg-white",children:"2"}),e.jsx("button",{className:"px-2 py-1 border border-gray-300 rounded hover:bg-white",children:"Next"})]})]})})]})]})]})},Bn=({isOpen:r,onClose:t,user:s,mode:a,onSave:n})=>{var l,o;const[c,i]=g.useState(!1),[d,u]=g.useState(!1),[m,h]=g.useState(""),[j,p]=g.useState("");return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto scrollbar-hide",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a==="add"?"Add New User":`Edit: ${(s==null?void 0:s.full_name)||"Unknown User"}`}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:e.jsx(v,{path:we,size:1.2})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),e.jsx("input",{id:"firstName",type:"text",placeholder:"Enter first name",defaultValue:((l=s==null?void 0:s.full_name)==null?void 0:l.split(" ")[0])||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),e.jsx("input",{id:"lastName",type:"text",placeholder:"Enter last name",defaultValue:((o=s==null?void 0:s.full_name)==null?void 0:o.split(" ").slice(1).join(" "))||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),e.jsx("input",{id:"email",type:"email",placeholder:"user@clinic.com",defaultValue:(s==null?void 0:s.email)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),a==="add"&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"An invitation email will be sent to this address"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Role & Permissions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"userRole",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),c?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{id:"newRoleInput",type:"text",placeholder:"Enter new role name",value:m,onChange:x=>h(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{m.trim()&&(h(""),i(!1))},className:"px-3 py-1 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-xs",children:"Add Role"}),e.jsx("button",{onClick:()=>{h(""),i(!1)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"Cancel"})]})]}):e.jsxs("select",{id:"userRole",defaultValue:(s==null?void 0:s.role)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"",children:"Select a role"}),e.jsx("option",{value:"Admin",children:"Admin"}),e.jsx("option",{value:"Technician",children:"Technician"}),e.jsx("option",{value:"Nurse",children:"Nurse"}),e.jsx("option",{value:"add-new",children:"+ Add New Role"})]}),!c&&e.jsx("button",{onClick:()=>i(!0),className:"text-xs text-[#4ECDC4] hover:text-[#38b2ac] mt-1",children:"+ Add New Role"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"userDepartment",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),d?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{id:"newDepartmentInput",type:"text",placeholder:"Enter new department name",value:j,onChange:x=>p(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{j.trim()&&(p(""),u(!1))},className:"px-3 py-1 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-xs",children:"Add Department"}),e.jsx("button",{onClick:()=>{p(""),u(!1)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"Cancel"})]})]}):e.jsxs("select",{id:"userDepartment",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"",children:"Select department"}),e.jsx("option",{value:"Sterilization",children:"Sterilization"}),e.jsx("option",{value:"Environmental Cleaning",children:"Environmental Cleaning"}),e.jsx("option",{value:"Inventory",children:"Inventory"}),e.jsx("option",{value:"General",children:"General"}),e.jsx("option",{value:"add-new",children:"+ Add New Department"})]}),!d&&e.jsx("button",{onClick:()=>u(!0),className:"text-xs text-[#4ECDC4] hover:text-[#38b2ac] mt-1",children:"+ Add New Department"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Module Permissions"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{name:"Inventory Management",key:"inventory"},{name:"Sterilization",key:"sterilization"},{name:"Environmental Cleaning",key:"cleaning"},{name:"Knowledge Hub",key:"knowledge"},{name:"Settings",key:"settings"},{name:"Analytics",key:"analytics"},{name:"User Management",key:"users"},{name:"Reports",key:"reports"}].map(x=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:`module-${x.key}`,defaultChecked:(s==null?void 0:s.role)==="Admin"||["inventory","sterilization"].includes(x.key),className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("label",{htmlFor:`module-${x.key}`,className:"text-sm text-gray-700",children:x.name})]},x.key))})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700",children:"Two-Factor Authentication"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${s!=null&&s.twoFactorEnabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s!=null&&s.twoFactorEnabled?"Enabled":"Disabled"}),e.jsx("button",{className:"text-sm text-[#4ECDC4] hover:text-[#38b2ac]",children:s!=null&&s.twoFactorEnabled?"Disable":"Enable"})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-md p-3",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-[#4ECDC4] rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(v,{path:Ca,size:1,className:"text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:s!=null&&s.twoFactorEnabled?"2FA is Active":"2FA is Not Configured"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:s!=null&&s.twoFactorEnabled?"User has two-factor authentication enabled for enhanced security.":"Enable two-factor authentication to add an extra layer of security to this account."}),!(s!=null&&s.twoFactorEnabled)&&e.jsx("button",{className:"px-3 py-1 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-xs",children:"Setup 2FA"})]})]})})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Security Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Force Password Change"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Require user to change password on next login"})]}),e.jsx("button",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-md hover:bg-orange-200 transition-colors text-xs",children:"Force Change"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Session Management"}),e.jsx("p",{className:"text-xs text-gray-500",children:"View and manage active sessions"})]}),e.jsx("button",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors text-xs",children:"View Sessions"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Access Logs"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Monitor login attempts and system access"})]}),e.jsx("button",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 transition-colors text-xs",children:"View Logs"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"IP Restrictions"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Configure allowed IP ranges for this user"})]}),e.jsx("button",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-md hover:bg-green-200 transition-colors text-xs",children:"Manage IPs"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Device Management"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Approve and manage mobile devices"})]}),e.jsx("button",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-md hover:bg-indigo-200 transition-colors text-xs",children:"Manage Devices"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Login Security"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Failed Login Attempts"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Account lockout after multiple failed attempts"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"1",max:"10",defaultValue:"5",className:"w-16 px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("span",{className:"text-xs text-gray-500",children:"attempts"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Lockout Duration"}),e.jsx("p",{className:"text-xs text-gray-500",children:"How long to lock account after failed attempts"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"5",max:"1440",defaultValue:"30",className:"w-16 px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("span",{className:"text-xs text-gray-500",children:"minutes"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Session Timeout"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Auto-logout after inactivity"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("select",{className:"px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"15",children:"15 minutes"}),e.jsx("option",{value:"30",selected:!0,children:"30 minutes"}),e.jsx("option",{value:"60",children:"1 hour"}),e.jsx("option",{value:"240",children:"4 hours"}),e.jsx("option",{value:"480",children:"8 hours"})]})})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Audit & Compliance"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Activity Monitoring"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Track user actions and system changes"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"activity-monitoring",defaultChecked:!0,className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("label",{htmlFor:"activity-monitoring",className:"text-xs text-gray-700",children:"Enabled"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Data Export Logs"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Log all data export activities"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"export-logs",defaultChecked:!0,className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("label",{htmlFor:"export-logs",className:"text-xs text-gray-700",children:"Enabled"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Sensitive Data Access"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Require additional verification for sensitive data"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"sensitive-data",defaultChecked:(s==null?void 0:s.role)==="Admin",className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("label",{htmlFor:"sensitive-data",className:"text-xs text-gray-700",children:"Required"})]})]})]})]}),a==="add"&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Invitation Settings"}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(v,{path:Gt,size:1,className:"text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Email Invitation"}),e.jsx("p",{className:"text-xs text-blue-700 mb-2",children:"The user will receive an email invitation with a secure link to set up their account. They can choose their own password and complete their profile setup."}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-blue-600",children:[e.jsx("span",{children:"✓ Secure invitation link"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:"✓ Self-service password setup"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:"✓ Profile completion"})]})]})]})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>{n({}),t()},className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] rounded-md hover:bg-[#38b2ac]",children:a==="add"?"Send Invitation":"Save Changes"})]})]})}):null},Hn=({showDeleteModal:r,selectedUser:t,onCloseDeleteModal:s,onConfirmDelete:a})=>e.jsx(e.Fragment,{children:r&&t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 rounded-lg p-2 mr-3",children:e.jsx(v,{path:qt,size:1.5,className:"text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete User"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Are you sure you want to delete this user? This action cannot be undone."}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-red-600",children:t==null?void 0:t.name.split(" ").map(n=>n[0]).join("")})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t==null?void 0:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t==null?void 0:t.email}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${(t==null?void 0:t.role)==="Admin"?"bg-red-100 text-red-800":(t==null?void 0:t.role)==="Technician"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:t==null?void 0:t.role}),e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${(t==null?void 0:t.status)==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t==null?void 0:t.status})]})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Delete User"})]})]})})});var Yn=Object.defineProperty,bs=Object.getOwnPropertySymbols,Wn=Object.prototype.hasOwnProperty,Kn=Object.prototype.propertyIsEnumerable,ys=(r,t,s)=>t in r?Yn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,vs=(r,t)=>{for(var s in t||(t={}))Wn.call(t,s)&&ys(r,s,t[s]);if(bs)for(var s of bs(t))Kn.call(t,s)&&ys(r,s,t[s]);return r},be=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});class Qn{constructor(){this.sessionStartTime=Date.now(),this.lastActivityTime=Date.now(),this.inactivityTimer=null,this.sessionTimer=null,this.warningTimer=null,this.isRememberMe=!1,this.config={sessionTimeout:480,inactiveTimeout:30,rememberMeDuration:7},this.loadConfig(),this.setupActivityListeners(),this.startTimers()}loadConfig(){const t=localStorage.getItem("cliniio_session_timeout"),s=localStorage.getItem("cliniio_inactive_timeout"),a=localStorage.getItem("cliniio_remember_me_duration");t&&(this.config.sessionTimeout=parseInt(t)),s&&(this.config.inactiveTimeout=parseInt(s)),a&&(this.config.rememberMeDuration=parseInt(a)),this.isRememberMe=localStorage.getItem("cliniio_remember_me")==="true",this.isRememberMe&&(this.config.sessionTimeout=this.config.rememberMeDuration*24*60)}setupActivityListeners(){["mousedown","mousemove","keypress","scroll","touchstart","click"].forEach(s=>{document.addEventListener(s,()=>this.updateActivity(),{passive:!0})}),document.addEventListener("visibilitychange",()=>{document.hidden?this.pauseTimers():this.resumeTimers()})}updateActivity(){this.lastActivityTime=Date.now(),this.resetInactivityTimer()}startTimers(){this.startSessionTimer(),this.startInactivityTimer()}startSessionTimer(){this.sessionTimer&&clearTimeout(this.sessionTimer);const t=this.config.sessionTimeout*60*1e3,s=Date.now()-this.sessionStartTime,a=Math.max(0,t-s),n=Math.max(0,a-300*1e3);n>0&&(this.warningTimer=setTimeout(()=>{this.showSessionWarning(a)},n)),this.sessionTimer=setTimeout(()=>{this.handleSessionExpired()},a)}startInactivityTimer(){this.inactivityTimer&&clearTimeout(this.inactivityTimer);const t=this.config.inactiveTimeout*60*1e3;this.inactivityTimer=setTimeout(()=>{this.handleInactivityTimeout()},t)}resetInactivityTimer(){this.inactivityTimer&&clearTimeout(this.inactivityTimer),this.startInactivityTimer()}pauseTimers(){this.sessionTimer&&clearTimeout(this.sessionTimer),this.inactivityTimer&&clearTimeout(this.inactivityTimer),this.warningTimer&&clearTimeout(this.warningTimer)}resumeTimers(){this.startTimers()}showSessionWarning(t){var s,a;const n=Math.ceil(t/6e4),l=document.createElement("div");l.id="session-warning",l.className="fixed top-4 right-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4 shadow-lg z-50 max-w-sm",l.innerHTML=`
      <div class="flex items-start">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3">
          <h3 class="text-sm font-medium text-yellow-800">Session Expiring Soon</h3>
          <div class="mt-2 text-sm text-yellow-700">
            <p>Your session will expire in ${n} minute${n!==1?"s":""}.</p>
          </div>
          <div class="mt-4 flex space-x-3">
            <button id="extend-session" class="bg-yellow-50 px-2 py-1 text-xs font-medium text-yellow-800 rounded-md border border-yellow-200 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500">
              Extend Session
            </button>
            <button id="dismiss-warning" class="bg-yellow-50 px-2 py-1 text-xs font-medium text-yellow-800 rounded-md border border-yellow-200 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500">
              Dismiss
            </button>
          </div>
        </div>
      </div>
    `,document.body.appendChild(l),(s=document.getElementById("extend-session"))==null||s.addEventListener("click",()=>{this.extendSession(),l.remove()}),(a=document.getElementById("dismiss-warning"))==null||a.addEventListener("click",()=>{l.remove()}),setTimeout(()=>{l.parentNode&&l.remove()},3e4)}extendSession(){return be(this,null,function*(){try{const{data:t,error:s}=yield O.auth.refreshSession();if(s){console.error("Error extending session:",s);return}t.session&&(this.sessionStartTime=Date.now(),this.startTimers(),this.showMessage("Session extended successfully!","success"))}catch(t){console.error("Error extending session:",t),this.showMessage("Failed to extend session. Please log in again.","error")}})}handleSessionExpired(){return be(this,null,function*(){console.log("🚨 SESSION EXPIRED - redirecting to login"),this.showMessage("Your session has expired. Please log in again.","error"),setTimeout(()=>be(this,null,function*(){yield this.logout()}),2e3)})}handleInactivityTimeout(){return be(this,null,function*(){this.showMessage("You have been inactive for too long. Logging out...","warning"),setTimeout(()=>be(this,null,function*(){yield this.logout()}),2e3)})}showMessage(t,s){const a={success:"bg-green-50 border-green-200 text-green-800",error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800"},n=document.createElement("div");n.className=`fixed top-4 right-4 ${a[s]} border rounded-lg p-4 shadow-lg z-50 max-w-sm`,n.innerHTML=`
      <div class="flex items-start">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 ${s==="success"?"text-green-400":s==="error"?"text-red-400":"text-yellow-400"}" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3">
          <p class="text-sm font-medium">${t}</p>
        </div>
      </div>
    `,document.body.appendChild(n),setTimeout(()=>{n.parentNode&&n.remove()},5e3)}logout(){return be(this,null,function*(){try{yield O.auth.signOut(),window.location.href="/login"}catch(t){console.error("Error during logout:",t),window.location.href="/login"}})}updateConfig(t){this.config=vs(vs({},this.config),t),this.startTimers()}setRememberMe(t){this.isRememberMe=t,localStorage.setItem("cliniio_remember_me",t.toString()),t?this.config.sessionTimeout=this.config.rememberMeDuration*24*60:this.config.sessionTimeout=480,this.startTimers()}getSessionInfo(){const t=Date.now(),s=t-this.sessionStartTime,a=Math.max(0,this.config.sessionTimeout*60*1e3-s),n=t-this.lastActivityTime,l=Math.max(0,this.config.inactiveTimeout*60*1e3-n);return{sessionStartTime:this.sessionStartTime,lastActivityTime:this.lastActivityTime,remainingTime:a,inactiveTimeRemaining:l}}destroy(){this.sessionTimer&&clearTimeout(this.sessionTimer),this.inactivityTimer&&clearTimeout(this.inactivityTimer),this.warningTimer&&clearTimeout(this.warningTimer),["mousedown","mousemove","keypress","scroll","touchstart","click"].forEach(s=>{document.removeEventListener(s,()=>this.updateActivity())})}}const et=new Qn,Zn=({variant:r="compact",className:t=""})=>{const[s,a]=g.useState(et.getSessionInfo()),[n,l]=g.useState(!1);g.useEffect(()=>{const d=setInterval(()=>{a(et.getSessionInfo())},3e4);return()=>clearInterval(d)},[]);const o=d=>{const u=Math.floor(d/6e4),m=Math.floor(u/60);return m>0?`${m}h ${u%60}m`:`${u}m`},c=d=>d<300*1e3?"text-red-600":d<900*1e3?"text-yellow-600":"text-green-600",i=d=>d<300*1e3?e.jsx(Ua,{className:"h-4 w-4"}):e.jsx(Ba,{className:"h-4 w-4"});return r==="compact"?e.jsxs("div",{className:`flex items-center space-x-2 ${t}`,children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[i(s.remainingTime),e.jsx("span",{className:`text-sm font-medium ${c(s.remainingTime)}`,children:o(s.remainingTime)})]}),e.jsx("button",{onClick:()=>l(!n),className:"text-xs text-gray-500 hover:text-gray-700 underline",children:n?"Hide":"Details"})]}):e.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-4 ${t}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Session Status"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[i(s.remainingTime),e.jsxs("span",{className:`text-sm font-medium ${c(s.remainingTime)}`,children:[o(s.remainingTime)," remaining"]})]})]}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Session started:"}),e.jsx("span",{children:new Date(s.sessionStartTime).toLocaleTimeString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Last activity:"}),e.jsx("span",{children:new Date(s.lastActivityTime).toLocaleTimeString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Inactive timeout:"}),e.jsx("span",{children:o(s.inactiveTimeRemaining)})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsx("button",{onClick:()=>et.extendSession(),className:"w-full px-3 py-2 bg-blue-600 text-white text-xs rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Extend Session"})})]})};var Xn=Object.defineProperty,Jn=Object.defineProperties,ei=Object.getOwnPropertyDescriptors,js=Object.getOwnPropertySymbols,ti=Object.prototype.hasOwnProperty,si=Object.prototype.propertyIsEnumerable,Ns=(r,t,s)=>t in r?Xn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,ri=(r,t)=>{for(var s in t||(t={}))ti.call(t,s)&&Ns(r,s,t[s]);if(js)for(var s of js(t))si.call(t,s)&&Ns(r,s,t[s]);return r},ai=(r,t)=>Jn(r,ei(t)),_s=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const ni=()=>{const{currentUser:r}=ct(),[t,s]=g.useState({sessionTimeout:480,inactiveTimeout:30,rememberMeDuration:7,requireReauthForSensitive:!0,twoFactorEnabled:!1}),[a,n]=g.useState(!1),[l,o]=g.useState(!1),[c,i]=g.useState(null),d=g.useCallback(()=>_s(null,null,function*(){var h,j;if(r){n(!0);try{const{data:p,error:x}=yield O.from("user_security_settings").select("*").eq("user_id",r.id).single();x&&x.code!=="PGRST116"?console.error("Error loading security settings:",x):p&&s({sessionTimeout:p.session_timeout||480,inactiveTimeout:p.inactive_timeout||30,rememberMeDuration:p.remember_me_duration||7,requireReauthForSensitive:(h=p.require_reauth_for_sensitive)!=null?h:!0,twoFactorEnabled:(j=p.two_factor_enabled)!=null?j:!1})}catch(p){console.error("Error loading security settings:",p)}finally{n(!1)}}}),[r]);g.useEffect(()=>{d()},[d]);const u=()=>_s(null,null,function*(){if(r){o(!0),i(null);try{const{error:h}=yield O.from("user_security_settings").upsert({user_id:r.id,session_timeout:t.sessionTimeout,inactive_timeout:t.inactiveTimeout,remember_me_duration:t.rememberMeDuration,require_reauth_for_sensitive:t.requireReauthForSensitive,two_factor_enabled:t.twoFactorEnabled,updated_at:new Date().toISOString()});if(h)throw h;i({type:"success",text:"Security settings saved successfully!"}),localStorage.setItem("cliniio_session_timeout",t.sessionTimeout.toString()),localStorage.setItem("cliniio_inactive_timeout",t.inactiveTimeout.toString()),localStorage.setItem("cliniio_remember_me_duration",t.rememberMeDuration.toString()),et.updateConfig({sessionTimeout:t.sessionTimeout,inactiveTimeout:t.inactiveTimeout,rememberMeDuration:t.rememberMeDuration})}catch(h){console.error("Error saving security settings:",h),i({type:"error",text:"Failed to save security settings. Please try again."})}finally{o(!1)}}}),m=(h,j)=>{s(p=>ai(ri({},p),{[h]:j}))};return a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(h=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},h))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Security & Sessions"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Configure how long you stay logged in and security preferences for your account."})]}),c&&e.jsx("div",{className:`p-4 rounded-lg ${c.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:c.text}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Session Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"session-timeout",className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Session Duration"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:"session-timeout",type:"number",min:"60",max:"1440",value:t.sessionTimeout,onChange:h=>m("sessionTimeout",parseInt(h.target.value)||480),className:"w-20 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"minutes (1-24 hours)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How long you stay logged in before being automatically logged out"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"inactive-timeout",className:"block text-sm font-medium text-gray-700 mb-2",children:"Inactive Timeout"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:"inactive-timeout",type:"number",min:"5",max:"120",value:t.inactiveTimeout,onChange:h=>m("inactiveTimeout",parseInt(h.target.value)||30),className:"w-20 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"minutes (5-120 minutes)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How long of inactivity before automatic logout"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"remember-me-duration",className:"block text-sm font-medium text-gray-700 mb-2",children:"Remember Me Duration"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:"remember-me-duration",type:"number",min:"1",max:"30",value:t.rememberMeDuration,onChange:h=>m("rememberMeDuration",parseInt(h.target.value)||7),className:"w-20 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"days (1-30 days)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'How long to stay logged in when using "Remember Me"'})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Security Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"require-reauth-toggle",className:"text-sm font-medium text-gray-700",children:"Require Re-authentication for Sensitive Actions"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ask for password confirmation before changing critical settings"})]}),e.jsx("button",{id:"require-reauth-toggle",onClick:()=>m("requireReauthForSensitive",!t.requireReauthForSensitive),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${t.requireReauthForSensitive?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t.requireReauthForSensitive?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"two-factor-toggle",className:"text-sm font-medium text-gray-700",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add an extra layer of security to your account (coming soon)"})]}),e.jsx("button",{id:"two-factor-toggle",disabled:!0,className:"relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 cursor-not-allowed",children:e.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white translate-x-1"})})]})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-4",children:"Current Session"}),e.jsx("div",{className:"text-sm text-blue-800 space-y-2",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Logged in as:"})," ",r==null?void 0:r.email]})}),e.jsx("div",{className:"mt-4",children:e.jsx(Zn,{variant:"detailed"})})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:u,disabled:l,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Saving...":"Save Settings"})})]})},ii=()=>{const[r]=g.useState([]),[t,s]=g.useState(!1),[a,n]=g.useState(!1),[l,o]=g.useState(!1),[c,i]=g.useState(null),[d,u]=g.useState("users"),h=(()=>{const f=r.filter($=>$.status==="Active").length,A=[{min:0,max:5,name:"0-5 Users"},{min:6,max:15,name:"6-15 Users"},{min:16,max:21,name:"16-21 Users"},{min:22,max:1/0,name:"21+ Users"}],R=A.find($=>f>=$.min&&f<=$.max),M=A.find($=>$.min>f);if(!R||!M)return null;const B=M.min-f;return{currentTier:R,nextTier:M,usersToNextTier:B,activeUserCount:f}})(),j=f=>{i(f),n(!0)},p=f=>{i(f),o(!0)},x=()=>{s(!0)},N=()=>{s(!1),n(!1),o(!1),i(null)},_=f=>{console.log("Saving user:",f),N()},b=()=>{console.log("Deleting user:",c),N()};return e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"System Administration"}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>u("users"),className:`py-2 px-1 border-b-2 font-medium text-sm ${d==="users"?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"User Management"}),e.jsx("button",{onClick:()=>u("security"),className:`py-2 px-1 border-b-2 font-medium text-sm ${d==="security"?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Security & Sessions"})]})})}),d==="users"&&e.jsxs(e.Fragment,{children:[e.jsx(Un,{users:r,onEditUser:j,onDeleteUser:p,onAddUser:x,billingTierInfo:h}),e.jsx("div",{className:"mb-6 border-t pt-6",children:e.jsx(qn,{})})]}),d==="security"&&e.jsx("div",{children:e.jsx(ni,{})}),e.jsx(Bn,{isOpen:t||a,onClose:N,onSave:_,user:c,mode:a?"edit":"add"}),e.jsx(Hn,{showDeleteModal:l,selectedUser:c,onCloseDeleteModal:()=>o(!1),onConfirmDelete:b})]})},li=()=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Billing & Subscription Settings"}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Current Plan"}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"text-base font-semibold text-blue-900",children:"Professional Plan"}),e.jsx("p",{className:"text-xs text-blue-700",children:"$299/month • 50 users • Full features"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Next billing: Jan 15, 2024"})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"Active"})})]})})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Payment Methods"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-5 bg-blue-600 rounded mr-2 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"VISA"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"•••• •••• •••• 4242"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Expires 12/25"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"inline-block bg-green-100 text-green-800 text-xs px-1 py-0.5 rounded-full",children:"Default"}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-xs",children:"Edit"})]})]}),e.jsx("button",{className:"w-full p-2 border-2 border-dashed border-gray-300 rounded-md text-gray-500 hover:border-gray-400 hover:text-gray-700 transition-colors text-xs",children:"+ Add Payment Method"})]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Billing Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company-name",className:"block text-xs font-medium text-gray-600 mb-1",children:"Company Name"}),e.jsx("input",{id:"company-name",type:"text",defaultValue:"Medical Center Inc.",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tax-id",className:"block text-xs font-medium text-gray-600 mb-1",children:"Tax ID"}),e.jsx("input",{id:"tax-id",type:"text",defaultValue:"12-3456789",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billing-email",className:"block text-xs font-medium text-gray-600 mb-1",children:"Billing Email"}),e.jsx("input",{id:"billing-email",type:"email",defaultValue:"billing@medicalcenter.com",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billing-phone",className:"block text-xs font-medium text-gray-600 mb-1",children:"Phone"}),e.jsx("input",{id:"billing-phone",type:"tel",defaultValue:"+1 (555) 123-4567",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billing-city",className:"block text-xs font-medium text-gray-600 mb-1",children:"City"}),e.jsx("input",{id:"billing-city",type:"text",defaultValue:"New York",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billing-state-zip",className:"block text-xs font-medium text-gray-600 mb-1",children:"State/ZIP"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{id:"billing-state",type:"text",defaultValue:"NY",className:"w-1/2 px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("input",{id:"billing-zip",type:"text",defaultValue:"10001",className:"w-1/2 px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]})]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Invoice Settings"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded-md",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Frequency"}),e.jsxs("select",{className:"px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{children:"Monthly"}),e.jsx("option",{children:"Quarterly"}),e.jsx("option",{children:"Annually"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded-md",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Auto-pay"}),e.jsx("input",{type:"checkbox",id:"auto-pay",className:"rounded",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded-md",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Reminders"}),e.jsx("input",{type:"checkbox",id:"payment-reminders",className:"rounded",defaultChecked:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Usage & Limits"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-2 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Users"}),e.jsx("span",{className:"text-xs text-gray-600",children:"35/50"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full",style:{width:"70%"}})})]}),e.jsxs("div",{className:"p-2 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Storage"}),e.jsx("span",{className:"text-xs text-gray-600",children:"2.1/10 GB"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-green-600 h-1.5 rounded-full",style:{width:"21%"}})})]}),e.jsxs("div",{className:"p-2 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"API Calls"}),e.jsx("span",{className:"text-xs text-gray-600",children:"45K/100K"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-yellow-600 h-1.5 rounded-full",style:{width:"45%"}})})]})]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Plan Management"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("button",{className:"p-2 border border-blue-300 bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100 transition-colors text-xs",children:"Upgrade"}),e.jsx("button",{className:"p-2 border border-gray-300 bg-gray-50 text-gray-700 rounded-md hover:bg-gray-100 transition-colors text-xs",children:"Downgrade"}),e.jsx("button",{className:"p-2 border border-red-300 bg-red-50 text-red-700 rounded-md hover:bg-red-100 transition-colors text-xs",children:"Cancel"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Save Changes"})})]});class oi{constructor(t){this.facilityId=t}createDefaultSettings(){return{aiEnabled:!0,computerVision:{toolConditionAssessment:!0,barcodeQualityDetection:!0,toolTypeRecognition:!0,cleaningValidation:!0,damageDetection:!0,wearAnalysis:!0,imageRecognition:!0,qualityAssessment:!0},predictiveAnalytics:{cycleOptimization:!0,failurePrediction:!0,efficiencyOptimization:!0,resourcePlanning:!0,maintenancePrediction:!0,qualityPrediction:!0,demandForecasting:!0,costOptimization:!0,seasonalAnalysis:!0},smartWorkflow:{intelligentWorkflowSelection:!0,automatedProblemDetection:!0,smartPhaseTransitions:!0,batchOptimization:!0,toolGrouping:!0,cycleScheduling:!0,smartCategorization:!0,autoClassification:!0,smartFormFilling:!0},qualityAssurance:{biologicalIndicatorAnalysis:!0,complianceMonitoring:!0,auditTrailEnhancement:!0,riskAssessment:!0,qualityMetrics:!0,regulatoryCompliance:!0,smartValidation:!0,errorPrevention:!0},realTimeMonitoring:{anomalyDetection:!0,predictiveMaintenance:!0,qualityDriftDetection:!0,smartNotifications:!0,performanceMonitoring:!0,alertManagement:!0,statusUpdates:!0,emergencyAlerts:!0},analytics:{dataCollection:!0,realTimeUpdates:!0,historicalDataRetention:!0,exportCapabilities:!0,dashboardCustomization:!0,performanceMetrics:!0,efficiencyTracking:!0,costAnalysis:!0},intelligence:{riskAssessment:!0,alertSystem:!0,escalationRules:!0,aiRecommendations:!0,optimizationTips:!0,predictiveInsights:!0,trendAnalysis:!0,forecasting:!0},performance:{accuracyTracking:!0,responseTimeMonitoring:!0,errorRateTracking:!0,qualityMetrics:!0,benchmarkComparison:!0,performanceAlerts:!0,optimizationSuggestions:!0,modelHealthMonitoring:!0},privacy:{dataAnonymization:!0,thirdPartyPermissions:!0,complianceMonitoring:!0,auditTrail:!0,dataRetention:!0,encryption:!0,accessControl:!0,privacyCompliance:!0},integration:{externalServices:!0,apiRateLimiting:!0,webhookEndpoints:!0,dataSharing:!0,healthMonitoring:!0,syncScheduling:!0,backupSystems:!0,crossPlatformSync:!0},userExperience:{aiSuggestions:!0,learningPaths:!0,personalization:!0,accessibility:!0,languagePreferences:!0,notificationPreferences:!0,interfaceCustomization:!0,helpSystem:!0},environmental:{predictiveCleaning:!1,smartScheduling:!1,contaminationPrediction:!1,resourceOptimization:!1,efficiencyAnalytics:!1,smartRoomManagement:!1,automaticPriorityAssignment:!1,riskAssessment:!1,trendAnalysis:!1,predictiveMaintenance:!1,supplyOptimization:!1,staffScheduling:!1,costOptimization:!1,inventoryPrediction:!1,workloadBalancing:!1,qualityAssurance:!1,complianceMonitoring:!1,auditTrailEnhancement:!1,performanceTracking:!1,automatedReporting:!1,realTimeMonitoring:!1,anomalyDetection:!1,smartNotifications:!1,statusUpdates:!1,emergencyAlerts:!1},learning:{personalizedRecommendations:!1,skillGapAnalysis:!1,learningPathOptimization:!1,performancePrediction:!1,adaptiveDifficulty:!1,learningAnalytics:!1,behaviorTracking:!1,progressPrediction:!1,engagementMetrics:!1,retentionAnalysis:!1,learningEfficiency:!1,contentOptimization:!1,assessmentIntelligence:!1,certificationTracking:!1,competencyMapping:!1,learningInsights:!1},aiConfig:{aiConfidenceThreshold:.8,aiDataRetentionDays:365,realTimeProcessingEnabled:!0,batchProcessingEnabled:!0,dataSharingEnabled:!1,localAIProcessingEnabled:!0,encryptedDataTransmission:!0,aiModelTraining:!1},apiKeys:{},facilityId:this.facilityId,aiVersion:"1.0.0",updated_at:new Date().toISOString()}}mergeSettings(t,s,a,n,l){var o,c,i,d,u,m,h,j,p,x,N,_,b,f,A,R,M,B,$,G,H,E;return s&&(t.computerVision.toolConditionAssessment=(o=s.tool_condition_assessment)!=null?o:t.computerVision.toolConditionAssessment,t.computerVision.barcodeQualityDetection=(c=s.barcode_quality_detection)!=null?c:t.computerVision.barcodeQualityDetection,t.computerVision.toolTypeRecognition=(i=s.tool_type_recognition)!=null?i:t.computerVision.toolTypeRecognition,t.predictiveAnalytics.cycleOptimization=(d=s.cycle_optimization)!=null?d:t.predictiveAnalytics.cycleOptimization,t.predictiveAnalytics.failurePrediction=(u=s.failure_prediction)!=null?u:t.predictiveAnalytics.failurePrediction,t.aiConfig.aiConfidenceThreshold=(m=s.ai_confidence_threshold)!=null?m:t.aiConfig.aiConfidenceThreshold,t.aiConfig.aiDataRetentionDays=(h=s.ai_data_retention_days)!=null?h:t.aiConfig.aiDataRetentionDays),a&&(t.computerVision.imageRecognition=(j=a.image_recognition_enabled)!=null?j:t.computerVision.imageRecognition,t.computerVision.qualityAssessment=(p=a.quality_assessment_enabled)!=null?p:t.computerVision.qualityAssessment,t.predictiveAnalytics.demandForecasting=(x=a.demand_forecasting_enabled)!=null?x:t.predictiveAnalytics.demandForecasting,t.predictiveAnalytics.costOptimization=(N=a.cost_optimization_enabled)!=null?N:t.predictiveAnalytics.costOptimization,t.smartWorkflow.smartCategorization=(_=a.smart_categorization_enabled)!=null?_:t.smartWorkflow.smartCategorization),n&&(t.environmental.predictiveCleaning=(b=n.predictive_cleaning_enabled)!=null?b:t.environmental.predictiveCleaning,t.environmental.smartScheduling=(f=n.smart_scheduling)!=null?f:t.environmental.smartScheduling,t.environmental.contaminationPrediction=(A=n.contamination_prediction)!=null?A:t.environmental.contaminationPrediction,t.environmental.resourceOptimization=(R=n.resource_optimization)!=null?R:t.environmental.resourceOptimization,t.environmental.efficiencyAnalytics=(M=n.efficiency_analytics)!=null?M:t.environmental.efficiencyAnalytics),l&&(t.learning.personalizedRecommendations=(B=l.personalized_recommendations)!=null?B:t.learning.personalizedRecommendations,t.learning.skillGapAnalysis=($=l.skill_gap_analysis)!=null?$:t.learning.skillGapAnalysis,t.learning.learningPathOptimization=(G=l.learning_path_optimization)!=null?G:t.learning.learningPathOptimization,t.learning.performancePrediction=(H=l.performance_prediction)!=null?H:t.learning.performancePrediction,t.learning.adaptiveDifficulty=(E=l.adaptive_difficulty)!=null?E:t.learning.adaptiveDifficulty),t}extractSterilizationSettings(t){var s,a,n,l,o,c,i;return{tool_condition_assessment:(s=t.computerVision)==null?void 0:s.toolConditionAssessment,barcode_quality_detection:(a=t.computerVision)==null?void 0:a.barcodeQualityDetection,tool_type_recognition:(n=t.computerVision)==null?void 0:n.toolTypeRecognition,cycle_optimization:(l=t.predictiveAnalytics)==null?void 0:l.cycleOptimization,failure_prediction:(o=t.predictiveAnalytics)==null?void 0:o.failurePrediction,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}extractInventorySettings(t){var s,a,n,l,o,c,i;return{image_recognition_enabled:(s=t.computerVision)==null?void 0:s.imageRecognition,quality_assessment_enabled:(a=t.computerVision)==null?void 0:a.qualityAssessment,demand_forecasting_enabled:(n=t.predictiveAnalytics)==null?void 0:n.demandForecasting,cost_optimization_enabled:(l=t.predictiveAnalytics)==null?void 0:l.costOptimization,smart_categorization_enabled:(o=t.smartWorkflow)==null?void 0:o.smartCategorization,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}extractEnvironmentalSettings(t){var s,a,n,l,o,c,i;return{predictive_cleaning_enabled:(s=t.environmental)==null?void 0:s.predictiveCleaning,smart_scheduling:(a=t.environmental)==null?void 0:a.smartScheduling,contamination_prediction:(n=t.environmental)==null?void 0:n.contaminationPrediction,resource_optimization:(l=t.environmental)==null?void 0:l.resourceOptimization,efficiency_analytics:(o=t.environmental)==null?void 0:o.efficiencyAnalytics,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}extractLearningSettings(t){var s,a,n,l,o,c,i;return{personalized_recommendations:(s=t.learning)==null?void 0:s.personalizedRecommendations,skill_gap_analysis:(a=t.learning)==null?void 0:a.skillGapAnalysis,learning_path_optimization:(n=t.learning)==null?void 0:n.learningPathOptimization,performance_prediction:(l=t.learning)==null?void 0:l.performancePrediction,adaptive_difficulty:(o=t.learning)==null?void 0:o.adaptiveDifficulty,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}}var Ke=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});class ci{constructor(t){this.facilityId=t,this.sterilizationAI=new ot(t),this.inventoryAI=new Ur(t),this.environmentalAI=new ma(t),this.learningAI=new pa(t)}loadUnifiedSettings(){return Ke(this,null,function*(){try{const[t,s,a,n]=yield Promise.all([this.sterilizationAI.loadSettings(),this.inventoryAI.loadSettings(),this.environmentalAI.loadSettings(),this.learningAI.loadSettings()]),l=this.createDefaultSettings();return this.mergeSettings(l,t||void 0,s||void 0,a||void 0,n||void 0)}catch(t){return console.error("Error loading unified AI settings:",t),this.createDefaultSettings()}})}saveUnifiedSettings(t){return Ke(this,null,function*(){try{const s=this.extractSterilizationSettings(t),a=this.extractInventorySettings(t),n=this.extractEnvironmentalSettings(t),l=this.extractLearningSettings(t),[o,c,i,d]=yield Promise.all([this.sterilizationAI.saveSettings({facility_id:this.facilityId,ai_enabled:!0,ai_version:"1.0",computer_vision_enabled:!!s.tool_condition_assessment||!1,tool_condition_assessment:!!s.tool_condition_assessment||!1,barcode_quality_detection:!!s.barcode_quality_detection||!1,tool_type_recognition:!!s.tool_type_recognition||!1,cleaning_validation:!1,predictive_analytics_enabled:!!s.failure_prediction||!1,cycle_optimization:!!s.cycle_optimization||!1,failure_prediction:!!s.failure_prediction||!1,efficiency_optimization:!1,resource_planning:!1,smart_workflow_enabled:!1,ai_confidence_threshold:Number(s.ai_confidence_threshold)||.8,ai_data_retention_days:Number(s.ai_data_retention_days)||90}),this.inventoryAI.saveSettings(a),this.environmentalAI.saveSettings(n),this.learningAI.saveSettings(l)]);return o&&c&&i&&d}catch(s){return console.error("Error saving unified AI settings:",s),!1}})}applySettings(t){return Ke(this,null,function*(){try{return yield this.sterilizationAI.initialize(),yield this.environmentalAI.initialize(),yield this.learningAI.initialize(),this.applyFeatureFlags(t),!0}catch(s){return console.error("Error applying AI settings:",s),!1}})}getServiceStatus(){return Ke(this,null,function*(){try{const[t,s,a]=yield Promise.all([this.sterilizationAI.initialize(),this.environmentalAI.initialize(),this.learningAI.initialize()]);return{sterilization:t,inventory:!1,environmental:s,learning:a}}catch(t){return console.error("Error getting AI service status:",t),{sterilization:!1,inventory:!1,environmental:!1,learning:!1}}})}createDefaultSettings(){return{aiEnabled:!0,computerVision:{toolConditionAssessment:!0,barcodeQualityDetection:!0,toolTypeRecognition:!0,cleaningValidation:!0,damageDetection:!0,wearAnalysis:!0,imageRecognition:!0,qualityAssessment:!0},predictiveAnalytics:{cycleOptimization:!0,failurePrediction:!0,efficiencyOptimization:!0,resourcePlanning:!0,maintenancePrediction:!0,qualityPrediction:!0,demandForecasting:!0,costOptimization:!0,seasonalAnalysis:!0},smartWorkflow:{intelligentWorkflowSelection:!0,automatedProblemDetection:!0,smartPhaseTransitions:!0,batchOptimization:!0,toolGrouping:!0,cycleScheduling:!0,smartCategorization:!0,autoClassification:!0,smartFormFilling:!0},qualityAssurance:{biologicalIndicatorAnalysis:!0,complianceMonitoring:!0,auditTrailEnhancement:!0,riskAssessment:!0,qualityMetrics:!0,regulatoryCompliance:!0,smartValidation:!0,errorPrevention:!0},realTimeMonitoring:{anomalyDetection:!0,predictiveMaintenance:!0,qualityDriftDetection:!0,smartNotifications:!0,performanceMonitoring:!0,alertManagement:!0,statusUpdates:!0,emergencyAlerts:!0},analytics:{dataCollection:!0,realTimeUpdates:!0,historicalDataRetention:!0,exportCapabilities:!0,dashboardCustomization:!0,performanceMetrics:!0,efficiencyTracking:!0,costAnalysis:!0},intelligence:{riskAssessment:!0,alertSystem:!0,escalationRules:!0,aiRecommendations:!0,optimizationTips:!0,predictiveInsights:!0,trendAnalysis:!0,forecasting:!0},performance:{accuracyTracking:!0,responseTimeMonitoring:!0,errorRateTracking:!0,qualityMetrics:!0,benchmarkComparison:!0,performanceAlerts:!0,optimizationSuggestions:!0,modelHealthMonitoring:!0},privacy:{dataAnonymization:!0,thirdPartyPermissions:!0,complianceMonitoring:!0,auditTrail:!0,dataRetention:!0,encryption:!0,accessControl:!0,privacyCompliance:!0},integration:{externalServices:!0,apiRateLimiting:!0,webhookEndpoints:!0,dataSharing:!0,healthMonitoring:!0,syncScheduling:!0,backupSystems:!0,crossPlatformSync:!0},userExperience:{aiSuggestions:!0,learningPaths:!0,personalization:!0,accessibility:!0,languagePreferences:!0,notificationPreferences:!0,interfaceCustomization:!0,helpSystem:!0},environmental:{predictiveCleaning:!1,smartScheduling:!1,contaminationPrediction:!1,resourceOptimization:!1,efficiencyAnalytics:!1,smartRoomManagement:!1,automaticPriorityAssignment:!1,riskAssessment:!1,trendAnalysis:!1,predictiveMaintenance:!1,supplyOptimization:!1,staffScheduling:!1,costOptimization:!1,inventoryPrediction:!1,workloadBalancing:!1,qualityAssurance:!1,complianceMonitoring:!1,auditTrailEnhancement:!1,performanceTracking:!1,automatedReporting:!1,realTimeMonitoring:!1,anomalyDetection:!1,smartNotifications:!1,statusUpdates:!1,emergencyAlerts:!1},learning:{personalizedRecommendations:!1,skillGapAnalysis:!1,learningPathOptimization:!1,performancePrediction:!1,adaptiveDifficulty:!1,learningAnalytics:!1,behaviorTracking:!1,progressPrediction:!1,engagementMetrics:!1,retentionAnalysis:!1,learningEfficiency:!1,contentOptimization:!1,assessmentIntelligence:!1,certificationTracking:!1,competencyMapping:!1,learningInsights:!1},aiConfig:{aiConfidenceThreshold:.8,aiDataRetentionDays:365,realTimeProcessingEnabled:!0,batchProcessingEnabled:!0,dataSharingEnabled:!1,localAIProcessingEnabled:!0,encryptedDataTransmission:!0,aiModelTraining:!1},apiKeys:{},facilityId:this.facilityId,aiVersion:"1.0.0",updated_at:new Date().toISOString()}}mergeSettings(t,s,a,n,l){var o,c,i,d,u,m,h,j,p,x,N,_,b,f,A,R,M,B,$,G,H,E;return s&&(t.computerVision.toolConditionAssessment=(o=!!s.tool_condition_assessment)!=null?o:t.computerVision.toolConditionAssessment,t.computerVision.barcodeQualityDetection=(c=!!s.barcode_quality_detection)!=null?c:t.computerVision.barcodeQualityDetection,t.computerVision.toolTypeRecognition=(i=!!s.tool_type_recognition)!=null?i:t.computerVision.toolTypeRecognition,t.predictiveAnalytics.cycleOptimization=(d=!!s.cycle_optimization)!=null?d:t.predictiveAnalytics.cycleOptimization,t.predictiveAnalytics.failurePrediction=(u=!!s.failure_prediction)!=null?u:t.predictiveAnalytics.failurePrediction,t.aiConfig.aiConfidenceThreshold=(m=Number(s.ai_confidence_threshold))!=null?m:t.aiConfig.aiConfidenceThreshold,t.aiConfig.aiDataRetentionDays=(h=Number(s.ai_data_retention_days))!=null?h:t.aiConfig.aiDataRetentionDays),a&&(t.computerVision.imageRecognition=(j=!!a.image_recognition_enabled)!=null?j:t.computerVision.imageRecognition,t.computerVision.qualityAssessment=(p=!!a.quality_assessment_enabled)!=null?p:t.computerVision.qualityAssessment,t.predictiveAnalytics.demandForecasting=(x=!!a.demand_forecasting_enabled)!=null?x:t.predictiveAnalytics.demandForecasting,t.predictiveAnalytics.costOptimization=(N=!!a.cost_optimization_enabled)!=null?N:t.predictiveAnalytics.costOptimization,t.smartWorkflow.smartCategorization=(_=!!a.smart_categorization_enabled)!=null?_:t.smartWorkflow.smartCategorization),n&&(t.environmental.predictiveCleaning=(b=!!n.predictive_cleaning_enabled)!=null?b:t.environmental.predictiveCleaning,t.environmental.smartScheduling=(f=!!n.smart_scheduling)!=null?f:t.environmental.smartScheduling,t.environmental.contaminationPrediction=(A=!!n.contamination_prediction)!=null?A:t.environmental.contaminationPrediction,t.environmental.resourceOptimization=(R=!!n.resource_optimization)!=null?R:t.environmental.resourceOptimization,t.environmental.efficiencyAnalytics=(M=!!n.efficiency_analytics)!=null?M:t.environmental.efficiencyAnalytics),l&&(t.learning.personalizedRecommendations=(B=!!l.personalized_recommendations)!=null?B:t.learning.personalizedRecommendations,t.learning.skillGapAnalysis=($=!!l.skill_gap_analysis)!=null?$:t.learning.skillGapAnalysis,t.learning.learningPathOptimization=(G=!!l.learning_path_optimization)!=null?G:t.learning.learningPathOptimization,t.learning.performancePrediction=(H=!!l.performance_prediction)!=null?H:t.learning.performancePrediction,t.learning.adaptiveDifficulty=(E=!!l.adaptive_difficulty)!=null?E:t.learning.adaptiveDifficulty),t}extractSterilizationSettings(t){var s,a,n,l,o,c,i;return{tool_condition_assessment:(s=t.computerVision)==null?void 0:s.toolConditionAssessment,barcode_quality_detection:(a=t.computerVision)==null?void 0:a.barcodeQualityDetection,tool_type_recognition:(n=t.computerVision)==null?void 0:n.toolTypeRecognition,cycle_optimization:(l=t.predictiveAnalytics)==null?void 0:l.cycleOptimization,failure_prediction:(o=t.predictiveAnalytics)==null?void 0:o.failurePrediction,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}extractInventorySettings(t){var s,a,n,l,o,c,i;return{image_recognition_enabled:(s=t.computerVision)==null?void 0:s.imageRecognition,quality_assessment_enabled:(a=t.computerVision)==null?void 0:a.qualityAssessment,demand_forecasting_enabled:(n=t.predictiveAnalytics)==null?void 0:n.demandForecasting,cost_optimization_enabled:(l=t.predictiveAnalytics)==null?void 0:l.costOptimization,smart_categorization_enabled:(o=t.smartWorkflow)==null?void 0:o.smartCategorization,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}extractEnvironmentalSettings(t){var s,a,n,l,o,c,i;return{predictive_cleaning_enabled:(s=t.environmental)==null?void 0:s.predictiveCleaning,smart_scheduling:(a=t.environmental)==null?void 0:a.smartScheduling,contamination_prediction:(n=t.environmental)==null?void 0:n.contaminationPrediction,resource_optimization:(l=t.environmental)==null?void 0:l.resourceOptimization,efficiency_analytics:(o=t.environmental)==null?void 0:o.efficiencyAnalytics,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}extractLearningSettings(t){var s,a,n,l,o,c,i;return{personalized_recommendations:(s=t.learning)==null?void 0:s.personalizedRecommendations,skill_gap_analysis:(a=t.learning)==null?void 0:a.skillGapAnalysis,learning_path_optimization:(n=t.learning)==null?void 0:n.learningPathOptimization,performance_prediction:(l=t.learning)==null?void 0:l.performancePrediction,adaptive_difficulty:(o=t.learning)==null?void 0:o.adaptiveDifficulty,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}applyFeatureFlags(t){console.log("Applying AI feature flags:",t)}}class di{constructor(t){this.facilityId=t}isFeatureEnabled(t,s){return t.aiEnabled?this.getNestedValue(t,s)===!0:!1}validateApiKeys(t){const s=[];return t.openaiApiKey&&!this.isValidApiKey(t.openaiApiKey)&&s.push("Invalid OpenAI API key format"),t.googleVisionApiKey&&!this.isValidApiKey(t.googleVisionApiKey)&&s.push("Invalid Google Vision API key format"),t.azureComputerVisionKey&&!this.isValidApiKey(t.azureComputerVisionKey)&&s.push("Invalid Azure Computer Vision API key format"),{isValid:s.length===0,errors:s}}encryptApiKeys(t){return{openaiApiKey:t.openaiApiKey?this.encryptKey(t.openaiApiKey):void 0,googleVisionApiKey:t.googleVisionApiKey?this.encryptKey(t.googleVisionApiKey):void 0,azureComputerVisionKey:t.azureComputerVisionKey?this.encryptKey(t.azureComputerVisionKey):void 0}}decryptApiKeys(t){return{openaiApiKey:t.openaiApiKey?this.decryptKey(t.openaiApiKey):void 0,googleVisionApiKey:t.googleVisionApiKey?this.decryptKey(t.googleVisionApiKey):void 0,azureComputerVisionKey:t.azureComputerVisionKey?this.decryptKey(t.azureComputerVisionKey):void 0}}getRequiredApiKeys(t){const s=[];return(t.computerVision.toolConditionAssessment||t.computerVision.barcodeQualityDetection||t.computerVision.toolTypeRecognition||t.computerVision.imageRecognition||t.computerVision.qualityAssessment)&&s.push("googleVisionApiKey","azureComputerVisionKey"),(t.predictiveAnalytics.failurePrediction||t.predictiveAnalytics.cycleOptimization||t.predictiveAnalytics.demandForecasting)&&s.push("openaiApiKey"),(t.environmental.predictiveCleaning||t.environmental.contaminationPrediction||t.environmental.resourceOptimization)&&s.push("openaiApiKey"),(t.learning.personalizedRecommendations||t.learning.skillGapAnalysis||t.learning.learningPathOptimization)&&s.push("openaiApiKey"),[...new Set(s)]}hasRequiredApiKeys(t){const s=this.getRequiredApiKeys(t),a=Object.keys(t.apiKeys).filter(n=>t.apiKeys[n]);return s.every(n=>a.some(l=>l===n))}isValidApiKey(t){return t&&t.length>10&&!t.includes(" ")}encryptKey(t){return`encrypted_${t}`}decryptKey(t){return t.replace("encrypted_","")}getNestedValue(t,s){return s.split(".").reduce((a,n)=>a==null?void 0:a[n],t)}}var ui=Object.defineProperty,Cs=Object.getOwnPropertySymbols,mi=Object.prototype.hasOwnProperty,pi=Object.prototype.propertyIsEnumerable,Ss=(r,t,s)=>t in r?ui(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Qe=(r,t)=>{for(var s in t||(t={}))mi.call(t,s)&&Ss(r,s,t[s]);if(Cs)for(var s of Cs(t))pi.call(t,s)&&Ss(r,s,t[s]);return r};class gi{constructor(t){this.facilityId=t}applyFeatureFlags(t){console.log("Applying AI feature flags:",t)}toggleFeature(t,s,a){const n=Qe({},t);return this.setNestedValue(n,s,a),n}toggleMultipleFeatures(t,s){const a=Qe({},t);return Object.entries(s).forEach(([n,l])=>{this.setNestedValue(a,n,l)}),a}enableCategory(t,s){const a=Qe({},t);if(typeof a[s]=="object"&&a[s]!==null){const n=a[s];Object.keys(n).forEach(l=>{n[l]=!0})}return a}disableCategory(t,s){const a=Qe({},t);if(typeof a[s]=="object"&&a[s]!==null){const n=a[s];Object.keys(n).forEach(l=>{n[l]=!1})}return a}getFeatureStatus(t,s){return this.getNestedValue(t,s)===!0}getCategoryStatus(t,s){if(typeof t[s]!="object"||t[s]===null)return{enabled:0,total:0,percentage:0};const a=t[s],n=Object.values(a),l=n.filter(Boolean).length,o=n.length;return{enabled:l,total:o,percentage:o>0?Math.round(l/o*100):0}}getDisabledFeatures(t){const s=[];return Object.entries(t.computerVision).forEach(([a,n])=>{n||s.push(`computerVision.${a}`)}),Object.entries(t.predictiveAnalytics).forEach(([a,n])=>{n||s.push(`predictiveAnalytics.${a}`)}),Object.entries(t.smartWorkflow).forEach(([a,n])=>{n||s.push(`smartWorkflow.${a}`)}),Object.entries(t.qualityAssurance).forEach(([a,n])=>{n||s.push(`qualityAssurance.${a}`)}),Object.entries(t.realTimeMonitoring).forEach(([a,n])=>{n||s.push(`realTimeMonitoring.${a}`)}),Object.entries(t.analytics).forEach(([a,n])=>{n||s.push(`analytics.${a}`)}),Object.entries(t.intelligence).forEach(([a,n])=>{n||s.push(`intelligence.${a}`)}),Object.entries(t.performance).forEach(([a,n])=>{n||s.push(`performance.${a}`)}),Object.entries(t.privacy).forEach(([a,n])=>{n||s.push(`privacy.${a}`)}),Object.entries(t.integration).forEach(([a,n])=>{n||s.push(`integration.${a}`)}),Object.entries(t.userExperience).forEach(([a,n])=>{n||s.push(`userExperience.${a}`)}),Object.entries(t.environmental).forEach(([a,n])=>{n||s.push(`environmental.${a}`)}),Object.entries(t.learning).forEach(([a,n])=>{n||s.push(`learning.${a}`)}),s}getEnabledFeatures(t){const s=[];return Object.entries(t.computerVision).forEach(([a,n])=>{n&&s.push(`computerVision.${a}`)}),Object.entries(t.predictiveAnalytics).forEach(([a,n])=>{n&&s.push(`predictiveAnalytics.${a}`)}),Object.entries(t.smartWorkflow).forEach(([a,n])=>{n&&s.push(`smartWorkflow.${a}`)}),Object.entries(t.qualityAssurance).forEach(([a,n])=>{n&&s.push(`qualityAssurance.${a}`)}),Object.entries(t.realTimeMonitoring).forEach(([a,n])=>{n&&s.push(`realTimeMonitoring.${a}`)}),Object.entries(t.analytics).forEach(([a,n])=>{n&&s.push(`analytics.${a}`)}),Object.entries(t.intelligence).forEach(([a,n])=>{n&&s.push(`intelligence.${a}`)}),Object.entries(t.performance).forEach(([a,n])=>{n&&s.push(`performance.${a}`)}),Object.entries(t.privacy).forEach(([a,n])=>{n&&s.push(`privacy.${a}`)}),Object.entries(t.integration).forEach(([a,n])=>{n&&s.push(`integration.${a}`)}),Object.entries(t.userExperience).forEach(([a,n])=>{n&&s.push(`userExperience.${a}`)}),Object.entries(t.environmental).forEach(([a,n])=>{n&&s.push(`environmental.${a}`)}),Object.entries(t.learning).forEach(([a,n])=>{n&&s.push(`learning.${a}`)}),s}getNestedValue(t,s){return s.split(".").reduce((a,n)=>a==null?void 0:a[n],t)}setNestedValue(t,s,a){const n=s.split("."),l=n.pop(),o=n.reduce((c,i)=>(i in c||(c[i]={}),c[i]),t);o[l]=a}}var hi=Object.defineProperty,ws=Object.getOwnPropertySymbols,xi=Object.prototype.hasOwnProperty,fi=Object.prototype.propertyIsEnumerable,Es=(r,t,s)=>t in r?hi(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,bt=(r,t)=>{for(var s in t||(t={}))xi.call(t,s)&&Es(r,s,t[s]);if(ws)for(var s of ws(t))fi.call(t,s)&&Es(r,s,t[s]);return r};class bi{constructor(t){this.facilityId=t}optimizePerformanceSettings(t){const s=bt({},t);return s.aiConfig.aiConfidenceThreshold=this.calculateOptimalConfidenceThreshold(t),s.aiConfig.aiDataRetentionDays=this.calculateOptimalDataRetention(t),s.aiConfig.realTimeProcessingEnabled=this.shouldEnableRealTimeProcessing(t),s.aiConfig.batchProcessingEnabled=this.shouldEnableBatchProcessing(t),s.aiConfig.dataSharingEnabled=this.shouldEnableDataSharing(t),s.aiConfig.localAIProcessingEnabled=this.shouldEnableLocalProcessing(t),s.aiConfig.encryptedDataTransmission=this.shouldEnableEncryption(t),s.aiConfig.aiModelTraining=this.shouldEnableModelTraining(t),s}getPerformanceRecommendations(t){const s=[];return t.aiConfig.aiConfidenceThreshold<.7&&s.push({recommendations:["Consider increasing AI confidence threshold to 0.8 or higher for better accuracy"],priority:"medium"}),t.aiConfig.aiDataRetentionDays>365&&s.push({recommendations:["Consider reducing data retention period to improve performance and reduce storage costs"],priority:"low"}),!t.aiConfig.realTimeProcessingEnabled&&!t.aiConfig.batchProcessingEnabled&&s.push({recommendations:["Enable at least one processing mode (real-time or batch) for AI functionality"],priority:"high"}),t.aiConfig.encryptedDataTransmission||s.push({recommendations:["Enable encrypted data transmission for better security"],priority:"high"}),!t.aiConfig.localAIProcessingEnabled&&t.privacy.dataAnonymization&&s.push({recommendations:["Consider enabling local AI processing for better privacy compliance"],priority:"medium"}),s}validatePerformanceSettings(t){const s=[],a=[];return(t.aiConfig.aiConfidenceThreshold<.1||t.aiConfig.aiConfidenceThreshold>1)&&s.push("AI confidence threshold must be between 0.1 and 1.0"),(t.aiConfig.aiDataRetentionDays<1||t.aiConfig.aiDataRetentionDays>2555)&&s.push("AI data retention days must be between 1 and 2555 (7 years)"),!t.aiConfig.realTimeProcessingEnabled&&!t.aiConfig.batchProcessingEnabled&&s.push("At least one processing mode must be enabled"),!t.aiConfig.encryptedDataTransmission&&t.privacy.dataAnonymization&&a.push("Consider enabling encrypted data transmission when using data anonymization"),!t.aiConfig.localAIProcessingEnabled&&t.privacy.privacyCompliance&&a.push("Consider enabling local AI processing for better privacy compliance"),{isValid:s.length===0,errors:s,warnings:a}}getPerformanceMetricsConfig(t){return{accuracyTracking:t.performance.accuracyTracking,responseTimeMonitoring:t.performance.responseTimeMonitoring,errorRateTracking:t.performance.errorRateTracking,qualityMetrics:t.performance.qualityMetrics,benchmarkComparison:t.performance.benchmarkComparison,performanceAlerts:t.performance.performanceAlerts,optimizationSuggestions:t.performance.optimizationSuggestions,modelHealthMonitoring:t.performance.modelHealthMonitoring}}updatePerformanceMetrics(t,s){const a=bt({},t);return Object.entries(s).forEach(([n,l])=>{l!==void 0&&(a.performance[n]=l)}),a}getPerformanceConfig(t){return{aiConfidenceThreshold:t.aiConfig.aiConfidenceThreshold,aiDataRetentionDays:t.aiConfig.aiDataRetentionDays,realTimeProcessingEnabled:t.aiConfig.realTimeProcessingEnabled,batchProcessingEnabled:t.aiConfig.batchProcessingEnabled,dataSharingEnabled:t.aiConfig.dataSharingEnabled,localAIProcessingEnabled:t.aiConfig.localAIProcessingEnabled,encryptedDataTransmission:t.aiConfig.encryptedDataTransmission,aiModelTraining:t.aiConfig.aiModelTraining}}updatePerformanceConfig(t,s){const a=bt({},t);return Object.entries(s).forEach(([n,l])=>{l!==void 0&&(a.aiConfig[n]=l)}),a}calculateOptimalConfidenceThreshold(t){let s=.8;return t.predictiveAnalytics.failurePrediction&&(s=Math.max(s,.9)),t.qualityAssurance.complianceMonitoring&&(s=Math.max(s,.85)),t.realTimeMonitoring.emergencyAlerts&&(s=Math.max(s,.95)),Math.min(s,.99)}calculateOptimalDataRetention(t){let s=365;return t.privacy.complianceMonitoring&&(s=Math.max(s,2555)),t.qualityAssurance.regulatoryCompliance&&(s=Math.max(s,1825)),t.performance.optimizationSuggestions&&(s=Math.min(s,180)),s}shouldEnableRealTimeProcessing(t){return t.realTimeMonitoring.anomalyDetection||t.realTimeMonitoring.emergencyAlerts||t.realTimeMonitoring.smartNotifications||t.analytics.realTimeUpdates}shouldEnableBatchProcessing(t){return t.predictiveAnalytics.demandForecasting||t.predictiveAnalytics.seasonalAnalysis||t.analytics.historicalDataRetention||t.performance.benchmarkComparison}shouldEnableDataSharing(t){return t.privacy.dataSharingEnabled&&!t.privacy.dataAnonymization}shouldEnableLocalProcessing(t){return t.privacy.dataAnonymization||t.privacy.privacyCompliance||t.privacy.accessControl}shouldEnableEncryption(t){return t.privacy.encryption||t.privacy.privacyCompliance||t.privacy.accessControl}shouldEnableModelTraining(t){return t.analytics.dataCollection&&(t.predictiveAnalytics.failurePrediction||t.predictiveAnalytics.cycleOptimization||t.learning.personalizedRecommendations)}}var oe=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});class yi{constructor(t){this.facilityId=t}saveToUnifiedTable(t){return oe(this,null,function*(){try{const{error:s}=yield O.from("ai_settings").upsert({facility_id:this.facilityId,settings:t,updated_at:new Date().toISOString()},{onConflict:"facility_id"});return s?(console.error("Error saving to unified table:",s),!1):!0}catch(s){return console.error("Error saving to unified table:",s),!1}})}loadFromUnifiedTable(){return oe(this,null,function*(){try{const{data:t,error:s}=yield O.from("ai_settings").select("settings").eq("facility_id",this.facilityId).single();return s?(s.code==="PGRST116"||console.error("Error loading from unified table:",s),null):t==null?void 0:t.settings}catch(t){return console.error("Error loading from unified table:",t),null}})}deleteFromUnifiedTable(){return oe(this,null,function*(){try{const{error:t}=yield O.from("ai_settings").delete().eq("facility_id",this.facilityId);return t?(console.error("Error deleting from unified table:",t),!1):!0}catch(t){return console.error("Error deleting from unified table:",t),!1}})}settingsExist(){return oe(this,null,function*(){try{const{data:t,error:s}=yield O.from("ai_settings").select("facility_id").eq("facility_id",this.facilityId).single();return s?(s.code==="PGRST116"||console.error("Error checking if settings exist:",s),!1):!!t}catch(t){return console.error("Error checking if settings exist:",t),!1}})}getSettingsMetadata(){return oe(this,null,function*(){try{const{data:t,error:s}=yield O.from("ai_settings").select("updated_at, ai_version, created_at").eq("facility_id",this.facilityId).single();return s?(s.code==="PGRST116"||console.error("Error getting settings metadata:",s),null):{updated_at:(t==null?void 0:t.updated_at)||null,ai_version:(t==null?void 0:t.ai_version)||null,created_at:(t==null?void 0:t.created_at)||null}}catch(t){return console.error("Error getting settings metadata:",t),null}})}backupSettings(t){return oe(this,null,function*(){try{const{error:s}=yield O.from("ai_settings_backup").insert({facility_id:this.facilityId,settings:t,backup_date:new Date().toISOString(),ai_version:t.aiVersion});return s?(console.error("Error backing up settings:",s),!1):!0}catch(s){return console.error("Error backing up settings:",s),!1}})}restoreSettings(t){return oe(this,null,function*(){try{let s=O.from("ai_settings_backup").select("settings").eq("facility_id",this.facilityId).order("backup_date",{ascending:!1});t&&(s=s.eq("backup_date",t));const{data:a,error:n}=yield s.limit(1).single();return n?(n.code==="PGRST116"||console.error("Error restoring settings:",n),null):a==null?void 0:a.settings}catch(s){return console.error("Error restoring settings:",s),null}})}getAvailableBackups(){return oe(this,null,function*(){try{const{data:t,error:s}=yield O.from("ai_settings_backup").select("backup_date, ai_version").eq("facility_id",this.facilityId).order("backup_date",{ascending:!1});return s?(console.error("Error getting available backups:",s),[]):t||[]}catch(t){return console.error("Error getting available backups:",t),[]}})}exportSettingsToJson(t){return JSON.stringify(t,null,2)}importSettingsFromJson(t){try{const s=JSON.parse(t);if(!s.aiEnabled||!s.facilityId||!s.aiConfig)throw new Error("Invalid settings format");return s}catch(s){return console.error("Error importing settings from JSON:",s),null}}validateSettingsStructure(t){const s=[];if(typeof t!="object"||t===null)return s.push("Settings must be an object"),{isValid:!1,errors:s};const a=t;if(["aiEnabled","computerVision","predictiveAnalytics","smartWorkflow","qualityAssurance","realTimeMonitoring","analytics","intelligence","performance","privacy","integration","userExperience","environmental","learning","aiConfig","apiKeys","facilityId","aiVersion","updated_at"].forEach(l=>{l in a||s.push(`Missing required property: ${l}`)}),a.computerVision&&typeof a.computerVision!="object"&&s.push("computerVision must be an object"),a.predictiveAnalytics&&typeof a.predictiveAnalytics!="object"&&s.push("predictiveAnalytics must be an object"),a.aiConfig&&typeof a.aiConfig!="object"&&s.push("aiConfig must be an object"),a.aiConfig&&typeof a.aiConfig=="object"){const l=a.aiConfig;typeof l.aiConfidenceThreshold!="number"&&s.push("aiConfig.aiConfidenceThreshold must be a number"),typeof l.aiDataRetentionDays!="number"&&s.push("aiConfig.aiDataRetentionDays must be a number")}return{isValid:s.length===0,errors:s}}}var Ze=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});class vi{constructor(t){this.facilityId=t,this.configProvider=new oi(t),this.modelProvider=new ci(t),this.apiKeyProvider=new di(t),this.toggleProvider=new gi(t),this.performanceProvider=new bi(t),this.persistenceProvider=new yi(t)}loadUnifiedSettings(){return Ze(this,null,function*(){return this.modelProvider.loadUnifiedSettings()})}saveUnifiedSettings(t){return Ze(this,null,function*(){const s=yield this.modelProvider.saveUnifiedSettings(t),a=yield this.persistenceProvider.saveToUnifiedTable(t);return s&&a})}applySettings(t){return Ze(this,null,function*(){return this.modelProvider.applySettings(t)})}isFeatureEnabled(t,s){return this.apiKeyProvider.isFeatureEnabled(t,s)}getServiceStatus(){return Ze(this,null,function*(){return this.modelProvider.getServiceStatus()})}}const ji=()=>{const{getCurrentFacilityId:r}=Se(),t=r();if(!t)throw new Error("Facility ID not available");return new vi(t)},y={HEADER:{TITLE:"AI and Analytics Settings",SUBTITLE:"Configure AI features, analytics, and intelligence settings"},BUTTONS:{RESET:"Reset",SAVE:"Save Settings",SAVING:"Saving..."},MESSAGES:{LOADING:"Loading AI settings...",FACILITY_NOT_AVAILABLE:"Facility not available. Please select a facility first.",FAILED_TO_LOAD:"Failed to load AI settings. Please try refreshing the page.",SAVE_SUCCESS:"AI settings saved and applied successfully!",SAVE_ERROR:"Failed to save AI settings",RESET_SUCCESS:"Settings reset to defaults",RESET_ERROR:"Failed to reset settings"},SECTIONS:{AI_SERVICE_STATUS:"AI Service Status",ENABLE_AI_FEATURES:"Enable AI Features",AI_FEATURES:"AI Features",ANALYTICS_CONFIGURATION:"Analytics Configuration",INTELLIGENCE_SETTINGS:"Intelligence Settings",PERFORMANCE_MONITORING:"Performance Monitoring",DATA_PRIVACY_SECURITY:"Data Privacy & Security",INTEGRATION_SETTINGS:"Integration Settings",USER_EXPERIENCE:"User Experience"},FORM_GROUPS:{COMPUTER_VISION:"Computer Vision",PREDICTIVE_ANALYTICS:"Predictive Analytics",SMART_WORKFLOW:"Smart Workflow",DATA_COLLECTION:"Data Collection",REPORTING_EXPORT:"Reporting & Export",RISK_ALERTS:"Risk & Alerts",AI_INSIGHTS:"AI Insights",QUALITY_METRICS:"Quality Metrics",OPTIMIZATION:"Optimization",PRIVACY_CONTROLS:"Privacy Controls",SECURITY_FEATURES:"Security Features",EXTERNAL_SERVICES:"External Services",SYSTEM_HEALTH:"System Health",AI_ASSISTANCE:"AI Assistance",INTERFACE_HELP:"Interface & Help"},TOGGLE_LABELS:{TOOL_CONDITION_ASSESSMENT:"Tool Condition Assessment",BARCODE_QUALITY_DETECTION:"Barcode Quality Detection",DAMAGE_DETECTION:"Damage Detection",CYCLE_OPTIMIZATION:"Cycle Optimization",FAILURE_PREDICTION:"Failure Prediction",EFFICIENCY_OPTIMIZATION:"Efficiency Optimization",INTELLIGENT_WORKFLOW_SELECTION:"Intelligent Workflow Selection",AUTOMATED_PROBLEM_DETECTION:"Automated Problem Detection",DATA_COLLECTION:"Data Collection",REAL_TIME_UPDATES:"Real-time Updates",HISTORICAL_DATA_RETENTION:"Historical Data Retention",EXPORT_CAPABILITIES:"Export Capabilities",DASHBOARD_CUSTOMIZATION:"Dashboard Customization",RISK_ASSESSMENT:"Risk Assessment",ALERT_SYSTEM:"Alert System",ESCALATION_RULES:"Escalation Rules",AI_RECOMMENDATIONS:"AI Recommendations",OPTIMIZATION_TIPS:"Optimization Tips",ACCURACY_TRACKING:"Accuracy Tracking",RESPONSE_TIME_MONITORING:"Response Time Monitoring",ERROR_RATE_TRACKING:"Error Rate Tracking",PERFORMANCE_ALERTS:"Performance Alerts",MODEL_HEALTH_MONITORING:"Model Health Monitoring",DATA_ANONYMIZATION:"Data Anonymization",THIRD_PARTY_PERMISSIONS:"Third-party Permissions",COMPLIANCE_MONITORING:"Compliance Monitoring",ENCRYPTION:"Encryption",ACCESS_CONTROL:"Access Control",EXTERNAL_SERVICES:"External Services",API_RATE_LIMITING:"API Rate Limiting",WEBHOOK_ENDPOINTS:"Webhook Endpoints",HEALTH_MONITORING:"Health Monitoring",SYNC_SCHEDULING:"Sync Scheduling",AI_SUGGESTIONS:"AI Suggestions",LEARNING_PATHS:"Learning Paths",PERSONALIZATION:"Personalization",ACCESSIBILITY_FEATURES:"Accessibility Features",SMART_HELP_SYSTEM:"Smart Help System"},DESCRIPTIONS:{MASTER_AI_TOGGLE:"Master toggle for all AI-powered features across the system",TOOL_CONDITION_ASSESSMENT:"AI-powered tool wear and condition analysis",BARCODE_QUALITY_DETECTION:"Automatic barcode readability assessment",DAMAGE_DETECTION:"AI detection of tool damage and defects",CYCLE_OPTIMIZATION:"AI-powered sterilization cycle optimization",FAILURE_PREDICTION:"Predictive maintenance and failure alerts",EFFICIENCY_OPTIMIZATION:"AI-driven workflow efficiency improvements",INTELLIGENT_WORKFLOW_SELECTION:"AI-powered workflow recommendations",AUTOMATED_PROBLEM_DETECTION:"AI detection of workflow issues",DATA_COLLECTION:"Enable comprehensive data collection",REAL_TIME_UPDATES:"Live analytics and dashboard updates",HISTORICAL_DATA_RETENTION:"Long-term data storage and analysis",EXPORT_CAPABILITIES:"PDF, CSV, and Excel export options",DASHBOARD_CUSTOMIZATION:"Customizable analytics dashboards",RISK_ASSESSMENT:"AI-powered risk analysis and scoring",ALERT_SYSTEM:"Smart notification and alert system",ESCALATION_RULES:"Automatic alert escalation based on priority",AI_RECOMMENDATIONS:"Intelligent recommendations and suggestions",OPTIMIZATION_TIPS:"AI-generated optimization suggestions",ACCURACY_TRACKING:"Monitor AI prediction accuracy",RESPONSE_TIME_MONITORING:"Track AI response times and performance",ERROR_RATE_TRACKING:"Monitor and track error rates",PERFORMANCE_ALERTS:"Alerts for performance issues",MODEL_HEALTH_MONITORING:"AI model performance and health tracking",DATA_ANONYMIZATION:"Automatically anonymize sensitive data",THIRD_PARTY_PERMISSIONS:"Control third-party AI service access",COMPLIANCE_MONITORING:"Monitor regulatory compliance",ENCRYPTION:"End-to-end data encryption",ACCESS_CONTROL:"Role-based access control for AI features",EXTERNAL_SERVICES:"Connect to external AI and analytics services",API_RATE_LIMITING:"Control API usage and rate limits",WEBHOOK_ENDPOINTS:"Enable webhook notifications and integrations",HEALTH_MONITORING:"Monitor integration system health",SYNC_SCHEDULING:"Automated data synchronization",AI_SUGGESTIONS:"Contextual AI-powered suggestions",LEARNING_PATHS:"Personalized AI learning recommendations",PERSONALIZATION:"AI-driven interface personalization",ACCESSIBILITY_FEATURES:"AI-powered accessibility enhancements",SMART_HELP_SYSTEM:"AI-powered contextual help and guidance"},STATUS:{ACTIVE:"Available",INACTIVE:"In Use"}},Ts={MESSAGE_DISPLAY:5e3,RESET_MESSAGE_DISPLAY:3e3},k=({id:r,checked:t,onChange:s,label:a,description:n,disabled:l=!1})=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:a}),n&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n})]}),e.jsxs("label",{htmlFor:r,className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{id:r,type:"checkbox",className:"sr-only peer",checked:t,onChange:o=>s(o.target.checked),disabled:l}),e.jsx("div",{className:`w-11 h-6 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all ${t?"bg-[#4ECDC4] after:translate-x-full":"bg-gray-200"} ${l?"opacity-50 cursor-not-allowed":"cursor-pointer"}`}),e.jsx("span",{className:"sr-only",children:a})]})]}),K=({title:r,children:t})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 border-b border-gray-200 pb-2",children:r}),e.jsx("div",{className:"space-y-4",children:t})]}),Ni=({settings:r,updateMasterAI:t,updateComputerVision:s,updatePredictiveAnalytics:a,updateSmartWorkflow:n})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:y.SECTIONS.ENABLE_AI_FEATURES}),e.jsx("p",{className:"text-sm text-gray-500",children:y.DESCRIPTIONS.MASTER_AI_TOGGLE})]}),e.jsx(k,{id:"aiEnabled",checked:r.aiEnabled,onChange:t,label:""})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(v,{path:Sa,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:y.SECTIONS.AI_FEATURES})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:y.FORM_GROUPS.COMPUTER_VISION,children:[e.jsx(k,{id:"toolConditionAssessment",checked:r.computerVision.toolConditionAssessment,onChange:l=>s("toolConditionAssessment",l),label:y.TOGGLE_LABELS.TOOL_CONDITION_ASSESSMENT,description:y.DESCRIPTIONS.TOOL_CONDITION_ASSESSMENT,disabled:!r.aiEnabled}),e.jsx(k,{id:"barcodeQualityDetection",checked:r.computerVision.barcodeQualityDetection,onChange:l=>s("barcodeQualityDetection",l),label:y.TOGGLE_LABELS.BARCODE_QUALITY_DETECTION,description:y.DESCRIPTIONS.BARCODE_QUALITY_DETECTION,disabled:!r.aiEnabled}),e.jsx(k,{id:"damageDetection",checked:r.computerVision.damageDetection,onChange:l=>s("damageDetection",l),label:y.TOGGLE_LABELS.DAMAGE_DETECTION,description:y.DESCRIPTIONS.DAMAGE_DETECTION,disabled:!r.aiEnabled})]}),e.jsxs(K,{title:y.FORM_GROUPS.PREDICTIVE_ANALYTICS,children:[e.jsx(k,{id:"cycleOptimization",checked:r.predictiveAnalytics.cycleOptimization,onChange:l=>a("cycleOptimization",l),label:y.TOGGLE_LABELS.CYCLE_OPTIMIZATION,description:y.DESCRIPTIONS.CYCLE_OPTIMIZATION,disabled:!r.aiEnabled}),e.jsx(k,{id:"failurePrediction",checked:r.predictiveAnalytics.failurePrediction,onChange:l=>a("failurePrediction",l),label:y.TOGGLE_LABELS.FAILURE_PREDICTION,description:y.DESCRIPTIONS.FAILURE_PREDICTION,disabled:!r.aiEnabled}),e.jsx(k,{id:"efficiencyOptimization",checked:r.predictiveAnalytics.efficiencyOptimization,onChange:l=>a("efficiencyOptimization",l),label:y.TOGGLE_LABELS.EFFICIENCY_OPTIMIZATION,description:y.DESCRIPTIONS.EFFICIENCY_OPTIMIZATION,disabled:!r.aiEnabled})]}),e.jsxs(K,{title:y.FORM_GROUPS.SMART_WORKFLOW,children:[e.jsx(k,{id:"intelligentWorkflowSelection",checked:r.smartWorkflow.intelligentWorkflowSelection,onChange:l=>n("intelligentWorkflowSelection",l),label:y.TOGGLE_LABELS.INTELLIGENT_WORKFLOW_SELECTION,description:y.DESCRIPTIONS.INTELLIGENT_WORKFLOW_SELECTION,disabled:!r.aiEnabled}),e.jsx(k,{id:"automatedProblemDetection",checked:r.smartWorkflow.automatedProblemDetection,onChange:l=>n("automatedProblemDetection",l),label:y.TOGGLE_LABELS.AUTOMATED_PROBLEM_DETECTION,description:y.DESCRIPTIONS.AUTOMATED_PROBLEM_DETECTION,disabled:!r.aiEnabled})]})]})]})})]}),_i=({settings:r,updateAnalytics:t})=>e.jsxs(K,{title:y.FORM_GROUPS.REPORTING_EXPORT,children:[e.jsx(k,{id:"exportCapabilities",checked:r.analytics.exportCapabilities,onChange:s=>t("exportCapabilities",s),label:y.TOGGLE_LABELS.EXPORT_CAPABILITIES,description:y.DESCRIPTIONS.EXPORT_CAPABILITIES,disabled:!r.aiEnabled}),e.jsx(k,{id:"dashboardCustomization",checked:r.analytics.dashboardCustomization,onChange:s=>t("dashboardCustomization",s),label:y.TOGGLE_LABELS.DASHBOARD_CUSTOMIZATION,description:y.DESCRIPTIONS.DASHBOARD_CUSTOMIZATION,disabled:!r.aiEnabled})]}),Ci=({settings:r,updateAnalytics:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(v,{path:Fe,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:y.SECTIONS.ANALYTICS_CONFIGURATION})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:y.FORM_GROUPS.DATA_COLLECTION,children:[e.jsx(k,{id:"dataCollection",checked:r.analytics.dataCollection,onChange:s=>t("dataCollection",s),label:y.TOGGLE_LABELS.DATA_COLLECTION,description:y.DESCRIPTIONS.DATA_COLLECTION,disabled:!r.aiEnabled}),e.jsx(k,{id:"realTimeUpdates",checked:r.analytics.realTimeUpdates,onChange:s=>t("realTimeUpdates",s),label:y.TOGGLE_LABELS.REAL_TIME_UPDATES,description:y.DESCRIPTIONS.REAL_TIME_UPDATES,disabled:!r.aiEnabled}),e.jsx(k,{id:"historicalDataRetention",checked:r.analytics.historicalDataRetention,onChange:s=>t("historicalDataRetention",s),label:y.TOGGLE_LABELS.HISTORICAL_DATA_RETENTION,description:y.DESCRIPTIONS.HISTORICAL_DATA_RETENTION,disabled:!r.aiEnabled})]}),e.jsx(_i,{settings:r,updateAnalytics:t})]})]}),Si=({settings:r,updatePerformance:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(v,{path:wa,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:y.SECTIONS.PERFORMANCE_MONITORING})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:y.FORM_GROUPS.QUALITY_METRICS,children:[e.jsx(k,{id:"accuracyTracking",checked:r.performance.accuracyTracking,onChange:s=>t("accuracyTracking",s),label:y.TOGGLE_LABELS.ACCURACY_TRACKING,description:y.DESCRIPTIONS.ACCURACY_TRACKING,disabled:!r.aiEnabled}),e.jsx(k,{id:"responseTimeMonitoring",checked:r.performance.responseTimeMonitoring,onChange:s=>t("responseTimeMonitoring",s),label:y.TOGGLE_LABELS.RESPONSE_TIME_MONITORING,description:y.DESCRIPTIONS.RESPONSE_TIME_MONITORING,disabled:!r.aiEnabled}),e.jsx(k,{id:"errorRateTracking",checked:r.performance.errorRateTracking,onChange:s=>t("errorRateTracking",s),label:y.TOGGLE_LABELS.ERROR_RATE_TRACKING,description:y.DESCRIPTIONS.ERROR_RATE_TRACKING,disabled:!r.aiEnabled})]}),e.jsxs(K,{title:y.FORM_GROUPS.OPTIMIZATION,children:[e.jsx(k,{id:"performanceAlerts",checked:r.performance.performanceAlerts,onChange:s=>t("performanceAlerts",s),label:y.TOGGLE_LABELS.PERFORMANCE_ALERTS,description:y.DESCRIPTIONS.PERFORMANCE_ALERTS,disabled:!r.aiEnabled}),e.jsx(k,{id:"modelHealthMonitoring",checked:r.performance.modelHealthMonitoring,onChange:s=>t("modelHealthMonitoring",s),label:y.TOGGLE_LABELS.MODEL_HEALTH_MONITORING,description:y.DESCRIPTIONS.MODEL_HEALTH_MONITORING,disabled:!r.aiEnabled})]})]})]}),wi=({settings:r,updatePrivacy:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(v,{path:Hr,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:y.SECTIONS.DATA_PRIVACY_SECURITY})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:y.FORM_GROUPS.PRIVACY_CONTROLS,children:[e.jsx(k,{id:"dataAnonymization",checked:r.privacy.dataAnonymization,onChange:s=>t("dataAnonymization",s),label:y.TOGGLE_LABELS.DATA_ANONYMIZATION,description:y.DESCRIPTIONS.DATA_ANONYMIZATION,disabled:!r.aiEnabled}),e.jsx(k,{id:"thirdPartyPermissions",checked:r.privacy.thirdPartyPermissions,onChange:s=>t("thirdPartyPermissions",s),label:y.TOGGLE_LABELS.THIRD_PARTY_PERMISSIONS,description:y.DESCRIPTIONS.THIRD_PARTY_PERMISSIONS,disabled:!r.aiEnabled}),e.jsx(k,{id:"complianceMonitoring",checked:r.privacy.complianceMonitoring,onChange:s=>t("complianceMonitoring",s),label:y.TOGGLE_LABELS.COMPLIANCE_MONITORING,description:y.DESCRIPTIONS.COMPLIANCE_MONITORING,disabled:!r.aiEnabled})]}),e.jsxs(K,{title:y.FORM_GROUPS.SECURITY_FEATURES,children:[e.jsx(k,{id:"encryption",checked:r.privacy.encryption,onChange:s=>t("encryption",s),label:y.TOGGLE_LABELS.ENCRYPTION,description:y.DESCRIPTIONS.ENCRYPTION,disabled:!r.aiEnabled}),e.jsx(k,{id:"accessControl",checked:r.privacy.accessControl,onChange:s=>t("accessControl",s),label:y.TOGGLE_LABELS.ACCESS_CONTROL,description:y.DESCRIPTIONS.ACCESS_CONTROL,disabled:!r.aiEnabled})]})]})]}),Ei=({settings:r,updateIntegration:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(v,{path:Ea,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:y.SECTIONS.INTEGRATION_SETTINGS})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:y.FORM_GROUPS.EXTERNAL_SERVICES,children:[e.jsx(k,{id:"externalServices",checked:r.integration.externalServices,onChange:s=>t("externalServices",s),label:y.TOGGLE_LABELS.EXTERNAL_SERVICES,description:y.DESCRIPTIONS.EXTERNAL_SERVICES,disabled:!r.aiEnabled}),e.jsx(k,{id:"apiRateLimiting",checked:r.integration.apiRateLimiting,onChange:s=>t("apiRateLimiting",s),label:y.TOGGLE_LABELS.API_RATE_LIMITING,description:y.DESCRIPTIONS.API_RATE_LIMITING,disabled:!r.aiEnabled}),e.jsx(k,{id:"webhookEndpoints",checked:r.integration.webhookEndpoints,onChange:s=>t("webhookEndpoints",s),label:y.TOGGLE_LABELS.WEBHOOK_ENDPOINTS,description:y.DESCRIPTIONS.WEBHOOK_ENDPOINTS,disabled:!r.aiEnabled})]}),e.jsxs(K,{title:y.FORM_GROUPS.SYSTEM_HEALTH,children:[e.jsx(k,{id:"healthMonitoring",checked:r.integration.healthMonitoring,onChange:s=>t("healthMonitoring",s),label:y.TOGGLE_LABELS.HEALTH_MONITORING,description:y.DESCRIPTIONS.HEALTH_MONITORING,disabled:!r.aiEnabled}),e.jsx(k,{id:"syncScheduling",checked:r.integration.syncScheduling,onChange:s=>t("syncScheduling",s),label:y.TOGGLE_LABELS.SYNC_SCHEDULING,description:y.DESCRIPTIONS.SYNC_SCHEDULING,disabled:!r.aiEnabled})]})]})]}),Ti=({serviceStatus:r})=>e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-800 mb-3",children:y.SECTIONS.AI_SERVICE_STATUS}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(r).map(([t,s])=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{path:s?Ee:ne,size:1,className:s?"text-green-600":"text-red-500"}),e.jsx("span",{className:"text-sm capitalize",children:t}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${s?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s?y.STATUS.ACTIVE:y.STATUS.INACTIVE})]},t))})]}),Ai=({settings:r,updateUserExperience:t})=>e.jsxs(K,{title:y.FORM_GROUPS.INTERFACE_HELP,children:[e.jsx(k,{id:"accessibility",checked:r.userExperience.accessibility,onChange:s=>t("accessibility",s),label:y.TOGGLE_LABELS.ACCESSIBILITY_FEATURES,description:y.DESCRIPTIONS.ACCESSIBILITY_FEATURES,disabled:!r.aiEnabled}),e.jsx(k,{id:"helpSystem",checked:r.userExperience.helpSystem,onChange:s=>t("helpSystem",s),label:y.TOGGLE_LABELS.SMART_HELP_SYSTEM,description:y.DESCRIPTIONS.SMART_HELP_SYSTEM,disabled:!r.aiEnabled})]}),Ii=({settings:r,updateUserExperience:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(v,{path:Br,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:y.SECTIONS.USER_EXPERIENCE})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:y.FORM_GROUPS.AI_ASSISTANCE,children:[e.jsx(k,{id:"aiSuggestions",checked:r.userExperience.aiSuggestions,onChange:s=>t("aiSuggestions",s),label:y.TOGGLE_LABELS.AI_SUGGESTIONS,description:y.DESCRIPTIONS.AI_SUGGESTIONS,disabled:!r.aiEnabled}),e.jsx(k,{id:"learningPaths",checked:r.userExperience.learningPaths,onChange:s=>t("learningPaths",s),label:y.TOGGLE_LABELS.LEARNING_PATHS,description:y.DESCRIPTIONS.LEARNING_PATHS,disabled:!r.aiEnabled}),e.jsx(k,{id:"personalization",checked:r.userExperience.personalization,onChange:s=>t("personalization",s),label:y.TOGGLE_LABELS.PERSONALIZATION,description:y.DESCRIPTIONS.PERSONALIZATION,disabled:!r.aiEnabled})]}),e.jsx(Ai,{settings:r,updateUserExperience:t})]})]}),Pi=({isSaving:r,onResetToDefaults:t,onSaveSettings:s})=>e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{path:Te,size:1.5,className:"text-[#4ECDC4]"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-semibold text-gray-800",children:y.HEADER.TITLE}),e.jsx("p",{className:"text-sm text-gray-600",children:y.HEADER.SUBTITLE})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(v,{path:Mt,size:1}),y.BUTTONS.RESET]}),e.jsxs("button",{onClick:s,disabled:r,className:"flex items-center gap-2 px-4 py-2 text-sm text-white bg-[#4ECDC4] hover:bg-[#3db8b0] rounded-lg disabled:opacity-50",children:[e.jsx(v,{path:r?Mt:Ge,size:1,className:r?"animate-spin":""}),r?y.BUTTONS.SAVING:y.BUTTONS.SAVE]})]})]}),Oi=({settings:r,updateIntelligence:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(v,{path:Te,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:y.SECTIONS.INTELLIGENCE_SETTINGS})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:y.FORM_GROUPS.RISK_ALERTS,children:[e.jsx(k,{id:"riskAssessment",checked:r.intelligence.riskAssessment,onChange:s=>t("riskAssessment",s),label:y.TOGGLE_LABELS.RISK_ASSESSMENT,description:y.DESCRIPTIONS.RISK_ASSESSMENT,disabled:!r.aiEnabled}),e.jsx(k,{id:"alertSystem",checked:r.intelligence.alertSystem,onChange:s=>t("alertSystem",s),label:y.TOGGLE_LABELS.ALERT_SYSTEM,description:y.DESCRIPTIONS.ALERT_SYSTEM,disabled:!r.aiEnabled}),e.jsx(k,{id:"escalationRules",checked:r.intelligence.escalationRules,onChange:s=>t("escalationRules",s),label:y.TOGGLE_LABELS.ESCALATION_RULES,description:y.DESCRIPTIONS.ESCALATION_RULES,disabled:!r.aiEnabled})]}),e.jsxs(K,{title:y.FORM_GROUPS.AI_INSIGHTS,children:[e.jsx(k,{id:"aiRecommendations",checked:r.intelligence.aiRecommendations,onChange:s=>t("aiRecommendations",s),label:y.TOGGLE_LABELS.AI_RECOMMENDATIONS,description:y.DESCRIPTIONS.AI_RECOMMENDATIONS,disabled:!r.aiEnabled}),e.jsx(k,{id:"optimizationTips",checked:r.intelligence.optimizationTips,onChange:s=>t("optimizationTips",s),label:y.TOGGLE_LABELS.OPTIMIZATION_TIPS,description:y.DESCRIPTIONS.OPTIMIZATION_TIPS,disabled:!r.aiEnabled})]})]})]});var Di=Object.defineProperty,Ri=Object.defineProperties,ki=Object.getOwnPropertyDescriptors,As=Object.getOwnPropertySymbols,Li=Object.prototype.hasOwnProperty,$i=Object.prototype.propertyIsEnumerable,Is=(r,t,s)=>t in r?Di(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Y=(r,t)=>{for(var s in t||(t={}))Li.call(t,s)&&Is(r,s,t[s]);if(As)for(var s of As(t))$i.call(t,s)&&Is(r,s,t[s]);return r},W=(r,t)=>Ri(r,ki(t)),Xe=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Mi=()=>{const{getCurrentFacilityId:r}=Se(),t=r(),s=ji(),[a,n]=g.useState(null),[l,o]=g.useState(!1),[c,i]=g.useState(!1),[d,u]=g.useState(null),[m,h]=g.useState(null),j=g.useCallback(()=>Xe(null,null,function*(){if(s){o(!0);try{const E=yield s.loadUnifiedSettings();n(E)}catch(E){console.error("Failed to load AI settings:",E),u({type:"error",text:y.MESSAGES.SAVE_ERROR})}finally{o(!1)}}}),[s]),p=g.useCallback(()=>Xe(null,null,function*(){if(s)try{const E=yield s.getServiceStatus();h(E)}catch(E){console.error("Failed to load service status:",E)}}),[s]);g.useEffect(()=>{s&&(j(),p())},[s,j,p]);const x=()=>Xe(null,null,function*(){if(!(!s||!a)){i(!0);try{(yield s.saveUnifiedSettings(a))?(yield s.applySettings(a),u({type:"success",text:y.MESSAGES.SAVE_SUCCESS}),setTimeout(()=>u(null),Ts.MESSAGE_DISPLAY),yield p()):u({type:"error",text:y.MESSAGES.SAVE_ERROR})}catch(E){console.error("Failed to save AI settings:",E),u({type:"error",text:y.MESSAGES.SAVE_ERROR})}finally{i(!1)}}}),N=()=>Xe(null,null,function*(){if(s)try{const E=yield s.loadUnifiedSettings();n(E),u({type:"success",text:y.MESSAGES.RESET_SUCCESS}),setTimeout(()=>u(null),Ts.RESET_MESSAGE_DISPLAY)}catch(E){console.error("Failed to reset settings:",E),u({type:"error",text:y.MESSAGES.RESET_ERROR})}}),_=(E,F)=>{a&&n(P=>P?W(Y({},P),{computerVision:W(Y({},P.computerVision),{[E]:F})}):null)},b=(E,F)=>{a&&n(P=>P?W(Y({},P),{predictiveAnalytics:W(Y({},P.predictiveAnalytics),{[E]:F})}):null)},f=(E,F)=>{a&&n(P=>P?W(Y({},P),{smartWorkflow:W(Y({},P.smartWorkflow),{[E]:F})}):null)},A=(E,F)=>{a&&n(P=>P?W(Y({},P),{analytics:W(Y({},P.analytics),{[E]:F})}):null)},R=(E,F)=>{a&&n(P=>P?W(Y({},P),{intelligence:W(Y({},P.intelligence),{[E]:F})}):null)},M=(E,F)=>{a&&n(P=>P?W(Y({},P),{performance:W(Y({},P.performance),{[E]:F})}):null)},B=(E,F)=>{a&&n(P=>P?W(Y({},P),{privacy:W(Y({},P.privacy),{[E]:F})}):null)},$=(E,F)=>{a&&n(P=>P?W(Y({},P),{integration:W(Y({},P.integration),{[E]:F})}):null)},G=(E,F)=>{a&&n(P=>P?W(Y({},P),{userExperience:W(Y({},P.userExperience),{[E]:F})}):null)},H=E=>{a&&n(F=>F?W(Y({},F),{aiEnabled:E}):null)};return t?l?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#4ECDC4] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:y.MESSAGES.LOADING})]}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsx(Pi,{isSaving:c,onResetToDefaults:N,onSaveSettings:x}),m&&e.jsx(Ti,{serviceStatus:m}),d&&e.jsx("div",{className:`p-4 rounded-lg border ${d.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{path:d.type==="success"?Ee:ne,size:1}),d.text]})}),e.jsx(Ni,{settings:a,updateMasterAI:H,updateComputerVision:_,updatePredictiveAnalytics:b,updateSmartWorkflow:f}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ci,{settings:a,updateAnalytics:A}),e.jsx(Oi,{settings:a,updateIntelligence:R}),e.jsx(Si,{settings:a,updatePerformance:M}),e.jsx(wi,{settings:a,updatePrivacy:B}),e.jsx(Ei,{settings:a,updateIntegration:$}),e.jsx(Ii,{settings:a,updateUserExperience:G})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(v,{path:ne,size:2,className:"text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:y.MESSAGES.FAILED_TO_LOAD})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(v,{path:ne,size:2,className:"text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:y.MESSAGES.FACILITY_NOT_AVAILABLE})]})},de={AI_VERSION:"1.0.0",AI_CONFIDENCE_THRESHOLD:.85,AI_DATA_RETENTION_DAYS:90,ENCRYPTED_DATA_TRANSMISSION:!0},yt={COMPUTER_VISION:[{key:"tool_condition_assessment",label:"Tool Condition Assessment",desc:"AI-powered visual inspection of tool wear and damage"},{key:"barcode_quality_detection",label:"Barcode Quality Detection",desc:"Automated barcode readability assessment"},{key:"tool_type_recognition",label:"Tool Type Recognition",desc:"Automatic tool identification from images"},{key:"cleaning_validation",label:"Cleaning Validation",desc:"Visual verification of cleaning effectiveness"}],PREDICTIVE_ANALYTICS:[{key:"cycle_optimization",label:"Cycle Optimization",desc:"AI-driven sterilization cycle parameter optimization"},{key:"failure_prediction",label:"Failure Prediction",desc:"Predictive maintenance and equipment failure alerts"},{key:"efficiency_optimization",label:"Efficiency Optimization",desc:"Process efficiency analysis and recommendations"},{key:"resource_planning",label:"Resource Planning",desc:"Intelligent resource allocation and scheduling"}],SMART_WORKFLOW:[{key:"intelligent_workflow_selection",label:"Intelligent Workflow Selection",desc:"AI-powered workflow recommendation based on tool type and condition"},{key:"automated_problem_detection",label:"Automated Problem Detection",desc:"Real-time issue identification and alerting"},{key:"smart_phase_transitions",label:"Smart Phase Transitions",desc:"Intelligent sterilization phase management"},{key:"batch_optimization",label:"Batch Optimization",desc:"Optimal tool grouping and batch processing"}]},Fi=[{value:"unwrapped",label:"Unwrapped (3 min, 132°C)"},{value:"pouches",label:"Pouches (5 min, 132°C)"},{value:"packs",label:"Packs (30 min, 121°C)"},{value:"handpieces",label:"Handpieces (6 min, 132°C)"},{value:"custom",label:"Custom"}],zi=[{value:3,label:"3 months"},{value:6,label:"6 months"},{value:12,label:"1 year (recommended)"},{value:18,label:"18 months"},{value:24,label:"2 years"}],Vi=[{value:30,label:"30 days"},{value:60,label:"60 days"},{value:90,label:"90 days (recommended)"},{value:180,label:"180 days"},{value:365,label:"1 year"}],ce={TEMPERATURE:{min:100,max:150},PRESSURE:{min:10,max:30},STERILIZE_TIME:{min:1,max:60},DRY_TIME:{min:10,max:60}},vt={min:.5,max:1,step:.05},Ps=3e3;var Yt=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Gi=r=>Yt(null,null,function*(){try{return yield new ot(r).loadSettings()}catch(t){return console.error("Failed to load AI settings:",t),null}}),Os=(r,t)=>Yt(null,null,function*(){try{return yield new ot(r).saveSettings(t)}catch(s){return console.error("Failed to save AI settings:",s),!1}}),qi=r=>Yt(null,null,function*(){try{const t={facility_id:r,ai_enabled:!1,ai_version:de.AI_VERSION,computer_vision_enabled:!1,tool_condition_assessment:!1,barcode_quality_detection:!1,tool_type_recognition:!1,cleaning_validation:!1,predictive_analytics_enabled:!1,cycle_optimization:!1,failure_prediction:!1,efficiency_optimization:!1,resource_planning:!1,smart_workflow_enabled:!1,intelligent_workflow_selection:!1,automated_problem_detection:!1,smart_phase_transitions:!1,batch_optimization:!1,quality_assurance_enabled:!1,biological_indicator_analysis:!1,compliance_monitoring:!1,audit_trail_enhancement:!1,risk_assessment:!1,scanner_intelligence_enabled:!1,multi_format_barcode_support:!1,tool_history_integration:!1,smart_validation:!1,error_prevention:!1,real_time_monitoring_enabled:!1,anomaly_detection:!1,predictive_maintenance:!1,quality_drift_detection:!1,smart_notifications:!1,ai_confidence_threshold:de.AI_CONFIDENCE_THRESHOLD,ai_data_retention_days:de.AI_DATA_RETENTION_DAYS,real_time_processing_enabled:!1,batch_processing_enabled:!1,data_sharing_enabled:!1,local_ai_processing_enabled:!1,encrypted_data_transmission:de.ENCRYPTED_DATA_TRANSMISSION,ai_model_training:!1,auto_optimization_enabled:!1,performance_monitoring:!1,resource_optimization:!1,openai_api_key_encrypted:"",google_vision_api_key_encrypted:"",azure_computer_vision_key_encrypted:""};return yield new ot(r).saveSettings(t)}catch(t){return console.error("Failed to reset AI settings:",t),!1}}),jt=r=>({facility_id:r,ai_enabled:!1,ai_version:de.AI_VERSION,computer_vision_enabled:!1,tool_condition_assessment:!1,barcode_quality_detection:!1,tool_type_recognition:!1,cleaning_validation:!1,predictive_analytics_enabled:!1,cycle_optimization:!1,failure_prediction:!1,efficiency_optimization:!1,resource_planning:!1,smart_workflow_enabled:!1,intelligent_workflow_selection:!1,automated_problem_detection:!1,smart_phase_transitions:!1,batch_optimization:!1,quality_assurance_enabled:!1,biological_indicator_analysis:!1,compliance_monitoring:!1,audit_trail_enhancement:!1,risk_assessment:!1,scanner_intelligence_enabled:!1,multi_format_barcode_support:!1,tool_history_integration:!1,smart_validation:!1,error_prevention:!1,real_time_monitoring_enabled:!1,anomaly_detection:!1,predictive_maintenance:!1,quality_drift_detection:!1,smart_notifications:!1,ai_confidence_threshold:de.AI_CONFIDENCE_THRESHOLD,ai_data_retention_days:de.AI_DATA_RETENTION_DAYS,real_time_processing_enabled:!1,batch_processing_enabled:!1,data_sharing_enabled:!1,local_ai_processing_enabled:!1,encrypted_data_transmission:de.ENCRYPTED_DATA_TRANSMISSION,ai_model_training:!1,auto_optimization_enabled:!1,performance_monitoring:!1,resource_optimization:!1,openai_api_key_encrypted:"",google_vision_api_key_encrypted:"",azure_computer_vision_key_encrypted:""}),ye=(r,t,s,a)=>{console.log("Setting changed:",{setting:r,oldValue:t,newValue:s,facilityId:a,timestamp:new Date().toISOString()})},Ui=(r,t)=>{console.log("Save attempt:",{facilityId:t,timestamp:new Date().toISOString(),settingsCount:Object.keys(r).length,aiEnabled:r.ai_enabled})},Nt=(r,t,s)=>{console.log("Save result:",{success:r,facilityId:t,timestamp:new Date().toISOString(),error:s||null})},Bi=r=>{console.log("Reset attempt:",{facilityId:r,timestamp:new Date().toISOString()})},_t=(r,t,s)=>{console.log("Reset result:",{success:r,facilityId:t,timestamp:new Date().toISOString(),error:s||null})},Hi=(r,t,s)=>{console.log("AI feature toggle:",{feature:r,enabled:t,facilityId:s,timestamp:new Date().toISOString()})},ve=(r,t,s)=>{console.log("Cycle settings change:",{cycleType:r,changes:t,facilityId:s,timestamp:new Date().toISOString()})},Ds=(r,t,s)=>{console.log("Enforcement toggle:",{type:r,enabled:t,facilityId:s,timestamp:new Date().toISOString()})},Rs=(r,t,s)=>{console.log("Receipt settings change:",{setting:r,value:t,facilityId:s,timestamp:new Date().toISOString()})},Yi=()=>{const{enforceCi:r,enforceBi:t,_allowOverrides:s,updateComplianceSettings:a,fetchComplianceSettings:n}=zt(),[l,o]=g.useState(!1),[c,i]=g.useState(!1),{getCurrentFacilityId:d}=Se();return g.useEffect(()=>{const u=d();u&&n(u)},[d,n]),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Sterilization Enforcement"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"enforceBI",className:"text-sm font-medium",children:"Biological Indicator Management"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable daily BI test requirements and compliance tracking"})]}),e.jsx("button",{onClick:()=>{const u=d();u&&(Ds("BI",!t,u),a(u,{enforceBi:!t}))},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${t?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t?"translate-x-6":"translate-x-1"}`})})]}),t&&e.jsxs("div",{className:"ml-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"BI tests are being enforced"})]}),e.jsxs("button",{onClick:()=>o(!l),className:"text-xs text-blue-600 hover:text-blue-800",children:[l?"Hide":"Show"," BI test history"]}),l&&e.jsxs("div",{className:"p-3 bg-gray-50 rounded-md text-xs text-gray-600",children:[e.jsx("p",{children:"• Last BI test: 2024-01-15 (PASS)"}),e.jsx("p",{children:"• Next required: 2024-01-16"}),e.jsx("p",{children:"• Tests passed this month: 15"})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Chemical Indicator (CI) Management"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Configure how CI indicators are handled during autoclave cycles."}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"ON:"})," Users must confirm CI strip usage (Y/N selection in workflow)",e.jsx("br",{}),e.jsx("strong",{children:"OFF:"})," Users get a warning but can proceed without CI confirmation"]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:"enforceCI",className:"font-medium",children:"Require CI Confirmation"}),e.jsx("button",{id:"enforceCI",onClick:()=>{const u=d();u&&(Ds("CI",!r,u),a(u,{enforceCi:!r}))},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${r?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r?"translate-x-6":"translate-x-1"}`})})]})]})]})};var Wi=Object.defineProperty,rt=Object.getOwnPropertySymbols,ta=Object.prototype.hasOwnProperty,sa=Object.prototype.propertyIsEnumerable,ks=(r,t,s)=>t in r?Wi(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Ki=(r,t)=>{for(var s in t||(t={}))ta.call(t,s)&&ks(r,s,t[s]);if(rt)for(var s of rt(t))sa.call(t,s)&&ks(r,s,t[s]);return r},Qi=(r,t)=>{var s={};for(var a in r)ta.call(r,a)&&t.indexOf(a)<0&&(s[a]=r[a]);if(r!=null&&rt)for(var a of rt(r))t.indexOf(a)<0&&sa.call(r,a)&&(s[a]=r[a]);return s};const Ls=r=>{var t=r,{className:s=""}=t,a=Qi(t,["className"]);return e.jsx("input",Ki({className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${s}`},a))};var Zi=Object.defineProperty,Xi=Object.defineProperties,Ji=Object.getOwnPropertyDescriptors,at=Object.getOwnPropertySymbols,ra=Object.prototype.hasOwnProperty,aa=Object.prototype.propertyIsEnumerable,$s=(r,t,s)=>t in r?Zi(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,el=(r,t)=>{for(var s in t||(t={}))ra.call(t,s)&&$s(r,s,t[s]);if(at)for(var s of at(t))aa.call(t,s)&&$s(r,s,t[s]);return r},tl=(r,t)=>Xi(r,Ji(t)),sl=(r,t)=>{var s={};for(var a in r)ra.call(r,a)&&t.indexOf(a)<0&&(s[a]=r[a]);if(r!=null&&at)for(var a of at(r))t.indexOf(a)<0&&aa.call(r,a)&&(s[a]=r[a]);return s};const De=r=>{var t=r,{children:s,className:a=""}=t,n=sl(t,["children","className"]);return e.jsx("label",tl(el({className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${a}`},n),{children:s}))};var rl=Object.defineProperty,nt=Object.getOwnPropertySymbols,na=Object.prototype.hasOwnProperty,ia=Object.prototype.propertyIsEnumerable,Ms=(r,t,s)=>t in r?rl(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,al=(r,t)=>{for(var s in t||(t={}))na.call(t,s)&&Ms(r,s,t[s]);if(nt)for(var s of nt(t))ia.call(t,s)&&Ms(r,s,t[s]);return r},nl=(r,t)=>{var s={};for(var a in r)na.call(r,a)&&t.indexOf(a)<0&&(s[a]=r[a]);if(r!=null&&nt)for(var a of nt(r))t.indexOf(a)<0&&ia.call(r,a)&&(s[a]=r[a]);return s};const Fs=r=>{var t=r,{className:s="",onCheckedChange:a,onChange:n}=t,l=nl(t,["className","onCheckedChange","onChange"]);const o=c=>{a&&a(c.target.checked),n&&n(c)};return e.jsx("input",al({type:"checkbox",className:`h-4 w-4 text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 border-gray-300 rounded transition-colors duration-200 ${s}`,onChange:o},l))},il=({checked:r,onCheckedChange:t,className:s="",disabled:a=!1})=>{const n=()=>{a||t(!r)};return e.jsx("button",{type:"button",role:"switch","aria-checked":r,disabled:a,onClick:n,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${r?"bg-blue-600":"bg-gray-200"} ${a?"opacity-50 cursor-not-allowed":"cursor-pointer"} ${s}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r?"translate-x-6":"translate-x-1"}`})})};var zs=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const ll=()=>{const{currentUser:r}=ct(),[t,s]=g.useState(!0),[a,n]=g.useState(null),[l,o]=g.useState(["pouch","wrap","container","tray"]),[c,i]=g.useState(["small","medium","large","extra-large"]),[d,u]=g.useState(!1),[m,h]=g.useState("PKG-"),[j,p]=g.useState(25);g.useEffect(()=>{zs(null,null,function*(){try{if(!r)return;const{data:f,error:A}=yield O.from("facility_settings").select("packaging_settings").eq("facility_id",r.facility_id).single();if(A&&console.warn("No existing packaging settings found"),f!=null&&f.packaging_settings){const R=f.packaging_settings;o(M=>R.packageTypes||M),i(M=>R.packageSizes||M),u(!!R.requireReceiptUpload),h(M=>R.batchPrefix||M),p(M=>R.maxToolsPerBatch||M)}n(r.facility_id)}catch(f){console.error("Error loading packaging settings:",f)}finally{s(!1)}})},[r]);const x=()=>zs(null,null,function*(){if(!a)return;s(!0);const b={packageTypes:l,packageSizes:c,requireReceiptUpload:d,batchPrefix:m,maxToolsPerBatch:j},{error:f}=yield O.from("facility_settings").update({packaging_settings:b}).eq("facility_id",a);f&&console.error("Error saving packaging settings:",f),s(!1)}),N=b=>{o(f=>f.includes(b)?f.filter(A=>A!==b):[...f,b])},_=b=>{i(f=>f.includes(b)?f.filter(A=>A!==b):[...f,b])};return t?e.jsx("p",{className:"text-sm text-gray-500",children:"Loading packaging settings..."}):e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"📦 Packaging Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(De,{className:"font-medium",children:"Available Package Types"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:["pouch","wrap","container","tray"].map(b=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(Fs,{checked:l.includes(b),onCheckedChange:()=>N(b)}),e.jsx("span",{className:"capitalize",children:b})]},b))})]}),e.jsxs("div",{children:[e.jsx(De,{className:"font-medium",children:"Available Package Sizes"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:["small","medium","large","extra-large"].map(b=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(Fs,{checked:c.includes(b),onCheckedChange:()=>_(b)}),e.jsx("span",{className:"capitalize",children:b})]},b))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(De,{className:"font-medium",children:"Require Receipt Upload"}),e.jsx(il,{checked:d,onCheckedChange:u})]}),e.jsxs("div",{children:[e.jsx(De,{className:"font-medium",children:"Batch Code Prefix"}),e.jsx(Ls,{value:m,onChange:b=>h(b.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(De,{className:"font-medium",children:"Max Tools per Batch"}),e.jsx(Ls,{type:"number",value:j,onChange:b=>p(parseInt(b.target.value,10)),className:"mt-1"})]}),e.jsx("button",{onClick:x,className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Save Settings"})]})]})},ol=()=>{const{cycleSettings:r,defaultCycleType:t,allowCustomCycles:s,setDefaultCycleType:a,setAllowCustomCycles:n,updateCycleSettings:l,resetCycleSettings:o}=zt(),[c,i]=g.useState(null),{getCurrentFacilityId:d}=Se();return e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Autoclave Cycle Customization"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"defaultCycle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Cycle Type"}),e.jsx("select",{id:"defaultCycle",value:t,onChange:u=>{const m=d();m&&ve("defaultCycleType",{cycleType:u.target.value},m),a(u.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",children:Fi.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This cycle type will be selected by default for new sterilization runs"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"allowCustomCycles",className:"text-sm font-medium",children:"Allow Custom Cycle Parameters"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable users to modify temperature, pressure, and timing for special cases"})]}),e.jsx("button",{id:"allowCustomCycles",onClick:()=>{const u=d();u&&ve("allowCustomCycles",{enabled:!s},u),n(!s)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${s?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Cycle Presets"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(r).map(([u,m])=>{const h=m;return e.jsxs("div",{className:"border border-gray-200 rounded-md p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"text-sm font-medium",children:h.name}),u==="custom"&&s&&e.jsx("button",{onClick:()=>i(c===u?null:u),className:"text-xs text-blue-600 hover:text-blue-800",children:c===u?"Save":"Edit"})]}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("p",{children:["Temperature: ",h.temperature,"°C"]}),e.jsxs("p",{children:["Pressure: ",h.pressure," PSI"]}),e.jsxs("p",{children:["Sterilize Time: ",h.sterilizeTime," min"]}),e.jsxs("p",{children:["Dry Time: ",h.dryTime," min"]}),e.jsxs("p",{children:["Total Time: ",h.totalTime," min"]})]}),u==="custom"&&s&&c===u&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customTemperature",className:"text-xs text-gray-500",children:"Temperature (°C)"}),e.jsx("input",{id:"customTemperature",type:"number",value:h.temperature,onChange:j=>{const p=d();p&&ve("custom",{temperature:Number(j.target.value)},p),l("custom",{temperature:Number(j.target.value)})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:ce.TEMPERATURE.min,max:ce.TEMPERATURE.max})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customPressure",className:"text-xs text-gray-500",children:"Pressure (PSI)"}),e.jsx("input",{id:"customPressure",type:"number",value:h.pressure,onChange:j=>{const p=d();p&&ve("custom",{pressure:Number(j.target.value)},p),l("custom",{pressure:Number(j.target.value)})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:ce.PRESSURE.min,max:ce.PRESSURE.max})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customSterilizeTime",className:"text-xs text-gray-500",children:"Sterilize (min)"}),e.jsx("input",{id:"customSterilizeTime",type:"number",value:h.sterilizeTime,onChange:j=>{const p=d();p&&ve("custom",{sterilizeTime:Number(j.target.value)},p),l("custom",{sterilizeTime:Number(j.target.value)})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:ce.STERILIZE_TIME.min,max:ce.STERILIZE_TIME.max})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customDryTime",className:"text-xs text-gray-500",children:"Dry (min)"}),e.jsx("input",{id:"customDryTime",type:"number",value:h.dryTime,onChange:j=>{const p=d();p&&ve("custom",{dryTime:Number(j.target.value)},p),l("custom",{dryTime:Number(j.target.value)})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:ce.DRY_TIME.min,max:ce.DRY_TIME.max})]})]})]})]},u)})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:o,className:"px-4 py-2 text-sm text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:"Reset to Defaults"})})]})]})},cl=()=>{const{autoclaveReceiptSettings:r,setAutoclaveHasPrinter:t,setReceiptRetentionMonths:s}=zt(),{getCurrentFacilityId:a}=Se();return e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Autoclave Receipt Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"autoclaveHasPrinter",className:"text-sm font-medium",children:"Autoclave Has Printer"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable receipt upload functionality for autoclave cycles"})]}),e.jsx("button",{id:"autoclaveHasPrinter",onClick:()=>{const n=a();n&&Rs("autoclaveHasPrinter",!r.autoclaveHasPrinter,n),t(!r.autoclaveHasPrinter)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${r.autoclaveHasPrinter?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.autoclaveHasPrinter?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"retentionPeriod",className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Retention Period"}),e.jsx("select",{id:"retentionPeriod",value:r.receiptRetentionMonths,onChange:n=>{const l=a();l&&Rs("receiptRetentionMonths",Number(n.target.value),l),s(Number(n.target.value))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",children:zi.map(n=>e.jsx("option",{value:n.value,children:n.label},n.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Receipts will be automatically deleted after this period"})]}),r.autoclaveHasPrinter&&e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-md",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Receipt Management Active"}),e.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[e.jsx("p",{children:"• Users can upload autoclave receipts via camera or file"}),e.jsx("p",{children:"• Receipts are linked to sterilization batch codes"}),e.jsxs("p",{children:["• Automatic cleanup after"," ",r.receiptRetentionMonths," months"]}),e.jsx("p",{children:"• Available for audit and compliance review"})]})]})]})]})};var dl=Object.defineProperty,ul=Object.defineProperties,ml=Object.getOwnPropertyDescriptors,Vs=Object.getOwnPropertySymbols,pl=Object.prototype.hasOwnProperty,gl=Object.prototype.propertyIsEnumerable,Gs=(r,t,s)=>t in r?dl(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,hl=(r,t)=>{for(var s in t||(t={}))pl.call(t,s)&&Gs(r,s,t[s]);if(Vs)for(var s of Vs(t))gl.call(t,s)&&Gs(r,s,t[s]);return r},xl=(r,t)=>ul(r,ml(t)),Ct=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const fl=()=>{const{getCurrentFacilityId:r}=Se(),[t,s]=g.useState(()=>{const u=r();return jt(u||"")}),[a,n]=g.useState(null),[l,o]=g.useState(!1),c=(u,m)=>{const h=r();h&&Hi(u,m,h),s(j=>xl(hl({},j),{[u]:m}))},i=()=>Ct(null,null,function*(){try{o(!0);const u=r();if(!u){n({type:"error",text:"User facility not found"});return}Ui(t,u),(yield Os(u,t))?(Nt(!0,u),n({type:"success",text:"AI settings saved successfully!"}),setTimeout(()=>n(null),Ps)):(Nt(!1,u,"Save operation failed"),n({type:"error",text:"Failed to save AI settings"}))}catch(u){Nt(!1,r()||"",u instanceof Error?u.message:"Unknown error"),n({type:"error",text:"Failed to save AI settings"})}finally{o(!1)}}),d=()=>Ct(null,null,function*(){try{o(!0);const u=r();if(!u){n({type:"error",text:"User facility not found"});return}Bi(u);const m=jt(u);s(m),(yield qi(u))?(_t(!0,u),n({type:"success",text:"AI settings reset to defaults"}),setTimeout(()=>n(null),Ps)):(_t(!1,u,"Reset operation failed"),n({type:"error",text:"Failed to reset AI settings"}))}catch(u){_t(!1,r()||"",u instanceof Error?u.message:"Unknown error"),n({type:"error",text:"Failed to reset AI settings"})}finally{o(!1)}});return g.useEffect(()=>{Ct(null,null,function*(){const m=r();if(m)try{const h=yield Gi(m);if(h)s(h);else{const j=jt(m);s(j),yield Os(m,j)}}catch(h){console.error("Failed to load AI settings:",h)}})},[r]),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"AI-Powered Sterilization Features"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure intelligent automation and machine learning capabilities"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:d,className:"px-3 py-2 text-sm text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:"Reset"}),e.jsxs("button",{onClick:i,disabled:l,className:"px-4 py-2 text-sm bg-[#4ECDC4] text-white rounded-md hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] disabled:opacity-50",children:[e.jsx(v,{path:Ge,size:.8,className:"inline mr-1"}),"Save AI Settings"]})]})]}),a&&e.jsx("div",{className:`p-4 rounded-lg border mb-6 ${a.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{path:a.type==="success"?Ee:ne,size:1,className:"text-current"}),a.text]})}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:Te,size:1.5,className:"text-purple-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-800",children:"Master AI Control"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Enable or disable all AI features globally"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiEnabledToggle",className:"text-sm font-medium text-purple-800",children:"Enable AI Features"}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Master switch for all sterilization AI capabilities"})]}),e.jsx("button",{id:"aiEnabledToggle",onClick:()=>{const u=r();u&&ye("ai_enabled",t.ai_enabled,!t.ai_enabled,u),c("ai_enabled",!t.ai_enabled)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 ${t.ai_enabled?"bg-purple-600":"bg-gray-200"}`,"aria-label":`${t.ai_enabled?"Disable":"Enable"} AI Features`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t.ai_enabled?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(v,{path:ee,size:1.2,className:"text-blue-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Computer Vision"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:yt.COMPUTER_VISION.map(({key:u,label:m,desc:h})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`${u}Toggle`,className:"text-sm font-medium text-gray-700",children:m}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h})]}),e.jsx("button",{id:`${u}Toggle`,onClick:()=>{const j=r();j&&ye(u,t[u],!t[u],j),c(u,!t[u])},disabled:!t.ai_enabled,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 ${t[u]?"bg-blue-600":"bg-gray-200"} ${t.ai_enabled?"":"opacity-50 cursor-not-allowed"}`,"aria-label":`${t[u]?"Disable":"Enable"} ${m}`,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${t[u]?"translate-x-5":"translate-x-1"}`})})]},u))})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(v,{path:Ut,size:1.2,className:"text-green-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Predictive Analytics"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:yt.PREDICTIVE_ANALYTICS.map(({key:u,label:m,desc:h})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`${u}Toggle`,className:"text-sm font-medium text-gray-700",children:m}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h})]}),e.jsx("button",{id:`${u}Toggle`,onClick:()=>{const j=r();j&&ye(u,t[u],!t[u],j),c(u,!t[u])},disabled:!t.ai_enabled,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1 ${t[u]?"bg-green-600":"bg-gray-200"} ${t.ai_enabled?"":"opacity-50 cursor-not-allowed"}`,"aria-label":`${t[u]?"Disable":"Enable"} ${m}`,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${t[u]?"translate-x-5":"translate-x-1"}`})})]},u))})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(v,{path:ee,size:1.2,className:"text-orange-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Smart Workflow Automation"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:yt.SMART_WORKFLOW.map(({key:u,label:m,desc:h})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`${u}Toggle`,className:"text-sm font-medium text-gray-700",children:m}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h})]}),e.jsx("button",{id:`${u}Toggle`,onClick:()=>{const j=r();j&&ye(u,t[u],!t[u],j),c(u,!t[u])},disabled:!t.ai_enabled,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-1 ${t[u]?"bg-orange-600":"bg-gray-200"} ${t.ai_enabled?"":"opacity-50 cursor-not-allowed"}`,"aria-label":`${t[u]?"Disable":"Enable"} ${m}`,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${t[u]?"translate-x-5":"translate-x-1"}`})})]},u))})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(v,{path:xe,size:1.2,className:"text-purple-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"AI Configuration"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiConfidenceThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Confidence Threshold"}),e.jsx("input",{id:"aiConfidenceThreshold",type:"range",min:vt.min,max:vt.max,step:vt.step,value:t.ai_confidence_threshold,onChange:u=>{const m=r();m&&ye("ai_confidence_threshold",t.ai_confidence_threshold,parseFloat(u.target.value),m),c("ai_confidence_threshold",parseFloat(u.target.value))},disabled:!t.ai_enabled,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer disabled:opacity-50"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"50%"}),e.jsxs("span",{children:[Math.round(t.ai_confidence_threshold*100),"%"]}),e.jsx("span",{children:"100%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiDataRetentionDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Retention (Days)"}),e.jsx("select",{id:"aiDataRetentionDays",value:t.ai_data_retention_days,onChange:u=>{const m=r();m&&ye("ai_data_retention_days",t.ai_data_retention_days,parseInt(u.target.value),m),c("ai_data_retention_days",parseInt(u.target.value))},disabled:!t.ai_enabled,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] disabled:opacity-50",children:Vi.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))})]})]})})]})]})]})};function bl(){return e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsx(Yi,{}),e.jsx("div",{className:"mt-6 border-t border-gray-200 pt-6",children:e.jsx(ll,{})}),e.jsx(ol,{}),e.jsx(cl,{}),e.jsx(fl,{})]})}const yl=()=>{const r=ua(),[t,s]=g.useState("builder"),a=()=>{r("/content-builder")},n=[{id:"builder",label:"Content Builder",icon:Ce},{id:"publishing",label:"Publishing",icon:Ta},{id:"workflow",label:"Workflow",icon:Ce},{id:"ai",label:"AI Suggestions",icon:$e},{id:"media",label:"Media Settings",icon:Aa}],l=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Content Builder"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Launch Content Builder"}),e.jsxs("button",{onClick:a,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4] transition-colors",children:[e.jsx(v,{path:he,size:1,className:"mr-2"}),"Launch Builder"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Enable content creation"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"enable-content-creation",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Enable content creation"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Auto-save drafts"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"auto-save-drafts",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Auto-save drafts"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Recent Activity"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Course published"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Sterilization Safety Protocols"})]}),e.jsx("span",{className:"text-xs text-gray-500",children:"2h ago"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Draft saved"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Inventory Management Guide"})]}),e.jsx("span",{className:"text-xs text-gray-500",children:"1d ago"})]})]})]})]}),o=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Content Workflow"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Enable draft review workflow"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"enable-draft-review",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Enable draft review workflow"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Auto-save drafts every 5 minutes"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"auto-save-drafts-5min",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Auto-save drafts every 5 minutes"})]})]})]})]})}),c=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Publishing Workflow"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Require approval before publishing"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"require-approval",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Require approval before publishing"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Auto-publish to Library"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"auto-publish-library",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all"}),e.jsx("span",{className:"sr-only",children:"Auto-publish to Library"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Notify reviewers on submission"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"notify-reviewers",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Notify reviewers on submission"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Approval Roles"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Content Manager"}),e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Primary"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Department Head"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Secondary"})]})]})]})]}),i=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"AI Content Suggestions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Enable AI suggestions"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"enable-ai-suggestions",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Enable AI suggestions"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Suggest based on content gaps"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"suggest-content-gaps",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Suggest based on content gaps"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Analyze user search patterns"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"analyze-search-patterns",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Analyze user search patterns"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"AI Configuration"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confidence-threshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Suggestion Confidence Threshold"}),e.jsxs("select",{id:"confidence-threshold",defaultValue:"0.8",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"0.7",children:"70% - Balanced"}),e.jsx("option",{value:"0.8",children:"80% - Recommended"}),e.jsx("option",{value:"0.9",children:"90% - High Quality"})]})]})})]})]}),d=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Media Upload Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Max file size per upload"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"50 MB"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Auto-compress images"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"auto-compress-images",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Auto-compress images"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Generate thumbnails"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"generate-thumbnails",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Generate thumbnails"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Supported File Types"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-green-800 mb-2",children:"Images"}),e.jsx("p",{className:"text-xs text-green-700",children:"JPEG, PNG, GIF, WebP, HEIC"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-800 mb-2",children:"Videos"}),e.jsx("p",{className:"text-xs text-blue-700",children:"MP4, WebM, MOV, AVI"})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-purple-800 mb-2",children:"Audio"}),e.jsx("p",{className:"text-xs text-purple-700",children:"MP3, WAV, AAC, OGG"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-800 mb-2",children:"Documents"}),e.jsx("p",{className:"text-xs text-gray-700",children:"PDF, Word, PowerPoint, Excel"})]})]})]})]}),u=()=>{switch(t){case"builder":return l();case"publishing":return c();case"workflow":return o();case"ai":return i();case"media":return d();default:return l()}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Content Management Settings"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure content publishing, workflows, AI suggestions, and media settings"})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:n.map(m=>e.jsxs("button",{onClick:()=>s(m.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${t===m.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(v,{path:m.icon,size:1}),e.jsx("span",{children:m.label})]},m.id))})})}),e.jsx("div",{className:"py-4",children:u()})]})},U=({id:r,checked:t,onChange:s,label:a,description:n})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm text-gray-700",children:a}),n&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n})]}),e.jsxs("label",{htmlFor:r,className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:r,className:"sr-only peer",checked:t,onChange:l=>s(l.target.checked)}),e.jsx("div",{className:`w-11 h-6 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all ${t?"bg-[#4ECDC4] after:translate-x-full":"bg-gray-200"}`}),e.jsx("span",{className:"sr-only",children:a})]})]}),ie=({title:r,children:t})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:r}),e.jsx("div",{className:"space-y-3",children:t})]});var vl=Object.defineProperty,jl=Object.defineProperties,Nl=Object.getOwnPropertyDescriptors,qs=Object.getOwnPropertySymbols,_l=Object.prototype.hasOwnProperty,Cl=Object.prototype.propertyIsEnumerable,Us=(r,t,s)=>t in r?vl(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Sl=(r,t)=>{for(var s in t||(t={}))_l.call(t,s)&&Us(r,s,t[s]);if(qs)for(var s of qs(t))Cl.call(t,s)&&Us(r,s,t[s]);return r},wl=(r,t)=>jl(r,Nl(t));const El=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(wl(Sl({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:ee,size:1.5,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-800",children:"General Learning Settings"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Basic configuration for learning and training modules"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(ie,{title:"Core Features",children:[e.jsx(U,{id:"enable-learning-paths",checked:r.enableLearningPaths,onChange:a=>s("enableLearningPaths",a),label:"Enable Learning Paths"}),e.jsx(U,{id:"enable-certifications",checked:r.enableCertifications,onChange:a=>s("enableCertifications",a),label:"Enable Certifications"}),e.jsx(U,{id:"enable-progress-tracking",checked:r.enableProgressTracking,onChange:a=>s("enableProgressTracking",a),label:"Enable Progress Tracking"}),e.jsx(U,{id:"enable-social-learning",checked:r.enableSocialLearning,onChange:a=>s("enableSocialLearning",a),label:"Enable Social Learning"})]}),e.jsxs(ie,{title:"Content Management",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"default-content-type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Content Type"}),e.jsxs("select",{id:"default-content-type",value:r.defaultContentType,onChange:a=>s("defaultContentType",a.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"course",children:"Course"}),e.jsx("option",{value:"procedure",children:"Procedure"}),e.jsx("option",{value:"policy",children:"Policy"}),e.jsx("option",{value:"learning_pathway",children:"Learning Pathway"})]})]}),e.jsx(U,{id:"enable-content-rating",checked:r.enableContentRating,onChange:a=>s("enableContentRating",a),label:"Enable Content Rating"}),e.jsx(U,{id:"require-content-approval",checked:r.requireContentApproval,onChange:a=>s("requireContentApproval",a),label:"Require Content Approval"})]})]})]})})};var Tl=Object.defineProperty,Al=Object.defineProperties,Il=Object.getOwnPropertyDescriptors,Bs=Object.getOwnPropertySymbols,Pl=Object.prototype.hasOwnProperty,Ol=Object.prototype.propertyIsEnumerable,Hs=(r,t,s)=>t in r?Tl(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Dl=(r,t)=>{for(var s in t||(t={}))Pl.call(t,s)&&Hs(r,s,t[s]);if(Bs)for(var s of Bs(t))Ol.call(t,s)&&Hs(r,s,t[s]);return r},Rl=(r,t)=>Al(r,Il(t));const kl=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(Rl(Dl({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:Te,size:1.5,className:"text-purple-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-800",children:"AI Learning Features"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Configure AI-powered learning capabilities"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(ie,{title:"AI Learning Features",children:[e.jsx(U,{id:"personalized-recommendations",checked:r.personalizedRecommendations,onChange:a=>s("personalizedRecommendations",a),label:"Personalized Recommendations"}),e.jsx(U,{id:"skill-gap-analysis",checked:r.skillGapAnalysis,onChange:a=>s("skillGapAnalysis",a),label:"Skill Gap Analysis"}),e.jsx(U,{id:"learning-path-optimization",checked:r.learningPathOptimization,onChange:a=>s("learningPathOptimization",a),label:"Learning Path Optimization"}),e.jsx(U,{id:"adaptive-difficulty",checked:r.adaptiveDifficulty,onChange:a=>s("adaptiveDifficulty",a),label:"Adaptive Difficulty"})]}),e.jsxs(ie,{title:"AI Configuration",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ai-confidence-threshold",className:"block text-sm font-medium text-gray-700 mb-1",children:"AI Confidence Threshold"}),e.jsx("input",{id:"ai-confidence-threshold",type:"range",min:"0.1",max:"1",step:"0.1",value:r.aiConfidenceThreshold,onChange:a=>s("aiConfidenceThreshold",parseFloat(a.target.value)),className:"w-full"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(r.aiConfidenceThreshold*100),"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"recommendation-limit",className:"block text-sm font-medium text-gray-700 mb-1",children:"Recommendation Limit"}),e.jsx("input",{id:"recommendation-limit",type:"number",min:"1",max:"20",value:r.recommendationLimit,onChange:a=>s("recommendationLimit",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"data-retention-days",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Retention (Days)"}),e.jsx("input",{id:"data-retention-days",type:"number",min:"30",max:"1095",value:r.dataRetentionDays,onChange:a=>s("dataRetentionDays",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]})]})]})]})})};var Ll=Object.defineProperty,$l=Object.defineProperties,Ml=Object.getOwnPropertyDescriptors,Ys=Object.getOwnPropertySymbols,Fl=Object.prototype.hasOwnProperty,zl=Object.prototype.propertyIsEnumerable,Ws=(r,t,s)=>t in r?Ll(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Vl=(r,t)=>{for(var s in t||(t={}))Fl.call(t,s)&&Ws(r,s,t[s]);if(Ys)for(var s of Ys(t))zl.call(t,s)&&Ws(r,s,t[s]);return r},Gl=(r,t)=>$l(r,Ml(t));const ql=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(Gl(Vl({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:Yr,size:1.5,className:"text-green-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-green-800",children:"Certification Management"}),e.jsx("p",{className:"text-sm text-green-700",children:"Configure certification and compliance tracking"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(ie,{title:"Certification Features",children:[e.jsx(U,{id:"enable-auto-certification",checked:r.enableAutoCertification,onChange:a=>s("enableAutoCertification",a),label:"Enable Auto-Certification"}),e.jsx(U,{id:"require-re-certification",checked:r.requireReCertification,onChange:a=>s("requireReCertification",a),label:"Require Re-Certification"}),e.jsx(U,{id:"enable-certification-templates",checked:r.enableCertificationTemplates,onChange:a=>s("enableCertificationTemplates",a),label:"Enable Certification Templates"})]}),e.jsxs(ie,{title:"Assessment Settings",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"passing-score-threshold",className:"block text-sm font-medium text-gray-700 mb-1",children:"Passing Score Threshold"}),e.jsx("input",{id:"passing-score-threshold",type:"number",min:"50",max:"100",value:r.passingScoreThreshold,onChange:a=>s("passingScoreThreshold",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"max-assessment-attempts",className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Assessment Attempts"}),e.jsx("input",{id:"max-assessment-attempts",type:"number",min:"1",max:"10",value:r.maxAssessmentAttempts,onChange:a=>s("maxAssessmentAttempts",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"certification-expiry-days",className:"block text-sm font-medium text-gray-700 mb-1",children:"Certification Expiry (Days)"}),e.jsx("input",{id:"certification-expiry-days",type:"number",min:"30",max:"1095",value:r.certificationExpiryDays,onChange:a=>s("certificationExpiryDays",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]})]})]})]})})};var Ul=Object.defineProperty,Bl=Object.defineProperties,Hl=Object.getOwnPropertyDescriptors,Ks=Object.getOwnPropertySymbols,Yl=Object.prototype.hasOwnProperty,Wl=Object.prototype.propertyIsEnumerable,Qs=(r,t,s)=>t in r?Ul(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Kl=(r,t)=>{for(var s in t||(t={}))Yl.call(t,s)&&Qs(r,s,t[s]);if(Ks)for(var s of Ks(t))Wl.call(t,s)&&Qs(r,s,t[s]);return r},Ql=(r,t)=>Bl(r,Hl(t));const Zl=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(Ql(Kl({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:ze,size:1.5,className:"text-orange-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-orange-800",children:"Learning Path Configuration"}),e.jsx("p",{className:"text-sm text-orange-700",children:"Configure learning paths and progress tracking"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(ie,{title:"Path Features",children:[e.jsx(U,{id:"enable-custom-paths",checked:r.enableCustomPaths,onChange:a=>s("enableCustomPaths",a),label:"Enable Custom Learning Paths"}),e.jsx(U,{id:"enable-prerequisites",checked:r.enablePrerequisites,onChange:a=>s("enablePrerequisites",a),label:"Enable Prerequisites"}),e.jsx(U,{id:"enable-branching",checked:r.enableBranching,onChange:a=>s("enableBranching",a),label:"Enable Branching Paths"}),e.jsx(U,{id:"adaptive-path-generation",checked:r.adaptivePathGeneration,onChange:a=>s("adaptivePathGeneration",a),label:"AI Adaptive Path Generation"})]}),e.jsxs(ie,{title:"Progress & Gamification",children:[e.jsx(U,{id:"enable-milestones",checked:r.enableMilestones,onChange:a=>s("enableMilestones",a),label:"Enable Learning Milestones"}),e.jsx(U,{id:"enable-progress-gamification",checked:r.enableProgressGamification,onChange:a=>s("enableProgressGamification",a),label:"Enable Progress Gamification"}),e.jsx(U,{id:"enable-learning-streaks",checked:r.enableLearningStreaks,onChange:a=>s("enableLearningStreaks",a),label:"Enable Learning Streaks"}),e.jsx(U,{id:"enable-achievement-badges",checked:r.enableAchievementBadges,onChange:a=>s("enableAchievementBadges",a),label:"Enable Achievement Badges"})]})]})]})})};var Xl=Object.defineProperty,Jl=Object.defineProperties,eo=Object.getOwnPropertyDescriptors,Zs=Object.getOwnPropertySymbols,to=Object.prototype.hasOwnProperty,so=Object.prototype.propertyIsEnumerable,Xs=(r,t,s)=>t in r?Xl(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,ro=(r,t)=>{for(var s in t||(t={}))to.call(t,s)&&Xs(r,s,t[s]);if(Zs)for(var s of Zs(t))so.call(t,s)&&Xs(r,s,t[s]);return r},ao=(r,t)=>Jl(r,eo(t));const no=({aiSettings:r,onAiSettingsChange:t})=>{const s=(a,n)=>{t(ao(ro({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:xe,size:1.5,className:"text-gray-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Advanced Configuration"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Advanced settings for power users"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(ie,{title:"Data & Privacy",children:[e.jsx(U,{id:"data-sharing-enabled",checked:r.dataSharingEnabled,onChange:a=>s("dataSharingEnabled",a),label:"Enable Data Sharing for AI Training"}),e.jsx(U,{id:"local-ai-processing-enabled",checked:r.localAIProcessingEnabled,onChange:a=>s("localAIProcessingEnabled",a),label:"Local AI Processing"}),e.jsx(U,{id:"encrypted-data-transmission",checked:r.encryptedDataTransmission,onChange:a=>s("encryptedDataTransmission",a),label:"Encrypted Data Transmission"})]}),e.jsx(ie,{title:"System Information",children:e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"AI Model Version:"})," ",r.modelVersion]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Data Retention:"})," ",r.dataRetentionDays," days"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Confidence Threshold:"})," ",Math.round(r.aiConfidenceThreshold*100),"%"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Recommendation Limit:"})," ",r.recommendationLimit," items"]})]})})]})]})})},io=()=>{const[r,t]=g.useState({aiEnabled:!0,personalizedRecommendations:!0,skillGapAnalysis:!0,learningPathOptimization:!0,performancePrediction:!0,adaptiveDifficulty:!0,learningAnalyticsEnabled:!0,behaviorTracking:!0,progressPrediction:!0,engagementMetrics:!0,retentionAnalysis:!0,aiConfidenceThreshold:.8,recommendationLimit:5,dataRetentionDays:365,modelVersion:"v1.0",dataSharingEnabled:!1,localAIProcessingEnabled:!0,encryptedDataTransmission:!0,aiModelTraining:!1}),[s,a]=g.useState({enableLearningPaths:!0,enableCertifications:!0,enableProgressTracking:!0,enableSocialLearning:!1,defaultContentType:"course",enableContentRating:!0,enableComments:!0,requireContentApproval:!0,showLearningRecommendations:!0,enableLearningReminders:!0,adaptiveInterface:!0,mobileLearningEnabled:!0}),[n,l]=g.useState({enableAutoCertification:!0,certificationExpiryDays:365,requireReCertification:!0,enableCertificationTemplates:!0,complianceTrackingEnabled:!0,regulatoryUpdatesEnabled:!0,auditTrailEnabled:!0,complianceReportingEnabled:!0,enableAssessments:!0,passingScoreThreshold:80,maxAssessmentAttempts:3,enableRetakes:!0}),[o,c]=g.useState({enableCustomPaths:!0,enablePrerequisites:!0,enableBranching:!0,adaptivePathGeneration:!0,enableMilestones:!0,enableProgressGamification:!0,enableLearningStreaks:!0,enableAchievementBadges:!0,estimatedCompletionTracking:!0,enableStudyScheduling:!0,optimalStudyTimeRecommendations:!0,enableLearningReminders:!0});return{aiSettings:r,setAiSettings:t,generalSettings:s,setGeneralSettings:a,certificationSettings:n,setCertificationSettings:l,learningPathSettings:o,setLearningPathSettings:c}};var lo=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const oo=()=>{const[r,t]=g.useState("general"),[s,a]=g.useState(!1),[n,l]=g.useState(null),{aiSettings:o,setAiSettings:c,generalSettings:i,setGeneralSettings:d,certificationSettings:u,setCertificationSettings:m,learningPathSettings:h,setLearningPathSettings:j}=io(),p=[{id:"general",label:"General Settings",icon:ee},{id:"ai",label:"AI & Analytics",icon:Te},{id:"certifications",label:"Certifications",icon:Yr},{id:"learning-paths",label:"Learning Paths",icon:ze},{id:"advanced",label:"Advanced",icon:xe}],x=()=>lo(null,null,function*(){try{a(!0),l(null),l({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>l(null),3e3)}catch(_){console.error(_),l({type:"error",text:"Failed to save settings. Please try again."})}finally{a(!1)}}),N=()=>{switch(r){case"general":return e.jsx(El,{settings:i,onSettingsChange:d});case"ai":return e.jsx(kl,{settings:o,onSettingsChange:c});case"certifications":return e.jsx(ql,{settings:u,onSettingsChange:m});case"learning-paths":return e.jsx(Zl,{settings:h,onSettingsChange:j});case"advanced":return e.jsx(no,{aiSettings:o,onAiSettingsChange:c});default:return null}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Learning & Training Settings"}),e.jsx("p",{className:"text-gray-600",children:"Configure AI-powered learning features and training modules"})]}),e.jsxs("button",{onClick:x,disabled:s,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4] disabled:opacity-50",children:[e.jsx(v,{path:Ge,size:1,className:"mr-2"}),s?"Saving...":"Save Settings"]})]}),n&&e.jsx("div",{className:`rounded-md p-4 ${n.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{path:n.type==="success"?Ee:ne,size:1.2,className:`mr-2 ${n.type==="success"?"text-green-400":"text-red-400"}`}),n.text]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:p.map(_=>e.jsxs("button",{onClick:()=>t(_.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${r===_.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(v,{path:_.icon,size:1}),e.jsx("span",{children:_.label})]},_.id))})}),e.jsx("div",{className:"tab-content-area",children:N()})]})};var co=Object.defineProperty,uo=Object.defineProperties,mo=Object.getOwnPropertyDescriptors,Js=Object.getOwnPropertySymbols,po=Object.prototype.hasOwnProperty,go=Object.prototype.propertyIsEnumerable,er=(r,t,s)=>t in r?co(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,ho=(r,t)=>{for(var s in t||(t={}))po.call(t,s)&&er(r,s,t[s]);if(Js)for(var s of Js(t))go.call(t,s)&&er(r,s,t[s]);return r},xo=(r,t)=>uo(r,mo(t));const fo={id:"dental",name:"Dental Practice",description:"Statuses optimized for dental offices and clinics",category:"Specialty Care",statuses:[{name:"Pre-Procedure Ready",color:"#16a34a",icon:"check-circle",description:"Dental chair prepared, instruments sterilized, ready for patient",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Post-Procedure Cleaning",color:"#dc2626",icon:"broom",description:"Biohazard cleanup required after dental procedure",requiresVerification:!0,autoTransition:!1,alertLevel:"high"},{name:"Sterilization Cycle",color:"#ca8a04",icon:"progress-clock",description:"Instruments currently in autoclave sterilization cycle",requiresVerification:!1,autoTransition:!0,transitionTo:"Pre-Procedure Ready",alertLevel:"medium"},{name:"Patient in Chair",color:"#3b82f6",icon:"account",description:"Patient currently in dental chair, room occupied",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"X-Ray Room Ready",color:"#8b5cf6",icon:"radiology-box",description:"X-ray room prepared and ready for imaging",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Equipment Maintenance",color:"#ea580c",icon:"wrench",description:"Dental equipment under maintenance or repair",requiresVerification:!1,autoTransition:!1,alertLevel:"medium"}]},bo={id:"primary_care",name:"Primary Care",description:"Statuses for general practice and family medicine",category:"General Practice",statuses:[{name:"Patient Exam Room",color:"#3b82f6",icon:"account",description:"Patient currently in exam room for consultation",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Waiting for Labs",color:"#ca8a04",icon:"progress-clock",description:"Room waiting for lab results or test completion",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Vaccination Ready",color:"#16a34a",icon:"needle",description:"Vaccination station prepared and ready",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Chronic Care Visit",color:"#8b5cf6",icon:"account-clock",description:"Extended visit for chronic condition management",requiresVerification:!1,autoTransition:!1,alertLevel:"medium"},{name:"Wellness Check",color:"#059669",icon:"heart-pulse",description:"Routine physical examination in progress",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Follow-up Visit",color:"#3b82f6",icon:"calendar-check",description:"Follow-up appointment for previous condition",requiresVerification:!1,autoTransition:!1,alertLevel:"low"}]},yo={id:"private_surgery",name:"Private Surgery",description:"Statuses for surgical centers and operating rooms",category:"Surgical",statuses:[{name:"Pre-Op Ready",color:"#16a34a",icon:"check-circle",description:"Pre-operative room prepared for patient",requiresVerification:!0,autoTransition:!1,alertLevel:"medium"},{name:"Surgery in Progress",color:"#dc2626",icon:"scissors-cutting",description:"Active surgery currently in progress",requiresVerification:!1,autoTransition:!1,alertLevel:"critical"},{name:"Post-Op Recovery",color:"#3b82f6",icon:"bed",description:"Post-operative recovery room occupied",requiresVerification:!1,autoTransition:!1,alertLevel:"high"},{name:"Sterile Instruments",color:"#8b5cf6",icon:"package-variant",description:"Surgical instruments sterilized and ready",requiresVerification:!0,autoTransition:!1,alertLevel:"medium"},{name:"Anesthesia Ready",color:"#ca8a04",icon:"gas-cylinder",description:"Anesthesia equipment prepared and ready",requiresVerification:!0,autoTransition:!1,alertLevel:"high"},{name:"Surgical Suite Clean",color:"#16a34a",icon:"broom",description:"Surgical suite cleaned and sanitized post-procedure",requiresVerification:!0,autoTransition:!1,alertLevel:"medium"}]},vo={id:"emergency_room",name:"Emergency Room",description:"Statuses for emergency departments and urgent care",category:"Emergency",statuses:[{name:"Trauma Bay Ready",color:"#16a34a",icon:"ambulance",description:"Trauma bay prepared for emergency patient",requiresVerification:!1,autoTransition:!1,alertLevel:"critical"},{name:"Code Blue",color:"#dc2626",icon:"alert-circle",description:"Cardiac arrest or medical emergency in progress",requiresVerification:!1,autoTransition:!1,alertLevel:"critical"},{name:"Isolation Room",color:"#ea580c",icon:"shield-lock",description:"Isolation room for infectious disease patients",requiresVerification:!0,autoTransition:!1,alertLevel:"high"},{name:"Waiting for Specialist",color:"#ca8a04",icon:"account-clock",description:"Patient waiting for specialist consultation",requiresVerification:!1,autoTransition:!1,alertLevel:"medium"},{name:"Discharge Pending",color:"#8b5cf6",icon:"exit-to-app",description:"Patient ready for discharge, paperwork pending",requiresVerification:!1,autoTransition:!1,alertLevel:"low"}]},jo={id:"laboratory",name:"Laboratory",description:"Statuses for medical laboratories and testing facilities",category:"Diagnostic",statuses:[{name:"Sample Processing",color:"#ca8a04",icon:"test-tube",description:"Laboratory samples currently being processed",requiresVerification:!1,autoTransition:!1,alertLevel:"medium"},{name:"Equipment Calibration",color:"#ea580c",icon:"wrench",description:"Laboratory equipment under calibration",requiresVerification:!1,autoTransition:!1,alertLevel:"medium"},{name:"Quality Control",color:"#8b5cf6",icon:"clipboard-check",description:"Quality control testing in progress",requiresVerification:!0,autoTransition:!1,alertLevel:"high"},{name:"Results Ready",color:"#16a34a",icon:"file-document",description:"Test results completed and ready for review",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Hazardous Materials",color:"#dc2626",icon:"biohazard",description:"Hazardous materials handling in progress",requiresVerification:!0,autoTransition:!1,alertLevel:"critical"}]},la=[fo,bo,yo,vo,jo];function it(r){return la.find(t=>t.id===r)}function tr(r){return r.statuses.map(t=>xo(ho({},t),{id:t.name.toLowerCase().replace(/\s+/g,"_"),isDefault:!1,isCore:!1,isPublished:!1}))}function No(r,t){const s=[];for(const a of r.statuses)for(const n of t){if(a.name.toLowerCase()===n.name.toLowerCase()){s.push({bundleStatus:a.name,existingStatus:n.name,similarity:1});continue}const l=a.name.toLowerCase().split(/\s+/),o=n.name.toLowerCase().split(/\s+/),c=l.filter(i=>o.includes(i));if(c.length>0){const i=c.length/Math.max(l.length,o.length);i>=.5&&s.push({bundleStatus:a.name,existingStatus:n.name,similarity:i})}}return s.sort((a,n)=>n.similarity-a.similarity)}const _o=({rooms:r,onEditRoom:t,onDeleteRoom:s,onToggleActive:a})=>e.jsx("div",{className:"space-y-2",children:r.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:n.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[n.department," • ",n.floor]}),n.barcode&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Barcode: ",n.barcode]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>a(n.id,n.isActive),className:`px-3 py-1 text-sm rounded-md transition-colors ${n.isActive?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"}`,children:n.isActive?"Active":"Inactive"}),e.jsx("button",{onClick:()=>t(n),className:"p-1 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:e.jsx(v,{path:Ce,size:.8})}),e.jsx("button",{onClick:()=>s(n.id),className:"p-1 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:e.jsx(v,{path:Ve,size:.8})})]})]},n.id))}),Co=()=>{const r=["OR001","ICU101","SUP001","ER001","LAB001","RAD001","PHY001","ADM001"];return r[Math.floor(Math.random()*r.length)]||"OR001"};var So=Object.defineProperty,wo=Object.defineProperties,Eo=Object.getOwnPropertyDescriptors,sr=Object.getOwnPropertySymbols,To=Object.prototype.hasOwnProperty,Ao=Object.prototype.propertyIsEnumerable,rr=(r,t,s)=>t in r?So(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,me=(r,t)=>{for(var s in t||(t={}))To.call(t,s)&&rr(r,s,t[s]);if(sr)for(var s of sr(t))Ao.call(t,s)&&rr(r,s,t[s]);return r},pe=(r,t)=>wo(r,Eo(t));const Io=({isOpen:r,onClose:t,room:s,mode:a,onSave:n})=>{const[l,o]=g.useState({name:"",department:"",floor:"",barcode:"",gpsCoordinates:null}),{getCurrentLocation:c,latitude:i,longitude:d,accuracy:u,isLoading:m}=ga(),h=["Surgery","Intensive Care","Emergency","Logistics","Administration","Laboratory"];g.useEffect(()=>{o(s&&a==="edit"?{name:s.name||"",department:s.department||"",floor:s.floor||"",barcode:s.barcode||"",gpsCoordinates:s.gpsCoordinates||null}:{name:"",department:"",floor:"",barcode:"",gpsCoordinates:null})},[s,a,r]),g.useEffect(()=>{i&&d&&o(p=>pe(me({},p),{gpsCoordinates:{latitude:i,longitude:d,accuracy:u,lastUpdated:new Date().toISOString()}}))},[i,d,u]);const j=()=>{l.name&&l.department&&l.floor&&(n(l),t())};return r?e.jsxs("div",{className:"mb-4 p-3 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"text-md font-medium mb-3",children:a==="add"?"Add New Room":"Edit Room"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"room-name",className:"block text-xs font-medium text-gray-700 mb-1",children:"Room Name"}),e.jsx("input",{id:"room-name",type:"text",value:l.name,onChange:p=>o(pe(me({},l),{name:p.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Operating Room 1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"room-barcode",className:"block text-xs font-medium text-gray-700 mb-1",children:"Barcode"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{id:"room-barcode",type:"text",value:l.barcode,onChange:p=>o(pe(me({},l),{barcode:p.target.value})),className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., OR001"}),e.jsxs("button",{type:"button",onClick:()=>o(pe(me({},l),{barcode:Co()})),className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors flex items-center gap-1 text-xs",title:"Generate random barcode",children:[e.jsx(v,{path:kt,size:.6}),e.jsx("span",{children:"Gen"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"room-department",className:"block text-xs font-medium text-gray-700 mb-1",children:"Department"}),e.jsxs("select",{id:"room-department",value:l.department,onChange:p=>o(pe(me({},l),{department:p.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Department"}),h.map(p=>e.jsx("option",{value:p,children:p},p))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"room-floor",className:"block text-xs font-medium text-gray-700 mb-1",children:"Floor"}),e.jsx("input",{id:"room-floor",type:"text",value:l.floor,onChange:p=>o(pe(me({},l),{floor:p.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 2nd Floor"})]})]}),e.jsxs("div",{className:"mt-4 p-3 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-sm font-medium text-blue-800 flex items-center",children:[e.jsx(v,{path:es,size:.8,className:"mr-1"}),"GPS Coordinates (Optional)"]}),e.jsxs("button",{type:"button",onClick:c,disabled:m,className:"flex items-center px-3 py-1 bg-blue-600 text-white text-xs rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:[e.jsx(v,{path:es,size:.6,className:"mr-1"}),m?"Getting Location...":"Get Current Location"]})]}),l.gpsCoordinates?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm text-blue-700",children:[e.jsx("div",{className:"font-medium",children:"Current GPS Coordinates:"}),e.jsx("div",{className:"font-mono text-xs",children:ha(l.gpsCoordinates)}),l.gpsCoordinates.accuracy&&e.jsxs("div",{className:"text-xs text-blue-600",children:["Accuracy: ±",Math.round(l.gpsCoordinates.accuracy),"m"]})]}),e.jsx("button",{type:"button",onClick:()=>o(p=>pe(me({},p),{gpsCoordinates:null})),className:"text-xs text-red-600 hover:text-red-800",children:"Remove GPS Coordinates"})]}):e.jsx("div",{className:"text-sm text-blue-600",children:`No GPS coordinates set. Click "Get Current Location" to capture the room's GPS coordinates. This will enable smart location detection for inventory items.`})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs("button",{onClick:j,className:"flex items-center px-3 py-1 bg-[#4ECDC4] text-white text-sm rounded-md hover:bg-[#38b2ac] transition-colors",children:[e.jsx(v,{path:a==="add"?he:tt,size:.8,className:"mr-1"}),a==="add"?"Add Room":"Update Room"]}),e.jsxs("button",{onClick:t,className:"flex items-center px-3 py-1 bg-gray-500 text-white text-sm rounded-md hover:bg-gray-600 transition-colors",children:[e.jsx(v,{path:we,size:.8,className:"mr-1"}),"Cancel"]})]})]}):null},Po=({coreStatuses:r,customStatuses:t,onEditStatus:s,onDeleteStatus:a,onTogglePublishStatus:n})=>e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Core Status Types (Required)"}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:r.map(l=>e.jsxs("div",{className:"p-2 rounded-lg border bg-white border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-1",style:{backgroundColor:l.color}}),e.jsx("span",{className:"font-medium text-xs",children:l.name}),e.jsx(v,{path:Hr,size:.4,className:"text-gray-300 ml-1",title:"Core status - always available"})]}),e.jsx("span",{className:"px-1 py-0.5 bg-blue-100 text-blue-600 text-xs rounded",children:"Core"})]}),e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:l.description})]},l.id))}),e.jsxs("div",{className:"mb-3 flex items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Custom Status Types (Optional)"}),e.jsxs("div",{className:"relative ml-2 tooltip-container",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-bold cursor-help",children:"i"}),e.jsxs("div",{className:"tooltip-content",children:[e.jsx("div",{className:"mb-1 font-medium",children:"💡 Data Integrity Protection"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{children:"• Similar statuses (≥90% match) are blocked"}),e.jsx("div",{children:"• Very similar statuses (≥80% match) show warnings"}),e.jsx("div",{children:"• Smart suggestions help you choose better names"}),e.jsx("div",{children:"• All statuses start as drafts for testing"})]}),e.jsx("div",{className:"tooltip-arrow"})]})]})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Custom statuses start as drafts. Click the eye icon to publish them and make them visible in the cleaning workflow."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-4",children:t.map(l=>e.jsxs("div",{className:`p-3 rounded-lg border ${l.isPublished?"bg-purple-100 border-purple-300":"bg-gray-100 border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:l.color}}),e.jsx("span",{className:"font-medium text-sm",children:l.name}),e.jsx("span",{className:`ml-2 px-1 py-0.5 text-xs rounded ${l.isPublished?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"}`,children:l.isPublished?"Published":"Draft"})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>s(l),className:"p-1 text-purple-600 hover:bg-purple-100 rounded",title:"Edit status",children:e.jsx(v,{path:Ce,size:.6})}),e.jsx("button",{onClick:()=>n(l.id,!l.isPublished),className:`p-1 rounded ${l.isPublished?"text-orange-600 hover:bg-orange-100":"text-green-600 hover:bg-green-100"}`,title:l.isPublished?"Unpublish status":"Publish status",children:e.jsx(v,{path:l.isPublished?Lt:$t,size:.6})}),e.jsx("button",{onClick:()=>a(l.id),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete status",children:e.jsx(v,{path:Ve,size:.6})})]})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:l.description}),e.jsxs("div",{className:"text-xs text-purple-600",children:[l.requiresVerification&&e.jsx("span",{className:"mr-2",children:"✓ Verification"}),l.autoTransition&&e.jsx("span",{className:"mr-2",children:"✓ Auto Transition"}),l.alertLevel&&l.alertLevel!=="low"&&e.jsxs("span",{className:"mr-2",children:["⚠ ",l.alertLevel]})]})]},l.id))})]}),Oo=({customStatuses:r,onLoadBundle:t,onReplaceWithBundle:s})=>{var a;const[n,l]=g.useState(""),[o,c]=g.useState(!1),[i,d]=g.useState([]),u=p=>{l(p);const x=it(p);if(x){const N=No(x,r);d(N),c(!0)}},m=()=>{t(n),l(""),c(!1),d([])},h=()=>{s(n),l(""),c(!1),d([])},j=()=>{l(""),c(!1),d([])};return e.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-green-800 mb-2",children:"🚀 Quick Setup: Pre-configured Status Bundles"}),e.jsx("p",{className:"text-xs text-green-700 mb-3",children:"Select a bundle to quickly add relevant statuses for your healthcare specialty. All statuses start as drafts."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 mb-3",children:la.map(p=>e.jsxs("button",{onClick:()=>u(p.id),className:`p-2 text-left rounded border transition-colors ${n===p.id?"bg-green-100 border-green-400 text-green-800":"bg-white border-green-200 hover:bg-green-50 text-green-700"}`,children:[e.jsx("div",{className:"font-medium text-xs",children:p.name}),e.jsx("div",{className:"text-xs opacity-75",children:p.description}),e.jsxs("div",{className:"text-xs opacity-60",children:[p.statuses.length," statuses"]})]},p.id))}),o&&n&&e.jsxs("div",{className:"mt-3 p-3 bg-white border border-green-300 rounded",children:[e.jsxs("h6",{className:"text-sm font-medium text-green-800 mb-2",children:["Bundle Preview: ",(a=it(n))==null?void 0:a.name]}),i.length>0&&e.jsxs("div",{className:"mb-3 p-2 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsxs("p",{className:"text-xs text-yellow-800 mb-1",children:["⚠️ Found ",i.length," similar statuses:"]}),e.jsx("ul",{className:"text-xs text-yellow-700 space-y-1",children:i.slice(0,3).map((p,x)=>e.jsxs("li",{children:['• "',p.bundleStatus,'" similar to "',p.existingStatus,'"']},x))})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:m,className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700",children:"Add New Statuses Only"}),e.jsx("button",{onClick:h,className:"px-3 py-1 text-xs bg-orange-600 text-white rounded hover:bg-orange-700",children:"Replace All Custom Statuses"}),e.jsx("button",{onClick:j,className:"px-3 py-1 text-xs bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"})]})]})]})},Do=()=>{const{rooms:r,addRoom:t,updateRoom:s,deleteRoom:a}=xa(),{getCoreStatusTypes:n,getCustomStatusTypes:l,addStatusType:o,deleteStatusType:c,publishStatusType:i,unpublishStatusType:d}=fa(),u=n(),m=l(),[h,j]=g.useState(!1),[p,x]=g.useState(null),[N,_]=g.useState(!1),[b,f]=g.useState(!1),[,A]=g.useState(!1),R=S=>{t({name:S.name||"",department:S.department||"",floor:S.floor||"",barcode:S.barcode,isActive:!0}),j(!1)},M=S=>{p&&(s(p.id,S),x(null))},B=S=>{x(S)},$=()=>{j(!1),x(null)},G=(S,I)=>{s(S,{isActive:!I})},H=S=>{a(S)},E=()=>{},F=S=>{c(S)},P=(S,I)=>{I?i(S):d(S)},w=S=>{const I=it(S);if(!I)return;const Q=tr(I),T=m.map(L=>L.name.toLowerCase());Q.filter(L=>!T.includes(L.name.toLowerCase())).forEach(L=>{o(L)})},z=S=>{const I=it(S);if(!I)return;m.forEach(T=>{c(T.id)}),tr(I).forEach(T=>{o(T)})};return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>_(!N),className:"flex items-center text-xl font-semibold text-gray-800 hover:text-gray-600 transition-colors",children:[e.jsx(v,{path:N?Bt:Ht,size:1.2,className:"mr-2"}),"Room Management",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",r.filter(S=>S.isActive).length," active)"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>f(!b),className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[e.jsx(v,{path:ee,size:1,className:"mr-2"}),"Status Types"]}),e.jsxs("button",{onClick:()=>j(!0),className:"flex items-center px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors",children:[e.jsx(v,{path:he,size:1,className:"mr-2"}),"Add Room"]})]})]}),b&&e.jsxs("div",{className:"mb-6 p-4 border border-purple-200 rounded-lg bg-purple-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-purple-800",children:"Custom Status Types"}),e.jsxs("button",{onClick:()=>A(!0),className:"flex items-center px-3 py-1 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors text-sm",children:[e.jsx(v,{path:he,size:.8,className:"mr-1"}),"Add Custom Status"]})]}),e.jsx(Oo,{customStatuses:m,onLoadBundle:w,onReplaceWithBundle:z}),e.jsx(Po,{coreStatuses:u,customStatuses:m,onEditStatus:E,onDeleteStatus:F,onTogglePublishStatus:P})]}),e.jsx(Io,{isOpen:h||!!p,onClose:$,room:p,mode:h?"add":"edit",onSave:h?R:M}),N&&e.jsx(_o,{rooms:r,onEditRoom:B,onDeleteRoom:H,onToggleActive:G})]})},Ro={title:"",category:"setup",autoSchedule:!1,scheduleFrequency:"weekly",scheduleDay:"monday",scheduleTime:"09:00",schedulePriority:"medium",schedulePoints:50,scheduleDuration:30,triggerRoomStatus:!1,triggerStaffSchedule:!1,triggerAdminDecision:!1};var ko=Object.defineProperty,Lo=Object.defineProperties,$o=Object.getOwnPropertyDescriptors,ar=Object.getOwnPropertySymbols,Mo=Object.prototype.hasOwnProperty,Fo=Object.prototype.propertyIsEnumerable,nr=(r,t,s)=>t in r?ko(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,zo=(r,t)=>{for(var s in t||(t={}))Mo.call(t,s)&&nr(r,s,t[s]);if(ar)for(var s of ar(t))Fo.call(t,s)&&nr(r,s,t[s]);return r},Vo=(r,t)=>Lo(r,$o(t)),ir=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Go=(r,t)=>{const[s,a]=g.useState(Ro),[n,l]=g.useState(!1),[o,c]=g.useState(!1),[i,d]=g.useState([]);g.useEffect(()=>{r?a({title:r.title,category:r.category,autoSchedule:r.autoSchedule||!1,scheduleFrequency:r.scheduleFrequency||"weekly",scheduleDay:r.scheduleDay||"monday",scheduleTime:r.scheduleTime||"09:00",schedulePriority:r.schedulePriority||"medium",schedulePoints:r.schedulePoints||50,scheduleDuration:r.scheduleDuration||30,triggerRoomStatus:r.triggerRoomStatus||!1,triggerStaffSchedule:r.triggerStaffSchedule||!1,triggerAdminDecision:r.triggerAdminDecision||!1}):t&&a({title:"",category:"setup",autoSchedule:!1,scheduleFrequency:"weekly",scheduleDay:"monday",scheduleTime:"09:00",schedulePriority:"medium",schedulePoints:50,scheduleDuration:30,triggerRoomStatus:!1,triggerStaffSchedule:!1,triggerAdminDecision:!1})},[r,t]);const u=()=>ir(null,null,function*(){c(!0);try{try{const p=yield Vt.askAI(`Generate 8 checklist title suggestions for the ${s.category} category. Each title should be descriptive and follow healthcare facility naming conventions.`,`Category: ${s.category}`),x=h(p);d(x),l(!0)}catch(p){console.warn("AI service failed, using fallback suggestions:",p);const x=yield j(s.category);d(x),l(!0)}}catch(p){console.error("Error generating AI suggestions:",p);const x=yield j(s.category);d(x),l(!0)}finally{c(!1)}}),m=p=>{a(x=>Vo(zo({},x),{title:p})),l(!1)},h=p=>{try{const x=p.match(/\[[\s\S]*\]/);if(x){const b=JSON.parse(x[0]);if(Array.isArray(b))return b.map(f=>typeof f=="string"?f:f.title||f.name||f.suggestion||"Untitled Checklist")}const N=p.split(`
`).filter(b=>b.trim()),_=[];for(const b of N)if(b.match(/^\d+\./)){const f=b.replace(/^\d+\.\s*/,"").trim();f&&_.push(f)}else b.trim()&&!b.toLowerCase().includes("category")&&!b.toLowerCase().includes("suggestions")&&_.push(b.trim());return _.length>0?_:["AI-generated checklist","Custom checklist","Professional checklist"]}catch(x){return console.error("Error parsing AI response:",x),["AI-generated checklist","Custom checklist","Professional checklist"]}},j=p=>ir(null,null,function*(){return yield new Promise(N=>setTimeout(N,1e3)),{setup:["Treatment Room Setup Checklist","Surgical Suite Preparation","Examination Room Setup","Emergency Room Preparation","Laboratory Setup Protocol","Radiology Room Setup","Pharmacy Setup Checklist","Reception Area Setup"],patient:["Patient Room Cleaning Protocol","Isolation Room Procedures","Post-Procedure Room Cleanup","Patient Equipment Sanitization","Bedside Supply Restocking","Patient Safety Equipment Check","Infection Control Protocol","Patient Comfort Items Setup"],weekly:["Weekly Deep Cleaning Protocol","Equipment Maintenance Schedule","Supply Inventory Audit","Safety Equipment Inspection","Emergency Equipment Check","Compliance Documentation Review","Staff Training Verification","Quality Assurance Audit"],public:["Waiting Room Maintenance","Lobby Cleaning Protocol","Restroom Sanitization","Common Area Disinfection","Public Equipment Cleaning","Visitor Area Maintenance","Cafeteria Cleaning Protocol","Parking Area Maintenance"],deep:["Post-Contamination Deep Clean","Equipment Sterilization Protocol","Ventilation System Cleaning","Structural Disinfection","Biohazard Cleanup Protocol","Emergency Response Cleanup","Infection Outbreak Response","Facility-Wide Sanitization"]}[p]||[]});return{checklistFormData:s,showAIChecklistSuggestions:n,isGeneratingSuggestions:o,aiChecklistSuggestions:i,setChecklistFormData:a,setShowAIChecklistSuggestions:l,generateAIChecklistSuggestions:u,applyAIChecklistSuggestion:m}},qo=[{id:"setup",title:"Setup/Take Down",icon:Wr,color:"#FF6B6B"},{id:"patient",title:"Per Patient",icon:Kr,color:"#4ECDC4"},{id:"weekly",title:"Weekly",icon:Qr,color:"#45B7D1"},{id:"public",title:"Public Spaces",icon:Zr,color:"#96CEB4"},{id:"deep",title:"Deep Clean",icon:Le,color:"#FF9F1C"}];var Uo=Object.defineProperty,Bo=Object.defineProperties,Ho=Object.getOwnPropertyDescriptors,lr=Object.getOwnPropertySymbols,Yo=Object.prototype.hasOwnProperty,Wo=Object.prototype.propertyIsEnumerable,or=(r,t,s)=>t in r?Uo(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,cr=(r,t)=>{for(var s in t||(t={}))Yo.call(t,s)&&or(r,s,t[s]);if(lr)for(var s of lr(t))Wo.call(t,s)&&or(r,s,t[s]);return r},dr=(r,t)=>Bo(r,Ho(t));const Ko=({checklistFormData:r,setChecklistFormData:t,showAIChecklistSuggestions:s,isGeneratingSuggestions:a,aiChecklistSuggestions:n,onGenerateAISuggestions:l,onApplyAISuggestion:o,onCloseAISuggestions:c})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"checklist-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Checklist Title"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{id:"checklist-title",type:"text",value:r.title,onChange:i=>t(dr(cr({},r),{title:i.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",placeholder:"e.g., Treatment Room Setup"}),e.jsxs("button",{onClick:l,disabled:a,className:"flex items-center px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:bg-gray-400 transition-colors",title:"Get AI suggestions for checklist titles",children:[e.jsx(v,{path:Ia,size:.8,className:"mr-1"}),a?"...":"AI"]})]}),s&&e.jsxs("div",{className:"mt-3 p-3 border border-purple-200 rounded-lg bg-purple-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h5",{className:"text-sm font-medium text-purple-800 flex items-center",children:[e.jsx(v,{path:$e,size:.8,className:"mr-1"}),"AI Suggestions"]}),e.jsx("button",{onClick:c,className:"text-purple-600 hover:text-purple-800",children:e.jsx(v,{path:we,size:.8})})]}),e.jsx("div",{className:"space-y-2",children:n.map((i,d)=>e.jsx("button",{onClick:()=>o(i),className:"w-full text-left p-2 text-sm text-purple-700 hover:bg-purple-100 rounded-md transition-colors",children:i},d))})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"checklist-category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsx("select",{id:"checklist-category",value:r.category,onChange:i=>t(dr(cr({},r),{category:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:qo.map(i=>e.jsx("option",{value:i.id,children:i.title},i.id))})]})]});var Qo=Object.defineProperty,Zo=Object.defineProperties,Xo=Object.getOwnPropertyDescriptors,ur=Object.getOwnPropertySymbols,Jo=Object.prototype.hasOwnProperty,ec=Object.prototype.propertyIsEnumerable,mr=(r,t,s)=>t in r?Qo(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,re=(r,t)=>{for(var s in t||(t={}))Jo.call(t,s)&&mr(r,s,t[s]);if(ur)for(var s of ur(t))ec.call(t,s)&&mr(r,s,t[s]);return r},ae=(r,t)=>Zo(r,Xo(t));const tc=({checklistFormData:r,setChecklistFormData:t})=>e.jsxs("div",{className:"mt-6 p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-md font-medium text-blue-800 flex items-center",children:[e.jsx(v,{path:st,size:1,className:"mr-2"}),"Scheduling Configuration"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.autoSchedule||!1,onChange:s=>t(ae(re({},r),{autoSchedule:s.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm text-blue-700",children:"Enable Auto-Scheduling"})]})]}),r.autoSchedule&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schedule-frequency",className:"block text-sm font-medium text-blue-700 mb-1",children:"Frequency"}),e.jsxs("select",{id:"schedule-frequency",value:r.scheduleFrequency||"weekly",onChange:s=>t(ae(re({},r),{scheduleFrequency:s.target.value})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"per_patient",children:"Per Patient"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"bi_weekly",children:"Bi-Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),(r.scheduleFrequency==="weekly"||r.scheduleFrequency==="bi_weekly"||r.scheduleFrequency==="monthly")&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schedule-day",className:"block text-sm font-medium text-blue-700 mb-1",children:"Schedule Day"}),e.jsxs("select",{id:"schedule-day",value:r.scheduleDay||"monday",onChange:s=>t(ae(re({},r),{scheduleDay:s.target.value})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"monday",children:"Monday"}),e.jsx("option",{value:"tuesday",children:"Tuesday"}),e.jsx("option",{value:"wednesday",children:"Wednesday"}),e.jsx("option",{value:"thursday",children:"Thursday"}),e.jsx("option",{value:"friday",children:"Friday"}),e.jsx("option",{value:"saturday",children:"Saturday"}),e.jsx("option",{value:"sunday",children:"Sunday"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schedule-time",className:"block text-sm font-medium text-blue-700 mb-1",children:"Schedule Time"}),e.jsx("input",{id:"schedule-time",type:"time",value:r.scheduleTime||"09:00",onChange:s=>t(ae(re({},r),{scheduleTime:s.target.value})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schedule-priority",className:"block text-sm font-medium text-blue-700 mb-1",children:"Priority"}),e.jsxs("select",{id:"schedule-priority",value:r.schedulePriority||"medium",onChange:s=>t(ae(re({},r),{schedulePriority:s.target.value})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schedule-points",className:"block text-sm font-medium text-blue-700 mb-1",children:"Points"}),e.jsx("input",{id:"schedule-points",type:"number",value:r.schedulePoints||50,onChange:s=>t(ae(re({},r),{schedulePoints:parseInt(s.target.value)})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schedule-duration",className:"block text-sm font-medium text-blue-700 mb-1",children:"Duration (minutes)"}),e.jsx("input",{id:"schedule-duration",type:"number",value:r.scheduleDuration||30,onChange:s=>t(ae(re({},r),{scheduleDuration:parseInt(s.target.value)})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-700 mb-2",children:"Trigger Conditions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.triggerRoomStatus||!1,onChange:s=>t(ae(re({},r),{triggerRoomStatus:s.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm text-blue-700",children:"Trigger on room status change"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.triggerStaffSchedule||!1,onChange:s=>t(ae(re({},r),{triggerStaffSchedule:s.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm text-blue-700",children:"Trigger based on staff availability"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.triggerAdminDecision||!1,onChange:s=>t(ae(re({},r),{triggerAdminDecision:s.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm text-blue-700",children:"Require admin approval"})]})]})]})]})]}),sc=({selectedChecklist:r,onSaveDraft:t,onPublish:s,isValid:a=!0})=>e.jsxs("div",{className:"flex justify-end mt-4 space-x-3",children:[e.jsxs("button",{onClick:t,disabled:!a,className:`flex items-center px-6 py-2 rounded-lg font-semibold text-lg ${a?"bg-gray-500 text-white hover:bg-gray-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(v,{path:tt,size:1,className:"mr-2"}),"Save Draft"]}),r&&e.jsxs("button",{onClick:s,disabled:!a,className:`flex items-center px-6 py-2 rounded-lg font-semibold text-lg ${a?"bg-[#4ECDC4] text-white hover:bg-[#3db8b0]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(v,{path:tt,size:1,className:"mr-2"}),"Publish"]})]}),rc=({selectedChecklist:r,isAddingChecklist:t,onSaveDraft:s,onPublish:a})=>{const{checklistFormData:n,showAIChecklistSuggestions:l,isGeneratingSuggestions:o,aiChecklistSuggestions:c,setChecklistFormData:i,setShowAIChecklistSuggestions:d,generateAIChecklistSuggestions:u,applyAIChecklistSuggestion:m}=Go(r,t),h=()=>{n.title&&n.category&&s(n)},j=()=>{n.title&&n.category&&(s(n),a())},p=n.title.trim()!==""&&n.category!==null;return e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsx("h4",{className:"text-md font-medium mb-3",children:"Checklist Details"}),e.jsx(Ko,{checklistFormData:n,setChecklistFormData:i,showAIChecklistSuggestions:l,isGeneratingSuggestions:o,aiChecklistSuggestions:c,onGenerateAISuggestions:u,onApplyAISuggestion:m,onCloseAISuggestions:()=>d(!1)}),e.jsx(tc,{checklistFormData:n,setChecklistFormData:i}),e.jsx(sc,{selectedChecklist:r,onSaveDraft:h,onPublish:j,isValid:p})]})},ac=[{id:"setup",title:"Setup/Take Down",icon:Wr,color:"#FF6B6B"},{id:"patient",title:"Per Patient",icon:Kr,color:"#4ECDC4"},{id:"weekly",title:"Weekly",icon:Qr,color:"#45B7D1"},{id:"public",title:"Public Spaces",icon:Zr,color:"#96CEB4"},{id:"deep",title:"Deep Clean",icon:Le,color:"#FF9F1C"}],nc=({checklists:r,onEditChecklist:t,onDeleteChecklist:s})=>{const[a,n]=g.useState(new Set(["setup"])),l=o=>{n(c=>{const i=new Set(c);return i.has(o)?i.delete(o):i.add(o),i})};return e.jsx("div",{className:"space-y-6",children:ac.map(o=>{const c=r.filter(m=>m.category===o.id),i=c.filter(m=>m.status==="published"),d=c.filter(m=>m.status==="draft"),u=a.has(o.id);return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("button",{onClick:()=>l(o.id),className:"flex items-center w-full text-left hover:bg-gray-50 p-2 -m-2 rounded-md transition-colors",children:[e.jsx(v,{path:o.icon,size:1.2,color:o.color,className:"mr-2"}),e.jsx("h3",{className:"text-lg font-medium text-gray-800",children:o.title}),e.jsxs("span",{className:"ml-2 px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:[i.length," published, ",d.length," ","draft"]}),e.jsx(v,{path:u?Bt:Ht,size:1,className:"ml-auto text-gray-400"})]}),u&&e.jsx(e.Fragment,{children:c.length===0?e.jsx("p",{className:"text-gray-500 text-sm italic mt-4",children:"No checklists created yet."}):e.jsxs("div",{className:"space-y-3 mt-4",children:[i.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Published Checklists"}),i.map(m=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:m.title}),e.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[m.items.length," item",m.items.length!==1?"s":""]}),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${m.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:m.status==="published"?"Published":"Draft"}),m.autoSchedule&&e.jsxs("span",{className:"ml-2 px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full flex items-center",children:[e.jsx(v,{path:st,size:.7,className:"mr-1"}),"Auto-Scheduled"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>t(m),className:"px-3 py-1 text-sm text-[#4ECDC4] hover:bg-[#4ECDC4] hover:text-white rounded-md transition-colors",children:"Edit & Manage"}),e.jsx("button",{onClick:()=>s(m.id),className:"p-1 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:e.jsx(v,{path:Ve,size:.8})})]})]})},m.id))]}),d.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Draft Checklists"}),d.map(m=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:m.title}),e.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[m.items.length," item",m.items.length!==1?"s":""]}),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${m.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:m.status==="published"?"Published":"Draft"}),m.autoSchedule&&e.jsxs("span",{className:"ml-2 px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full flex items-center",children:[e.jsx(v,{path:st,size:.7,className:"mr-1"}),"Auto-Scheduled"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>t(m),className:"px-3 py-1 text-sm text-[#4ECDC4] hover:bg-[#4ECDC4] hover:text-white rounded-md transition-colors",children:"Edit & Manage"}),e.jsx("button",{onClick:()=>s(m.id),className:"p-1 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:e.jsx(v,{path:Ve,size:.8})})]})]})},m.id))]})]})})]},o.id)})})},ic=r=>{const t=r.data&&typeof r.data=="object"&&r.data!==null?r.data.expiration:null;if(!t&&!r.expiryDate)return null;const s=new Date(String(t||r.expiryDate||"")),a=new Date,n=new Date;return n.setDate(a.getDate()+30),s<a?{status:"expired",color:"text-red-600",bgColor:"bg-red-50"}:s<=n?{status:"expiring-soon",color:"text-orange-600",bgColor:"bg-orange-50"}:{status:"valid",color:"text-green-600",bgColor:"bg-green-50"}},lc=r=>new Date(r).toLocaleDateString(),St=(r,t)=>({searchQuery:r.trim()||void 0,category:t.category||void 0,manufacturer:t.manufacturer||void 0,supplier:t.supplier||void 0,reorder_point:t.reorder_point?parseInt(t.reorder_point):void 0,expiryDate:t.expiryDate||void 0,sortBy:t.sortBy,sortDirection:t.sortDirection}),pr=()=>({category:"",location:"",status:"",manufacturer:"",supplier:"",reorder_point:"",expiryDate:"",sortBy:"name",sortDirection:"asc"});var J=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const wt=()=>J(null,null,function*(){return yield lt.getCurrentFacilityId()}),Et=(r,t=0)=>typeof r=="number"&&!isNaN(r)?r:t,gr=(r,t="Unknown")=>typeof r=="string"&&r.trim()!==""?r:t,Tt=r=>r instanceof Error?r.message:typeof r=="string"?r:"An unknown error occurred";class je{static getItemsFromSupabase(t,s){return J(this,null,function*(){try{const a=s||(yield wt()),n=ut(a),l=ue.getFilterSummary(t);if(!ue.validateFilters(t))throw new Error("Invalid filter parameters");const o=yield ue.applyFiltersToTable(n,"inventory_items",t),{data:c,error:i,count:d}=yield o.eq("facility_id",a).order("created_at",{ascending:!1});if(i)throw console.error("Error fetching items from Supabase:",i),i;return{data:(c==null?void 0:c.map(m=>Ha.transformFromSupabase(m)))||[],error:null,count:d||0}}catch(a){throw console.error("Failed to fetch items from Supabase:",a),a}})}static getItemByIdFromSupabase(t){return J(this,null,function*(){try{return yield Ie.getItemById(t)}catch(s){return console.error("Error fetching item by ID:",s),null}})}static createItemInSupabase(t){return J(this,null,function*(){try{return yield Ie.processItemCreation(t)}catch(s){throw console.error("Error creating item:",s),new Error(`Failed to create item: ${Tt(s)}`)}})}static updateItemInSupabase(t,s){return J(this,null,function*(){try{return yield Ie.processItemUpdate(t,s)}catch(a){throw console.error("Error updating item:",a),new Error(`Failed to update item: ${Tt(a)}`)}})}static deleteItemFromSupabase(t){return J(this,null,function*(){try{yield Ie.processItemDeletion(t)}catch(s){throw new Error(`Failed to delete item: ${Tt(s)}`)}})}static getCategories(t){return J(this,null,function*(){try{const s=t||(yield wt()),a=ut(s),n=yield ue.applyFiltersToCategories(a,"inventory_items").eq("facility_id",s);if(!n)throw console.error("❌ Error fetching categories"),new Error("Failed to fetch categories");return ue.extractUniqueValues(n.data,"category").sort()}catch(s){return console.error("Error fetching categories:",s),[]}})}static getCategoriesFromSupabase(){return J(this,null,function*(){return this.getCategories()})}static getLocations(t){return J(this,null,function*(){try{const s=t||(yield wt()),a=ut(s),n=yield ue.applyFiltersToLocations(a,"inventory_items").eq("facility_id",s);if(!n)throw console.error("❌ Error fetching locations"),new Error("Failed to fetch locations");return ue.extractUniqueValues(n.data,"location").sort()}catch(s){return console.error("Error fetching locations:",s),[]}})}static getLocationsFromSupabase(){return J(this,null,function*(){return this.getLocations()})}static getInventoryStatsFromSupabase(){return J(this,null,function*(){try{const t=yield Ie.getItems(),s=t.length,a=t.filter(o=>o.status==="active").length,n=t.reduce((o,c)=>o+Et(c.unit_cost),0),l={};return t.forEach(o=>{const c=gr(o.category);l[c]=(l[c]||0)+1}),{totalItems:s,activeItems:a,totalValue:n,categories:l}}catch(t){return console.error("Error fetching inventory stats:",t),{totalItems:0,activeItems:0,totalValue:0,categories:{}}}})}static calculateTotalValue(t){try{return t.reduce((a,n)=>{const l=Et(n.unit_cost),o=Et(n.quantity,1);return a+l*o},0)}catch(s){return console.error("Error calculating total value:",s),0}}static getCategoryBreakdown(t){try{const s={};return t.forEach(a=>{const n=gr(a.category);s[n]=(s[n]||0)+1}),s}catch(s){return console.error("Error calculating category breakdown:",s),{}}}}var oc=Object.defineProperty,cc=Object.defineProperties,dc=Object.getOwnPropertyDescriptors,hr=Object.getOwnPropertySymbols,uc=Object.prototype.hasOwnProperty,mc=Object.prototype.propertyIsEnumerable,xr=(r,t,s)=>t in r?oc(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,fr=(r,t)=>{for(var s in t||(t={}))uc.call(t,s)&&xr(r,s,t[s]);if(hr)for(var s of hr(t))mc.call(t,s)&&xr(r,s,t[s]);return r},pc=(r,t)=>cc(r,dc(t)),Ne=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});class gc{searchInventoryItems(t){return Ne(this,null,function*(){try{const s=pc(fr(fr({search:t.searchQuery,category:t.category},t.manufacturer&&{search:`${t.searchQuery||""} ${t.manufacturer}`.trim()}),t.supplier&&{search:`${t.searchQuery||""} ${t.supplier}`.trim()}),{minQuantity:t.reorder_point}),a=yield je.getItemsFromSupabase(s);if(a.error)return console.error("Error fetching inventory items:",a.error),[];let n=a.data||[];if(t.manufacturer&&!t.searchQuery&&(n=n.filter(l=>(l.data&&typeof l.data=="object"&&l.data!==null?l.data.manufacturer:null)===t.manufacturer)),t.supplier&&!t.searchQuery&&(n=n.filter(l=>(l.data&&typeof l.data=="object"&&l.data!==null?l.data.supplier:null)===t.supplier)),t.expiryDate){const l=new Date,o=new Date;o.setDate(l.getDate()+30),n=n.filter(c=>{const i=c.data&&typeof c.data=="object"&&c.data!==null?c.data.expiration:null;if(!i&&!c.expiration_date)return!1;const d=new Date(String(i||c.expiration_date||""));switch(t.expiryDate){case"expired":return d<l;case"expiring-soon":return d>=l&&d<=o;case"valid":return d>o;default:return!0}})}return t.sortBy&&n.sort((l,o)=>{let c,i;switch(t.sortBy){case"name":c=l.name||"",i=o.name||"";break;case"category":c=l.category||"",i=o.category||"";break;case"quantity":c=l.quantity||0,i=o.quantity||0;break;case"expiration":{const d=l.data&&typeof l.data=="object"&&l.data!==null?l.data.expiration:null,u=o.data&&typeof o.data=="object"&&o.data!==null?o.data.expiration:null;c=new Date(String(d||l.expiration_date||"")),i=new Date(String(u||o.expiration_date||""));break}case"unit_cost":c=l.unit_cost||0,i=o.unit_cost||0;break;default:return 0}return t.sortDirection==="desc"?c>i?-1:c<i?1:0:c<i?-1:c>i?1:0}),n}catch(s){return console.error("Error in searchInventoryItems:",s),[]}})}getCategories(){return Ne(this,null,function*(){try{const t=yield je.getItemsFromSupabase();return t.error?(console.error("Error fetching categories:",t.error),[]):Array.from(new Set((t.data||[]).map(a=>a.category).filter(a=>!!a))).sort()}catch(t){return console.error("Error in getCategories:",t),[]}})}getManufacturers(){return Ne(this,null,function*(){try{const t=yield je.getItemsFromSupabase();return t.error?(console.error("Error fetching manufacturers:",t.error),[]):Array.from(new Set((t.data||[]).map(a=>a.data&&typeof a.data=="object"&&a.data!==null?a.data.manufacturer:null).filter(a=>!!a))).sort()}catch(t){return console.error("Error in getManufacturers:",t),[]}})}getSuppliers(){return Ne(this,null,function*(){try{const t=yield je.getItemsFromSupabase();return t.error?(console.error("Error fetching suppliers:",t.error),[]):Array.from(new Set((t.data||[]).map(a=>a.data&&typeof a.data=="object"&&a.data!==null?a.data.supplier:null).filter(a=>!!a))).sort()}catch(t){return console.error("Error in getSuppliers:",t),[]}})}getLocations(){return Ne(this,null,function*(){try{const t=yield je.getItemsFromSupabase();return t.error?(console.error("Error fetching locations:",t.error),[]):Array.from(new Set((t.data||[]).map(a=>a.location).filter(a=>!!a))).sort()}catch(t){return console.error("Error in getLocations:",t),[]}})}getStatuses(){return Ne(this,null,function*(){try{const t=yield je.getItemsFromSupabase();return t.error?(console.error("Error fetching statuses:",t.error),[]):Array.from(new Set((t.data||[]).map(a=>a.status).filter(a=>!!a))).sort()}catch(t){return console.error("Error in getStatuses:",t),[]}})}}const ge=new gc;var At=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const hc=()=>{const[r,t]=g.useState([]),[s,a]=g.useState(!1),[n,l]=g.useState(null),[o,c]=g.useState([]),[i,d]=g.useState([]),[u,m]=g.useState([]),[h,j]=g.useState([]),[p,x]=g.useState([]);g.useEffect(()=>{At(null,null,function*(){try{const[f,A,R,M,B]=yield Promise.all([ge.getCategories(),ge.getLocations(),ge.getStatuses(),ge.getManufacturers(),ge.getSuppliers()]);c(f),d(A),m(R),j(M),x(B)}catch(f){l(f instanceof Error?f.message:"Failed to load filter options")}})},[]);const N=g.useCallback(b=>At(null,null,function*(){a(!0),l(null);try{const f=yield ge.searchInventoryItems(b);t(f)}catch(f){l(f instanceof Error?f.message:"Failed to search inventory")}finally{a(!1)}}),[]),_=g.useCallback(()=>At(null,null,function*(){a(!0),l(null);try{const b=yield ge.searchInventoryItems({});t(b)}catch(b){l(b instanceof Error?b.message:"Failed to clear search")}finally{a(!1)}}),[]);return{inventoryItems:r,isLoading:s,error:n,categories:o,locations:i,statuses:u,manufacturers:h,suppliers:p,searchInventory:N,clearSearch:_}},xc=({isOpen:r,selectedItems:t=[],onSelectItems:s,onClose:a})=>{const{inventoryItems:n,isLoading:l,error:o,categories:c,locations:i,statuses:d,searchInventory:u,clearSearch:m}=hc(),[h,j]=g.useState(""),[p,x]=g.useState(!1),[N,_]=g.useState(pr()),[b,f]=g.useState(t);return g.useEffect(()=>{if(!r)return;const $=setTimeout(()=>{if(h.trim()||Object.values(N).some(G=>G!=="")){const G=St(h,N);u(G)}},300);return()=>clearTimeout($)},[h,N,r,u]),g.useEffect(()=>{if(r){m(),f(t);const $=St(h,N);u($)}},[r,t,m,u,h,N]),g.useEffect(()=>{f(t)},[t]),{searchQuery:h,showFilters:p,filters:N,localSelectedItems:b,inventoryItems:n,isLoading:l,error:o,categories:c,locations:i,statuses:d,setSearchQuery:j,setShowFilters:x,setFilters:_,handleClearFilters:()=>{_(pr()),j(""),m().then(()=>{setTimeout(()=>{u({})},100)})},handleItemToggle:$=>{const G=b.some(H=>H.id===$.id);f(G?H=>H.filter(E=>E.id!==$.id):H=>[...H,$])},handleConfirmSelection:()=>{s(b),a()},handleSearch:()=>{const $=St(h,N);u($)}}},fc=({onClose:r})=>e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Search Inventory Items"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Select items for your checklist with advanced filtering"})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(v,{path:we,size:1.5})})]}),bc=({searchQuery:r,onSearchChange:t,onSearch:s})=>{const a=n=>{n.key==="Enter"&&s()};return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(v,{path:Pa,size:1,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search items...",value:r,onChange:n=>t(n.target.value),onKeyPress:a,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsx("button",{onClick:s,className:"w-full mt-2 px-4 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3db8b0] transition-colors",children:"Search"})]})};var yc=Object.defineProperty,vc=Object.defineProperties,jc=Object.getOwnPropertyDescriptors,br=Object.getOwnPropertySymbols,Nc=Object.prototype.hasOwnProperty,_c=Object.prototype.propertyIsEnumerable,yr=(r,t,s)=>t in r?yc(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Cc=(r,t)=>{for(var s in t||(t={}))Nc.call(t,s)&&yr(r,s,t[s]);if(br)for(var s of br(t))_c.call(t,s)&&yr(r,s,t[s]);return r},Sc=(r,t)=>vc(r,jc(t));const wc=({filters:r,onFiltersChange:t,onClearFilters:s,categories:a,showFilters:n,onToggleFilters:l})=>{const o=(c,i)=>{t(Sc(Cc({},r),{[c]:i}))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("button",{onClick:l,className:"flex items-center space-x-2 text-gray-700 hover:text-gray-900",children:[e.jsx(v,{path:Oa,size:1}),e.jsx("span",{children:"Filters"}),e.jsx(v,{path:Da,size:1,className:`transform transition-transform ${n?"rotate-180":""}`})]})}),e.jsx(ca,{children:n&&e.jsxs(Ft.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"space-y-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{id:"category-filter",value:r.category,onChange:c=>o("category",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"",children:"All Categories"}),a.map(c=>e.jsx("option",{value:c,children:c},c))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"min-quantity-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Quantity"}),e.jsx("input",{id:"min-quantity-filter",type:"number",value:r.reorder_point,onChange:c=>o("reorder_point",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"max-quantity-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Quantity"}),e.jsx("input",{id:"max-quantity-filter",type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",placeholder:"∞"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"expiry-status-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Status"}),e.jsxs("select",{id:"expiry-status-filter",value:r.expiryDate,onChange:c=>o("expiryDate",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"",children:"All Items"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"expiring-soon",children:"Expiring Soon (30 days)"}),e.jsx("option",{value:"valid",children:"Valid"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sort-by-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),e.jsxs("select",{id:"sort-by-filter",value:r.sortBy,onChange:c=>o("sortBy",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"category",children:"Category"}),e.jsx("option",{value:"quantity",children:"Quantity"}),e.jsx("option",{value:"expiration",children:"Expiration"}),e.jsx("option",{value:"unit_cost",children:"Unit Cost"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sort-direction-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Direction"}),e.jsxs("select",{id:"sort-direction-filter",value:r.sortDirection,onChange:c=>o("sortDirection",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"asc",children:"Ascending"}),e.jsx("option",{value:"desc",children:"Descending"})]})]})]}),e.jsx("button",{onClick:s,className:"w-full px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Clear Filters"})]})})]})},Ec=({selectedItems:r})=>e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Selected Items"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r.length," item",r.length!==1?"s":""," ","selected"]}),r.length>0&&e.jsxs("div",{className:"mt-2 space-y-1",children:[r.slice(0,3).map(t=>e.jsx("div",{className:"text-xs text-gray-600 truncate",children:t.name},t.id)),r.length>3&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",r.length-3," more"]})]})]}),Tc=({item:r,isSelected:t,onToggle:s})=>{const a=ic(r),n=l=>{var o;return(o=r.data)==null?void 0:o[l]};return e.jsx(Ft.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`border rounded-lg p-4 cursor-pointer transition-all ${t?"border-[#4ECDC4] bg-[#4ECDC4]/5":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>s(r),children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:r.name}),t&&e.jsx("span",{className:"px-2 py-1 text-xs bg-[#4ECDC4] text-white rounded-full",children:"Selected"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(v,{path:qe,size:.8}),e.jsx("span",{children:r.category})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(v,{path:Ra,size:.8}),e.jsx("span",{children:r.location})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"font-medium",children:"Quantity:"}),e.jsxs("span",{children:[r.quantity||0," ",String(n("unit")||"units")]})]})]}),e.jsxs("div",{className:"space-y-1",children:[n("manufacturer")?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(v,{path:ka,size:.8}),e.jsx("span",{children:String(n("manufacturer"))})]}):null,n("supplier")?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(v,{path:La,size:.8}),e.jsx("span",{children:String(n("supplier"))})]}):null,n("expiration")||r.expiryDate?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(v,{path:st,size:.8}),e.jsxs("span",{children:["Expires:"," ",lc(String(n("expiration")||r.expiryDate||""))]})]}):null]})]}),a&&e.jsxs("div",{className:`mt-2 inline-block px-2 py-1 text-xs rounded-full ${a.bgColor} ${a.color}`,children:[a.status==="expired"&&"Expired",a.status==="expiring-soon"&&"Expiring Soon",a.status==="valid"&&"Valid"]})]})})})},Ac=({inventoryItems:r,selectedItems:t,onItemToggle:s,isLoading:a,error:n})=>e.jsxs("div",{className:"w-2/3 p-6 overflow-y-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Search Results"}),e.jsx("p",{className:"text-sm text-gray-600",children:a?"Searching...":`${r.length} items found`})]})}),n&&e.jsxs("div",{className:"flex items-center space-x-2 text-red-500 mb-4",children:[e.jsx(v,{path:ne,size:1}),e.jsx("span",{children:n})]}),a&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{path:$a,size:1,className:"animate-spin text-[#4ECDC4]"}),e.jsx("span",{className:"text-gray-600",children:"Searching inventory..."})]})}),!a&&!n&&e.jsx("div",{className:"space-y-3",children:r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v,{path:qe,size:3,className:"mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No items found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search criteria."})]}):r.map(l=>{const o=t.some(c=>c.id===l.id);return e.jsx(Tc,{item:l,isSelected:o,onToggle:s},l.id)})})]}),Ic=({isOpen:r,onClose:t,onSelectItems:s,selectedItems:a=[]})=>{const{searchQuery:n,showFilters:l,filters:o,localSelectedItems:c,inventoryItems:i,isLoading:d,error:u,categories:m,locations:h,statuses:j,setSearchQuery:p,setShowFilters:x,setFilters:N,handleClearFilters:_,handleItemToggle:b,handleConfirmSelection:f,handleSearch:A}=xc({isOpen:r,selectedItems:a,onSelectItems:s,onClose:t});return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(Ft.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[e.jsx(fc,{onClose:t}),e.jsxs("div",{className:"flex h-[calc(90vh-140px)]",children:[e.jsxs("div",{className:"w-1/3 border-r border-gray-200 p-6 overflow-y-auto",children:[e.jsx(bc,{searchQuery:n,onSearchChange:p,onSearch:A}),e.jsx(wc,{filters:o,onFiltersChange:N,onClearFilters:_,categories:m,locations:h,statuses:j,showFilters:l,onToggleFilters:()=>x(!l)}),e.jsx(Ec,{selectedItems:c})]}),e.jsx(Ac,{inventoryItems:i,selectedItems:c,onItemToggle:b,isLoading:d,error:u})]}),e.jsx("div",{className:"flex justify-end p-6 border-t border-gray-200",children:e.jsxs("button",{onClick:f,disabled:c.length===0,className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3db8b0] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Confirm Selection (",c.length,")"]})})]})}):null};var Pc=Object.defineProperty,Oc=Object.defineProperties,Dc=Object.getOwnPropertyDescriptors,vr=Object.getOwnPropertySymbols,Rc=Object.prototype.hasOwnProperty,kc=Object.prototype.propertyIsEnumerable,jr=(r,t,s)=>t in r?Pc(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Re=(r,t)=>{for(var s in t||(t={}))Rc.call(t,s)&&jr(r,s,t[s]);if(vr)for(var s of vr(t))kc.call(t,s)&&jr(r,s,t[s]);return r},ke=(r,t)=>Oc(r,Dc(t)),Nr=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Lc=({selectedChecklist:r,onAddItem:t,onUpdateItem:s,onDeleteItem:a,onGenerateAIItemSuggestions:n,showAIItemSuggestions:l,isGeneratingSuggestions:o,aiItemSuggestions:c,onApplyAIItemSuggestion:i,onCloseAISuggestions:d,showSuccessMessage:u})=>{const[m,h]=g.useState(!1),[j,p]=g.useState([]),[x,N]=g.useState(!1),[_,b]=g.useState(null),[f,A]=g.useState({title:"",instructions:"",inventoryItemIds:[],sdsId:""}),[R,M]=g.useState(!1),B=()=>{f.title&&f.instructions&&r&&(t({title:f.title,instructions:f.instructions,requiredInventory:j.map(w=>({id:w.id,name:w.name||"",required:1,available:w.quantity||0,used:0,unit:"unit"})),sdsId:f.sdsId||void 0}),A({title:"",instructions:"",inventoryItemIds:[],sdsId:""}),p([]),N(!1))},$=w=>{f.title&&f.instructions&&r&&(s(w,{title:f.title,instructions:f.instructions,requiredInventory:j.map(z=>({id:z.id,name:z.name||"",required:1,available:z.quantity||0,used:0,unit:"unit"})),sdsId:f.sdsId||void 0}),A({title:"",instructions:"",inventoryItemIds:[],sdsId:""}),p([]),b(null))},G=w=>{var z;b(w.id),A({title:w.title,instructions:w.instructions,inventoryItemIds:((z=w.requiredInventory)==null?void 0:z.map(I=>I.id))||[],sdsId:w.sdsId||""});const S=(w.requiredInventory||[]).map(I=>({id:I.id,facility_id:null,name:I.name,quantity:I.available,data:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),reorder_point:null,expiration_date:null,unit_cost:null,category:null,status:null,location:null,supplier:null,cost:null,vendor:null,warranty:null,maintenance_schedule:null,next_due:null,service_provider:null,assigned_to:null,notes:null,tool_id:null,supply_id:null,equipment_id:null,hardware_id:null,p2_status:null,serial_number:null,manufacturer:null,image_url:null,tags:null,favorite:null,tracked:null,barcode:null,sku:null,description:null,current_phase:null,is_active:null,unit:null,expiration:null,purchase_date:null,last_serviced:null,last_updated:null}));p(S)},H=w=>{p(w)},E=(w,z)=>Nr(null,null,function*(){if(w.trim()){M(!0);try{try{const S=yield Vt.askAI(`Generate detailed instructions for checklist item "${w}" in the ${z||(r==null?void 0:r.category)} category. Provide step-by-step instructions that are clear and actionable.`,`Category: ${z||(r==null?void 0:r.category)}, Title: ${w}`);A(I=>ke(Re({},I),{instructions:S}))}catch(S){console.warn("AI service failed, using fallback description:",S);const I=yield P(w,z||(r==null?void 0:r.category));A(Q=>ke(Re({},Q),{instructions:I}))}}catch(S){console.error("Error generating AI description:",S),A(I=>ke(Re({},I),{instructions:`Complete ${w.toLowerCase()} following established procedures and safety protocols.`}))}finally{M(!1)}}}),F=w=>{if(A(z=>ke(Re({},z),{title:w})),w.length>=5&&!f.instructions){const z=setTimeout(()=>{E(w)},1e3);return()=>clearTimeout(z)}return()=>{}},P=(w,z)=>Nr(null,null,function*(){return yield new Promise(I=>setTimeout(I,800)),{setup:`Perform ${w.toLowerCase()} according to facility protocols. Ensure all equipment is properly prepared and safety measures are in place.`,patient:`Complete ${w.toLowerCase()} with patient safety as the priority. Follow infection control protocols and maintain patient privacy.`,weekly:`Conduct thorough ${w.toLowerCase()} as part of weekly maintenance schedule. Document all activities and report any issues.`,public:`Execute ${w.toLowerCase()} in public areas following facility standards. Maintain professional appearance and ensure accessibility.`,deep:`Perform intensive ${w.toLowerCase()} using specialized equipment and procedures. Follow all safety protocols and containment measures.`}[z]||`Complete ${w.toLowerCase()} following established procedures and safety protocols.`});return e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-md font-medium",children:"Checklist Items"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:n,disabled:o,className:"flex items-center px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:bg-gray-400 transition-colors",title:"Get AI suggestions for checklist items",children:[e.jsx(v,{path:Ma,size:.8,className:"mr-1"}),o?"Generating...":"AI Suggestions"]}),e.jsxs("button",{onClick:()=>{N(!0),b(null),A({title:"",instructions:"",inventoryItemIds:[],sdsId:""}),p([])},className:"flex items-center px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors",children:[e.jsx(v,{path:he,size:1,className:"mr-2"}),"Add Item"]})]})]}),l&&e.jsxs("div",{className:"mb-4 p-4 border border-purple-200 rounded-lg bg-purple-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h5",{className:"text-sm font-medium text-purple-800 flex items-center",children:[e.jsx(v,{path:$e,size:.8,className:"mr-1"}),"AI Item Suggestions"]}),e.jsx("button",{onClick:d,className:"text-purple-600 hover:text-purple-800",children:e.jsx(v,{path:we,size:.8})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:c.map((w,z)=>e.jsxs("div",{className:"border border-purple-200 rounded-lg p-3 bg-white",children:[e.jsx("h6",{className:"font-medium text-purple-800 mb-1",children:w.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:w.instructions}),w.suggestedInventory.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Suggested: "}),e.jsx("span",{className:"text-xs text-purple-600",children:w.suggestedInventory.join(", ")})]}),e.jsx("button",{onClick:()=>i(w),className:"w-full px-3 py-1 text-sm bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors",children:"Use This Item"})]},z))})]}),u&&e.jsx("div",{className:"mb-4 p-3 border border-green-200 rounded-lg bg-green-50",children:e.jsxs("div",{className:"flex items-center text-green-800",children:[e.jsx(v,{path:tt,size:.8,className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:u})]})}),e.jsxs("div",{className:"space-y-3 mb-4",children:[r.items.map(w=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-3 bg-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-gray-800",children:w.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:w.instructions}),w.requiredInventory&&w.requiredInventory.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Required: "}),w.requiredInventory.map(z=>z.name).join(", ")]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-3",children:[e.jsx("button",{onClick:()=>G(w),className:"p-1 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:e.jsx(v,{path:Ce,size:.8})}),e.jsx("button",{onClick:()=>a(w.id),className:"p-1 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:e.jsx(v,{path:Ve,size:.8})})]})]})},w.id)),r.items.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:'No items added yet. Click "Add Item" to get started.'})]}),x&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[e.jsx("h5",{className:"font-medium mb-3",children:_?"Edit Item":"Add New Item"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"item-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Title"}),e.jsx("input",{id:"item-title",type:"text",value:f.title,onChange:w=>F(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",placeholder:"e.g., Clean and sanitize surfaces"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center",children:["Instructions",R&&e.jsxs("span",{className:"ml-2 text-xs text-blue-600 flex items-center",children:[e.jsx(v,{path:$e,size:.6,className:"mr-1 animate-pulse"}),"AI generating..."]})]}),f.title&&!R&&e.jsxs("button",{type:"button",onClick:()=>E(f.title),className:"text-xs text-blue-600 hover:text-blue-800 flex items-center",title:"Generate AI description",children:[e.jsx(v,{path:$e,size:.6,className:"mr-1"}),"AI Generate"]})]}),e.jsx("textarea",{value:f.instructions,onChange:w=>A(ke(Re({},f),{instructions:w.target.value})),className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] ${R?"bg-blue-50 border-blue-200":""}`,rows:3,placeholder:R?"AI is generating instructions...":"Detailed instructions for this task...",disabled:R})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"inventory-select",className:"block text-sm font-medium text-gray-700 mb-1",children:"Required Inventory"}),e.jsx("button",{id:"inventory-select",onClick:()=>h(!0),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-left focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:j.length>0?`${j.length} item(s) selected`:"Click to select required inventory items"}),j.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:j.map(w=>e.jsxs("div",{className:"text-sm text-gray-600",children:["• ",w.name]},w.id))})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{N(!1),b(null),A({title:"",instructions:"",inventoryItemIds:[],sdsId:""}),p([])},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{onClick:()=>_?$(_):B(),className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac]",children:_?"Update Item":"Add Item"})]})]})]}),e.jsx(Ic,{isOpen:m,onClose:()=>h(!1),onSelectItems:H,selectedItems:j})]})};var $c=Object.defineProperty,Mc=Object.defineProperties,Fc=Object.getOwnPropertyDescriptors,_r=Object.getOwnPropertySymbols,zc=Object.prototype.hasOwnProperty,Vc=Object.prototype.propertyIsEnumerable,Cr=(r,t,s)=>t in r?$c(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Gc=(r,t)=>{for(var s in t||(t={}))zc.call(t,s)&&Cr(r,s,t[s]);if(_r)for(var s of _r(t))Vc.call(t,s)&&Cr(r,s,t[s]);return r},qc=(r,t)=>Mc(r,Fc(t)),Sr=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Uc=()=>{const{checklists:r,updateChecklist:t,deleteChecklist:s,publishChecklist:a,addItemToChecklist:n,updateChecklistItem:l,deleteChecklistItem:o}=Xt(),[c,i]=g.useState(!1),[d,u]=g.useState(null),[m,h]=g.useState(!1),j=S=>{if(d)t(d.id,S);else{const{addChecklist:I}=Xt.getState();I(qc(Gc({},S),{title:S.title||"New Checklist",items:[],status:"draft"}))}u(null),i(!1)},p=()=>{d&&(a(d.id),u(null))},x=S=>{u(S)},N=()=>{i(!1),u(null)},_=S=>{if(d){n(d.id,S);const I=r.find(Q=>Q.id===d.id);I&&u(I)}},b=(S,I)=>{d&&l(d.id,S,I)},f=S=>{d&&o(d.id,S)},[A,R]=g.useState(!1),[M,B]=g.useState(!1),[$,G]=g.useState([]),[H,E]=g.useState(null),F=()=>Sr(null,null,function*(){if(d){B(!0);try{try{const S=yield Vt.askAI(`Generate 5-7 detailed checklist items for "${d.title}" in the ${d.category} category. Each item should include title, detailed instructions, and suggested inventory requirements.`,`Category: ${d.category}, Title: ${d.title}`),I=w(S);G(I),R(!0)}catch(S){console.warn("AI service failed, using fallback suggestions:",S);const I=yield z(d.category);G(I),R(!0)}}catch(S){console.error("Error generating AI item suggestions:",S);const I=yield z(d.category);G(I),R(!0)}finally{B(!1)}}}),P=S=>{if(!d)return;n(d.id,{title:S.title,instructions:S.instructions,requiredInventory:[],sdsId:void 0});const I=r.find(Q=>Q.id===d.id);I&&u(I),R(!1),E(`✅ Added "${S.title}" to checklist`),setTimeout(()=>E(null),3e3)},w=S=>{try{const I=S.match(/\[[\s\S]*\]/);if(I){const L=JSON.parse(I[0]);if(Array.isArray(L))return L.map(q=>{var X;return{title:q.title||q.name||"Untitled Item",instructions:q.instructions||((X=q.data)==null?void 0:X.description)||q.steps||"No instructions provided",suggestedInventory:Array.isArray(q.suggestedInventory)?q.suggestedInventory:Array.isArray(q.inventory)?q.inventory:Array.isArray(q.requirements)?q.requirements:[]}})}const Q=S.split(`
`).filter(L=>L.trim()),T=[];let C=null;for(const L of Q)if(L.match(/^\d+\./))C&&T.push(C),C={title:L.replace(/^\d+\.\s*/,"").trim(),instructions:"",suggestedInventory:[]};else if(C&&L.trim())if(L.toLowerCase().includes("inventory")||L.toLowerCase().includes("supplies")){const q=L.match(/[^:]+:\s*(.+)/);q&&(C.suggestedInventory=q[1].split(",").map(X=>X.trim()))}else C.instructions+=(C.instructions?" ":"")+L.trim();return C&&T.push(C),T.length>0?T:[{title:"AI-generated item",instructions:S.substring(0,200)+"...",suggestedInventory:[]}]}catch(I){return console.error("Error parsing AI response:",I),[{title:"AI-generated item",instructions:S.substring(0,200)+"...",suggestedInventory:[]}]}},z=S=>Sr(null,null,function*(){return yield new Promise(Q=>setTimeout(Q,1500)),[{title:"Surface Disinfection",instructions:"Use EPA-approved disinfectant wipes. Clean all high-touch surfaces including door handles, light switches, and equipment controls. Allow 3-5 minutes contact time for proper disinfection.",suggestedInventory:["Disinfectant Wipes","Nitrile Gloves","Safety Goggles"]},{title:"Equipment Sanitization",instructions:"Clean all medical equipment with appropriate cleaning agents. Pay special attention to patient contact surfaces. Verify equipment is operational after cleaning.",suggestedInventory:["Equipment Cleaning Solution","Microfiber Cloths","Alcohol Wipes"]},{title:"Supply Restocking",instructions:"Check all supply levels and restock as needed. Verify expiration dates on all items. Ensure emergency supplies are readily accessible.",suggestedInventory:["Various Medical Supplies","Storage Containers","Labeling Materials"]},{title:"Safety Equipment Check",instructions:"Verify all safety equipment is present and functional. Test emergency systems and alarms. Check fire extinguishers and emergency exits.",suggestedInventory:["Safety Equipment","Testing Tools","Documentation Forms"]},{title:"Quality Control Verification",instructions:"Perform final quality control check. Verify all cleaning standards have been met. Document completion and any issues found.",suggestedInventory:["Quality Control Checklist","Documentation Forms","Camera for Documentation"]}]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>h(!m),className:"flex items-center text-xl font-semibold text-gray-800 hover:text-gray-600 transition-colors",children:[e.jsx(v,{path:m?Bt:Ht,size:1.2,className:"mr-2"}),"Checklist Management",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",r.length," total)"]})]}),e.jsxs("button",{onClick:()=>{i(!0),u(null)},className:"flex items-center px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors",children:[e.jsx(v,{path:he,size:1,className:"mr-2"}),"Add Checklist"]})]}),m&&e.jsx(nc,{checklists:r,onEditChecklist:x,onDeleteChecklist:s})]}),(d||c)&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto scrollbar-hide",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800",children:c?"Add New Checklist":`Edit: ${d==null?void 0:d.title}`}),e.jsx("button",{onClick:N,className:"p-1 text-gray-500 hover:text-gray-700",children:e.jsx(v,{path:we,size:1.2})})]}),e.jsx(rc,{selectedChecklist:d,isAddingChecklist:c,onCancel:N,onSaveDraft:j,onPublish:p}),d&&e.jsx(Lc,{selectedChecklist:d,onAddItem:_,onUpdateItem:b,onDeleteItem:f,onGenerateAIItemSuggestions:F,showAIItemSuggestions:A,isGeneratingSuggestions:M,aiItemSuggestions:$,onApplyAIItemSuggestion:P,onCloseAISuggestions:()=>R(!1),showSuccessMessage:H})]})})]})},Bc={aiEnabled:!1,predictiveCleaningEnabled:!1,smartScheduling:!1,contaminationPrediction:!1,resourceOptimization:!1,efficiencyAnalytics:!1,smartRoomManagementEnabled:!1,automaticPriorityAssignment:!1,riskAssessment:!1,trendAnalysis:!1,predictiveMaintenance:!1,supplyOptimizationEnabled:!1,staffScheduling:!1,costOptimization:!1,inventoryPrediction:!1,workloadBalancing:!1,qualityAssuranceEnabled:!1,complianceMonitoring:!1,auditTrailEnhancement:!1,performanceTracking:!1,automatedReporting:!1,realTimeMonitoringEnabled:!1,anomalyDetection:!1,smartNotifications:!1,statusUpdates:!1,emergencyAlerts:!1,aiConfidenceThreshold:.85,aiDataRetentionDays:90,realTimeProcessingEnabled:!1,batchProcessingEnabled:!1,dataSharingEnabled:!1,localAIProcessingEnabled:!1,encryptedDataTransmission:!0,aiModelTraining:!1},Hc={defaultCleaningDuration:45,qualityScoreThreshold:8,contaminationLevels:["low","medium","high","critical"],cleaningTypes:["routine","deep","emergency","post_procedure"],autoSchedulingEnabled:!1,bufferTimeMinutes:15,maxConcurrentCleanings:3,weekendCleaningEnabled:!0,complianceTrackingEnabled:!0,auditLogRetentionDays:365,regulatoryReportingEnabled:!1,certificationTracking:!1},Yc={emailNotificationsEnabled:!0,dailySummaryEnabled:!0,urgentAlertsEnabled:!0,completionNotificationsEnabled:!1,inAppNotificationsEnabled:!0,pushNotificationsEnabled:!1,soundEnabled:!0,adminNotificationsEnabled:!0,staffNotificationsEnabled:!1,supervisorNotificationsEnabled:!0},D={defaultCleaningDuration:{min:15,max:180},qualityScoreThreshold:{min:1,max:10},bufferTimeMinutes:{min:0,max:60},maxConcurrentCleanings:{min:1,max:10},auditLogRetentionDays:{min:30,max:2555},aiConfidenceThreshold:{min:.1,max:1,step:.05},aiDataRetentionDays:{min:30,max:1095}},Wc=[{id:"general",label:"General",icon:ee},{id:"ai",label:"AI & Analytics",icon:Fe},{id:"protocols",label:"Cleaning Protocols",icon:ze},{id:"rooms",label:"Room Management",icon:Me},{id:"checklists",label:"Checklists",icon:ze},{id:"notifications",label:"Notifications",icon:Xr},{id:"compliance",label:"Compliance",icon:Me},{id:"advanced",label:"Advanced",icon:xe}],wr={predictiveCleaning:[{key:"smartScheduling",label:"Smart Scheduling",desc:"AI-powered cleaning schedule optimization"},{key:"contaminationPrediction",label:"Contamination Prediction",desc:"Predict when rooms need cleaning"},{key:"resourceOptimization",label:"Resource Optimization",desc:"Optimize supplies and staff allocation"},{key:"efficiencyAnalytics",label:"Efficiency Analytics",desc:"Track and improve cleaning efficiency"}],smartRoomManagement:[{key:"automaticPriorityAssignment",label:"Automatic Priority Assignment",desc:"AI-driven room priority calculation"},{key:"riskAssessment",label:"Risk Assessment",desc:"Automated contamination risk analysis"},{key:"trendAnalysis",label:"Trend Analysis",desc:"Identify cleaning pattern trends"},{key:"predictiveMaintenance",label:"Predictive Maintenance",desc:"Equipment maintenance predictions"}]},Er={email:[{key:"emailNotificationsEnabled",label:"Enable Email Notifications"},{key:"dailySummaryEnabled",label:"Daily Summary Reports"},{key:"urgentAlertsEnabled",label:"Urgent Alerts"},{key:"completionNotificationsEnabled",label:"Task Completion Notifications"}],inApp:[{key:"inAppNotificationsEnabled",label:"Enable In-App Notifications"},{key:"pushNotificationsEnabled",label:"Push Notifications"},{key:"soundEnabled",label:"Sound Alerts"}]},Kc=3e3,Qc=r=>{const t=[];return(r.aiConfidenceThreshold<D.aiConfidenceThreshold.min||r.aiConfidenceThreshold>D.aiConfidenceThreshold.max)&&t.push(`AI confidence threshold must be between ${D.aiConfidenceThreshold.min} and ${D.aiConfidenceThreshold.max}`),(r.aiDataRetentionDays<D.aiDataRetentionDays.min||r.aiDataRetentionDays>D.aiDataRetentionDays.max)&&t.push(`AI data retention days must be between ${D.aiDataRetentionDays.min} and ${D.aiDataRetentionDays.max}`),t},Zc=r=>{const t=[];return(r.defaultCleaningDuration<D.defaultCleaningDuration.min||r.defaultCleaningDuration>D.defaultCleaningDuration.max)&&t.push(`Default cleaning duration must be between ${D.defaultCleaningDuration.min} and ${D.defaultCleaningDuration.max} minutes`),(r.qualityScoreThreshold<D.qualityScoreThreshold.min||r.qualityScoreThreshold>D.qualityScoreThreshold.max)&&t.push(`Quality score threshold must be between ${D.qualityScoreThreshold.min} and ${D.qualityScoreThreshold.max}`),(r.bufferTimeMinutes<D.bufferTimeMinutes.min||r.bufferTimeMinutes>D.bufferTimeMinutes.max)&&t.push(`Buffer time must be between ${D.bufferTimeMinutes.min} and ${D.bufferTimeMinutes.max} minutes`),(r.maxConcurrentCleanings<D.maxConcurrentCleanings.min||r.maxConcurrentCleanings>D.maxConcurrentCleanings.max)&&t.push(`Max concurrent cleanings must be between ${D.maxConcurrentCleanings.min} and ${D.maxConcurrentCleanings.max}`),(r.auditLogRetentionDays<D.auditLogRetentionDays.min||r.auditLogRetentionDays>D.auditLogRetentionDays.max)&&t.push(`Audit log retention days must be between ${D.auditLogRetentionDays.min} and ${D.auditLogRetentionDays.max}`),t},Xc=r=>{const t=[];return!r.emailNotificationsEnabled&&!r.inAppNotificationsEnabled&&t.push("At least one notification method must be enabled"),t},Jc=(r,t,s)=>[...Qc(r),...Zc(t),...Xc(s)],ed=(r,t,s)=>{const a=Jc(r,t,s);return{isValid:a.length===0,errors:a}};var td=Object.defineProperty,sd=Object.defineProperties,rd=Object.getOwnPropertyDescriptors,Tr=Object.getOwnPropertySymbols,ad=Object.prototype.hasOwnProperty,nd=Object.prototype.propertyIsEnumerable,Ar=(r,t,s)=>t in r?td(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,It=(r,t)=>{for(var s in t||(t={}))ad.call(t,s)&&Ar(r,s,t[s]);if(Tr)for(var s of Tr(t))nd.call(t,s)&&Ar(r,s,t[s]);return r},id=(r,t)=>sd(r,rd(t)),dt=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const oa={settings:"/api/environmental-cleaning/settings",aiSettings:"/api/environmental-cleaning/ai-settings",testSync:"/api/environmental-cleaning/test-sync",resetDefaults:"/api/environmental-cleaning/reset-defaults"},Pt={timeout:3e4,retries:3,headers:{"Content-Type":"application/json"}},Wt=(r,t,...s)=>dt(null,[r,t,...s],function*(a,n,l=Pt.retries){try{const o=new AbortController,c=setTimeout(()=>o.abort(),Pt.timeout),i=yield fetch(a,id(It({},n),{signal:o.signal,headers:It(It({},Pt.headers),n.headers)}));if(clearTimeout(c),!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return yield i.json()}catch(o){if(l>0&&o instanceof Error&&o.name==="AbortError")return Wt(a,n,l-1);throw o}}),ld=r=>dt(null,null,function*(){try{const t=yield Wt(oa.settings,{method:"POST",body:JSON.stringify(r)});if(!t.success)throw new Error(t.error||"Failed to save settings")}catch(t){throw console.error("Error saving environmental cleaning settings:",t),new Error("Failed to save settings. Please try again.")}}),od=r=>dt(null,null,function*(){try{const t=yield Wt(oa.aiSettings,{method:"POST",body:JSON.stringify(r)});if(!t.success)throw new Error(t.error||"Failed to save AI settings")}catch(t){throw console.error("Error saving AI settings:",t),new Error("Failed to save AI settings. Please try again.")}}),cd=(r,t,s)=>dt(null,null,function*(){try{r.aiEnabled&&(yield od({aiSettings:r})),yield ld({protocols:t,notifications:s})}catch(a){throw console.error("Error saving all settings:",a),a}}),dd=({protocolSettings:r,onProtocolSettingChange:t})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:ee,size:1.5,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-800",children:"General Settings"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Basic configuration for environmental cleaning"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"defaultCleaningDuration",className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Cleaning Duration (minutes)"}),e.jsx("input",{id:"defaultCleaningDuration",type:"number",value:r.defaultCleaningDuration,onChange:s=>t("defaultCleaningDuration",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:D.defaultCleaningDuration.min,max:D.defaultCleaningDuration.max})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"qualityScoreThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Quality Score Threshold"}),e.jsx("input",{id:"qualityScoreThreshold",type:"number",value:r.qualityScoreThreshold,onChange:s=>t("qualityScoreThreshold",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:D.qualityScoreThreshold.min,max:D.qualityScoreThreshold.max})]})]})]})}),ud=({aiSettings:r,onAISettingChange:t})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:Fe,size:1.5,className:"text-purple-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-800",children:"Master AI Control"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Enable or disable all AI features globally"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiEnabled",className:"text-sm font-medium text-purple-800",children:"Enable AI Features"}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Master switch for all environmental cleaning AI capabilities"})]}),e.jsx("button",{id:"aiEnabled",onClick:()=>t("aiEnabled",!r.aiEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 ${r.aiEnabled?"bg-purple-600":"bg-gray-200"}`,"aria-label":"Enable AI Features",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.aiEnabled?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(v,{path:Fe,size:1.2,className:"text-green-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Predictive Cleaning"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:wr.predictiveCleaning.map(({key:s,label:a,desc:n})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:s,className:"text-sm font-medium text-gray-700",children:a}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n})]}),e.jsx("button",{id:s,onClick:()=>t(s,!r[s]),disabled:!r.aiEnabled,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1 ${r[s]?"bg-green-600":"bg-gray-200"} ${r.aiEnabled?"":"opacity-50 cursor-not-allowed"}`,"aria-label":a,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${r[s]?"translate-x-5":"translate-x-1"}`})})]},s))})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(v,{path:Me,size:1.2,className:"text-blue-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Smart Room Management"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:wr.smartRoomManagement.map(({key:s,label:a,desc:n})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:a}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n})]}),e.jsx("button",{onClick:()=>t(s,!r[s]),disabled:!r.aiEnabled,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 ${r[s]?"bg-blue-600":"bg-gray-200"} ${r.aiEnabled?"":"opacity-50 cursor-not-allowed"}`,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${r[s]?"translate-x-5":"translate-x-1"}`})})]},s))})]})]})]}),md=({protocolSettings:r,onProtocolSettingChange:t})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:ze,size:1.5,className:"text-green-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-green-800",children:"Cleaning Protocols"}),e.jsx("p",{className:"text-sm text-green-700",children:"Configure cleaning procedures and standards"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bufferTimeMinutes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Buffer Time (minutes)"}),e.jsx("input",{id:"bufferTimeMinutes",type:"number",value:r.bufferTimeMinutes,onChange:s=>t("bufferTimeMinutes",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",min:D.bufferTimeMinutes.min,max:D.bufferTimeMinutes.max})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"maxConcurrentCleanings",className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Concurrent Cleanings"}),e.jsx("input",{id:"maxConcurrentCleanings",type:"number",value:r.maxConcurrentCleanings,onChange:s=>t("maxConcurrentCleanings",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",min:D.maxConcurrentCleanings.min,max:D.maxConcurrentCleanings.max})]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"autoSchedulingEnabled",className:"text-sm font-medium text-gray-700",children:"Auto Scheduling"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable automatic cleaning schedule generation"})]}),e.jsx("button",{id:"autoSchedulingEnabled",onClick:()=>t("autoSchedulingEnabled",!r.autoSchedulingEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 ${r.autoSchedulingEnabled?"bg-green-600":"bg-gray-200"}`,"aria-label":"Auto Scheduling",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.autoSchedulingEnabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"weekendCleaningEnabled",className:"text-sm font-medium text-gray-700",children:"Weekend Cleaning"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Allow cleaning tasks on weekends"})]}),e.jsx("button",{id:"weekendCleaningEnabled",onClick:()=>t("weekendCleaningEnabled",!r.weekendCleaningEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 ${r.weekendCleaningEnabled?"bg-green-600":"bg-gray-200"}`,"aria-label":"Weekend Cleaning",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.weekendCleaningEnabled?"translate-x-6":"translate-x-1"}`})})]})]})]})}),pd=({notificationSettings:r,onNotificationSettingChange:t})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:Xr,size:1.5,className:"text-yellow-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-yellow-800",children:"Notification Settings"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Configure how and when you receive notifications"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Email Notifications"}),e.jsx("div",{className:"space-y-3",children:Er.email.map(({key:s,label:a})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:s,className:"text-sm text-gray-700",children:a}),e.jsx("button",{id:s,onClick:()=>t(s,!r[s]),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-1 ${r[s]?"bg-yellow-600":"bg-gray-200"}`,"aria-label":a,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${r[s]?"translate-x-5":"translate-x-1"}`})})]},s))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"In-App Notifications"}),e.jsx("div",{className:"space-y-3",children:Er.inApp.map(({key:s,label:a})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:s,className:"text-sm text-gray-700",children:a}),e.jsx("button",{id:s,onClick:()=>t(s,!r[s]),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-1 ${r[s]?"bg-yellow-600":"bg-gray-200"}`,"aria-label":a,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${r[s]?"translate-x-5":"translate-x-1"}`})})]},s))})]})]})]})}),gd=({protocolSettings:r,onProtocolSettingChange:t})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:Me,size:1.5,className:"text-red-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-red-800",children:"Compliance & Audit"}),e.jsx("p",{className:"text-sm text-red-700",children:"Configure compliance tracking and reporting"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"complianceTrackingEnabled",className:"text-sm font-medium text-gray-700",children:"Compliance Tracking"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Track regulatory compliance automatically"})]}),e.jsx("button",{id:"complianceTrackingEnabled",onClick:()=>t("complianceTrackingEnabled",!r.complianceTrackingEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 ${r.complianceTrackingEnabled?"bg-red-600":"bg-gray-200"}`,"aria-label":"Compliance Tracking",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.complianceTrackingEnabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"auditLogRetentionDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Audit Log Retention (days)"}),e.jsx("input",{id:"auditLogRetentionDays",type:"number",value:r.auditLogRetentionDays,onChange:s=>t("auditLogRetentionDays",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",min:D.auditLogRetentionDays.min,max:D.auditLogRetentionDays.max})]})]})]})}),hd=({aiSettings:r,onAISettingChange:t})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:xe,size:1.5,className:"text-gray-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Advanced Settings"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Advanced configuration and system settings"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiConfidenceThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Confidence Threshold"}),e.jsx("input",{id:"aiConfidenceThreshold",type:"number",value:r.aiConfidenceThreshold,onChange:s=>t("aiConfidenceThreshold",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500",min:D.aiConfidenceThreshold.min,max:D.aiConfidenceThreshold.max,step:D.aiConfidenceThreshold.step}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum confidence for AI predictions"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiDataRetentionDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Retention (days)"}),e.jsx("input",{id:"aiDataRetentionDays",type:"number",value:r.aiDataRetentionDays,onChange:s=>t("aiDataRetentionDays",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500",min:D.aiDataRetentionDays.min,max:D.aiDataRetentionDays.max}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How long to keep AI training data"})]})]})]})});var xd=Object.defineProperty,fd=Object.defineProperties,bd=Object.getOwnPropertyDescriptors,Ir=Object.getOwnPropertySymbols,yd=Object.prototype.hasOwnProperty,vd=Object.prototype.propertyIsEnumerable,Pr=(r,t,s)=>t in r?xd(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Ot=(r,t)=>{for(var s in t||(t={}))yd.call(t,s)&&Pr(r,s,t[s]);if(Ir)for(var s of Ir(t))vd.call(t,s)&&Pr(r,s,t[s]);return r},Dt=(r,t)=>fd(r,bd(t)),jd=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Nd=()=>{const[r,t]=g.useState(Bc),[s,a]=g.useState(Hc),[n,l]=g.useState(Yc),[o,c]=g.useState(null),[i,d]=g.useState(!1);return{aiSettings:r,protocolSettings:s,notificationSettings:n,message:o,isLoading:i,handleAISettingChange:(x,N)=>{t(_=>Dt(Ot({},_),{[x]:N}))},handleProtocolSettingChange:(x,N)=>{a(_=>Dt(Ot({},_),{[x]:N}))},handleNotificationSettingChange:(x,N)=>{l(_=>Dt(Ot({},_),{[x]:N}))},handleSaveSettings:()=>jd(null,null,function*(){try{d(!0),c(null);const x=ed(r,s,n);if(!x.isValid){c({type:"error",text:x.errors[0]||"Validation failed"});return}yield cd(r,s,n),c({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>c(null),Kc)}catch(x){console.error(x),c({type:"error",text:"Failed to save settings. Please try again."})}finally{d(!1)}}),clearMessage:()=>c(null)}},_d=()=>{const[r,t]=g.useState("general"),{aiSettings:s,protocolSettings:a,notificationSettings:n,message:l,isLoading:o,handleAISettingChange:c,handleProtocolSettingChange:i,handleNotificationSettingChange:d,handleSaveSettings:u}=Nd(),m=()=>{switch(r){case"general":return e.jsx(dd,{protocolSettings:a,onProtocolSettingChange:i});case"ai":return e.jsx(ud,{aiSettings:s,onAISettingChange:c});case"protocols":return e.jsx(md,{protocolSettings:a,onProtocolSettingChange:i});case"rooms":return e.jsx(Do,{});case"checklists":return e.jsx(Uc,{});case"notifications":return e.jsx(pd,{notificationSettings:n,onNotificationSettingChange:d});case"compliance":return e.jsx(gd,{protocolSettings:a,onProtocolSettingChange:i});case"advanced":return e.jsx(hd,{aiSettings:s,onAISettingChange:c});default:return null}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Environmental Cleaning Settings"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Configure comprehensive settings for environmental cleaning workflows, AI features, protocols, and compliance."})]}),l&&e.jsx("div",{className:`p-4 rounded-lg border ${l.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{path:l.type==="success"?Ee:ne,size:1,className:"text-current"}),l.text]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:Wc.map(h=>e.jsxs("button",{onClick:()=>t(h.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${r===h.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(v,{path:h.icon,size:1}),h.label||h.name]},h.id))})}),e.jsx("div",{className:"min-h-[400px]",children:m()}),e.jsx("div",{className:"flex justify-end pt-6 border-t",children:e.jsxs("button",{onClick:u,disabled:o,className:"px-6 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#45B7AF] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(v,{path:Ge,size:1}),o?"Saving...":"Save Settings"]})})]})},Z=({title:r,children:t})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700",children:r}),e.jsx("div",{className:"space-y-3",children:t})]});var Cd=Object.defineProperty,Sd=Object.defineProperties,wd=Object.getOwnPropertyDescriptors,Or=Object.getOwnPropertySymbols,Ed=Object.prototype.hasOwnProperty,Td=Object.prototype.propertyIsEnumerable,Dr=(r,t,s)=>t in r?Cd(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Ad=(r,t)=>{for(var s in t||(t={}))Ed.call(t,s)&&Dr(r,s,t[s]);if(Or)for(var s of Or(t))Td.call(t,s)&&Dr(r,s,t[s]);return r},Id=(r,t)=>Sd(r,wd(t));const Pd=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(Id(Ad({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h5",{className:"text-md font-medium text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(v,{path:ee,size:1,className:"text-gray-600"}),"General Settings"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(Z,{title:"Core Features",children:[e.jsx(V,{id:"autoCalculateTotals",checked:r.autoCalculateTotals,onChange:a=>s("autoCalculateTotals",a),label:"Auto-calculate totals"}),e.jsx(V,{id:"requireApprovalForAdjustments",checked:r.requireApprovalForAdjustments,onChange:a=>s("requireApprovalForAdjustments",a),label:"Require approval for adjustments"}),e.jsx(V,{id:"allowNegativeQuantities",checked:r.allowNegativeQuantities,onChange:a=>s("allowNegativeQuantities",a),label:"Allow negative quantities"})]}),e.jsxs(Z,{title:"System Features",children:[e.jsx(V,{id:"enableRealTimeUpdates",checked:r.enableRealTimeUpdates,onChange:a=>s("enableRealTimeUpdates",a),label:"Enable real-time updates"}),e.jsx(V,{id:"enableAuditTrails",checked:r.enableAuditTrails,onChange:a=>s("enableAuditTrails",a),label:"Enable audit trails"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"defaultTransactionType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Default transaction type"}),e.jsxs("select",{id:"defaultTransactionType",value:r.defaultTransactionType,onChange:a=>s("defaultTransactionType",a.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"in",children:"In"}),e.jsx("option",{value:"out",children:"Out"}),e.jsx("option",{value:"adjustment",children:"Adjustment"})]})]})]})]})]})})};var Od=Object.defineProperty,Dd=Object.defineProperties,Rd=Object.getOwnPropertyDescriptors,Rr=Object.getOwnPropertySymbols,kd=Object.prototype.hasOwnProperty,Ld=Object.prototype.propertyIsEnumerable,kr=(r,t,s)=>t in r?Od(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,$d=(r,t)=>{for(var s in t||(t={}))kd.call(t,s)&&kr(r,s,t[s]);if(Rr)for(var s of Rr(t))Ld.call(t,s)&&kr(r,s,t[s]);return r},Md=(r,t)=>Dd(r,Rd(t));const Fd=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(Md($d({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h5",{className:"text-md font-medium text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(v,{path:qe,size:1,className:"text-gray-600"}),"Stock Management"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(Z,{title:"Stock Thresholds",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lowStockThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Low stock threshold"}),e.jsx("input",{id:"lowStockThreshold",type:"number",value:r.lowStockThreshold,onChange:a=>s("lowStockThreshold",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"criticalStockThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Critical stock threshold"}),e.jsx("input",{id:"criticalStockThreshold",type:"number",value:r.criticalStockThreshold,onChange:a=>s("criticalStockThreshold",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:"0"})]})]}),e.jsxs(Z,{title:"Reorder Settings",children:[e.jsx(V,{id:"autoReorderEnabled",checked:r.autoReorderEnabled,onChange:a=>s("autoReorderEnabled",a),label:"Enable automatic reordering"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reorderBufferDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reorder buffer (days)"}),e.jsx("input",{id:"reorderBufferDays",type:"number",value:r.reorderBufferDays,onChange:a=>s("reorderBufferDays",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:"1",max:"30"})]})]})]})]})})};var zd=Object.defineProperty,Vd=Object.defineProperties,Gd=Object.getOwnPropertyDescriptors,Lr=Object.getOwnPropertySymbols,qd=Object.prototype.hasOwnProperty,Ud=Object.prototype.propertyIsEnumerable,$r=(r,t,s)=>t in r?zd(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Bd=(r,t)=>{for(var s in t||(t={}))qd.call(t,s)&&$r(r,s,t[s]);if(Lr)for(var s of Lr(t))Ud.call(t,s)&&$r(r,s,t[s]);return r},Hd=(r,t)=>Vd(r,Gd(t));const Yd=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(Hd(Bd({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h5",{className:"text-md font-medium text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(v,{path:xe,size:1,className:"text-gray-600"}),"Categories & Organization"]}),e.jsx("div",{className:"space-y-4",children:e.jsxs(Z,{title:"Organization Features",children:[e.jsx(V,{id:"enableSubcategories",checked:r.enableSubcategories,onChange:a=>s("enableSubcategories",a),label:"Enable subcategories"}),e.jsx(V,{id:"enableCustomTags",checked:r.enableCustomTags,onChange:a=>s("enableCustomTags",a),label:"Enable custom tags"}),e.jsx(V,{id:"requireCategoryAssignment",checked:r.requireCategoryAssignment,onChange:a=>s("requireCategoryAssignment",a),label:"Require category assignment"})]})})]})})};var Wd=Object.defineProperty,Kd=Object.defineProperties,Qd=Object.getOwnPropertyDescriptors,Mr=Object.getOwnPropertySymbols,Zd=Object.prototype.hasOwnProperty,Xd=Object.prototype.propertyIsEnumerable,Fr=(r,t,s)=>t in r?Wd(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Jd=(r,t)=>{for(var s in t||(t={}))Zd.call(t,s)&&Fr(r,s,t[s]);if(Mr)for(var s of Mr(t))Xd.call(t,s)&&Fr(r,s,t[s]);return r},eu=(r,t)=>Kd(r,Qd(t));const tu=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(eu(Jd({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h5",{className:"text-md font-medium text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(v,{path:Ut,size:1,className:"text-gray-600"}),"Reporting & Analytics"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(Z,{title:"Report Generation",children:[e.jsx(V,{id:"autoGenerateReports",checked:r.autoGenerateReports,onChange:a=>s("autoGenerateReports",a),label:"Auto-generate reports"}),e.jsx(V,{id:"includeSensitiveData",checked:r.includeSensitiveData,onChange:a=>s("includeSensitiveData",a),label:"Include sensitive data"})]}),e.jsxs(Z,{title:"Report Configuration",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reportRetentionDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report retention (days)"}),e.jsx("input",{id:"reportRetentionDays",type:"number",value:r.reportRetentionDays,onChange:a=>s("reportRetentionDays",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:"30",max:"1095"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reportFormat",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report format"}),e.jsxs("select",{id:"reportFormat",value:r.reportFormat,onChange:a=>s("reportFormat",a.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"PDF",children:"PDF"}),e.jsx("option",{value:"Excel",children:"Excel"}),e.jsx("option",{value:"CSV",children:"CSV"})]})]})]})]})]})})},su=({aiSettings:r,onAISettingChange:t,onAISettingsSave:s,onAISettingsReset:a,isLoading:n,aiMessage:l})=>r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI-Powered Features"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:a,disabled:n,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:"Reset to Defaults"}),e.jsx("button",{onClick:s,disabled:n,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:n?"Saving...":"Save AI Settings"})]})]}),l&&e.jsx("div",{className:`p-3 rounded-md ${l.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:l}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Enable AI Features"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Master toggle for all AI-powered inventory features"})]}),e.jsx(V,{id:"ai_enabled",checked:r.ai_enabled,onChange:o=>t("ai_enabled",o),label:""})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsx(Z,{title:"Computer Vision",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(V,{id:"barcode_scanning_enabled",checked:r.barcode_scanning_enabled,onChange:o=>t("barcode_scanning_enabled",o),label:"Barcode Scanning AI",disabled:!r.ai_enabled}),e.jsx(V,{id:"image_recognition_enabled",checked:r.image_recognition_enabled,onChange:o=>t("image_recognition_enabled",o),label:"Image Recognition",disabled:!r.ai_enabled}),e.jsx(V,{id:"quality_assessment_enabled",checked:r.quality_assessment_enabled,onChange:o=>t("quality_assessment_enabled",o),label:"Quality Assessment",disabled:!r.ai_enabled}),e.jsx(V,{id:"damage_detection_enabled",checked:r.damage_detection_enabled,onChange:o=>t("damage_detection_enabled",o),label:"Damage Detection",disabled:!r.ai_enabled})]})})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsx(Z,{title:"Predictive Analytics",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(V,{id:"demand_forecasting_enabled",checked:r.demand_forecasting_enabled,onChange:o=>t("demand_forecasting_enabled",o),label:"Demand Forecasting",disabled:!r.ai_enabled}),e.jsx(V,{id:"cost_optimization_enabled",checked:r.cost_optimization_enabled,onChange:o=>t("cost_optimization_enabled",o),label:"Cost Optimization",disabled:!r.ai_enabled}),e.jsx(V,{id:"seasonal_analysis_enabled",checked:r.seasonal_analysis_enabled,onChange:o=>t("seasonal_analysis_enabled",o),label:"Seasonal Analysis",disabled:!r.ai_enabled})]})})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsx(Z,{title:"Smart Categorization",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(V,{id:"smart_categorization_enabled",checked:r.smart_categorization_enabled,onChange:o=>t("smart_categorization_enabled",o),label:"Smart Categorization",disabled:!r.ai_enabled}),e.jsx(V,{id:"auto_classification_enabled",checked:r.auto_classification_enabled,onChange:o=>t("auto_classification_enabled",o),label:"Auto Classification",disabled:!r.ai_enabled}),e.jsx(V,{id:"smart_form_filling_enabled",checked:r.smart_form_filling_enabled,onChange:o=>t("smart_form_filling_enabled",o),label:"Smart Form Filling",disabled:!r.ai_enabled})]})})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsx(Z,{title:"AI Configuration",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ai_confidence_threshold",className:"block text-sm font-medium text-gray-700",children:"Confidence Threshold"}),e.jsx("input",{id:"ai_confidence_threshold",type:"range",min:"0.5",max:"1.0",step:"0.05",value:r.ai_confidence_threshold,onChange:o=>t("ai_confidence_threshold",parseFloat(o.target.value)),disabled:!r.ai_enabled,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer disabled:opacity-50"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[(r.ai_confidence_threshold*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ai_data_retention_days",className:"block text-sm font-medium text-gray-700",children:"Data Retention (days)"}),e.jsx("input",{id:"ai_data_retention_days",type:"number",min:"30",max:"365",value:r.ai_data_retention_days,onChange:o=>t("ai_data_retention_days",parseInt(o.target.value)),disabled:!r.ai_enabled,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm disabled:opacity-50"})]})]})})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsx(Z,{title:"Privacy & Performance",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(V,{id:"encrypted_data_transmission",checked:r.encrypted_data_transmission,onChange:o=>t("encrypted_data_transmission",o),label:"Encrypted Data Transmission",disabled:!r.ai_enabled}),e.jsx(V,{id:"local_ai_processing_enabled",checked:r.local_ai_processing_enabled,onChange:o=>t("local_ai_processing_enabled",o),label:"Local AI Processing",disabled:!r.ai_enabled}),e.jsx(V,{id:"performance_monitoring",checked:r.performance_monitoring,onChange:o=>t("performance_monitoring",o),label:"Performance Monitoring",disabled:!r.ai_enabled})]})})})]})]}):e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("span",{className:"text-gray-600",children:"Loading AI settings..."})]})})});var ru=Object.defineProperty,au=Object.defineProperties,nu=Object.getOwnPropertyDescriptors,zr=Object.getOwnPropertySymbols,iu=Object.prototype.hasOwnProperty,lu=Object.prototype.propertyIsEnumerable,Vr=(r,t,s)=>t in r?ru(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Je=(r,t)=>{for(var s in t||(t={}))iu.call(t,s)&&Vr(r,s,t[s]);if(zr)for(var s of zr(t))lu.call(t,s)&&Vr(r,s,t[s]);return r},Rt=(r,t)=>au(r,nu(t)),_e=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const ou=()=>{const{currentUser:r}=ct(),[t,s]=g.useState(null),[a,n]=g.useState(""),[l,o]=g.useState(!1),[c,i]=g.useState(null),[d,u]=g.useState({autoCalculateTotals:!0,requireApprovalForAdjustments:!0,allowNegativeQuantities:!1,requireReasonForAdjustments:!0,defaultTransactionType:"in",enableRealTimeUpdates:!0,enableAuditTrails:!0,lowStockThreshold:10,criticalStockThreshold:5,autoReorderEnabled:!1,reorderBufferDays:7,enableSubcategories:!0,enableCustomTags:!0,requireCategoryAssignment:!0,autoGenerateReports:!1,reportRetentionDays:365,includeSensitiveData:!1,reportFormat:"PDF",aiEnabled:!1,computerVisionEnabled:!1,smartCategorizationEnabled:!1,predictiveAnalyticsEnabled:!1,aiConfidenceThreshold:.8,autoCategorizationEnabled:!1,smartFormFillingEnabled:!1,maintenancePredictionsEnabled:!1,demandForecastingEnabled:!1,openaiApiKey:"",googleVisionApiKey:"",dataSharingEnabled:!1,localAIProcessingEnabled:!1,aiDataRetentionDays:90});g.useEffect(()=>{_e(null,null,function*(){try{const f=yield lt.getCurrentFacilityId(),A=new Ur(f);i(A),m(A)}catch(f){console.error("Failed to initialize AI service:",f),n("Failed to initialize AI service")}})},[]);const m=b=>_e(null,null,function*(){try{o(!0);let f=yield b.loadSettings();f||(yield b.initializeSettings(),f=yield b.loadSettings()),s(f)}catch(f){console.error("Error loading AI settings:",f),n("Error loading AI settings")}finally{o(!1)}}),h=(b,f)=>{t&&s(Rt(Je({},t),{[b]:f}))},j=()=>_e(null,null,function*(){if(!(!c||!t))try{o(!0),(yield c.saveSettings(t))?(n("AI settings saved successfully"),setTimeout(()=>n(""),3e3)):n("Error saving AI settings")}catch(b){console.error("Error saving AI settings:",b),n("Error saving AI settings")}finally{o(!1)}}),p=()=>_e(null,null,function*(){if(c)try{o(!0),yield c.initializeSettings(),yield m(c),n("AI settings reset to defaults"),setTimeout(()=>n(""),3e3)}catch(b){console.error("Error resetting AI settings:",b),n("Error resetting AI settings")}finally{o(!1)}}),x=g.useCallback(()=>_e(null,null,function*(){if(r!=null&&r.id){o(!0);try{const b=localStorage.getItem("cliniio_ai_settings");if(b){const f=JSON.parse(b);u(A=>Rt(Je(Je({},A),f),{openaiApiKey:f.openaiApiKey?"••••••••"+f.openaiApiKey.slice(-4):"",googleVisionApiKey:f.googleVisionApiKey?"••••••••"+f.googleVisionApiKey.slice(-4):""}))}}catch(b){console.error("Failed to load inventory settings:",b)}finally{o(!1)}}}),[r==null?void 0:r.id]);return g.useEffect(()=>{x()},[x]),{settings:d,setSettings:u,aiSettings:t,aiMessage:a,isLoading:l,handleInputChange:(b,f)=>{u(A=>Rt(Je({},A),{[b]:f}))},handleAISettingChange:h,handleAISettingsSave:j,handleAISettingsReset:p,saveSettings:()=>_e(null,null,function*(){if(r!=null&&r.id)try{const b={aiEnabled:d.aiEnabled,computerVisionEnabled:d.computerVisionEnabled,smartCategorizationEnabled:d.smartCategorizationEnabled,predictiveAnalyticsEnabled:d.predictiveAnalyticsEnabled,aiConfidenceThreshold:d.aiConfidenceThreshold,autoCategorizationEnabled:d.autoCategorizationEnabled,smartFormFillingEnabled:d.smartFormFillingEnabled,maintenancePredictionsEnabled:d.maintenancePredictionsEnabled,demandForecastingEnabled:d.demandForecastingEnabled,dataSharingEnabled:d.dataSharingEnabled,localAIProcessingEnabled:d.localAIProcessingEnabled,aiDataRetentionDays:d.aiDataRetentionDays};localStorage.setItem("cliniio_ai_settings",JSON.stringify(b))}catch(b){console.error("Failed to save inventory settings:",b)}}),loadSettings:x}};var cu=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const du=()=>{const[r,t]=g.useState("general"),[s,a]=g.useState(!1),[n,l]=g.useState(null),{settings:o,setSettings:c,aiSettings:i,aiMessage:d,isLoading:u,handleAISettingChange:m,handleAISettingsSave:h,handleAISettingsReset:j,saveSettings:p,loadSettings:x}=ou(),N=[{id:"general",label:"General Settings",icon:ee},{id:"stock",label:"Stock Management",icon:qe},{id:"categories",label:"Categories & Tags",icon:xe},{id:"reporting",label:"Reporting & Analytics",icon:Ut},{id:"ai",label:"AI & Machine Learning",icon:Te}],_=()=>cu(null,null,function*(){try{a(!0),l(null),yield p(),l({type:"success",text:"Settings saved successfully"}),setTimeout(()=>l(null),3e3)}catch(f){console.error(f),l({type:"error",text:"Failed to save settings"})}finally{a(!1)}}),b=()=>{switch(r){case"general":return e.jsx(Pd,{settings:o,onSettingsChange:c});case"stock":return e.jsx(Fd,{settings:o,onSettingsChange:c});case"categories":return e.jsx(Yd,{settings:o,onSettingsChange:c});case"reporting":return e.jsx(tu,{settings:o,onSettingsChange:c});case"ai":return e.jsx(su,{aiSettings:i,onAISettingChange:m,onAISettingsSave:h,onAISettingsReset:j,isLoading:u,aiMessage:d});default:return null}};return u?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading inventory settings..."})]}):e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Inventory Management Settings"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Configure inventory behavior, AI features, and system preferences"}),n&&e.jsx("div",{className:`p-4 rounded-lg border mb-6 ${n.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{path:n.type==="success"?Ee:ne,size:1,className:"text-current"}),n.text]})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:N.map(f=>e.jsxs("button",{onClick:()=>t(f.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${r===f.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(v,{path:f.icon,size:1}),e.jsx("span",{children:f.label})]},f.id))})})}),e.jsx("div",{className:"tab-content-area",children:b()}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsxs("button",{onClick:x,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:[e.jsx(v,{path:Mt,size:1,className:"inline mr-2"}),"Reset"]}),e.jsxs("button",{onClick:_,disabled:s,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:[e.jsx(v,{path:Ge,size:1,className:"inline mr-2"}),s?"Saving...":"Save Settings"]})]})]})},Gr=[{id:"profile",label:"Profile & Account",icon:Gt,description:"Manage your admin account information and personal settings."},{id:"system",label:"System Administration",icon:ee,description:"Manage users, roles, permissions, and system-wide settings."},{id:"content",label:"Content Management",icon:Fa,description:"Create, edit, and manage Knowledge Hub and Library content."},{id:"learning",label:"Learning & Training",icon:za,description:"Configure training modules, certifications, and learning paths."},{id:"cleaning",label:"Environmental Cleaning",icon:Va,description:"Manage room cleaning schedules, protocols, and status."},{id:"inventory",label:"Inventory Management",icon:qe,description:"Oversee inventory, categories, stock levels, and procurement."},{id:"sterilization",label:"Sterilization",icon:Ga,description:"Monitor sterilization cycles, equipment, and compliance."},{id:"system-config",label:"Billing",icon:qa,description:"Manage billing settings, payment methods, and subscription plans."},{id:"analytics",label:"AI and Analytics",icon:Fe,description:"Configure AI features, view system analytics, and generate intelligent reports."}],qr={profile:{bg:"bg-blue-100",icon:"text-blue-700"},system:{bg:"bg-green-100",icon:"text-green-800"},content:{bg:"bg-purple-200",icon:"text-purple-900"},learning:{bg:"bg-yellow-200",icon:"text-yellow-900"},cleaning:{bg:"bg-teal-100",icon:"text-teal-700"},inventory:{bg:"bg-blue-100",icon:"text-blue-700"},sterilization:{bg:"bg-purple-200",icon:"text-purple-900"},"system-config":{bg:"bg-green-100",icon:"text-green-800"},analytics:{bg:"bg-yellow-200",icon:"text-yellow-900"}},yu=()=>{const[r,t]=g.useState(null),[s,a]=g.useState(null),n=o=>{try{a(null),t(c=>c===o?null:o)}catch(c){console.error("Error opening settings card:",c),a(c instanceof Error?c.message:"Failed to open settings")}},l=()=>{const o=[];for(let c=0;c<Gr.length;c++){const i=Gr[c];o.push(e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>n(i.id),className:`bg-white rounded-xl shadow p-6 border border-gray-100 text-left transition-all duration-200 hover:shadow-md hover:scale-105 focus:outline-none w-full min-h-[180px] flex flex-col justify-between ${r===i.id?"ring-2 ring-[#4ECDC4]":""}`,type:"button",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("span",{className:`${qr[i.id].bg} rounded-md p-2 mr-3`,children:e.jsx(v,{path:i.icon,size:1,className:qr[i.id].icon})}),e.jsx("h3",{className:"text-base font-medium text-gray-700",children:i.label})]}),e.jsx("p",{className:"text-gray-500 text-sm mt-auto",children:i.description})]})},i.id)),r===i.id&&o.push(e.jsxs("div",{className:"col-span-full bg-white border border-gray-200 rounded-xl shadow-lg p-6 animate-fade-in my-2",style:{gridColumn:"1 / -1"},children:[i.id==="profile"&&e.jsx(le,{children:e.jsx(Pn,{})}),i.id==="system"&&e.jsx(le,{children:e.jsx(ii,{})}),i.id==="system-config"&&e.jsx(le,{children:e.jsx(li,{})}),i.id==="content"&&e.jsx(le,{children:e.jsx(yl,{})}),i.id==="learning"&&e.jsx(le,{children:e.jsx(oo,{})}),i.id==="cleaning"&&e.jsx(le,{children:e.jsx(_d,{})}),i.id==="inventory"&&e.jsx(le,{children:e.jsx(du,{})}),i.id==="sterilization"&&e.jsx(le,{children:e.jsx(bl,{})}),i.id==="analytics"&&e.jsx(le,{children:e.jsx(Mi,{})})]},i.id+"-drawer"))}return o};return e.jsx(ba,{children:e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("div",{className:"p-4 max-w-7xl w-full mx-auto flex-1 flex flex-col",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-[#5b5b5b] mb-1",children:"Admin Settings"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Configure system-wide settings, manage users, and control application features"})]}),s&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:e.jsxs("p",{className:"text-red-600 text-sm",children:["Error: ",s]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 flex-1",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:l()})})]})})})};export{yu as default};
