import{v as D}from"./login-C1ujRpW7.js";var z=Object.defineProperty,F=Object.defineProperties,L=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,E=(e,a,t)=>a in e?z(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,N=(e,a)=>{for(var t in a||(a={}))M.call(a,t)&&E(e,t,a[t]);if(C)for(var t of C(a))V.call(a,t)&&E(e,t,a[t]);return e},T=(e,a)=>F(e,L(a));class Q{static transformFromSupabase(a){var t,r,l;const d=a.data||{},n=a.category||d.category||"unknown",o=D("NODE_ENV")==="development"||D("MODE")==="development",u=D("VITE_DEBUG_INVENTORY")==="true";return o&&u&&console.debug("Transforming inventory item:",a),{id:a.id,name:a.name,category:n,location:"",status:"active",updated_at:a.updated_at,quantity:a.quantity,unit_cost:a.unit_cost,reorder_point:a.reorder_point||0,expiration_date:a.expiration_date||"",created_at:a.created_at,facility_id:a.facility_id||"",data:{description:d.description||"",barcode:d.barcode||"",warranty:d.warranty||"",serialNumber:d.serialNumber||"",manufacturer:d.manufacturer||"",lastServiced:d.lastServiced||"",unit:d.unit||"",supplier:d.supplier||"",notes:d.notes||"",tags:d.tags||[],imageUrl:d.imageUrl||"",isActive:(t=d.isActive)!=null?t:!0,tracked:(r=d.tracked)!=null?r:!0,favorite:(l=d.favorite)!=null?l:!1,purchaseDate:d.purchaseDate||"",createdAt:d.createdAt||"",updatedAt:d.updatedAt||"",currentPhase:d.currentPhase||"",sku:d.sku||"",p2Status:d.p2Status||"",toolId:d.toolId||"",supplyId:d.supplyId||"",equipmentId:d.equipmentId||"",hardwareId:d.hardwareId||"",serviceProvider:d.serviceProvider||"",assignedTo:d.assignedTo||""}}}static transformToSupabase(a){const t={name:a.name,category:a.category,quantity:a.quantity||0,unit_cost:a.unit_cost||0,status:a.status||"active"};return a.facility_id&&(t.facility_id=a.facility_id),a.data&&typeof a.data=="object"&&a.data!==null&&"description"in a.data&&typeof a.data.description=="string"&&(t.description=a.data.description),a.location&&(t.location=a.location),a.data&&typeof a.data=="object"&&a.data!==null&&"sku"in a.data&&typeof a.data.sku=="string"&&(t.sku=a.data.sku),a.data&&typeof a.data=="object"&&a.data!==null&&"barcode"in a.data&&typeof a.data.barcode=="string"&&(t.barcode=a.data.barcode),a.data&&typeof a.data=="object"&&a.data!==null&&"manufacturer"in a.data&&typeof a.data.manufacturer=="string"&&(t.manufacturer=a.data.manufacturer),a.data&&typeof a.data=="object"&&a.data!==null&&"serialNumber"in a.data&&typeof a.data.serialNumber=="string"&&(t.serial_number=a.data.serialNumber),a.data&&typeof a.data=="object"&&a.data!==null&&"expiration"in a.data&&typeof a.data.expiration=="string"&&(t.expiration_date=a.data.expiration),a.data&&typeof a.data=="object"&&a.data!==null&&"unit"in a.data&&typeof a.data.unit=="string"&&(t.unit_of_measure=a.data.unit),a.reorder_point!==void 0&&(t.reorder_point=a.reorder_point),a.data&&typeof a.data=="object"&&a.data!==null&&"createdAt"in a.data&&typeof a.data.createdAt=="string"&&(t.created_at=a.data.createdAt),a.data&&typeof a.data=="object"&&a.data!==null&&"updatedAt"in a.data&&typeof a.data.updatedAt=="string"&&(t.updated_at=a.data.updatedAt),t}static transformForModal(a){return a.map(t=>{var r,l;return{id:t.id||"",name:t.name||"",barcode:((r=t.data)==null?void 0:r.barcode)||t.id||"",currentPhase:t.status||((l=t.data)==null?void 0:l.currentPhase)||"Unknown",category:t.category||""}})}static transformForTable(a){return a.map(t=>{var r,l,d,n;return{id:t.id||"",name:t.name||"",category:t.category||"",location:t.location||"",status:t.status||((r=t.data)==null?void 0:r.currentPhase)||"Unknown",tracked:((l=t.data)==null?void 0:l.tracked)||!1,favorite:((d=t.data)==null?void 0:d.favorite)||!1,lastUpdated:((n=t.data)==null?void 0:n.updatedAt)||""}})}static transformForExport(a){return a.map(t=>{var r,l,d,n,o,u,s,c,p,i,_,f;return{ID:t.id||"",Name:t.name||"",Category:t.category||"",Location:t.location||"",Status:t.status||((r=t.data)==null?void 0:r.currentPhase)||"",Quantity:String(t.quantity||0),Cost:String(t.unit_cost||0),Barcode:((l=t.data)==null?void 0:l.barcode)||"",SerialNumber:((d=t.data)==null?void 0:d.serialNumber)||"",Manufacturer:((n=t.data)==null?void 0:n.manufacturer)||"",SKU:((o=t.data)==null?void 0:o.sku)||"",Description:((u=t.data)==null?void 0:u.description)||"",Warranty:((s=t.data)==null?void 0:s.warranty)||"",LastServiced:((c=t.data)==null?void 0:c.lastServiced)||"",Notes:((p=t.data)==null?void 0:p.notes)||"",Tags:Array.isArray((i=t.data)==null?void 0:i.tags)?t.data.tags.join(", "):"",CreatedAt:((_=t.data)==null?void 0:_.createdAt)||"",UpdatedAt:((f=t.data)==null?void 0:f.updatedAt)||""}})}static transformForSearch(a){return a.map(t=>{var r,l,d;return{id:t.id,name:t.name||"",category:t.category||"",location:t.location||"",status:t.status||((r=t.data)==null?void 0:r.currentPhase)||"",quantity:t.quantity||0,unit_cost:t.unit_cost||0,barcode:((l=t.data)==null?void 0:l.barcode)||void 0,description:(d=t.data)==null?void 0:d.description}})}static createNewItem(a){var t,r,l;const d=new Date().toISOString();return{id:"",name:a.name||"",category:a.category||"",location:a.location||"",status:a.status||"Active",quantity:a.quantity||0,unit_cost:a.unit_cost||0,reorder_point:a.reorder_point||0,expiration_date:a.expiration_date||"",created_at:d,updated_at:d,facility_id:a.facility_id||"",data:{description:(a.data&&typeof a.data=="object"&&a.data!==null&&"description"in a.data&&typeof a.data.description=="string"?a.data.description:"")||"",barcode:(a.data&&typeof a.data=="object"&&a.data!==null&&"barcode"in a.data&&typeof a.data.barcode=="string"?a.data.barcode:"")||"",warranty:(a.data&&typeof a.data=="object"&&a.data!==null&&"warranty"in a.data&&typeof a.data.warranty=="string"?a.data.warranty:"")||"",serialNumber:(a.data&&typeof a.data=="object"&&a.data!==null&&"serialNumber"in a.data&&typeof a.data.serialNumber=="string"?a.data.serialNumber:"")||"",expiration:(a.data&&typeof a.data=="object"&&a.data!==null&&"expiration"in a.data&&typeof a.data.expiration=="string"?a.data.expiration:"")||"",manufacturer:(a.data&&typeof a.data=="object"&&a.data!==null&&"manufacturer"in a.data&&typeof a.data.manufacturer=="string"?a.data.manufacturer:"")||"",lastServiced:(a.data&&typeof a.data=="object"&&a.data!==null&&"lastServiced"in a.data&&typeof a.data.lastServiced=="string"?a.data.lastServiced:"")||"",unit:(a.data&&typeof a.data=="object"&&a.data!==null&&"unit"in a.data&&typeof a.data.unit=="string"?a.data.unit:"")||"",supplier:(a.data&&typeof a.data=="object"&&a.data!==null&&"supplier"in a.data&&typeof a.data.supplier=="string"?a.data.supplier:"")||"",notes:(a.data&&typeof a.data=="object"&&a.data!==null&&"notes"in a.data&&typeof a.data.notes=="string"?a.data.notes:"")||"",tags:(a.data&&typeof a.data=="object"&&a.data!==null&&"tags"in a.data&&Array.isArray(a.data.tags)?a.data.tags:[])||[],imageUrl:(a.data&&typeof a.data=="object"&&a.data!==null&&"imageUrl"in a.data&&typeof a.data.imageUrl=="string"?a.data.imageUrl:"")||"",isActive:(t=a.data&&typeof a.data=="object"&&a.data!==null&&"isActive"in a.data&&typeof a.data.isActive=="boolean"?a.data.isActive:!0)!=null?t:!0,tracked:(r=a.data&&typeof a.data=="object"&&a.data!==null&&"tracked"in a.data&&typeof a.data.tracked=="boolean"?a.data.tracked:!1)!=null?r:!1,favorite:(l=a.data&&typeof a.data=="object"&&a.data!==null&&"favorite"in a.data&&typeof a.data.favorite=="boolean"?a.data.favorite:!1)!=null?l:!1,purchaseDate:(a.data&&typeof a.data=="object"&&a.data!==null&&"purchaseDate"in a.data&&typeof a.data.purchaseDate=="string"?a.data.purchaseDate:"")||"",createdAt:d,updatedAt:d,currentPhase:(a.data&&typeof a.data=="object"&&a.data!==null&&"currentPhase"in a.data&&typeof a.data.currentPhase=="string"?a.data.currentPhase:"Active")||"Active",sku:(a.data&&typeof a.data=="object"&&a.data!==null&&"sku"in a.data&&typeof a.data.sku=="string"?a.data.sku:"")||"",p2Status:(a.data&&typeof a.data=="object"&&a.data!==null&&"p2Status"in a.data&&typeof a.data.p2Status=="string"?a.data.p2Status:"")||"",toolId:(a.data&&typeof a.data=="object"&&a.data!==null&&"toolId"in a.data&&typeof a.data.toolId=="string"?a.data.toolId:"")||"",supplyId:(a.data&&typeof a.data=="object"&&a.data!==null&&"supplyId"in a.data&&typeof a.data.supplyId=="string"?a.data.supplyId:"")||"",equipmentId:(a.data&&typeof a.data=="object"&&a.data!==null&&"equipmentId"in a.data&&typeof a.data.equipmentId=="string"?a.data.equipmentId:"")||"",hardwareId:(a.data&&typeof a.data=="object"&&a.data!==null&&"hardwareId"in a.data&&typeof a.data.hardwareId=="string"?a.data.hardwareId:"")||"",serviceProvider:(a.data&&typeof a.data=="object"&&a.data!==null&&"serviceProvider"in a.data&&typeof a.data.serviceProvider=="string"?a.data.serviceProvider:"")||"",assignedTo:(a.data&&typeof a.data=="object"&&a.data!==null&&"assignedTo"in a.data&&typeof a.data.assignedTo=="string"?a.data.assignedTo:"")||""}}}static updateItemWithTimestamp(a){const t=new Date().toISOString();return T(N({},a),{data:T(N({},a.data&&typeof a.data=="object"&&a.data!==null?a.data:{}),{lastUpdated:t,updatedAt:t})})}static normalizeItemName(a){return a?a.trim().replace(/\s+/g," ").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "):""}static normalizeCategory(a){return a?a.trim().toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""):""}static transformInventoryItem(a){var t;const r=this.normalizeItemName(a.name||""),l=this.normalizeCategory(a.category||""),d=(t=a.data)!=null&&t.expiration?new Date(a.data.expiration):null,n=new Date,o=d?d<n:!1,u=d?Math.ceil((d.getTime()-n.getTime())/(1e3*60*60*24)):null;return T(N({},a),{normalizedName:r,normalizedCategory:l,quantityInStock:Math.max(0,a.quantity||1),isExpired:o,daysUntilExpiry:u})}static transformInventoryBatch(a){return a.map(t=>this.transformInventoryItem(t))}static transformToCSV(a){if(a.length===0)return"";const t=["Name","Quantity","Category","Status","Expiry Date"],r=a.map(d=>{var n;return[d.name,(d.quantity||1).toString(),d.category,d.status,((n=d.data)==null?void 0:n.expiration)||""]});return[t,...r].map(d=>d.map(n=>`"${n}"`).join(",")).join(`
`)}static transformFromCSV(a){const t=a.trim().split(`
`);if(t.length<2)return[];const r=t[0].split(",").map(d=>d.replace(/"/g,"").trim());return t.slice(1).map(d=>{const n=d.split(",").map(u=>u.replace(/"/g,"").trim()),o={};return r.forEach((u,s)=>{o[u.toLowerCase().replace(/\s+/g,"")]=n[s]||""}),{id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:o.name||"",category:o.category||"",status:o.status||"active",quantity:parseInt(o.quantity)||1,unit_cost:0,reorder_point:0,expiration_date:o.expirydate||"",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),facility_id:"",location:"",supplier:null,cost:null,vendor:null,warranty:null,tool_id:null,description:null,barcode:null,sku:null,serial_number:null,manufacturer:null,last_serviced:null,unit:null,notes:null,tags:null,image_url:null,is_active:null,tracked:null,favorite:null,purchase_date:null,last_updated:null,current_phase:null,p2_status:null,supply_id:null,equipment_id:null,hardware_id:null,service_provider:null,assigned_to:null,maintenance_schedule:null,next_due:null,expiration:null,data:{description:"",barcode:"",warranty:"",serialNumber:"",manufacturer:"",lastServiced:"",unit:"",supplier:"",notes:"",tags:[],imageUrl:"",isActive:!0,tracked:!1,favorite:!1,purchaseDate:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),currentPhase:"",sku:"",p2Status:"",toolId:"",supplyId:"",equipmentId:"",hardwareId:"",serviceProvider:"",assignedTo:""}}})}static transformForAPI(a){return a.map(t=>{var r,l,d,n,o,u,s,c,p,i,_,f,g,v,y,b,h,w,S,j,A,P,k,x,q;return{id:t.id,name:t.name,category:t.category,status:t.status,quantity:t.quantity,location:t.location,unit_cost:t.unit_cost,reorder_point:t.reorder_point,expiration_date:t.expiration_date,created_at:t.created_at,updated_at:t.updated_at,facility_id:t.facility_id,data:{description:(r=t.data)==null?void 0:r.description,barcode:((l=t.data)==null?void 0:l.barcode)||void 0,serialNumber:(d=t.data)==null?void 0:d.serialNumber,manufacturer:(n=t.data)==null?void 0:n.manufacturer,supplier:(o=t.data)==null?void 0:o.supplier,expiration:(u=t.data)==null?void 0:u.expiration,warranty:(s=t.data)==null?void 0:s.warranty,notes:(c=t.data)==null?void 0:c.notes,tags:(p=t.data)==null?void 0:p.tags,imageUrl:(i=t.data)==null?void 0:i.imageUrl,isActive:(_=t.data)==null?void 0:_.isActive,tracked:(f=t.data)==null?void 0:f.tracked,favorite:(g=t.data)==null?void 0:g.favorite,purchaseDate:(v=t.data)==null?void 0:v.purchaseDate,lastServiced:(y=t.data)==null?void 0:y.lastServiced,unit:(b=t.data)==null?void 0:b.unit,currentPhase:(h=t.data)==null?void 0:h.currentPhase,sku:(w=t.data)==null?void 0:w.sku,p2Status:(S=t.data)==null?void 0:S.p2Status,toolId:(j=t.data)==null?void 0:j.toolId,supplyId:(A=t.data)==null?void 0:A.supplyId,equipmentId:(P=t.data)==null?void 0:P.equipmentId,hardwareId:(k=t.data)==null?void 0:k.hardwareId,serviceProvider:(x=t.data)==null?void 0:x.serviceProvider,assignedTo:(q=t.data)==null?void 0:q.assignedTo}}})}static transformFromAPI(a){return a.map(t=>{var r,l,d,n,o,u,s,c,p,i,_,f,g,v,y,b,h,w,S,j,A,P,k,x,q,O,U;return{id:t.id,name:t.name,category:t.category,location:t.location,status:t.status,updated_at:t.updated_at,quantity:t.quantity,unit_cost:t.unit_cost,reorder_point:t.reorder_point,expiration_date:t.expiration_date,created_at:t.created_at,facility_id:t.facility_id,supplier:null,cost:null,vendor:null,warranty:null,tool_id:null,description:null,barcode:null,sku:null,serial_number:null,manufacturer:null,last_serviced:null,unit:null,notes:null,tags:null,image_url:null,is_active:null,tracked:null,favorite:null,purchase_date:null,last_updated:null,current_phase:null,p2_status:null,supply_id:null,equipment_id:null,hardware_id:null,service_provider:null,assigned_to:null,maintenance_schedule:null,next_due:null,expiration:null,data:{description:(r=t.data)==null?void 0:r.description,barcode:(l=t.data)==null?void 0:l.barcode,warranty:(d=t.data)==null?void 0:d.warranty,serialNumber:(n=t.data)==null?void 0:n.serialNumber,expiration:(o=t.data)==null?void 0:o.expiration,manufacturer:(u=t.data)==null?void 0:u.manufacturer,lastServiced:(s=t.data)==null?void 0:s.lastServiced,unit:(c=t.data)==null?void 0:c.unit,supplier:(p=t.data)==null?void 0:p.supplier,notes:(i=t.data)==null?void 0:i.notes,tags:(_=t.data)==null?void 0:_.tags,imageUrl:(f=t.data)==null?void 0:f.imageUrl,isActive:(g=t.data)==null?void 0:g.isActive,tracked:(v=t.data)==null?void 0:v.tracked,favorite:(y=t.data)==null?void 0:y.favorite,purchaseDate:(b=t.data)==null?void 0:b.purchaseDate,createdAt:(h=t.data)==null?void 0:h.createdAt,updatedAt:(w=t.data)==null?void 0:w.updatedAt,currentPhase:(S=t.data)==null?void 0:S.currentPhase,sku:(j=t.data)==null?void 0:j.sku,p2Status:(A=t.data)==null?void 0:A.p2Status,toolId:(P=t.data)==null?void 0:P.toolId,supplyId:(k=t.data)==null?void 0:k.supplyId,equipmentId:(x=t.data)==null?void 0:x.equipmentId,hardwareId:(q=t.data)==null?void 0:q.hardwareId,serviceProvider:(O=t.data)==null?void 0:O.serviceProvider,assignedTo:(U=t.data)==null?void 0:U.assignedTo}}})}}export{Q as I};
