const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/login-CtXU169Q.js","assets/js/utils-DSBVV_PW.js","assets/js/vendor-DoALFvsH.js","assets/js/data-73RVSc-N.js","assets/js/ui-DETUEJ2B.js"])))=>i.map(i=>d[i]);
import{j as e}from"./utils-DSBVV_PW.js";import{a as h}from"./vendor-DoALFvsH.js";import{_ as G,I as S,m as U,a as q,b as F,F as J,c as V,d as W,e as X,l as B,f as Z,g as ee,h as L}from"./login-CtXU169Q.js";import"./data-73RVSc-N.js";import"./ui-DETUEJ2B.js";const O={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"",VITE_SUPABASE_URL:""};var te=Object.defineProperty,se=Object.defineProperties,re=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,z=(i,t,s)=>t in i?te(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s,w=(i,t)=>{for(var s in t||(t={}))ne.call(t,s)&&z(i,s,t[s]);if($)for(var s of $(t))ae.call(t,s)&&z(i,s,t[s]);return i},ie=(i,t)=>se(i,re(t)),v=(i,t,s)=>new Promise((n,d)=>{var l=o=>{try{m(s.next(o))}catch(p){d(p)}},u=o=>{try{m(s.throw(o))}catch(p){d(p)}},m=o=>o.done?n(o.value):Promise.resolve(o.value).then(l,u);m((s=s.apply(i,t)).next())}),K,M;const k=typeof window!="undefined";k&&((K=O)==null||K.VITE_ERROR_REPORTING_PROVIDER);class j{static initialize(t){t&&(this.config=w(w({},this.config),t)),this.config.enabled&&this.config.provider!=="console"&&this.config.provider!=="supabase"&&!this.config.dsn&&!this.config.apiKey&&(console.warn("Error reporting provider requires DSN or API key"),this.config.provider="console"),this.isInitialized=!0,this.config.enabled&&this.config.flushInterval&&(this.flushTimer=setInterval(()=>{this.flushQueue()},this.config.flushInterval))}static reportError(t,s,n){var d,l;const u={error:t,errorInfo:s,context:w({timestamp:new Date().toISOString()},n)};this.errorQueue.push(u),(k?((d=O)==null?void 0:d.MODE)==="development":!1)&&console.error("Error reported:",u),(l=this.config)!=null&&l.maxQueueSize&&this.errorQueue.length>=this.config.maxQueueSize&&this.flushQueue()}static flushQueue(){return v(this,null,function*(){if(this.errorQueue.length===0||!this.config.enabled)return;const t=this.errorQueue.splice(0,this.errorQueue.length);try{switch(this.config.provider){case"sentry":yield this.sendToSentry(t);break;case"logrocket":yield this.sendToLogRocket(t);break;case"bugsnag":yield this.sendToBugsnag(t);break;case"supabase":yield this.sendToSupabase(t);break;case"console":default:this.sendToConsole(t);break}}catch(s){if(console.error("Failed to send error reports:",s),s instanceof Error&&(s.message.includes("not configured")||s.message.includes("DSN")||s.message.includes("API key")))throw s;this.errorQueue.unshift(...t)}})}static sendToSentry(t){return v(this,null,function*(){if(!this.config.dsn)throw new Error("Sentry DSN not configured");const s={dsn:this.config.dsn,environment:this.config.environment,release:this.config.release,events:t.map(n=>{var d,l,u;return{message:n.error.message,level:"error",timestamp:(d=n.context)==null?void 0:d.timestamp,tags:{component:(l=n.context)==null?void 0:l.component,page:(u=n.context)==null?void 0:u.page},extra:{stack:n.error.stack,errorInfo:n.errorInfo}}})};yield this.makeApiCall("https://o450000000000000.ingest.sentry.io/api/0/store/",{method:"POST",headers:{"Content-Type":"application/json","X-Sentry-Auth":`Sentry sentry_version=7,sentry_key=${this.config.dsn.split("@")[0]},sentry_client=cliniio/1.0`},body:JSON.stringify(s)})})}static sendToLogRocket(t){return v(this,null,function*(){if(!this.config.apiKey)throw new Error("LogRocket API key not configured");const s={apiKey:this.config.apiKey,environment:this.config.environment,errors:t.map(n=>{var d,l,u,m;return{message:n.error.message,stack:n.error.stack,timestamp:(d=n.context)==null?void 0:d.timestamp,metadata:{component:(l=n.context)==null?void 0:l.component,page:(u=n.context)==null?void 0:u.page,userId:(m=n.context)==null?void 0:m.userId}}})};yield this.makeApiCall("https://api.logrocket.com/api/v1/errors",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`},body:JSON.stringify(s)})})}static sendToBugsnag(t){return v(this,null,function*(){if(!this.config.apiKey)throw new Error("Bugsnag API key not configured");const s={apiKey:this.config.apiKey,notifier:{name:"cliniio-error-reporter",version:"1.0.0"},events:t.map(n=>{var d,l,u,m;return{payloadVersion:"5",exceptions:[{errorClass:n.error.name,message:n.error.message,stacktrace:this.parseStacktrace(n.error.stack)}],breadcrumbs:[],context:(d=n.context)==null?void 0:d.component,user:(l=n.context)!=null&&l.userId?{id:n.context.userId}:void 0,metadata:{page:(u=n.context)==null?void 0:u.page,component:(m=n.context)==null?void 0:m.component}}})};yield this.makeApiCall("https://notify.bugsnag.com/",{method:"POST",headers:{"Content-Type":"application/json","X-Version":"5"},body:JSON.stringify(s)})})}static sendToSupabase(t){return v(this,null,function*(){try{const{supabase:s}=yield G(()=>import("./login-CtXU169Q.js").then(l=>l.cm),__vite__mapDeps([0,1,2,3,4])),n=t.map(l=>{var u,m,o,p;return{error_message:l.error.message,error_stack:l.error.stack,error_name:l.error.name,component:(u=l.context)==null?void 0:u.component,page:(m=l.context)==null?void 0:m.page,user_id:(o=l.context)==null?void 0:o.userId,timestamp:(p=l.context)==null?void 0:p.timestamp,environment:this.config.environment,metadata:JSON.stringify(l.errorInfo||{})}}),{error:d}=yield s.from("error_logs").insert(n);if(d)throw d}catch(s){throw console.error("Failed to send errors to Supabase:",s),s}})}static sendToConsole(t){console.group("Error Report Batch"),t.forEach((s,n)=>{console.error(`Error ${n+1}:`,s)}),console.groupEnd()}static makeApiCall(t,s){return v(this,null,function*(){const n=new AbortController,d=setTimeout(()=>n.abort(),1e4);try{const l=yield fetch(t,ie(w({},s),{signal:n.signal}));if(clearTimeout(d),!l.ok)throw new Error(`HTTP ${l.status}: ${l.statusText}`);return l}catch(l){throw clearTimeout(d),l}})}static parseStacktrace(t){return t?t.split(`
`).slice(1).map(s=>{const n=s.match(/at\s+(.+?)\s+\((.+?):(\d+):(\d+)\)/);return n?{method:n[1],file:n[2],lineNumber:parseInt(n[3]),columnNumber:parseInt(n[4])}:{file:s.trim(),lineNumber:0}}).filter(s=>s.file&&!s.file.includes("node_modules")):[]}static getStatus(){return{isInitialized:this.isInitialized,queueLength:this.errorQueue.length,config:this.config}}static updateConfig(t){this.config=w(w({},this.config),t),this.isInitialized=!0}static forceFlush(){return v(this,null,function*(){yield this.flushQueue()})}static clearQueue(){this.errorQueue=[]}static shutdown(){this.flushTimer&&(clearInterval(this.flushTimer),this.flushTimer=null),this.isInitialized=!1}static reset(){var t;this.shutdown(),this.clearQueue(),this.config={provider:"console",enabled:!0,environment:k?((t=O)==null?void 0:t.MODE)||"development":"production",maxQueueSize:10,flushInterval:5e3}}}j.isInitialized=!1;j.errorQueue=[];j.config={provider:"console",enabled:!0,environment:k?((M=O)==null?void 0:M.MODE)||"development":"production",maxQueueSize:10,flushInterval:5e3};j.flushTimer=null;j.reportError.bind(j);var oe=Object.defineProperty,le=Object.defineProperties,ce=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable,H=(i,t,s)=>t in i?oe(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s,f=(i,t)=>{for(var s in t||(t={}))de.call(t,s)&&H(i,s,t[s]);if(Q)for(var s of Q(t))ue.call(t,s)&&H(i,s,t[s]);return i},y=(i,t)=>le(i,ce(t));const me=()=>{const[i,t]=h.useState([]),[s,n]=h.useState(!1),[d,l]=h.useState("medium"),[u,m]=h.useState("ui"),[o,p]=h.useState({title:"",description:"",steps:[""],expected:"",actual:"",environment:navigator.userAgent,reporter:"User"}),I=h.useCallback(r=>{const a=y(f({},r),{id:`bug-${Date.now()}-${Math.random()}`,timestamp:new Date,status:"open"});t(g=>[a,...g]),n(!1),p({title:"",description:"",steps:[""],expected:"",actual:"",environment:navigator.userAgent,reporter:"User"})},[]),b=h.useCallback((r,a)=>{t(g=>g.map(c=>c.id===r?y(f({},c),{status:a}):c))},[]),N=h.useCallback(()=>{const r=JSON.stringify(i,null,2),a=new Blob([r],{type:"application/json"}),g=URL.createObjectURL(a),c=document.createElement("a");c.href=g,c.download=`bug-reports-${new Date().toISOString().split("T")[0]}.json`,c.click(),URL.revokeObjectURL(g)},[i]),R=h.useCallback(r=>{if(r.preventDefault(),!o.title||!o.description){alert("Please fill in all required fields");return}I({title:o.title,description:o.description,severity:d,category:u,steps:o.steps.filter(a=>a.trim()),expected:o.expected,actual:o.actual,environment:o.environment,reporter:o.reporter,attachments:[]})},[o,d,u,I]),P=h.useCallback(()=>{p(r=>y(f({},r),{steps:[...r.steps,""]}))},[]),A=h.useCallback(r=>{p(a=>y(f({},a),{steps:a.steps.filter((g,c)=>c!==r)}))},[]),D=h.useCallback((r,a)=>{p(g=>y(f({},g),{steps:g.steps.map((c,Y)=>Y===r?a:c)}))},[]);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Bug Tracker"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>n(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:[e.jsx(S,{path:U,size:1}),"Report Bug"]}),e.jsxs("button",{onClick:N,disabled:i.length===0,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(S,{path:q,size:1}),"Export"]})]})]}),s&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Report New Bug"}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(S,{path:F,size:1})})]}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bug-title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bug Title *"}),e.jsx("input",{id:"bug-title",type:"text",value:o.title,onChange:r=>p(a=>y(f({},a),{title:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Brief description of the bug",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bug-severity",className:"block text-sm font-medium text-gray-700 mb-2",children:"Severity"}),e.jsxs("select",{id:"bug-severity",value:d,onChange:r=>l(r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"critical",children:"Critical"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bug-category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{id:"bug-category",value:u,onChange:r=>m(r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",children:[e.jsx("option",{value:"ui",children:"UI/UX"}),e.jsx("option",{value:"functionality",children:"Functionality"}),e.jsx("option",{value:"performance",children:"Performance"}),e.jsx("option",{value:"accessibility",children:"Accessibility"}),e.jsx("option",{value:"data",children:"Data"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bug-environment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment"}),e.jsx("input",{id:"bug-environment",type:"text",value:o.environment,onChange:r=>p(a=>y(f({},a),{environment:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Browser, OS, etc."})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bug-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{id:"bug-description",value:o.description,onChange:r=>p(a=>y(f({},a),{description:r.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Detailed description of the bug",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bug-steps",className:"block text-sm font-medium text-gray-700 mb-2",children:"Steps to Reproduce"}),o.steps.map((r,a)=>e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"text-sm text-gray-500 w-6",children:[a+1,"."]}),e.jsx("input",{id:`bug-step-${a}`,type:"text",value:r,onChange:g=>D(a,g.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:`Step ${a+1}`}),o.steps.length>1&&e.jsx("button",{type:"button",onClick:()=>A(a),className:"p-2 text-red-400 hover:text-red-600",children:e.jsx(S,{path:F,size:.8})})]},a)),e.jsx("button",{type:"button",onClick:P,className:"text-sm text-[#4ECDC4] hover:text-[#3db8b0] underline",children:"+ Add Step"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bug-expected",className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Behavior"}),e.jsx("textarea",{id:"bug-expected",value:o.expected,onChange:r=>p(a=>y(f({},a),{expected:r.target.value})),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"What should happen?"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bug-actual",className:"block text-sm font-medium text-gray-700 mb-2",children:"Actual Behavior"}),e.jsx("textarea",{id:"bug-actual",value:o.actual,onChange:r=>p(a=>y(f({},a),{actual:r.target.value})),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"What actually happens?"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Submit Bug Report"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Bug Reports"}),e.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[i.map(r=>e.jsxs("div",{className:`p-4 rounded-lg border ${r.severity==="critical"?"bg-red-50 border-red-200":r.severity==="high"?"bg-orange-50 border-orange-200":r.severity==="medium"?"bg-yellow-50 border-yellow-200":"bg-blue-50 border-blue-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:r.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r.description})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${r.severity==="critical"?"bg-red-100 text-red-800":r.severity==="high"?"bg-orange-100 text-orange-800":r.severity==="medium"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:r.severity}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${r.status==="open"?"bg-red-100 text-red-800":r.status==="investigating"?"bg-yellow-100 text-yellow-800":r.status==="fixing"?"bg-blue-100 text-blue-800":r.status==="testing"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:r.status})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[r.category," • ",r.reporter]}),e.jsx("span",{children:r.timestamp.toLocaleDateString()})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Status:"}),e.jsxs("select",{value:r.status,onChange:a=>b(r.id,a.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",children:[e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"investigating",children:"Investigating"}),e.jsx("option",{value:"fixing",children:"Fixing"}),e.jsx("option",{value:"testing",children:"Testing"}),e.jsx("option",{value:"resolved",children:"Resolved"})]})]})]},r.id)),i.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(S,{path:U,size:2,className:"mx-auto text-gray-300 mb-2"}),e.jsx("p",{children:"No bug reports yet. Report a bug to get started."})]})]})]})]})},pe=({isOpen:i,onClose:t,errorContext:s="login",technicalReport:n})=>{const[d,l]=h.useState("support");if(!i)return null;const u=o=>{o.target===o.currentTarget&&t()},m=o=>{o.key==="Escape"&&t()};return e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",role:"dialog","aria-modal":"true","aria-labelledby":"support-contact-title",children:[e.jsx("button",{className:"absolute inset-0 w-full h-full",onClick:u,onKeyDown:m,tabIndex:-1,"aria-label":"Close dialog"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{id:"support-contact-title",className:"text-xl font-semibold text-gray-900",children:"Get Help"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(J,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8 px-6",children:[e.jsxs("button",{onClick:()=>l("admin"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="admin"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(V,{className:"w-4 h-4 inline mr-2"}),"Administrator"]}),e.jsxs("button",{onClick:()=>l("support"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="support"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(W,{className:"w-4 h-4 inline mr-2"}),"Technical Support"]}),e.jsxs("button",{onClick:()=>l("bug"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="bug"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(X,{className:"w-4 h-4 inline mr-2"}),"Report Bug"]})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[d==="admin"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"Contact Your System Administrator"}),e.jsx("p",{className:"text-blue-800 mb-4",children:"For login issues, account access problems, or user management questions, please contact your system administrator."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-blue-700",children:e.jsx("strong",{children:"Common Administrator Issues:"})}),e.jsxs("ul",{className:"text-sm text-blue-700 list-disc list-inside space-y-1 ml-4",children:[e.jsx("li",{children:"Account not found or disabled"}),e.jsx("li",{children:"Password reset requests"}),e.jsx("li",{children:"Permission or role changes"}),e.jsx("li",{children:"Account lockouts"}),e.jsx("li",{children:"User profile updates"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"How to Contact:"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Contact your IT department or system administrator directly. They have access to user management tools and can resolve account-related issues."})]})]}),d==="support"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-orange-900 mb-2",children:"Contact Technical Support"}),e.jsx("p",{className:"text-orange-800 mb-4",children:"For technical issues, system errors, or application problems, please contact our technical support team."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-orange-700",children:e.jsx("strong",{children:"Common Technical Issues:"})}),e.jsxs("ul",{className:"text-sm text-orange-700 list-disc list-inside space-y-1 ml-4",children:[e.jsx("li",{children:"System performance problems"}),e.jsx("li",{children:"Connection or network errors"}),e.jsx("li",{children:"Application crashes or freezes"}),e.jsx("li",{children:"Data synchronization issues"}),e.jsx("li",{children:"Browser compatibility problems"})]})]})]}),n&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Technical Report"}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Please include this technical report when contacting support:"}),e.jsx("div",{className:"bg-white border border-gray-300 rounded p-3",children:e.jsx("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap overflow-x-auto",children:n})})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Support Information:"}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Error Context:"})," ",s]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Timestamp:"})," ",new Date().toLocaleString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Browser:"})," ",navigator.userAgent]})]})]})]}),d==="bug"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Report a Bug"}),e.jsx("p",{className:"text-gray-600",children:"Use the bug tracker below to report issues, suggest improvements, or provide feedback about the application."})]}),e.jsx(me,{})]})]}),e.jsx("div",{className:"border-t border-gray-200 px-6 py-4 bg-gray-50",children:e.jsx("div",{className:"flex justify-end space-x-3",children:e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Close"})})})]})]})},T={INVALID_CREDENTIALS:"Invalid email or password. Please check your credentials and try again.",NETWORK_ERROR:"Unable to connect to the server. Please check your internet connection and try again.",INTERNAL_ERROR:"An internal error occurred. Our technical team has been notified. Please try again later.",UNEXPECTED_ERROR:"An unexpected error occurred. Please try again or contact technical support if the problem persists."},x={AUTH:"auth",NETWORK:"network",VALIDATION:"validation",SYSTEM:"system",UNKNOWN:"unknown"},_={ADMIN:"admin",SUPPORT:"support",RETRY:"retry"},C={LOW:"low",MEDIUM:"medium",HIGH:"high"},E={[x.AUTH]:_.ADMIN,[x.NETWORK]:_.SUPPORT,[x.VALIDATION]:_.RETRY,[x.SYSTEM]:_.SUPPORT,[x.UNKNOWN]:_.SUPPORT};var he=(i,t,s)=>new Promise((n,d)=>{var l=o=>{try{m(s.next(o))}catch(p){d(p)}},u=o=>{try{m(s.throw(o))}catch(p){d(p)}},m=o=>o.done?n(o.value):Promise.resolve(o.value).then(l,u);m((s=s.apply(i,t)).next())});const ve=({error:i,context:t="login",onRetry:s,onDismiss:n})=>{const[d,l]=h.useState(!1),[u,m]=h.useState(!1),[o,p]=h.useState(!1),b=h.useCallback(a=>{const g=typeof a=="string"?a:a.message,c=g.toLowerCase();return c.includes("unauthorized")||c.includes("invalid credentials")||c.includes("authentication failed")||c.includes("invalid email")||c.includes("password")||c.includes("login")||c.includes("401")||c.includes("403")?{type:x.AUTH,title:"Login Issue",message:T.INVALID_CREDENTIALS,action:E[x.AUTH],severity:C.MEDIUM}:c.includes("network")||c.includes("connection")||c.includes("timeout")||c.includes("fetch")||c.includes("http")||c.includes("server")||c.includes("500")||c.includes("502")||c.includes("503")||c.includes("504")?{type:x.NETWORK,title:"Connection Problem",message:T.NETWORK_ERROR,action:E[x.NETWORK],severity:C.HIGH}:c.includes("database")||c.includes("internal")||c.includes("system")||c.includes("service")||c.includes("unexpected")||c.includes("error")?{type:x.SYSTEM,title:"System Issue",message:T.INTERNAL_ERROR,action:E[x.SYSTEM],severity:C.HIGH}:c.includes("required")||c.includes("invalid")||c.includes("format")||c.includes("validation")?{type:x.VALIDATION,title:"Please Check Your Input",message:g,action:E[x.VALIDATION],severity:C.LOW}:{type:x.UNKNOWN,title:"Something Went Wrong",message:T.UNEXPECTED_ERROR,action:E[x.UNKNOWN],severity:C.MEDIUM}},[])(i),N=h.useCallback(()=>{const a={timestamp:new Date().toISOString(),context:t,error:{message:typeof i=="string"?i:i.message,stack:typeof i=="object"&&i.stack?i.stack:void 0},userAgent:navigator.userAgent,url:window.location.href,category:b};return JSON.stringify(a,null,2)},[i,t,b]),R=h.useCallback(()=>he(null,null,function*(){try{const a=N();yield navigator.clipboard.writeText(a),m(!0),setTimeout(()=>m(!1),2e3)}catch(a){B.error("Failed to copy technical report:",a)}}),[N]),P=h.useCallback(()=>{try{j.reportError(typeof i=="string"?new Error(i):i,void 0,{context:t,category:b.type}),B.info("Error reported to service")}catch(a){B.error("Failed to report error:",a)}},[i,t,b.type]),A=a=>{switch(a){case"critical":return"text-red-600 bg-red-50 border-red-200";case"high":return"text-orange-600 bg-orange-50 border-orange-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},D=a=>{switch(a){case"admin":return e.jsx(V,{className:"w-5 h-5"});case"support":return e.jsx(W,{className:"w-5 h-5"});case"retry":return e.jsx(L,{className:"w-5 h-5"});default:return e.jsx(L,{className:"w-5 h-5"})}},r=a=>{switch(a){case"admin":return"Contact Administrator";case"support":return"Contact Support";case"retry":return"Try Again";default:return"Get Help"}};return e.jsxs("div",{className:`rounded-lg border p-4 ${A(b.severity)}`,children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:D(b.action)}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h3",{className:"text-sm font-medium",children:b.title}),e.jsx("div",{className:"mt-2 text-sm",children:e.jsx("p",{children:b.message})}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[b.action==="retry"&&s&&e.jsx("button",{onClick:s,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Try Again"}),(b.action==="admin"||b.action==="support")&&e.jsx("button",{onClick:()=>{P(),p(!0)},className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",children:r(b.action)}),e.jsxs("button",{onClick:()=>l(!d),className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[d?"Hide":"Show"," Technical Details"]})]}),d&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-100 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Technical Report"}),e.jsx("button",{onClick:R,className:"inline-flex items-center px-2 py-1 text-xs font-medium text-gray-600 hover:text-gray-800",children:u?e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"w-3 h-3 mr-1"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"w-3 h-3 mr-1"}),"Copy Report"]})})]}),e.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap overflow-x-auto",children:N()})]}),n&&e.jsx("div",{className:"mt-3",children:e.jsx("button",{onClick:n,className:"text-sm text-gray-500 hover:text-gray-700",children:"Dismiss"})})]})]}),e.jsx(pe,{isOpen:o,onClose:()=>p(!1),errorContext:t,technicalReport:d?N():void 0})]})};export{ve as UserFriendlyErrorHandler,ve as default};
