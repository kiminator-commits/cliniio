const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/main-Ccza29P3.js","assets/js/utils-5cl0BHpv.js","assets/js/vendor-DVtBqAv5.js","assets/js/login-CgiYf71G.js","assets/js/data-Djiu4445.js","assets/js/ui-C2vLYFVP.js","assets/js/errors-BMV5cHgT.js","assets/css/main-Cx7hEqqr.css"])))=>i.map(i=>d[i]);
import{_ as u,l as s,s as y}from"./login-CgiYf71G.js";import"./utils-5cl0BHpv.js";import"./vendor-DVtBqAv5.js";import"./data-Djiu4445.js";import"./ui-C2vLYFVP.js";var m=(d,e,t)=>new Promise((i,c)=>{var l=a=>{try{r(t.next(a))}catch(n){c(n)}},o=a=>{try{r(t.throw(a))}catch(n){c(n)}},r=a=>a.done?i(a.value):Promise.resolve(a.value).then(l,o);r((t=t.apply(d,e)).next())});class S{constructor(){this.CACHE_DURATION=300*1e3,this.cache=new Map}isCacheValid(e){return Date.now()-e<this.CACHE_DURATION}getCachedData(e){const t=this.cache.get(e);return t&&this.isCacheValid(t.timestamp)?t.data:null}setCachedData(e,t){this.cache.set(e,{data:t,timestamp:Date.now()})}getAITimeSavings(){return m(this,null,function*(){try{const{FacilityService:e}=yield u(()=>import("./main-Ccza29P3.js").then(g=>g.Y),__vite__mapDeps([0,1,2,3,4,5,6,7])),t=yield e.getCurrentFacilityId();if(!t)return s.debug("AITimeSavingsService: No facility ID, returning defaults"),{daily_time_saved:0,monthly_time_saved:0};const i=`ai-time-savings-${t}-${new Date().toISOString().split("T")[0]}`,c=this.getCachedData(i);if(c)return c;const[l,o,r,a]=yield Promise.all([this.calculateAITaskPerformanceSavings(t),this.calculateAITrainingSavings(t),this.calculateAIComplianceSavings(t),this.calculateAIPredictiveSavings(t)]),n=l.daily+o.daily+r.daily+a.daily,h=l.monthly+o.monthly+r.monthly+a.monthly,v={daily_time_saved:Math.round(n),monthly_time_saved:Math.round(h)};return this.setCachedData(i,v),s.debug("AITimeSavingsService: Calculated AI time savings:",v),v}catch(e){return s.error("AITimeSavingsService: Error calculating AI time savings:",e),{daily_time_saved:0,monthly_time_saved:0}}})}calculateAITaskPerformanceSavings(e){return m(this,null,function*(){try{const t=new Date().toISOString().split("T")[0],i=new Date().toISOString().slice(0,7),{data:c}=yield y.from("ai_task_performance").select("time_saved").eq("facility_id",e).gte("completed_at",`${t}T00:00:00`).lt("completed_at",`${t}T23:59:59`),{data:l}=yield y.from("ai_task_performance").select("time_saved").eq("facility_id",e).gte("completed_at",`${i}-01T00:00:00`).lt("completed_at",`${i}-31T23:59:59`),o=(c||[]).reduce((a,n)=>a+(n.time_saved||0),0),r=(l||[]).reduce((a,n)=>a+(n.time_saved||0),0);return{daily:o,monthly:r}}catch(t){return s.error("AITimeSavingsService: Error calculating AI task performance savings:",t),{daily:0,monthly:0}}})}calculateAITrainingSavings(e){return m(this,null,function*(){try{return{daily:30,monthly:900}}catch(t){return s.error("AITimeSavingsService: Error calculating AI training savings:",t),{daily:0,monthly:0}}})}calculateAIComplianceSavings(e){return m(this,null,function*(){try{return{daily:20,monthly:600}}catch(t){return s.error("AITimeSavingsService: Error calculating AI compliance savings:",t),{daily:0,monthly:0}}})}calculateAIPredictiveSavings(e){return m(this,null,function*(){try{return{daily:25,monthly:750}}catch(t){return s.error("AITimeSavingsService: Error calculating AI predictive savings:",t),{daily:0,monthly:0}}})}clearCache(){this.cache.clear()}}const T=new S;export{T as aiTimeSavingsService};
