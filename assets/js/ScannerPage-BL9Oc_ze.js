import{j as e,m as g}from"./utils-5cl0BHpv.js";import{a as b}from"./vendor-DVtBqAv5.js";import{$,a as I,I as h,S as y,c as N,r as M}from"./errors-89nfNYWX.js";import{c as k}from"./main-RuFFPtZZ.js";import"./login-CScPvZaJ.js";import"./data-Djiu4445.js";import"./ui-C2vLYFVP.js";var p=(x,a,o)=>new Promise((l,c)=>{var i=t=>{try{n(o.next(t))}catch(u){c(u)}},d=t=>{try{n(o.throw(t))}catch(u){c(u)}},n=t=>t.done?l(t.value):Promise.resolve(t.value).then(i,d);n((o=o.apply(x,a)).next())});const A=()=>{var x;const[a,o]=b.useState(null),[l,c]=b.useState([]),[i,d]=b.useState(!1),[n,t]=b.useState(null),{handleBarcodeScan:u}=k({scanMode:a,onScan:s=>{c(r=>[...r,s])}}),w=()=>p(null,null,function*(){a&&(d(!0),t(null),setTimeout(()=>p(null,null,function*(){const s=["ITEM-001","ITEM-002","ITEM-003","ITEM-004","ITEM-005"],r=s[Math.floor(Math.random()*s.length)];try{u(r),a==="add"?l.includes(r)?t({type:"warning",message:`Item ${r} already scanned.`}):t({type:"success",message:`Item ${r} scanned successfully! Ready to add to inventory.`}):a==="use"&&(l.includes(r)?(t({type:"success",message:`Item ${r} used successfully! Removed from inventory.`}),c(m=>m.filter(E=>E!==r))):t({type:"error",message:`Item ${r} not found in inventory.`}))}catch(m){t({type:"error",message:m instanceof Error?m.message:"Scan failed"})}finally{d(!1)}}),1e3))}),f=s=>p(null,null,function*(){if(s.trim()){d(!0),t(null);try{u(s),a==="add"?l.includes(s)?t({type:"warning",message:`Item ${s} already scanned.`}):t({type:"success",message:`Item ${s} scanned successfully! Ready to add to inventory.`}):a==="use"&&(l.includes(s)?(t({type:"success",message:`Item ${s} used successfully! Removed from inventory.`}),c(r=>r.filter(m=>m!==s))):t({type:"error",message:`Item ${s} not found in inventory.`}))}catch(r){t({type:"error",message:r instanceof Error?r.message:"Manual scan failed"})}finally{d(!1)}}}),v=[{id:"add",name:"Add Inventory",icon:$,color:"green",description:"Add new items to inventory"},{id:"use",name:"Use Inventory",icon:I,color:"blue",description:"Remove items from inventory"}],S=s=>{switch(s){case"success":return M;case"error":return N;case"warning":return N;default:return y}},j=s=>{switch(s){case"success":return"text-green-600";case"error":return"text-red-600";case"warning":return"text-yellow-600";default:return"text-gray-600"}},C=s=>{switch(s){case"success":return"bg-green-100 border-green-200";case"error":return"bg-red-100 border-red-200";case"warning":return"bg-yellow-100 border-yellow-200";default:return"bg-gray-100 border-gray-200"}};return e.jsxs(e.Fragment,{children:[e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black bg-opacity-30 z-40",onClick:()=>window.location.href="/inventory"}),e.jsx(g.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{duration:.3,ease:"easeInOut"},className:"fixed inset-y-0 right-0 w-[40%] bg-white shadow-2xl z-50",children:e.jsx("div",{className:"h-full flex flex-col",children:e.jsxs("div",{className:"bg-white overflow-hidden h-full",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Inventory Scanner"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Scan items for inventory management"})]}),e.jsx("div",{className:"p-4 overflow-y-auto flex-1 hide-scrollbar",children:a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`border rounded-lg p-4 ${a==="add"?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200"}`,children:[e.jsxs("h3",{className:`font-semibold mb-1 ${a==="add"?"text-green-800":"text-blue-800"}`,children:[a.charAt(0).toUpperCase()+a.slice(1)," ","Operation"]}),e.jsx("p",{className:`text-sm ${a==="add"?"text-green-600":"text-blue-600"}`,children:(x=v.find(s=>s.id===a))==null?void 0:x.description})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{htmlFor:"manual-barcode-input",className:"block text-sm font-medium text-gray-700 mb-2",children:"Manual Barcode Entry"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{id:"manual-barcode-input",type:"text",placeholder:"Enter barcode manually...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onKeyPress:s=>{if(s.key==="Enter"){const r=s.target;f(r.value),r.value=""}},disabled:i}),e.jsx("button",{onClick:()=>{const s=document.querySelector('input[placeholder="Enter barcode manually..."]');s&&(f(s.value),s.value="")},disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Scan"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"relative bg-black h-64 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 to-black"}),e.jsx(g.div,{className:"absolute left-0 right-0 h-1 bg-[#4ECDC4]",animate:{top:["10%","90%","10%"],opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),e.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 border-2 border-[#4ECDC4] w-48 h-32 rounded-lg",children:[e.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 border-t-2 border-l-2 border-[#4ECDC4] rounded-tl"}),e.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-[#4ECDC4] rounded-tr"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 border-b-2 border-l-2 border-[#4ECDC4] rounded-bl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 border-b-2 border-r-2 border-[#4ECDC4] rounded-br"})]}),e.jsxs("div",{className:"absolute bottom-4 right-4 flex items-center",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 mr-2 animate-pulse"}),e.jsx("span",{className:"text-white text-xs",children:"Camera active"})]}),e.jsx("button",{onClick:w,disabled:i,className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 p-4 rounded-full transition-all duration-200 ${i?"bg-gray-600 cursor-not-allowed":"bg-[#4ECDC4] hover:bg-[#3db8b0] shadow-lg hover:shadow-xl"}`,children:e.jsx(h,{path:y,size:1.5,className:`${i?"text-gray-400":"text-white"}`})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:i?"Scanning...":"Click to Scan"}),e.jsx("p",{className:"text-gray-600 text-sm",children:i?"Position barcode in camera view":"Use camera to scan item barcode"})]})]}),n&&e.jsx(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`mt-4 p-4 rounded-lg border ${C(n.type)}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{path:S(n.type),size:1,className:j(n.type)}),e.jsx("span",{className:`font-medium ${j(n.type)}`,children:n.message})]})})]}),l.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-800 mb-2",children:["Scanned Items (",l.length,")"]}),e.jsx("div",{className:"space-y-1",children:l.map((s,r)=>e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(h,{path:y,size:.8,className:"text-gray-400"}),s]},r))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:()=>{o(null),c([]),t(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"← Back to Operation Selection"})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Select Operation"}),e.jsx("div",{className:"space-y-3",children:v.map(s=>e.jsx("button",{onClick:()=>o(s.id),className:`w-full p-4 rounded-lg border-2 transition-all duration-200 text-left ${s.color==="green"?"border-green-200 hover:border-green-300 bg-green-50 hover:bg-green-100":"border-blue-200 hover:border-blue-300 bg-blue-50 hover:bg-blue-100"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.color==="green"?"bg-green-100":"bg-blue-100"}`,children:e.jsx(h,{path:s.icon,size:1.2,className:s.color==="green"?"text-green-600":"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-semibold text-sm ${s.color==="green"?"text-green-800":"text-blue-800"}`,children:s.name}),e.jsx("p",{className:`text-xs ${s.color==="green"?"text-green-600":"text-blue-600"}`,children:s.description})]})]})},s.id))})]})})]})})})]})};export{A as default};
