import{j as e}from"./utils-5cl0BHpv.js";import{a as q}from"./vendor-DVtBqAv5.js";import{I as x,bf as D,aS as _,P as E}from"./errors-89nfNYWX.js";import"./login-CScPvZaJ.js";import"./data-Djiu4445.js";import"./ui-C2vLYFVP.js";const c={tools:{icon:"#9333ea",bgColor:"bg-purple-100"},value:{icon:"#16a34a",bgColor:"bg-green-100"},maintenance:{icon:"#ea580c",bgColor:"bg-orange-100"}},O=({data:a})=>{var g,v,y,w;const{tools:j,supplies:N,equipment:C,officeHardware:$}=a||{},s=(g=j==null?void 0:j.length)!=null?g:0,l=(v=N==null?void 0:N.length)!=null?v:0,n=(y=C==null?void 0:C.length)!=null?y:0,o=(w=$==null?void 0:$.length)!=null?w:0,i=s+l+n+o;if(q.useEffect(()=>{a&&console.log("üìä InventoryInsightsCard received data:",a)},[a]),q.useEffect(()=>{a&&i!==s+l+n+o&&console.error("üö® Count mismatch detected!",{totalItemsCount:i,sumOfCategories:s+l+n+o,difference:i-(s+l+n+o)})},[i,s,l,n,o,a]),!a||!a.tools||!a.supplies||!a.equipment||!a.officeHardware)return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsx("div",{className:"text-center text-gray-500",children:"No inventory data available"})});const u=(a.tools.reduce((t,r)=>t+(r.unit_cost||0),0)||0)+(a.supplies.reduce((t,r)=>t+(r.unit_cost||0)*(r.quantity||1),0)||0)+(a.equipment.reduce((t,r)=>t+(r.unit_cost||0),0)||0)+(a.officeHardware.reduce((t,r)=>t+(r.unit_cost||0),0)||0),m=a.equipment.filter(t=>{var r,I;if("status"in t&&t.status==="Maintenance")return!0;if("lastServiced"in t&&((r=t.data)!=null&&r.lastServiced)){const p=new Date(t.data.lastServiced),d=new Date;return d.setMonth(d.getMonth()-6),p<d}if("warranty"in t&&((I=t.data)!=null&&I.warranty)){const p=new Date(t.data.warranty),d=new Date;return d.setDate(d.getDate()+30),p<=d&&p>new Date}return!1}).length,h=i>0?Math.min(i/50*100,100):0,b=u>0?Math.min(u/1e4*100,100):0,f=m>0?Math.min(m/10*100,100):0;return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3",style:{borderLeft:"4px solid rgba(78, 205, 196, 0.5)"},role:"region","aria-label":"Inventory insights and statistics",children:[e.jsxs("h3",{className:"text-base font-semibold mb-3 flex items-center text-[#5b5b5b]",children:[e.jsx(x,{path:D,size:1.1,color:"#4ECDC4",className:"mr-2","aria-hidden":"true"}),"Inventory Insights"]}),e.jsxs("div",{className:"space-y-3",role:"list","aria-label":"Inventory metrics",children:[e.jsxs("div",{role:"listitem",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1 group relative",children:[e.jsxs("span",{className:"flex items-center text-gray-600",children:[e.jsx("div",{className:`${c.tools.bgColor} rounded-full p-1 mr-2`,children:e.jsx(x,{path:D,size:.8,color:c.tools.icon,"aria-hidden":"true"})}),"Total Items"]}),e.jsxs("span",{className:"font-semibold cursor-help",title:`Tools: ${s} ‚Ä¢ Supplies: ${l} ‚Ä¢ Equipment: ${n} ‚Ä¢ Office Hardware: ${o}`,"aria-label":`Total items: ${i}. Full breakdown: ${s} tools, ${l} supplies, ${n} equipment, ${o} office hardware`,children:[i,i!==s+l+n+o&&e.jsx("span",{className:"text-xs text-red-500 ml-1",children:"‚ö†Ô∏è"})]}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-white text-xs rounded-md shadow-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-50",children:["Tools: ",s," ‚Ä¢ Supplies: ",l," ‚Ä¢ Equipment:"," ",n," ‚Ä¢ Office Hardware: ",o,e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",role:"progressbar","aria-valuenow":h,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Total items progress: ${h}%`,children:e.jsx("div",{className:"bg-purple-500 h-1.5 rounded-full transition-all duration-300",style:{width:`${h}%`}})})]}),e.jsxs("div",{role:"listitem",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1 group relative",children:[e.jsxs("span",{className:"flex items-center text-gray-600",children:[e.jsx("div",{className:`${c.value.bgColor} rounded-full p-1 mr-2`,children:e.jsx(x,{path:_,size:.8,color:c.value.icon,"aria-hidden":"true"})}),"Total Value"]}),e.jsxs("span",{className:"font-semibold cursor-help",title:"Cumulative value of all inventory items","aria-label":`Total inventory value: $${u.toLocaleString()}`,children:["$",u.toLocaleString()]}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-white text-xs rounded-md shadow-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-50",children:["Cumulative value of all inventory items",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",role:"progressbar","aria-valuenow":b,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Total value progress: ${b}%`,children:e.jsx("div",{className:"bg-blue-500 h-1.5 rounded-full transition-all duration-300",style:{width:`${b}%`}})})]}),e.jsxs("div",{role:"listitem",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1 group relative",children:[e.jsxs("span",{className:"flex items-center text-gray-600",children:[e.jsx("div",{className:`${c.maintenance.bgColor} rounded-full p-1 mr-2`,children:e.jsx(x,{path:E,size:.8,color:c.maintenance.icon,"aria-hidden":"true"})}),"Maintenance Due (30 days)"]}),e.jsx("span",{className:"font-semibold cursor-help",title:"Equipment due for maintenance or with expiring warranty in next 30 days","aria-label":`Items requiring maintenance in next 30 days: ${m}`,children:m}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-white text-xs rounded-md shadow-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-50",children:["Equipment due for maintenance or with expiring warranty in next 30 days",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",role:"progressbar","aria-valuenow":f,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Maintenance due progress: ${f}%`,children:e.jsx("div",{className:"bg-orange-500 h-1.5 rounded-full transition-all duration-300",style:{width:`${f}%`}})})]})]})]})};export{O as default};
