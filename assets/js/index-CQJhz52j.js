const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/PolicyEditor-BW9hTXzf.js","assets/js/react-vendor-BgCjxHGT.js","assets/js/data-vendor-C88t-X3A.js","assets/js/components-CI6m6L5v.js","assets/js/services-CE_LtFqr.js","assets/js/inventory-pages-Dx6mSDHp.js","assets/js/ui-vendor-mgcSnJSc.js","assets/css/ui-vendor-DJSy8M6b.css","assets/js/utils-vendor-CxPd0XhF.js","assets/js/vendor-jNhfZCZ0.js","assets/js/knowledgehub-pages-w63GWyRJ.js","assets/css/components-B4OH_j2L.css"])))=>i.map(i=>d[i]);
import{r as x,j as e,I as m,b as Vs}from"./react-vendor-BgCjxHGT.js";import{aT as Y,L as de,b0 as Be,b as Q,ah as Ss,af as V,E as Ye,b1 as Hs,j as be,a5 as U,a8 as Ge,u as Ys,b2 as Ws,F as ue,T as me,b3 as Ks,ag as Ve,r as ve,c as se,A as Qs,b4 as Zs,m as Xs,i as Te,b5 as _s,b6 as Es,b7 as Ke,aK as Js,a6 as et,R as Pe,P as st,o as tt,aP as ye,aU as Ds,C as Ps,D as Ts,l as Qe,b8 as rt,b9 as De,a1 as at,a3 as He,a2 as Os,ba as ks,a as Ze,aM as As,q as nt,aY as it}from"./ui-vendor-mgcSnJSc.js";import{s as G,aa as lt,g as ot,_ as Is,S as ct}from"./components-CI6m6L5v.js";import{ar as Oe,as as F,at as fe,au as re,av as ke,aw as Ie,ax as dt,ay as ut,az as Ne}from"./vendor-jNhfZCZ0.js";import{ay as mt}from"./services-CE_LtFqr.js";var pt=Object.defineProperty,xt=Object.defineProperties,ht=Object.getOwnPropertyDescriptors,Xe=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable,Je=(s,r,t)=>r in s?pt(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,D=(s,r)=>{for(var t in r||(r={}))gt.call(r,t)&&Je(s,t,r[t]);if(Xe)for(var t of Xe(r))ft.call(r,t)&&Je(s,t,r[t]);return s},k=(s,r)=>xt(s,ht(r));const bt={contentType:"course",selectedContentType:"course",activeTab:"content",courseStep:1,courseData:{id:"",title:"",description:"",objectives:[""],prerequisites:[""],linkedPrerequisites:[],modules:[],assessments:[],estimatedDuration:0,difficulty:"beginner",tags:[],isPublished:!1,settings:{difficulty:"beginner",estimatedDuration:0,tags:"",allowRetakes:!0,certificateOnCompletion:!0}},policyData:{},procedureData:{},smsData:{},pathwayData:{},textFormattingData:{},tableData:{},mediaData:{},currentContent:void 0,aiSuggestions:[],mediaLibrary:[],isDirty:!1,isSaving:!1,validationErrors:{}};function yt(s,r){switch(r.type){case"SET_SELECTED_CONTENT_TYPE":return k(D({},s),{selectedContentType:r.payload});case"SET_ACTIVE_TAB":return k(D({},s),{activeTab:r.payload});case"SET_COURSE_STEP":return k(D({},s),{courseStep:r.payload});case"SET_COURSE_DATA":return k(D({},s),{courseData:r.payload});case"UPDATE_COURSE_FIELD":return k(D({},s),{courseData:D(D({},s.courseData),r.payload)});case"ADD_MODULE":return k(D({},s),{courseData:k(D({},s.courseData),{modules:[...s.courseData.modules,r.payload]})});case"ADD_LESSON":return k(D({},s),{courseData:k(D({},s.courseData),{modules:s.courseData.modules.map(t=>t.id===r.payload.moduleId?k(D({},t),{lessons:[...t.lessons,r.payload.lesson]}):t)})});case"ADD_ASSESSMENT":return k(D({},s),{courseData:k(D({},s.courseData),{assessments:[...s.courseData.assessments,r.payload]})});case"UPDATE_MODULE":return k(D({},s),{courseData:k(D({},s.courseData),{modules:s.courseData.modules.map(t=>t.id===r.payload.moduleId?D(D({},t),r.payload.updates):t)})});case"UPDATE_LESSON":return k(D({},s),{courseData:k(D({},s.courseData),{modules:s.courseData.modules.map(t=>t.id===r.payload.moduleId?k(D({},t),{lessons:t.lessons.map(n=>n.id===r.payload.lessonId?D(D({},n),r.payload.updates):n)}):t)})});case"UPDATE_ASSESSMENT":return k(D({},s),{courseData:k(D({},s.courseData),{assessments:s.courseData.assessments.map(t=>t.id===r.payload.assessmentId?D(D({},t),r.payload.updates):t)})});case"REMOVE_MODULE":return k(D({},s),{courseData:k(D({},s.courseData),{modules:s.courseData.modules.filter(t=>t.id!==r.payload)})});case"REMOVE_LESSON":return k(D({},s),{courseData:k(D({},s.courseData),{modules:s.courseData.modules.map(t=>t.id===r.payload.moduleId?k(D({},t),{lessons:t.lessons.filter(n=>n.id!==r.payload.lessonId)}):t)})});case"REMOVE_ASSESSMENT":return k(D({},s),{courseData:k(D({},s.courseData),{assessments:s.courseData.assessments.filter(t=>t.id!==r.payload)})});case"BULK_CREATE_COURSE_STRUCTURE":{const{modules:t,lessonsPerModule:n,assessments:i}=r.payload,l=Date.now(),d=Array.from({length:t},(a,u)=>{const C=`module-${l}-${u}`;return{id:C,title:`Module ${u+1}`,description:`Module ${u+1} description`,lessons:Array.from({length:n},(h,p)=>({id:`lesson-${l}-${u}-${p}`,title:`Lesson ${p+1}`,content:`Lesson ${p+1} content`,order:p,moduleId:C,estimatedDuration:15,isRequired:!1,type:"text"})),order:u,isRequired:!1,estimatedDuration:n*15}}),o=Array.from({length:i},(a,u)=>({id:`assessment-${Date.now()}-${u}`,title:`Assessment ${u+1}`,questions:[],passingScore:70,isRequired:!1}));return k(D({},s),{courseData:k(D({},s.courseData),{modules:d,assessments:o})})}case"SET_AI_SUGGESTIONS":return k(D({},s),{aiSuggestions:r.payload});case"UPDATE_CONTENT":return k(D({},s),{currentContent:s.currentContent?D(D({},s.currentContent),r.payload):r.payload});case"ADD_MEDIA":return k(D({},s),{mediaLibrary:[...s.mediaLibrary||[],r.payload]});case"REMOVE_MEDIA":return k(D({},s),{mediaLibrary:(s.mediaLibrary||[]).filter(t=>t.id!==r.payload)});default:return s}}const $s=x.createContext(void 0);function vt({children:s}){const[r,t]=x.useReducer(yt,bt),n=x.useCallback(i=>{t({type:"SET_SELECTED_CONTENT_TYPE",payload:i})},[t]);return e.jsx($s.Provider,{value:{state:r,dispatch:t,createNewContent:n},children:s})}function X(){const s=x.useContext($s);if(s===void 0)throw new Error("useContentBuilder must be used within a ContentBuilderProvider");return s}function ae(){const{dispatch:s}=X(),r=x.useCallback(y=>{s({type:"SET_SELECTED_CONTENT_TYPE",payload:y})},[s]),t=x.useCallback(y=>{s({type:"SET_ACTIVE_TAB",payload:y})},[s]),n=x.useCallback(y=>{s({type:"SET_COURSE_STEP",payload:y})},[s]),i=x.useCallback(y=>{s({type:"UPDATE_COURSE_FIELD",payload:y})},[s]),l=x.useCallback(()=>{const y={id:`module-${Date.now()}`,title:`Module ${Date.now()}`,description:"",lessons:[],order:Date.now(),isRequired:!1,estimatedDuration:30};s({type:"ADD_MODULE",payload:y})},[s]),d=x.useCallback(y=>{const j={id:`lesson-${Date.now()}`,title:`Lesson ${Date.now()}`,content:"",order:Date.now(),moduleId:y,estimatedDuration:15,isRequired:!1,type:"text"};s({type:"ADD_LESSON",payload:{moduleId:y,lesson:j}})},[s]),o=x.useCallback(()=>{const y={id:`assessment-${Date.now()}`,title:`Assessment ${Date.now()}`,questions:[],passingScore:70,isRequired:!1};s({type:"ADD_ASSESSMENT",payload:y})},[s]),a=x.useCallback((y,j)=>{s({type:"UPDATE_MODULE",payload:{moduleId:y,updates:j}})},[s]),u=x.useCallback((y,j,g)=>{s({type:"UPDATE_LESSON",payload:{moduleId:y,lessonId:j,updates:g}})},[s]),C=x.useCallback((y,j)=>{s({type:"UPDATE_ASSESSMENT",payload:{assessmentId:y,updates:j}})},[s]),h=x.useCallback(y=>{s({type:"REMOVE_MODULE",payload:y})},[s]),p=x.useCallback((y,j)=>{s({type:"REMOVE_LESSON",payload:{moduleId:y,lessonId:j}})},[s]),w=x.useCallback(y=>{s({type:"REMOVE_ASSESSMENT",payload:y})},[s]),v=x.useCallback((y,j,g)=>{s({type:"BULK_CREATE_COURSE_STRUCTURE",payload:{modules:y,lessonsPerModule:j,assessments:g}})},[s]);return{setSelectedContentType:r,setActiveTab:t,setCourseStep:n,updateCourseField:i,addModule:l,addLesson:d,addAssessment:o,updateModule:a,updateLesson:u,updateAssessment:C,removeModule:h,removeLesson:p,removeAssessment:w,bulkCreateCourseStructure:v}}const Ae=Oe({title:F().min(1,"Title is required").max(200,"Title must be less than 200 characters").trim(),description:F().min(1,"Description is required").max(500,"Description must be less than 500 characters").trim(),content:F().min(1,"Content is required").max(1e4,"Content must be less than 10,000 characters")}),jt=Ae.extend({policyVersion:F().min(1,"Policy version is required").regex(/^\d+\.\d+$/,"Version must be in format X.Y (e.g., 1.0)"),policyType:ke(["general","safety","compliance","operational"],{errorMap:()=>({message:"Please select a valid policy type"})}),requiresSignature:re(),signatureDeadline:fe().min(1,"Deadline must be at least 1 day").max(365,"Deadline cannot exceed 365 days").optional(),acknowledgmentStatement:F().min(10,"Acknowledgment statement must be at least 10 characters").max(500,"Acknowledgment statement must be less than 500 characters").optional()}),Nt=Ae.extend({isRequired:re(),reviewAnnually:re(),estimatedDuration:fe().min(1,"Duration must be at least 1 minute").max(480,"Duration cannot exceed 8 hours (480 minutes)"),difficulty:ke(["beginner","intermediate","advanced"],{errorMap:()=>({message:"Please select a valid difficulty level"})}),department:F().min(1,"Department is required").max(100,"Department must be less than 100 characters"),responsiblePerson:F().min(1,"Responsible person is required").max(100,"Responsible person must be less than 100 characters")}),Ct=Ae.extend({chemicalName:F().min(1,"Chemical name is required").max(200,"Chemical name must be less than 200 characters"),casNumber:F().min(1,"CAS number is required").regex(/^\d{1,7}-\d{2}-\d$/,"CAS number must be in format XXXX-XX-X"),hazardClass:ke(["1","2","3","4","5","6","7","8","9"],{errorMap:()=>({message:"Please select a valid hazard class"})}),storageRequirements:F().min(1,"Storage requirements are required").max(500,"Storage requirements must be less than 500 characters"),handlingInstructions:F().min(1,"Handling instructions are required").max(1e3,"Handling instructions must be less than 1,000 characters"),emergencyProcedures:F().min(1,"Emergency procedures are required").max(1e3,"Emergency procedures must be less than 1,000 characters")}),wt=Ae.extend({pathwayDueDate:F().min(1,"Due date is required").refine(s=>new Date(s)>new Date,"Due date must be in the future"),issueCertificate:re(),requireFinalQuiz:re(),quizQuestionCount:fe().min(1,"Quiz must have at least 1 question").max(50,"Quiz cannot have more than 50 questions"),quizPassingRate:fe().min(50,"Passing rate must be at least 50%").max(100,"Passing rate cannot exceed 100%"),quizTimeLimit:fe().min(5,"Time limit must be at least 5 minutes").max(180,"Time limit cannot exceed 3 hours (180 minutes)")}),ka=Oe({fontFamily:F().min(1,"Font family is required"),fontSize:ke(["text-xs","text-sm","text-base","text-lg","text-xl"],{errorMap:()=>({message:"Please select a valid font size"})}),textColor:F().min(1,"Text color is required")}),Aa=Oe({headers:Ie(F().min(1,"Header cannot be empty")).min(1,"Table must have at least one column").max(10,"Table cannot have more than 10 columns"),data:Ie(Ie(F())).min(1,"Table must have at least one row").max(50,"Table cannot have more than 50 rows")}),Ia=Oe({pdfFile:dt(File).nullable(),isRecording:re(),pdfUploading:re()});ut("type",[jt.extend({type:Ne("policy")}),Nt.extend({type:Ne("procedure")}),Ct.extend({type:Ne("sms")}),wt.extend({type:Ne("pathway")})]);var Rs=(s,r,t)=>new Promise((n,i)=>{var l=a=>{try{o(t.next(a))}catch(u){i(u)}},d=a=>{try{o(t.throw(a))}catch(u){i(u)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((t=t.apply(s,r)).next())});function St(s){return Rs(this,null,function*(){try{const{data:r,error:t}=yield G.from("knowledge_hub_content").select("id, title, description, difficulty_level, estimated_duration, department, tags").eq("is_active",!0).eq("status","published").or(`title.ilike.%${s}%,description.ilike.%${s}%`).limit(10);return t?(console.error("Error searching courses:",t),[]):r||[]}catch(r){return console.error("Error in searchCourses:",r),[]}})}function _t(s){return Rs(this,null,function*(){try{const{data:r,error:t}=yield G.from("knowledge_hub_content").select("id, title, description, difficulty_level, estimated_duration, department, tags").eq("id",s).eq("is_active",!0).eq("status","published").single();return t?(console.error("Error fetching course:",t),null):r}catch(r){return console.error("Error in getCourseById:",r),null}})}var $e=(s,r,t)=>new Promise((n,i)=>{var l=a=>{try{o(t.next(a))}catch(u){i(u)}},d=a=>{try{o(t.throw(a))}catch(u){i(u)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((t=t.apply(s,r)).next())});const Et=({value:s,onChange:r,onRemove:t,placeholder:n="Search for a course..."})=>{const[i,l]=x.useState(""),[d,o]=x.useState([]),[a,u]=x.useState(!1),[C,h]=x.useState(!1),[p,w]=x.useState(null),v=x.useRef(),y=x.useRef(null);x.useEffect(()=>{s&&!p&&$e(null,null,function*(){try{const c=yield _t(s);c&&(w(c),l(c.title))}catch(c){console.error("Error fetching course details:",c)}})},[s,p]),x.useEffect(()=>{const f=c=>{y.current&&!y.current.contains(c.target)&&h(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const j=f=>$e(null,null,function*(){if(l(f),h(!0),v.current&&clearTimeout(v.current),f.length<2){o([]);return}v.current=setTimeout(()=>$e(null,null,function*(){u(!0);try{const c=yield St(f);o(c)}catch(c){console.error("Search error:",c),o([])}finally{u(!1)}}),300)}),g=f=>{w(f),r(f.id),l(f.title),h(!1),o([])},b=()=>{w(null),l(""),r(""),o([])},N=f=>{if(f<60)return`${f}m`;const c=Math.floor(f/60),_=f%60;return _===0?`${c}h`:`${c}h ${_}m`};return p?e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[e.jsx(m,{path:Y,size:1.2,className:"text-blue-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-blue-900",children:p.title}),e.jsxs("div",{className:"text-sm text-blue-700 flex items-center space-x-4",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(m,{path:de,size:.8}),e.jsx("span",{children:N(p.estimated_duration)})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(m,{path:Be,size:.8}),e.jsx("span",{className:"capitalize",children:p.difficulty_level})]})]})]}),e.jsx("button",{onClick:t,className:"p-1 text-blue-600 hover:bg-blue-100 rounded","aria-label":"Remove course",children:e.jsx(m,{path:Q,size:1})})]}):e.jsxs("div",{className:"relative",ref:y,children:[e.jsxs("div",{className:"relative",children:[e.jsx(m,{path:Ss,size:1,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:i,onChange:f=>j(f.target.value),onFocus:()=>h(!0),className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:n}),i&&e.jsx("button",{onClick:b,className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600",children:e.jsx(m,{path:Q,size:1})})]}),C&&(i.length>=2||a)&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",children:a?e.jsxs("div",{className:"p-4 text-center text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#4ECDC4] mx-auto mb-2"}),"Searching..."]}):d.length>0?e.jsx("div",{className:"py-2",children:d.map(f=>e.jsxs("button",{onClick:()=>g(f),className:"w-full text-left p-3 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none",children:[e.jsx("div",{className:"font-medium text-gray-900",children:f.title}),e.jsx("div",{className:"text-sm text-gray-600 line-clamp-2",children:f.description}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center space-x-3 mt-1",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(m,{path:de,size:.8}),e.jsx("span",{children:N(f.estimated_duration)})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(m,{path:Be,size:.8}),e.jsx("span",{className:"capitalize",children:f.difficulty_level})]})]})]},f.id))}):i.length>=2?e.jsxs("div",{className:"p-4 text-center text-gray-500",children:['No courses found matching "',i,'"']}):null})]})};var Dt=(s,r,t)=>new Promise((n,i)=>{var l=a=>{try{o(t.next(a))}catch(u){i(u)}},d=a=>{try{o(t.throw(a))}catch(u){i(u)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((t=t.apply(s,r)).next())});const Pt=({courseTitle:s,courseDescription:r,prerequisites:t,linkedPrerequisites:n,difficulty:i,onObjectiveSelect:l,isVisible:d,onClose:o})=>{const[a,u]=x.useState([]),[C,h]=x.useState(!1),[p,w]=x.useState(!1),[v,y]=x.useState(new Set),j=()=>Dt(null,null,function*(){if(!s.trim()&&!r.trim()){alert("Please add a course title and description first to generate smart suggestions.");return}h(!0);try{const f=yield mt.generateLearningObjectives({title:s,description:r,prerequisites:t.filter(c=>c.trim()),linkedPrerequisites:n,difficulty:i});u(f),w(!0)}catch(f){console.error("Error generating suggestions:",f),alert("Failed to generate AI suggestions. Please try again.")}finally{h(!1)}}),g=f=>{l(f.objective),y(c=>new Set([...c,f.objective]))},b=f=>({remember:"text-blue-600 bg-blue-50",understand:"text-green-600 bg-green-50",apply:"text-yellow-600 bg-yellow-50",analyze:"text-orange-600 bg-orange-50",evaluate:"text-red-600 bg-red-50",create:"text-purple-600 bg-purple-50"})[f]||"text-gray-600 bg-gray-50",N=f=>({remember:"Recall facts and basic concepts",understand:"Explain ideas or concepts",apply:"Use information in new situations",analyze:"Draw connections among ideas",evaluate:"Justify a stand or decision",create:"Produce new or original work"})[f]||"Learning objective";return d?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{path:V,size:1,className:"text-purple-600"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Smart Learning Objectives"})]}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"âœ•"})]}),!p&&e.jsxs("div",{className:"text-center py-6",children:[e.jsx(m,{path:V,size:2,className:"text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Get AI-powered suggestions for learning objectives based on your course details"}),e.jsx("button",{onClick:j,disabled:C,className:"inline-flex items-center gap-2 px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#45b8b3] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:C?e.jsxs(e.Fragment,{children:[e.jsx(m,{path:Ye,size:.8,className:"animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{path:V,size:.8,className:"text-purple-600"}),"Generate Smart Suggestions"]})})]}),p&&a.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(m,{path:Hs,size:.8,className:"text-blue-500"}),e.jsx("p",{className:"text-sm text-gray-600",children:"AI-generated suggestions based on your course details. Click to add to your objectives."})]}),a.map((f,c)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-3 hover:border-[#4ECDC4] transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-900 font-medium mb-2",children:f.objective}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${b(f.bloomsLevel)}`,children:f.bloomsLevel.charAt(0).toUpperCase()+f.bloomsLevel.slice(1)}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Confidence: ",Math.round(f.confidence*100),"%"]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Why this fits:"})," ",f.reasoning]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.jsx("strong",{children:"Bloom's Level:"})," ",N(f.bloomsLevel)]})]}),e.jsx("button",{onClick:()=>g(f),disabled:v.has(f.objective),className:`flex items-center gap-1 px-3 py-1 rounded-md text-sm font-medium transition-colors ${v.has(f.objective)?"bg-green-100 text-green-700 cursor-not-allowed":"bg-[#4ECDC4] text-white hover:bg-[#45b8b3]"}`,children:v.has(f.objective)?e.jsxs(e.Fragment,{children:[e.jsx(m,{path:be,size:.6}),"Added"]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{path:U,size:.6}),"Add"]})})]})},c)),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:e.jsx("button",{onClick:j,disabled:C,className:"text-sm text-[#4ECDC4] hover:text-[#45b8b3] font-medium transition-colors",children:C?"Generating...":"Generate New Suggestions"})})]}),p&&a.length===0&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-gray-600 mb-3",children:"No suggestions generated. Try updating your course details and generate again."}),e.jsx("button",{onClick:j,disabled:C,className:"text-[#4ECDC4] hover:text-[#45b8b3] font-medium transition-colors",children:"Try Again"})]})]}):null},Tt=()=>{const{state:s}=X(),{updateCourseField:r}=ae(),{courseData:t}=s,[n,i]=x.useState("text"),[l,d]=x.useState(!1),o=(g,b)=>{const N=[...t.objectives||[]];N[g]=b,r({objectives:N})},a=g=>{const b=(t.objectives||[]).filter((N,f)=>f!==g);r({objectives:b})},u=()=>{r({objectives:[...t.objectives||[],""]})},C=(g,b)=>{const N=[...t.prerequisites||[]];N[g]=b,r({prerequisites:N})},h=g=>{const b=(t.prerequisites||[]).filter((N,f)=>f!==g);r({prerequisites:b})},p=()=>{r({prerequisites:[...t.prerequisites||[],""]})},w=(g,b)=>{const N=[...t.linkedPrerequisites||[]];N[g]=b,r({linkedPrerequisites:N})},v=g=>{const b=(t.linkedPrerequisites||[]).filter((N,f)=>f!==g);r({linkedPrerequisites:b})},y=()=>{r({linkedPrerequisites:[...t.linkedPrerequisites||[],""]})},j=g=>{const b=t.objectives||[""],N=b.findIndex(f=>!f.trim());if(N>=0){const f=[...b];f[N]=g,r({objectives:f})}else r({objectives:[...b,g]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Course Overview"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"course-title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Title *"}),e.jsx("input",{id:"course-title",type:"text",value:t.title,onChange:g=>r({title:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter course title..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"course-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Description *"}),e.jsx("textarea",{id:"course-description",rows:4,value:t.description,onChange:g=>r({description:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Describe what learners will gain from this course..."})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Prerequisites"}),e.jsxs("div",{className:"flex space-x-1 mb-4 p-1 bg-gray-100 rounded-lg",children:[e.jsx("button",{onClick:()=>i("text"),className:`flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors ${n==="text"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Text Prerequisites"}),e.jsx("button",{onClick:()=>i("linked"),className:`flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors ${n==="linked"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Library Courses"})]}),n==="text"&&e.jsxs("div",{className:"space-y-3",children:[(t.prerequisites||[]).map((g,b)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:`course-prereq-${b}`,type:"text",value:g,onChange:N=>C(b,N.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:`Prerequisite ${b+1}...`}),(t.prerequisites||[]).length>1&&e.jsx("button",{onClick:()=>h(b),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(m,{path:Ge,size:1})})]},b)),e.jsxs("button",{onClick:p,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(m,{path:U,size:1,className:"mr-2"}),"Add Text Prerequisite"]})]}),n==="linked"&&e.jsxs("div",{className:"space-y-3",children:[(t.linkedPrerequisites||[]).map((g,b)=>e.jsx("div",{children:e.jsx(Et,{value:g,onChange:N=>w(b,N),onRemove:()=>v(b),placeholder:"Search for a course in the library..."})},b)),e.jsxs("button",{onClick:y,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(m,{path:U,size:1,className:"mr-2"}),"Add Library Course"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{htmlFor:"course-objectives",className:"block text-sm font-medium text-gray-700",children:"Learning Objectives"}),e.jsxs("button",{onClick:()=>d(!l),className:"inline-flex items-center gap-2 px-3 py-1 text-sm text-[#4ECDC4] hover:text-[#45b8b3] font-medium transition-colors",children:[e.jsx(m,{path:V,size:.7,className:"text-purple-600"}),l?"Hide":"Get"," AI Suggestions"]})]}),e.jsx(Pt,{courseTitle:t.title,courseDescription:t.description,prerequisites:t.prerequisites||[],linkedPrerequisites:t.linkedPrerequisites||[],difficulty:t.difficulty,onObjectiveSelect:j,isVisible:l,onClose:()=>d(!1)}),(t.objectives||[]).map((g,b)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{id:`course-objective-${b}`,type:"text",value:g,onChange:N=>o(b,N.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:`Learning objective ${b+1}...`}),(t.objectives||[]).length>1&&e.jsx("button",{onClick:()=>a(b),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(m,{path:Ge,size:1})})]},b)),e.jsxs("button",{onClick:u,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(m,{path:U,size:1,className:"mr-2"}),"Add Objective"]})]})]})};var Ot=Object.defineProperty,kt=Object.defineProperties,At=Object.getOwnPropertyDescriptors,es=Object.getOwnPropertySymbols,It=Object.prototype.hasOwnProperty,$t=Object.prototype.propertyIsEnumerable,ss=(s,r,t)=>r in s?Ot(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,Re=(s,r)=>{for(var t in r||(r={}))It.call(r,t)&&ss(s,t,r[t]);if(es)for(var t of es(r))$t.call(r,t)&&ss(s,t,r[t]);return s},Le=(s,r)=>kt(s,At(r)),Rt=(s,r,t)=>new Promise((n,i)=>{var l=a=>{try{o(t.next(a))}catch(u){i(u)}},d=a=>{try{o(t.throw(a))}catch(u){i(u)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((t=t.apply(s,r)).next())});const Lt=()=>{const{state:s}=X(),{updateCourseField:r,bulkCreateCourseStructure:t,setCourseStep:n}=ae(),{courseData:i}=s,[l,d]=x.useState(null),[o,a]=x.useState(!1),[u,C]=x.useState({modules:3,lessonsPerModule:2,assessments:1}),h=()=>Rt(null,null,function*(){if(!i.title.trim()&&!i.description.trim()){alert("Please add a course title and description first to get AI suggestions.");return}a(!0);try{yield new Promise(y=>setTimeout(y,1500));const v={modules:i.title.toLowerCase().includes("comprehensive")?5:3,lessonsPerModule:i.difficulty==="beginner"?2:3,assessments:i.difficulty==="beginner"?1:2,reasoning:`Based on your "${i.title}" course and ${i.difficulty} difficulty level, we recommend this structure for optimal learning outcomes.`,confidence:.85};d(v)}catch(v){console.error("Error generating AI suggestion:",v),alert("Failed to generate AI suggestion. Please try again.")}finally{a(!1)}}),p=()=>{l&&(C({modules:l.modules,lessonsPerModule:l.lessonsPerModule,assessments:l.assessments}),t(l.modules,l.lessonsPerModule,l.assessments),r({estimatedDuration:l.modules*l.lessonsPerModule*30+l.assessments*15}),n(3))},w=()=>{t(u.modules,u.lessonsPerModule,u.assessments),r({estimatedDuration:u.modules*u.lessonsPerModule*30+u.assessments*15}),n(3)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Plan Your Course Structure"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Get AI help to plan your course structure, or design it yourself if you know what you want."})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-25 to-blue-25 border border-purple-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(m,{path:V,size:1.2,className:"text-purple-500"}),e.jsx("h5",{className:"text-base font-semibold text-gray-800",children:"Option 1: Get Help"})]}),l?e.jsx("div",{className:"bg-white rounded-lg p-3 border border-purple-100",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h6",{className:"font-medium text-gray-800 mb-2 text-sm",children:"AI Recommendation"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:l.reasoning}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[e.jsxs("div",{className:"text-center p-2 bg-purple-25 rounded-md border border-purple-100",children:[e.jsx("div",{className:"text-lg font-bold text-purple-500",children:l.modules}),e.jsx("div",{className:"text-xs text-purple-500",children:"Modules"})]}),e.jsxs("div",{className:"text-center p-2 bg-blue-25 rounded-md border border-blue-100",children:[e.jsx("div",{className:"text-lg font-bold text-blue-500",children:l.lessonsPerModule}),e.jsx("div",{className:"text-xs text-blue-500",children:"Lessons/Module"})]}),e.jsxs("div",{className:"text-center p-2 bg-green-25 rounded-md border border-green-100",children:[e.jsx("div",{className:"text-lg font-bold text-green-500",children:l.assessments}),e.jsx("div",{className:"text-xs text-green-500",children:"Assessments"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[e.jsx(m,{path:Ys,size:.6}),"Confidence: ",Math.round(l.confidence*100),"%"]})]}),e.jsxs("button",{onClick:p,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-colors text-sm",children:[e.jsx(m,{path:be,size:.7}),"Apply"]})]})}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Get intelligent suggestions for your course structure based on your title, description, and objectives."}),e.jsx("button",{onClick:h,disabled:o,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-purple-500 text-white rounded-md hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:o?e.jsxs(e.Fragment,{children:[e.jsx(m,{path:de,size:.8,className:"animate-spin"}),"Analyzing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{path:V,size:.8}),"Get AI Suggestion"]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-25 to-green-25 border border-blue-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(m,{path:Ws,size:1.2,className:"text-blue-500"}),e.jsx("h5",{className:"text-base font-semibold text-gray-800",children:"Option 2: Self-Guided"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"modules-input",className:"block text-xs font-medium text-gray-600 mb-1",children:"Number of Modules"}),e.jsx("input",{id:"modules-input",type:"number",min:"1",max:"10",value:u.modules,onChange:v=>C(y=>Le(Re({},y),{modules:parseInt(v.target.value)||1})),className:"w-full px-2 py-1.5 border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lessons-input",className:"block text-xs font-medium text-gray-600 mb-1",children:"Lessons per Module"}),e.jsx("input",{id:"lessons-input",type:"number",min:"1",max:"10",value:u.lessonsPerModule,onChange:v=>C(y=>Le(Re({},y),{lessonsPerModule:parseInt(v.target.value)||1})),className:"w-full px-2 py-1.5 border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"assessments-input",className:"block text-xs font-medium text-gray-600 mb-1",children:"Number of Assessments"}),e.jsx("input",{id:"assessments-input",type:"number",min:"0",max:"10",value:u.assessments,onChange:v=>C(y=>Le(Re({},y),{assessments:parseInt(v.target.value)||0})),className:"w-full px-2 py-1.5 border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-md p-2",children:[e.jsx("span",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Estimated Course Duration"}),e.jsxs("div",{className:"text-sm font-semibold text-gray-800",children:["~",u.modules*u.lessonsPerModule*30+u.assessments*15," ","minutes"]})]}),e.jsx("div",{}),e.jsx("div",{className:"flex items-end justify-end",children:e.jsxs("button",{onClick:w,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-colors text-sm",children:[e.jsx(m,{path:be,size:.7}),"Apply Custom Structure"]})})]})]})]})},Mt=({modules:s,expandedModules:r,onToggleModuleExpansion:t,onUpdateModule:n,onUpdateLesson:i,onOpenLessonEditor:l,onLessonReorder:d})=>{const[o,a]=x.useState(!1),u=(p,w)=>{p.dataTransfer.setData("text/plain",w)},C=p=>{p.preventDefault()},h=(p,w,v)=>{p.preventDefault();const y=p.dataTransfer.getData("text/plain");if(y===v)return;const j=s.find(N=>N.id===w);if(!j)return;const g=j.lessons.findIndex(N=>N.id===y),b=j.lessons.findIndex(N=>N.id===v);g!==-1&&b!==-1&&d(w,g,b)};return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"mb-4 cursor-pointer flex items-center justify-between",onClick:()=>a(!o),onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),a(!o))},tabIndex:0,role:"button","aria-label":"Toggle Step 2: Build Content",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Step 2: Build Content"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Create modules and lessons for your course"})]}),o&&e.jsx("div",{className:"flex items-center gap-2",children:s.length>0?e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(m,{path:be,size:1}),e.jsxs("span",{className:"text-xs font-medium",children:[s.length," Module",s.length!==1?"s":""]})]}):e.jsxs("div",{className:"flex items-center gap-1 text-red-500",children:[e.jsx(m,{path:Q,size:1}),e.jsx("span",{className:"text-xs font-medium",children:"No Modules"})]})})]}),e.jsx(m,{path:o?ue:me,size:1,className:"text-gray-400"})]}),!o&&e.jsx(e.Fragment,{children:s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(m,{path:Y,size:3,className:"mx-auto text-gray-300 mb-4"}),e.jsx("p",{children:"No course structure found. Please go back to Step 2 to plan your course."})]}):e.jsx("div",{className:"space-y-4",children:s.map((p,w)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("button",{onClick:()=>t(p.id),className:"text-left hover:text-blue-600 transition-colors",children:e.jsx(m,{path:r.has(p.id)?ue:me,size:.8,className:"text-gray-400"})}),e.jsx("input",{type:"text",value:p.title||`Module ${w+1}`,onChange:v=>n(p.id,{title:v.target.value}),className:"font-medium text-gray-900 border-none focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] rounded px-2 py-1 bg-transparent hover:bg-gray-50",placeholder:`Module ${w+1}`})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[p.lessons.length," lesson",p.lessons.length!==1?"s":""]})]}),r.has(p.id)&&p.lessons.length>0&&e.jsx("div",{className:"ml-6 space-y-2",children:p.lessons.map((v,y)=>e.jsxs("div",{draggable:!0,onDragStart:j=>u(j,v.id),onDragOver:C,onDrop:j=>h(j,p.id,v.id),className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>l(v.id),onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),l(v.id))},tabIndex:0,role:"button","aria-label":`Open lesson editor for ${v.title||`Lesson ${y+1}`}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"cursor-grab hover:cursor-grabbing p-1 text-gray-400 hover:text-gray-600",children:e.jsx(m,{path:Ks,size:.8})}),e.jsx(m,{path:Y,size:.8,className:"text-gray-400"}),e.jsx("input",{type:"text",value:v.title||`Lesson ${y+1}`,onChange:j=>{i(p.id,v.id,{title:j.target.value})},className:"text-sm font-medium text-gray-700 border-none focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] rounded px-2 py-1 bg-transparent hover:bg-gray-100",placeholder:`Lesson ${y+1}`,onClick:j=>j.stopPropagation(),onFocus:j=>j.stopPropagation()})]}),e.jsx("div",{className:"flex items-center gap-2",children:v.content&&v.content.toString().trim()?e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"Content Added"}):e.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full",children:"No Content"})})]},v.id))})]},p.id))})})]})},zt=({lessonData:s,courseTitle:r,onUpdateLesson:t,onAddModule:n,onAddLesson:i})=>{const[l,d]=x.useState(null),o=()=>{if(!s)return;const g=[];if(s.title&&(g.push(`ðŸ“ **Enhanced Title**: "${s.title}" â†’ "${a(s.title)}"`),g.push(`ðŸŽ¯ **Learning Objective**: "${u(s.title)}"`)),s.description&&g.push(`ðŸ“– **Expanded Description**: "${s.description}" â†’ "${C(s.description)}"`),s.sections.length>0){const b=s.sections[0];b.content?g.push(`âœ¨ **Content Enhancement**: "${b.content.substring(0,50)}..." â†’ "${h(b.content,s.title)}"`):g.push(`ðŸš€ **Starter Content**: "${p(s.title)}"`)}else g.push(`ðŸ“š **Lesson Structure**: ${w()}`);d(g)},a=g=>{const b=[`Master ${g}: Complete Guide`,`${g} - Essential Skills & Techniques`,`Advanced ${g}: From Beginner to Expert`,`${g} Fundamentals & Best Practices`,`Professional ${g}: Industry Insights`];return b[Math.floor(Math.random()*b.length)]},u=g=>{const b=[`By the end of this lesson, you will understand the core principles of ${g}`,`Learn practical techniques and strategies for mastering ${g}`,`Develop comprehensive knowledge and skills in ${g}`,`Gain hands-on experience with ${g} through real-world examples`,`Master the fundamentals and advanced concepts of ${g}`];return b[Math.floor(Math.random()*b.length)]},C=g=>{const b=[`${g} This comprehensive lesson covers essential concepts, practical applications, and industry best practices.`,`${g} Learn through interactive examples, case studies, and hands-on exercises designed for real-world success.`,`${g} Discover proven strategies, common pitfalls to avoid, and expert tips for mastering this topic.`,`${g} Perfect for both beginners and experienced professionals looking to enhance their skills.`];return b[Math.floor(Math.random()*b.length)]},h=(g,b)=>{const N=[`# ${b}

${g}

## Key Takeaways
â€¢ Point 1
â€¢ Point 2
â€¢ Point 3

## Next Steps
Continue building on these foundations...`,`${g}

## Practical Examples
Here are real-world applications...

## Common Mistakes to Avoid
1. Mistake 1
2. Mistake 2

## Expert Tips
â€¢ Tip 1
â€¢ Tip 2`,`${g}

## Summary
This lesson covered...

## Practice Exercise
Try this activity to reinforce your learning...

## Additional Resources
Explore these materials for deeper understanding...`];return N[Math.floor(Math.random()*N.length)]},p=g=>{const b=[`# Welcome to ${g}

This lesson will guide you through the essential concepts and practical applications of ${g}.

## What You'll Learn
â€¢ Fundamental principles
â€¢ Key techniques
â€¢ Real-world applications

## Getting Started
Let's begin with the basics...`,`# Introduction to ${g}

${g} is a fundamental concept that forms the foundation for advanced learning in this field.

## Learning Objectives
â€¢ Understand core concepts
â€¢ Apply basic techniques
â€¢ Build practical skills

## Lesson Overview
We'll cover...`,`# ${g} Essentials

In this comprehensive lesson, you'll discover everything you need to know about ${g}.

## Topics Covered
â€¢ Basic concepts
â€¢ Intermediate techniques
â€¢ Advanced applications

## Your Learning Journey
Start here and build your expertise...`];return b[Math.floor(Math.random()*b.length)]},w=()=>{const g=[`ðŸ“‹ **Recommended Structure**:
1. Introduction & Overview
2. Core Concepts
3. Practical Examples
4. Hands-on Exercise
5. Summary & Next Steps`,`ðŸ—ï¸ **Content Framework**:
â€¢ Opening Hook
â€¢ Learning Objectives
â€¢ Main Content (3-4 sections)
â€¢ Practice Activities
â€¢ Assessment Questions
â€¢ Conclusion`,`ðŸ“š **Lesson Flow**:
â€¢ Warm-up Activity
â€¢ Theory & Concepts
â€¢ Real-world Applications
â€¢ Interactive Practice
â€¢ Knowledge Check
â€¢ Future Learning Path`];return g[Math.floor(Math.random()*g.length)]},v=()=>{if(!r){alert("Please enter a course title first to generate structure suggestions.");return}const g=r.toLowerCase();let b=[];g.includes("beginner")||g.includes("fundamental")||g.includes("basic")?b=[{title:"Getting Started",lessons:[{title:"Introduction to the Topic",description:"Basic concepts and overview"},{title:"Essential Tools and Setup",description:"Required software and environment"},{title:"First Steps",description:"Your first practical exercise"}]},{title:"Core Concepts",lessons:[{title:"Understanding the Basics",description:"Fundamental principles"},{title:"Key Techniques",description:"Essential methods and approaches"},{title:"Common Patterns",description:"Frequently used solutions"}]},{title:"Practical Application",lessons:[{title:"Real-World Examples",description:"Case studies and scenarios"},{title:"Hands-on Projects",description:"Build something practical"},{title:"Troubleshooting",description:"Common issues and solutions"}]}]:g.includes("advanced")||g.includes("expert")||g.includes("professional")?b=[{title:"Advanced Theory",lessons:[{title:"Complex Concepts",description:"Advanced theoretical knowledge"},{title:"Advanced Techniques",description:"Sophisticated methods"},{title:"Performance Optimization",description:"Speed and efficiency"}]},{title:"Professional Skills",lessons:[{title:"Industry Best Practices",description:"Professional standards"},{title:"Advanced Problem Solving",description:"Complex scenarios"},{title:"Expert Tips and Tricks",description:"Pro-level insights"}]},{title:"Mastery and Beyond",lessons:[{title:"Cutting-Edge Trends",description:"Latest developments"},{title:"Innovation and Creativity",description:"Pushing boundaries"},{title:"Teaching Others",description:"Sharing your expertise"}]}]:b=[{title:"Foundation",lessons:[{title:"Introduction and Overview",description:"Course overview and objectives"},{title:"Basic Concepts",description:"Fundamental principles"},{title:"Getting Started",description:"First practical steps"}]},{title:"Core Learning",lessons:[{title:"Main Concepts",description:"Key learning areas"},{title:"Practical Examples",description:"Real-world applications"},{title:"Interactive Practice",description:"Hands-on exercises"}]},{title:"Advanced Topics",lessons:[{title:"Complex Scenarios",description:"Advanced applications"},{title:"Best Practices",description:"Industry standards"},{title:"Next Steps",description:"Future learning path"}]}],b.forEach((N,f)=>{const c=`module-${Date.now()}-${f}`;n({title:N.title}),N.lessons.forEach(_=>{i(c,{title:_.title,description:_.description,estimatedDuration:15,isRequired:!0})})}),alert(`Generated ${b.length} modules with ${b.reduce((N,f)=>N+f.lessons.length,0)} lessons!`)},y=()=>{if(!r){alert("Please enter a course title first to generate content ideas.");return}const b=["ðŸ“š **Interactive Quizzes**: Add knowledge checks throughout lessons","ðŸŽ¯ **Learning Objectives**: Clear goals for each lesson","ðŸ’¡ **Case Studies**: Real-world examples and scenarios","ðŸ› ï¸ **Hands-on Exercises**: Practical activities and projects","ðŸ“Š **Progress Tracking**: Visual indicators of learning progress","ðŸ”— **Additional Resources**: Links to further reading and tools","ðŸ“ **Summary Points**: Key takeaways at the end of each lesson","â“ **Discussion Questions**: Topics for group discussion","ðŸŽ¬ **Video Demonstrations**: Screen recordings and tutorials","ðŸ“‹ **Checklists**: Step-by-step guides and procedures"].join(`

`);if(s&&s.sections.length>0){const N=[...s.sections],f=N[0];f&&f.type==="text"&&(f.content=`# Content Ideas for ${r}

${b}

## How to Use These Ideas

1. **Review each suggestion** and determine relevance to your course
2. **Prioritize** based on your learning objectives
3. **Integrate** into your lesson structure
4. **Customize** to fit your specific topic and audience
5. **Test** with learners to ensure effectiveness`,t({sections:N}),alert("Content ideas have been added to your current lesson!"))}else alert("Please open a lesson first to add content ideas.")},j=g=>{let b="";g.includes("ðŸ“ **Enhanced Title**")?b=`# Preview: ${g.split('â†’ "')[1].split('"')[0]}

This enhanced title is more engaging and descriptive, making it clear what learners will gain from this lesson.`:g.includes("ðŸŽ¯ **Learning Objective**")?b=`# Learning Objective Preview

**New Objective:**
${g.split('â†’ "')[1].split('"')[0]}

This objective clearly defines what learners will accomplish by the end of the lesson.`:g.includes("âœ¨ **Content Enhancement**")||g.includes("ðŸš€ **Starter Content**")?b=`# Content Preview

**Enhanced Content:**

${g.split('â†’ "')[1].split('"')[0]}

This enhanced content provides a more comprehensive and structured learning experience.`:g.includes("ðŸ“š **Lesson Structure**")&&(b=`# Structure Preview

**Recommended Lesson Structure:**

1. **Introduction & Overview** - Set the context and learning goals
2. **Core Concepts** - Explain fundamental principles
3. **Practical Examples** - Show real-world applications
4. **Hands-on Exercise** - Provide interactive practice
5. **Summary & Next Steps** - Reinforce learning and guide future study

This structure follows proven learning principles and ensures comprehensive coverage.`),b&&alert(`Preview:

${b}

Click "Use this suggestion" to apply it to your lesson.`)};return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(m,{path:V,size:1.5,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI Content Assistant"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get intelligent suggestions for your course content and structure"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("button",{onClick:o,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(m,{path:Ve,size:.8}),"Get AI Suggestions"]}),e.jsxs("button",{onClick:v,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[e.jsx(m,{path:V,size:.8}),"Generate Course Structure"]}),e.jsxs("button",{onClick:y,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[e.jsx(m,{path:Ve,size:.8}),"Content Ideas"]})]}),l&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"AI Suggestions:"}),l.map((g,b)=>e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-800",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsx("div",{className:"flex-1 whitespace-pre-line",children:g}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>j(g),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:"Preview"})})]})},b))]})]})},Ut=({lessonData:s})=>{const r=()=>{if(!s)return;const t=[];let n=0,i=0;if(s.title){i+=20;let a=0;s.title.length>5&&(a+=5),s.title.length<50&&(a+=5),s.title.includes(":")&&(a+=5),(s.title.includes("Guide")||s.title.includes("Complete")||s.title.includes("Essential"))&&(a+=5),n+=a,t.push(`ðŸ“ **Title Quality**: ${a}/20 - ${a>=15?"Excellent":a>=10?"Good":"Needs improvement"}`)}if(s.description){i+=20;let a=0;s.description.length>20&&(a+=5),s.description.length<200&&(a+=5),(s.description.includes("learn")||s.description.includes("understand"))&&(a+=5),(s.description.includes("practical")||s.description.includes("hands-on"))&&(a+=5),n+=a,t.push(`ðŸ“– **Description Quality**: ${a}/20 - ${a>=15?"Excellent":a>=10?"Good":"Needs improvement"}`)}if(s.sections.length>0){i+=40;let a=0;s.sections.forEach(u=>{u.content&&u.content.length>100&&(a+=8),u.content&&u.content.includes("#")&&(a+=8),u.content&&u.content.includes("â€¢")&&(a+=8),u.content&&u.content.includes("##")&&(a+=8)}),n+=Math.min(a,40),t.push(`ðŸ“š **Content Quality**: ${Math.min(a,40)}/40 - ${a>=30?"Excellent":a>=20?"Good":"Needs improvement"}`)}i+=20;let l=0;s.sections.length>=3&&(l+=10),s.sections.length>=5&&(l+=10),n+=l,t.push(`ðŸ—ï¸ **Structure Quality**: ${l}/20 - ${l>=15?"Excellent":l>=10?"Good":"Needs improvement"}`);const d=Math.round(n/i*100);let o="F";d>=90?o="A":d>=80?o="B":d>=70?o="C":d>=60&&(o="D"),t.unshift(`ðŸŽ¯ **Overall Quality Score**: ${n}/${i} (${d}%) - Grade: ${o}`),d<70&&t.push(`
ðŸ’¡ **Improvement Suggestions**:
â€¢ Add more detailed content to sections
â€¢ Include learning objectives
â€¢ Add practical examples and exercises
â€¢ Structure content with clear headings
â€¢ Include summary points and takeaways`),alert(`Content Quality Report:

${t.join(`
`)}`)};return s?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(m,{path:ve,size:1.5,className:"text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Content Quality Validator"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Analyze and score your lesson content quality"})]})]}),e.jsxs("button",{onClick:r,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[e.jsx(m,{path:se,size:.8}),"Validate Content Quality"]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"What We Check:"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ Title clarity and engagement"}),e.jsx("li",{children:"â€¢ Description completeness"}),e.jsx("li",{children:"â€¢ Content structure and formatting"}),e.jsx("li",{children:"â€¢ Section organization"}),e.jsx("li",{children:"â€¢ Overall lesson completeness"})]})]})]}):null};var qt=(s,r,t)=>new Promise((n,i)=>{var l=a=>{try{o(t.next(a))}catch(u){i(u)}},d=a=>{try{o(t.throw(a))}catch(u){i(u)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((t=t.apply(s,r)).next())});function Ft(s,r={}){const{delay:t=2e3,enabled:n=!0,onSave:i,onSaveSuccess:l,onSaveError:d}=r,[o,a]=x.useState(!1),[u,C]=x.useState(null),[h,p]=x.useState("idle"),[w,v]=x.useState(null),y=x.useRef(null),j=x.useRef(s),g=x.useCallback(()=>qt(null,null,function*(){if(!(!n||!i||s===j.current))try{a(!0),p("saving"),v(null),yield i(s),j.current=s,C(new Date),p("saved"),a(!1),l==null||l(),setTimeout(()=>{p("idle")},3e3)}catch(N){const f=N instanceof Error?N:new Error("Save failed");v(f),p("error"),a(!1),d==null||d(f),setTimeout(()=>{p("idle"),v(null)},5e3)}}),[s,n,i,l,d]),b=x.useCallback(()=>{p("idle"),v(null)},[]);return x.useEffect(()=>{if(!(!n||!i))return y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{g()},t),()=>{y.current&&clearTimeout(y.current)}},[s,t,n,i,g]),x.useEffect(()=>()=>{y.current&&clearTimeout(y.current)},[]),{isSaving:o,lastSaved:u,saveStatus:h,error:w,triggerSave:g,resetSaveStatus:b}}const Bt=({status:s,lastSaved:r,className:t=""})=>{const i=(()=>{switch(s){case"saving":return{icon:Ye,text:"Saving...",color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"};case"saved":return{icon:ve,text:"Saved",color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200"};case"error":return{icon:se,text:"Save failed",color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200"};default:return{icon:Qs,text:"Ready",color:"text-gray-500",bgColor:"bg-gray-50",borderColor:"border-gray-200"}}})(),l=s==="saving";return s==="idle"?null:e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-2 rounded-lg border ${i.bgColor} ${i.borderColor} ${t}`,children:[e.jsx(m,{path:i.icon,size:.8,className:`${i.color} ${l?"animate-spin":""}`}),e.jsx("span",{className:`text-sm font-medium ${i.color}`,children:i.text}),r&&s==="saved"&&e.jsx("span",{className:"text-xs text-gray-500",children:r.toLocaleTimeString()})]})};var Gt=(s,r,t)=>new Promise((n,i)=>{var l=a=>{try{o(t.next(a))}catch(u){i(u)}},d=a=>{try{o(t.throw(a))}catch(u){i(u)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((t=t.apply(s,r)).next())});const Vt=({value:s,onChange:r,onSave:t,placeholder:n="Enter your content here...",className:i="",showSaveStatus:l=!0})=>{const d=x.useRef(null),o=x.useCallback(()=>{d.current&&r(d.current.innerHTML)},[r]),{lastSaved:a,saveStatus:u}=Ft(s,{delay:2e3,enabled:!!t,onSave:t||(()=>Gt(null,null,function*(){})),onSaveError:C=>{console.error("Autosave failed:",C)}});return e.jsxs("div",{className:`${i}`,children:[l&&t&&e.jsx("div",{className:"mb-3 flex justify-end",children:e.jsx(Bt,{status:u,lastSaved:a})}),e.jsx("div",{ref:d,contentEditable:!0,dangerouslySetInnerHTML:{__html:s},onInput:o,className:"h-full min-h-[300px] p-4 focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent text-gray-900","data-placeholder":n,style:{fontFamily:"Inter, system-ui, sans-serif",fontSize:"16px",lineHeight:"1.6"}})]})};var Ht=Object.defineProperty,Yt=Object.defineProperties,Wt=Object.getOwnPropertyDescriptors,ts=Object.getOwnPropertySymbols,Kt=Object.prototype.hasOwnProperty,Qt=Object.prototype.propertyIsEnumerable,rs=(s,r,t)=>r in s?Ht(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,Me=(s,r)=>{for(var t in r||(r={}))Kt.call(r,t)&&rs(s,t,r[t]);if(ts)for(var t of ts(r))Qt.call(r,t)&&rs(s,t,r[t]);return s},ze=(s,r)=>Yt(s,Wt(r)),Zt=(s,r,t)=>new Promise((n,i)=>{var l=a=>{try{o(t.next(a))}catch(u){i(u)}},d=a=>{try{o(t.throw(a))}catch(u){i(u)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((t=t.apply(s,r)).next())});const Xt=({onFileUpload:s,acceptedTypes:r=["image/*","video/*",".pdf",".doc",".docx",".ppt",".pptx"],maxFileSize:t=50,maxFiles:n=10,className:i=""})=>{const[l,d]=x.useState(!1),[o,a]=x.useState([]),u=x.useRef(null),C=c=>c.type.startsWith("image/")?"image":c.type.startsWith("video/")?"video":"document",h=c=>{switch(c){case"image":return Es;case"video":return _s;case"document":return Te}},p=c=>{if(c===0)return"0 Bytes";const _=1024,E=["Bytes","KB","MB","GB"],P=Math.floor(Math.log(c)/Math.log(_));return parseFloat((c/Math.pow(_,P)).toFixed(2))+" "+E[P]},w=c=>new Promise((_,E)=>{let P=0;const O=setInterval(()=>{P+=Math.random()*20,P>=100?(P=100,clearInterval(O),Math.random()>.1?(a(L=>L.map(R=>R.id===c.id?ze(Me({},R),{status:"success",progress:100}):R)),_()):(a(L=>L.map(R=>R.id===c.id?ze(Me({},R),{status:"error",progress:0,error:"Upload failed"}):R)),E(new Error("Upload failed")))):a(L=>L.map(R=>R.id===c.id?ze(Me({},R),{progress:P}):R))},100)}),v=x.useCallback(c=>Zt(null,null,function*(){const _=O=>{var L;if(O.size>t*1024*1024)return`File size exceeds ${t}MB limit`;const R="."+((L=O.name.split(".").pop())==null?void 0:L.toLowerCase());return r.some(W=>W.includes("*")?O.type.startsWith(W.replace("*","")):W===R)?null:"File type not supported"},E=Array.from(c);if(o.length+E.length>n){alert(`Maximum ${n} files allowed`);return}const P=[];for(const O of E){const L=_(O);if(L){alert(`${O.name}: ${L}`);continue}const R={id:`file-${Date.now()}-${Math.random()}`,file:O,type:C(O),url:URL.createObjectURL(O),status:"uploading",progress:0};P.push(R)}if(P.length!==0){a(O=>[...O,...P]);for(const O of P)try{yield w(O)}catch(L){console.error("Upload failed:",L)}s([...o,...P])}}),[o,n,s,r,t]),y=x.useCallback(c=>{c.preventDefault(),d(!1),c.dataTransfer.files&&v(c.dataTransfer.files)},[v]),j=x.useCallback(c=>{c.preventDefault(),d(!0)},[]),g=x.useCallback(c=>{c.preventDefault(),d(!1)},[]),b=x.useCallback(c=>{c.target.files&&v(c.target.files)},[v]),N=c=>{a(_=>{const E=_.filter(P=>P.id!==c);return s(E),E})},f=()=>{var c;(c=u.current)==null||c.click()};return e.jsxs("div",{className:`space-y-4 ${i}`,children:[e.jsxs("div",{onDrop:y,onDragOver:j,onDragLeave:g,onClick:f,onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),f())},role:"button",tabIndex:0,className:`
          border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all
          ${l?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}
        `,children:[e.jsx(m,{path:Zs,size:3,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drop files here or click to upload"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Support for images, videos, and documents up to ",t,"MB"]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 text-xs text-gray-400",children:r.map((c,_)=>e.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded",children:c},_))})]}),e.jsx("input",{ref:u,type:"file",multiple:!0,accept:r.join(","),onChange:b,className:"hidden"}),o.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Uploaded Files"}),e.jsx("div",{className:"space-y-2",children:o.map(c=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(m,{path:h(c.type),size:1.2,className:"text-gray-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:c.file.name}),e.jsx("p",{className:"text-xs text-gray-500",children:p(c.file.size)}),c.status==="uploading"&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"bg-gray-200 rounded-full h-1",children:e.jsx("div",{className:"bg-blue-600 h-1 rounded-full transition-all duration-300",style:{width:`${c.progress}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Uploading... ",Math.round(c.progress),"%"]})]}),c.status==="error"&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:c.error||"Upload failed"})]}),e.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[c.status==="uploading"&&e.jsx(m,{path:Ye,size:.8,className:"text-blue-500 animate-spin"}),c.status==="success"&&e.jsx(m,{path:ve,size:.8,className:"text-green-500"}),c.status==="error"&&e.jsx(m,{path:Xs,size:.8,className:"text-red-500"}),e.jsx("button",{onClick:_=>{_.stopPropagation(),N(c.id)},className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(m,{path:Q,size:.8})})]})]},c.id))})]})]})};var Jt=Object.defineProperty,er=Object.defineProperties,sr=Object.getOwnPropertyDescriptors,as=Object.getOwnPropertySymbols,tr=Object.prototype.hasOwnProperty,rr=Object.prototype.propertyIsEnumerable,ns=(s,r,t)=>r in s?Jt(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,K=(s,r)=>{for(var t in r||(r={}))tr.call(r,t)&&ns(s,t,r[t]);if(as)for(var t of as(r))rr.call(r,t)&&ns(s,t,r[t]);return s},J=(s,r)=>er(s,sr(r));const ar=({lessonData:s,onUpdateLesson:r,onClose:t})=>{var n,i,l,d;const[o,a]=x.useState(s.sections.length>0?s.sections[0].id:null),[u,C]=x.useState(!1),[h,p]=x.useState("text"),[w,v]=x.useState(!1),y=()=>{const c={id:`section-${Date.now()}`,type:h,content:"",order:s.sections.length},_=[...s.sections,c];r({sections:_}),a(c.id),C(!1)},j=(c,_)=>{const E=s.sections.map(P=>P.id===c?K(K({},P),_):P);r({sections:E})},g=c=>{const _=s.sections.filter(E=>E.id!==c).map((E,P)=>J(K({},E),{order:P}));if(r({sections:_}),o===c)if(_.length===0)a(null);else if(_.length===1)a(_[0].id);else{const E=s.sections.findIndex(O=>O.id===c),P=E>=_.length?_.length-1:E;a(_[P].id)}},b=c=>{switch(c){case"text":return Ke;case"image":return Es;case"video":return _s;case"file":return Te;case"link":return Js;default:return Ke}},N=c=>{switch(c){case"text":return"bg-blue-100 text-blue-600";case"image":return"bg-green-100 text-green-600";case"video":return"bg-purple-100 text-purple-600";case"file":return"bg-orange-100 text-orange-600";case"link":return"bg-indigo-100 text-indigo-600";default:return"bg-gray-100 text-gray-600"}},f=c=>{var _,E,P,O,L,R,te,W;switch(c.type){case"text":return e.jsx(Vt,{value:c.content,onChange:S=>j(c.id,{content:S}),placeholder:"Start writing your lesson content..."});case"image":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:((_=c.metadata)==null?void 0:_.url)||"",onChange:S=>j(c.id,{metadata:J(K({},c.metadata),{url:S.target.value})}),placeholder:"Image URL",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"text",value:((E=c.metadata)==null?void 0:E.alt)||"",onChange:S=>j(c.id,{metadata:J(K({},c.metadata),{alt:S.target.value})}),placeholder:"Alt text for accessibility",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"text",value:((P=c.metadata)==null?void 0:P.caption)||"",onChange:S=>j(c.id,{metadata:J(K({},c.metadata),{caption:S.target.value})}),placeholder:"Image caption (optional)",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(m,{path:U,size:.8}),"Upload Image"]})})]});case"video":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:((O=c.metadata)==null?void 0:O.url)||"",onChange:S=>j(c.id,{metadata:J(K({},c.metadata),{url:S.target.value})}),placeholder:"Video URL",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"number",value:((L=c.metadata)==null?void 0:L.duration)||"",onChange:S=>j(c.id,{metadata:J(K({},c.metadata),{duration:parseInt(S.target.value)||0})}),placeholder:"Duration in seconds",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[e.jsx(m,{path:U,size:.8}),"Upload Video"]})})]});case"file":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:((R=c.metadata)==null?void 0:R.url)||"",onChange:S=>j(c.id,{metadata:J(K({},c.metadata),{url:S.target.value})}),placeholder:"File URL",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"text",value:((te=c.metadata)==null?void 0:te.size)||"",onChange:S=>j(c.id,{metadata:J(K({},c.metadata),{size:S.target.value})}),placeholder:"File size (e.g., 2.5 MB)",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-colors",children:[e.jsx(m,{path:U,size:.8}),"Upload File"]})})]});case"link":return e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:((W=c.metadata)==null?void 0:W.url)||"",onChange:S=>j(c.id,{metadata:J(K({},c.metadata),{url:S.target.value})}),placeholder:"Link URL",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"text",value:c.content,onChange:S=>j(c.id,{content:S.target.value}),placeholder:"Link text",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]});default:return null}};return e.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{path:Y,size:1.5,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600",children:"Editing lesson content"})]})]}),e.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(m,{path:U,size:1.5,className:"rotate-45"})})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Content Sections"}),e.jsxs("button",{onClick:()=>C(!0),className:"w-full inline-flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(m,{path:U,size:.8}),"Add Section"]})]}),u&&e.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Add New Section"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("select",{value:h,onChange:c=>p(c.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"image",children:"Image"}),e.jsx("option",{value:"video",children:"Video"}),e.jsx("option",{value:"file",children:"File"}),e.jsx("option",{value:"link",children:"Link"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:y,className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm",children:"Add"}),e.jsx("button",{onClick:()=>C(!1),className:"flex-1 px-3 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors text-sm",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[s.sections.map((c,_)=>e.jsx("div",{className:`p-3 rounded-lg border-2 cursor-pointer transition-all ${o===c.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>a(c.id),onKeyDown:E=>{(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),a(c.id))},tabIndex:0,role:"button","aria-label":`Select ${c.type} section ${_+1}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-md ${N(c.type)}`,children:e.jsx(m,{path:b(c.type),size:.8})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:c.type}),e.jsxs("span",{className:"text-xs text-gray-500",children:["#",_+1]})]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:c.content||"No content"})]}),e.jsx("button",{onClick:E=>{E.stopPropagation(),g(c.id)},className:"p-1 text-red-400 hover:text-red-600",title:"Delete section",children:e.jsx(m,{path:Ge,size:.8})})]})},c.id)),s.sections.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(m,{path:Y,size:2,className:"mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-sm",children:"No content sections yet"}),e.jsx("p",{className:"text-xs",children:'Click "Add Section" to get started'})]})]})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:o&&s.sections.find(c=>c.id===o)?e.jsx("div",{className:"flex-1 p-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:`p-2 rounded-md ${N(((n=s.sections.find(c=>c.id===o))==null?void 0:n.type)||"text")}`,children:e.jsx(m,{path:b(((i=s.sections.find(c=>c.id===o))==null?void 0:i.type)||"text"),size:1})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 capitalize",children:[(l=s.sections.find(c=>c.id===o))==null?void 0:l.type," ","Section"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Edit your"," ",(d=s.sections.find(c=>c.id===o))==null?void 0:d.type," ","content"]})]})]}),f(s.sections.find(c=>c.id===o))]})})}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(m,{path:Y,size:3,className:"mx-auto text-gray-300 mb-4"}),e.jsx("p",{children:"Select a section to start editing"})]})})})]}),w&&e.jsx(Xt,{onFileUpload:c=>{if(c.length>0&&o){const _=c[0];j(o,{metadata:{url:_.url}})}v(!1)}})]})};var nr=Object.defineProperty,is=Object.getOwnPropertySymbols,ir=Object.prototype.hasOwnProperty,lr=Object.prototype.propertyIsEnumerable,ls=(s,r,t)=>r in s?nr(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,os=(s,r)=>{for(var t in r||(r={}))ir.call(r,t)&&ls(s,t,r[t]);if(is)for(var t of is(r))lr.call(r,t)&&ls(s,t,r[t]);return s};const or=()=>{const{state:s}=X(),{updateLesson:r,addModule:t,addLesson:n,updateCourseField:i,updateModule:l}=ae(),{courseData:d}=s,{closeDrawer:o}=lt(),[a,u]=x.useState(null),[C,h]=x.useState(null),[p,w]=x.useState(new Set),[v,y]=x.useState(!1);x.useEffect(()=>{o()},[o]);const j=x.useCallback(c=>{const _=d.modules.flatMap(E=>E.lessons).find(E=>E.id===c);if(_){const E=_.content&&typeof _.content=="string"?[{id:"1",type:"text",content:_.content,order:0}]:[];h({id:_.id,title:_.title||`Lesson ${_.id}`,description:_.description||"",sections:E,estimatedDuration:_.estimatedDuration||15,isRequired:_.isRequired||!1}),u(c)}},[d.modules]),g=c=>{const _=new Set(p);_.has(c)?_.delete(c):_.add(c),w(_)},b=(c,_,E)=>{const P=d.modules.find(R=>R.id===c);if(!P)return;const O=[...P.lessons],[L]=O.splice(_,1);O.splice(E,0,L),l(c,{lessons:O})},N=c=>{if(!C)return;const _=os(os({},C),c);h(_);const E=d.modules.find(P=>P.lessons.some(O=>O.id===C.id));if(E){const P=_.sections.map(O=>O.content).join(`

`);r(E.id,C.id,{title:_.title,content:P,estimatedDuration:_.estimatedDuration,isRequired:_.isRequired})}},f=()=>{u(null),h(null)};return a&&C?e.jsx(ar,{lessonData:C,onUpdateLesson:N,onClose:f}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("div",{className:"mb-4 cursor-pointer flex items-center justify-between",onClick:()=>y(!v),onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),y(!v))},tabIndex:0,role:"button","aria-label":"Toggle Step 1: Course Information",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Step 1: Course Information"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Set your course title and description"})]})})}),!v&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"course-title-step3",className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Title *"}),e.jsx("input",{id:"course-title-step3",type:"text",value:d.title,onChange:c=>i({title:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter your course title..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"course-description-step3",className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Description *"}),e.jsx("textarea",{id:"course-description-step3",rows:2,value:d.description,onChange:c=>i({description:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Describe what learners will gain from this course..."})]})]})]}),e.jsx(zt,{lessonData:C,courseTitle:d.title,onUpdateLesson:N,onAddModule:t,onAddLesson:n}),e.jsx(Ut,{lessonData:C}),e.jsx(Mt,{modules:d.modules,expandedModules:p,onToggleModuleExpansion:g,onUpdateModule:l,onUpdateLesson:(c,_,E)=>{r(c,_,E)},onOpenLessonEditor:j,onLessonReorder:b})]})})},cr=({collapsedSections:s,toggleSection:r})=>{const{state:t}=X(),{courseData:n}=t,[i,l]=x.useState([]);return x.useEffect(()=>{(()=>{var o;const a=[];if(!n.title||n.title.trim().length<5?a.push({field:"title",status:"error",message:"Course title must be at least 5 characters long"}):n.title.length>100?a.push({field:"title",status:"warning",message:"Course title is quite long, consider shortening it"}):a.push({field:"title",status:"valid",message:"Course title is appropriate length"}),!n.description||n.description.trim().length<20?a.push({field:"description",status:"error",message:"Course description must be at least 20 characters long"}):n.description.length>500?a.push({field:"description",status:"warning",message:"Course description is quite long, consider shortening it"}):a.push({field:"description",status:"valid",message:"Course description is appropriate length"}),n.modules.length===0)a.push({field:"modules",status:"error",message:"Course must have at least one module"});else{const u=n.modules.reduce((C,h)=>C+h.lessons.length,0);u===0?a.push({field:"lessons",status:"error",message:"Course must have at least one lesson"}):u<3?a.push({field:"lessons",status:"warning",message:"Consider adding more lessons for a comprehensive course"}):a.push({field:"lessons",status:"valid",message:`Course has ${u} lessons across ${n.modules.length} modules`})}(o=n.settings)!=null&&o.difficulty?a.push({field:"difficulty",status:"valid",message:`Difficulty level: ${n.settings.difficulty}`}):a.push({field:"difficulty",status:"error",message:"Difficulty level must be set"}),n.assessments&&n.assessments.length>0?a.push({field:"assessments",status:"valid",message:`Course has ${n.assessments.length} assessment(s)`}):a.push({field:"assessments",status:"warning",message:"Consider adding assessments to evaluate learning"}),l(a)})()},[n]),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"p-4 cursor-pointer flex items-center justify-between hover:bg-gray-50",onClick:()=>r("review"),onKeyDown:d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),r("review"))},role:"button",tabIndex:0,"aria-expanded":!s.review,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{path:Y,size:1.2,className:"text-blue-600"}),e.jsx("h5",{className:"text-lg font-medium text-gray-900",children:"Course Review & Validation"})]}),e.jsx(m,{path:s.review?ue:me,size:1,className:"text-gray-400"})]}),!s.review&&e.jsx("div",{className:"border-t border-gray-200 p-4 space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map((d,o)=>e.jsxs("div",{className:`p-3 rounded-lg border ${d.status==="valid"?"bg-green-50 border-green-200":d.status==="warning"?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(m,{path:d.status==="valid"?be:d.status==="warning"?se:Q,size:.8,className:d.status==="valid"?"text-green-600":d.status==="warning"?"text-yellow-600":"text-red-600"}),e.jsx("span",{className:`text-sm font-medium capitalize ${d.status==="valid"?"text-green-800":d.status==="warning"?"text-yellow-800":"text-red-800"}`,children:d.field})]}),e.jsx("p",{className:`text-xs ${d.status==="valid"?"text-green-700":d.status==="warning"?"text-yellow-700":"text-red-700"}`,children:d.message})]},o))})})]})};var dr=Object.defineProperty,ur=Object.defineProperties,mr=Object.getOwnPropertyDescriptors,cs=Object.getOwnPropertySymbols,pr=Object.prototype.hasOwnProperty,xr=Object.prototype.propertyIsEnumerable,ds=(s,r,t)=>r in s?dr(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,ne=(s,r)=>{for(var t in r||(r={}))pr.call(r,t)&&ds(s,t,r[t]);if(cs)for(var t of cs(r))xr.call(r,t)&&ds(s,t,r[t]);return s},ie=(s,r)=>ur(s,mr(r));const hr=({collapsedSections:s,toggleSection:r,publishSettings:t,setPublishSettings:n})=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"p-4 cursor-pointer flex items-center justify-between hover:bg-gray-50",onClick:()=>r("settings"),onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),r("settings"))},role:"button",tabIndex:0,"aria-expanded":!s.settings,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{path:et,size:1.2,className:"text-purple-600"}),e.jsx("h5",{className:"text-lg font-medium text-gray-900",children:"Publishing Settings & Access Controls"})]}),e.jsx(m,{path:s.settings?ue:me,size:1,className:"text-gray-400"})]}),!s.settings&&e.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"course-visibility",className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Visibility"}),e.jsxs("select",{id:"course-visibility",value:t.isPublic?"public":"private",onChange:i=>n(l=>ie(ne({},l),{isPublic:i.target.value==="public"})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",children:[e.jsx("option",{value:"public",children:"Public - Visible to all users"}),e.jsx("option",{value:"private",children:"Private - Invitation only"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"enrollment-requirements",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enrollment Requirements"}),e.jsxs("select",{id:"enrollment-requirements",value:t.requireEnrollment?"required":"optional",onChange:i=>n(l=>ie(ne({},l),{requireEnrollment:i.target.value==="required"})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",children:[e.jsx("option",{value:"optional",children:"Optional - Users can start immediately"}),e.jsx("option",{value:"required",children:"Required - Approval needed"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-900",children:"Access Controls"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{id:"allow-guest-access",type:"checkbox",checked:t.allowGuestAccess,onChange:i=>n(l=>ie(ne({},l),{allowGuestAccess:i.target.checked})),className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Allow guest access"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{id:"auto-archive",type:"checkbox",checked:t.autoArchive,onChange:i=>n(l=>ie(ne({},l),{autoArchive:i.target.checked})),className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Auto-archive after completion"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"enrollment-start-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enrollment Start Date"}),e.jsx("input",{id:"enrollment-start-date",type:"date",value:t.enrollmentStartDate,onChange:i=>n(l=>ie(ne({},l),{enrollmentStartDate:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"enrollment-end-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enrollment End Date"}),e.jsx("input",{id:"enrollment-end-date",type:"date",value:t.enrollmentEndDate,onChange:i=>n(l=>ie(ne({},l),{enrollmentEndDate:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent"})]})]})]})]});var gr=Object.defineProperty,fr=Object.defineProperties,br=Object.getOwnPropertyDescriptors,us=Object.getOwnPropertySymbols,yr=Object.prototype.hasOwnProperty,vr=Object.prototype.propertyIsEnumerable,ms=(s,r,t)=>r in s?gr(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,pe=(s,r)=>{for(var t in r||(r={}))yr.call(r,t)&&ms(s,t,r[t]);if(us)for(var t of us(r))vr.call(r,t)&&ms(s,t,r[t]);return s},xe=(s,r)=>fr(s,br(r));const jr=({collapsedSections:s,toggleSection:r,seoSettings:t,setSeoSettings:n})=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"p-4 cursor-pointer flex items-center justify-between hover:bg-gray-50",onClick:()=>r("seo"),onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),r("seo"))},role:"button",tabIndex:0,"aria-expanded":!s.seo,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{path:Ss,size:1.2,className:"text-indigo-600"}),e.jsx("h5",{className:"text-lg font-medium text-gray-900",children:"Course Metadata & SEO Options"})]}),e.jsx(m,{path:s.seo?ue:me,size:1,className:"text-gray-400"})]}),!s.seo&&e.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"meta-title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Title"}),e.jsx("input",{id:"meta-title",type:"text",value:t.metaTitle,onChange:i=>n(l=>xe(pe({},l),{metaTitle:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"SEO-optimized title (50-60 characters)"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[t.metaTitle.length,"/60 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"meta-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Description"}),e.jsx("textarea",{id:"meta-description",value:t.metaDescription,onChange:i=>n(l=>xe(pe({},l),{metaDescription:i.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"SEO-optimized description (150-160 characters)"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[t.metaDescription.length,"/160 characters"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"keywords",className:"block text-sm font-medium text-gray-700 mb-2",children:"Keywords"}),e.jsx("input",{id:"keywords",type:"text",value:t.keywords,onChange:i=>n(l=>xe(pe({},l),{keywords:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter keywords separated by commas"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"canonical-url",className:"block text-sm font-medium text-gray-700 mb-2",children:"Canonical URL"}),e.jsx("input",{id:"canonical-url",type:"url",value:t.canonicalUrl,onChange:i=>n(l=>xe(pe({},l),{canonicalUrl:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"https://example.com/course"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"og-image",className:"block text-sm font-medium text-gray-700 mb-2",children:"Open Graph Image"}),e.jsx("input",{id:"og-image",type:"url",value:t.ogImage,onChange:i=>n(l=>xe(pe({},l),{ogImage:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"https://example.com/image.jpg"})]})]})]})]}),Nr=({collapsedSections:s,toggleSection:r,generatePreview:t})=>{var n,i;const{state:l}=X(),{courseData:d}=l;return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"p-4 cursor-pointer flex items-center justify-between hover:bg-gray-50",onClick:()=>r("preview"),onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),r("preview"))},role:"button",tabIndex:0,"aria-expanded":!s.preview,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{path:Pe,size:1.2,className:"text-green-600"}),e.jsx("h5",{className:"text-lg font-medium text-gray-900",children:"Course Preview & Testing Tools"})]}),e.jsx(m,{path:s.preview?ue:me,size:1,className:"text-gray-400"})]}),!s.preview&&e.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:t,className:"p-4 border border-blue-200 rounded-lg bg-blue-50 hover:border-blue-300 hover:bg-blue-100 transition-colors text-center",children:[e.jsx(m,{path:Pe,size:1.5,className:"mx-auto text-blue-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Preview Course"})]}),e.jsxs("button",{onClick:()=>alert("Student view simulation would open here"),className:"p-4 border border-green-200 rounded-lg bg-green-50 hover:border-green-300 hover:bg-green-100 transition-colors text-center",children:[e.jsx(m,{path:st,size:1.5,className:"mx-auto text-green-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Student View"})]}),e.jsxs("button",{onClick:()=>alert("Course export options would appear here"),className:"p-4 border border-purple-200 rounded-lg bg-purple-50 hover:border-purple-300 hover:bg-purple-100 transition-colors text-center",children:[e.jsx(m,{path:tt,size:1.5,className:"mx-auto text-purple-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Export Course"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-900 mb-3",children:"Quick Stats"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.modules.length}),e.jsx("div",{className:"text-xs text-gray-600",children:"Modules"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.modules.reduce((o,a)=>o+a.lessons.length,0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Lessons"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:((n=d.settings)==null?void 0:n.estimatedDuration)||0}),e.jsx("div",{className:"text-xs text-gray-600",children:"Minutes"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:((i=d.assessments)==null?void 0:i.length)||0}),e.jsx("div",{className:"text-xs text-gray-600",children:"Assessments"})]})]})]})]})]})},Cr=({validationStatus:s,isPublishing:r,handlePublish:t})=>e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(m,{path:ye,size:1.5,className:"text-green-600"}),e.jsx("h5",{className:"text-lg font-medium text-green-900",children:"Ready to Publish?"})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("p",{className:"text-sm text-green-700",children:"Your course has been reviewed and is ready for publication. Here's what will happen:"}),e.jsxs("ul",{className:"text-sm text-green-700 space-y-1 ml-4",children:[e.jsx("li",{children:"â€¢ Course will be available in the library"}),e.jsx("li",{children:"â€¢ Users can enroll and start learning"}),e.jsx("li",{children:"â€¢ Progress tracking will be enabled"}),e.jsx("li",{children:"â€¢ Certificates will be issued upon completion"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:t,disabled:s.status==="error"||r,className:`inline-flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-colors ${s.status==="error"||r?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 shadow-lg"}`,children:[e.jsx(m,{path:r?de:ye,size:1.2}),e.jsx("span",{children:r?"Publishing...":"Publish Course Now"})]}),e.jsx("button",{onClick:()=>alert("Course will be saved as draft"),className:"px-4 py-3 text-sm text-gray-600 hover:text-gray-800 underline",children:"Save as Draft"})]})]}),wr=({validationStatus:s})=>e.jsx("div",{className:`p-4 rounded-lg border ${s.status==="error"?"bg-red-50 border-red-200":s.status==="warning"?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{path:s.status==="error"?se:s.status==="warning"?se:ve,size:1.2,className:s.status==="error"?"text-red-600":s.status==="warning"?"text-yellow-600":"text-green-600"}),e.jsxs("div",{children:[e.jsx("h5",{className:`font-medium ${s.status==="error"?"text-red-900":s.status==="warning"?"text-yellow-900":"text-green-900"}`,children:s.status==="error"?"Course Cannot Be Published":s.status==="warning"?"Course Ready with Warnings":"Course Ready to Publish"}),e.jsx("p",{className:`text-sm ${s.status==="error"?"text-red-700":s.status==="warning"?"text-yellow-700":"text-green-700"}`,children:s.message})]})]})});var Sr=Object.defineProperty,_r=Object.defineProperties,Er=Object.getOwnPropertyDescriptors,ps=Object.getOwnPropertySymbols,Dr=Object.prototype.hasOwnProperty,Pr=Object.prototype.propertyIsEnumerable,xs=(s,r,t)=>r in s?Sr(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,Tr=(s,r)=>{for(var t in r||(r={}))Dr.call(r,t)&&xs(s,t,r[t]);if(ps)for(var t of ps(r))Pr.call(r,t)&&xs(s,t,r[t]);return s},Or=(s,r)=>_r(s,Er(r)),kr=(s,r,t)=>new Promise((n,i)=>{var l=a=>{try{o(t.next(a))}catch(u){i(u)}},d=a=>{try{o(t.throw(a))}catch(u){i(u)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((t=t.apply(s,r)).next())});const Ar=()=>{const{state:s}=X(),{updateCourseField:r}=ae(),{courseData:t}=s,[n,i]=x.useState([]),[l,d]=x.useState(!1),[o,a]=x.useState({isPublic:!0,requireEnrollment:!1,allowGuestAccess:!1,maxEnrollments:0,enrollmentStartDate:"",enrollmentEndDate:"",courseStartDate:"",courseEndDate:"",autoArchive:!1,archiveAfterDays:30}),[u,C]=x.useState({metaTitle:t.title||"",metaDescription:t.description||"",keywords:"",canonicalUrl:"",ogImage:"",structuredData:!0}),[h,p]=x.useState({review:!1,settings:!1,seo:!1,access:!1,preview:!1});x.useEffect(()=>{(()=>{var N;const f=[];if(!t.title||t.title.trim().length<5?f.push({field:"title",status:"error",message:"Course title must be at least 5 characters long"}):t.title.length>100?f.push({field:"title",status:"warning",message:"Course title is quite long, consider shortening it"}):f.push({field:"title",status:"valid",message:"Course title is appropriate length"}),!t.description||t.description.trim().length<20?f.push({field:"description",status:"error",message:"Course description must be at least 20 characters long"}):t.description.length>500?f.push({field:"description",status:"warning",message:"Course description is quite long, consider shortening it"}):f.push({field:"description",status:"valid",message:"Course description is appropriate length"}),t.modules.length===0)f.push({field:"modules",status:"error",message:"Course must have at least one module"});else{const c=t.modules.reduce((_,E)=>_+E.lessons.length,0);c===0?f.push({field:"lessons",status:"error",message:"Course must have at least one lesson"}):c<3?f.push({field:"lessons",status:"warning",message:"Consider adding more lessons for a comprehensive course"}):f.push({field:"lessons",status:"valid",message:`Course has ${c} lessons across ${t.modules.length} modules`})}(N=t.settings)!=null&&N.difficulty?f.push({field:"difficulty",status:"valid",message:`Difficulty level: ${t.settings.difficulty}`}):f.push({field:"difficulty",status:"error",message:"Difficulty level must be set"}),t.assessments&&t.assessments.length>0?f.push({field:"assessments",status:"valid",message:`Course has ${t.assessments.length} assessment(s)`}):f.push({field:"assessments",status:"warning",message:"Consider adding assessments to evaluate learning"}),i(f)})()},[t]);const w=()=>{const b=n.filter(f=>f.status==="error").length,N=n.filter(f=>f.status==="warning").length;return b>0?{status:"error",message:`${b} issues must be resolved`}:N>0?{status:"warning",message:`${N} warnings to consider`}:{status:"valid",message:"Course is ready to publish"}},v=b=>{p(N=>Or(Tr({},N),{[b]:!N[b]}))},y=()=>kr(null,null,function*(){if(w().status==="error"){alert("Please resolve all validation errors before publishing");return}d(!0);try{yield new Promise(N=>setTimeout(N,2e3)),r({isPublished:!0}),alert("Course published successfully! It is now available in the library.")}catch(N){console.error(N),alert("Failed to publish course. Please try again.")}finally{d(!1)}}),j=()=>{var b,N;const f={title:t.title,description:t.description,modules:t.modules.length,lessons:t.modules.reduce((c,_)=>c+_.lessons.length,0),duration:((b=t.settings)==null?void 0:b.estimatedDuration)||0,difficulty:((N=t.settings)==null?void 0:N.difficulty)||"beginner"};alert(`Course Preview:

Title: ${f.title}
Description: ${f.description}
Modules: ${f.modules}
Lessons: ${f.lessons}
Duration: ${f.duration} minutes
Difficulty: ${f.difficulty}`)},g=w();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-semibold text-gray-900",children:"Publish & Settings"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Final review and configuration before publishing your course"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:j,className:"inline-flex items-center gap-2 px-4 py-2 border border-blue-200 rounded-lg bg-blue-50 hover:border-blue-300 hover:bg-blue-100 transition-colors",children:[e.jsx(m,{path:Pe,size:1,className:"text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-900 text-sm",children:"Preview"})]}),e.jsxs("button",{onClick:y,disabled:g.status==="error"||l,className:`inline-flex items-center gap-2 px-6 py-2 rounded-lg font-medium transition-colors ${g.status==="error"||l?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:[e.jsx(m,{path:l?de:ye,size:1}),e.jsx("span",{children:l?"Publishing...":"Publish Course"})]})]})]}),e.jsx(wr,{validationStatus:g}),e.jsx(cr,{collapsedSections:h,toggleSection:v}),e.jsx(hr,{collapsedSections:h,toggleSection:v,publishSettings:o,setPublishSettings:a}),e.jsx(jr,{collapsedSections:h,toggleSection:v,seoSettings:u,setSeoSettings:C}),e.jsx(Nr,{collapsedSections:h,toggleSection:v,generatePreview:j}),e.jsx(Cr,{validationStatus:g,isPublishing:l,handlePublish:y})]})},Ls=()=>{const{state:s}=X(),{setCourseStep:r}=ae(),{courseStep:t}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(m,{path:Ds,size:1.5,className:"text-[#4ECDC4]"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Course Builder"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create an engaging, interactive learning experience"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Course Structure"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Step ",t||1," of 4"]}),e.jsx("div",{className:"flex space-x-1",children:[1,2,3,4].map(n=>e.jsx("div",{className:`w-3 h-3 rounded-full ${n<=(t||1)?"bg-[#4ECDC4]":"bg-gray-300"}`,title:n===1?"Course Overview":n===2?"Course Planning":n===3?"Content Builder":"Publish & Settings"},n))})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>r(Math.max(1,(t||1)-1)),disabled:(t||1)===1,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(m,{path:Ps,size:1,className:"mr-1"}),"Previous"]}),e.jsxs("button",{onClick:()=>r(Math.min(4,(t||1)+1)),disabled:(t||1)===4,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] disabled:opacity-50 disabled:cursor-not-allowed",children:["Next",e.jsx(m,{path:Ts,size:1,className:"ml-1"})]})]}),(t||1)===1&&e.jsx(Tt,{}),(t||1)===2&&e.jsx(Lt,{}),(t||1)===3&&e.jsx(or,{}),(t||1)===4&&e.jsx(Ar,{})]})]})},Ir=Object.freeze(Object.defineProperty({__proto__:null,default:Ls},Symbol.toStringTag,{value:"Module"}));var Ue=(s,r,t)=>new Promise((n,i)=>{var l=a=>{try{o(t.next(a))}catch(u){i(u)}},d=a=>{try{o(t.throw(a))}catch(u){i(u)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((t=t.apply(s,r)).next())});class qe{static analyzeSDSCoverage(){return Ue(this,null,function*(){const{data:r,error:t}=yield G.from("inventory_items").select("name, category, manufacturer, quantity, status").eq("status","active").or("category.ilike.%chemical%,category.ilike.%solvent%,category.ilike.%acid%,category.ilike.%base%,category.ilike.%reagent%");if(t)throw new Error("Failed to fetch inventory data");const{data:n,error:i}=yield G.from("sds_sheets").select("title, chemical_name, status, priority, risk_level").eq("status","published");if(i)throw new Error("Failed to fetch SDS sheet data from database");return this.performAnalysis(r||[],n||[])})}static performAnalysis(r,t){const n=this.filterChemicalItems(r),i=this.extractChemicalNames(t),l=this.identifyMissingChemicals(n,i),d=this.generatePriorityRecommendations(l),o=n.length,a=t.length,u=l.length,C=o>0?Math.round((o-u)/o*100):0;return{totalChemicals:o,existingSDSSheets:a,missingSDSSheets:u,coveragePercentage:C,missingChemicals:l,priorityRecommendations:d}}static filterChemicalItems(r){return r.filter(t=>{const n=(t.name||"").toLowerCase(),i=(t.category||"").toLowerCase();return(t.quantity||0)>0&&(n.includes("acid")||n.includes("base")||n.includes("solvent")||n.includes("reagent")||n.includes("chemical")||i.includes("chemical")||i.includes("solvent")||i.includes("reagent"))})}static extractChemicalNames(r){return r.map(t=>(t.chemical_name||t.title||"").trim())}static identifyMissingChemicals(r,t){return r.filter(n=>{var i;const l=((i=n.name)==null?void 0:i.toLowerCase())||"";return!t.some(d=>d.toLowerCase().includes(l)||l.includes(d.toLowerCase()))}).map(n=>{var i;return{name:n.name,category:n.category,manufacturer:(i=n.data)==null?void 0:i.manufacturer,priority:this.calculatePriority(n),reason:this.generateMissingReason(n),estimatedRisk:this.estimateRisk(n)}})}static calculatePriority(r){const t=(r.name||"").toLowerCase(),n=(r.category||"").toLowerCase(),i=r.quantity||0;return i>100||t.includes("acid")||t.includes("base")||t.includes("toxic")||t.includes("hazardous")||n.includes("dangerous")?"high":i>50||t.includes("solvent")||t.includes("reagent")||n.includes("chemical")?"medium":"low"}static generateMissingReason(r){const t=(r.name||"").toLowerCase(),n=(r.category||"").toLowerCase();return(r.quantity||0)>100||t.includes("acid")||t.includes("base")||t.includes("toxic")||t.includes("hazardous")||n.includes("dangerous")?"High-risk chemical with significant quantity - immediate SDS required for safety compliance":t.includes("reagent")||n.includes("chemical")?"Chemical reagent or laboratory chemical - SDS needed for proper handling procedures":"Standard chemical inventory item - SDS recommended for complete safety documentation"}static estimateRisk(r){const t=(r.name||"").toLowerCase(),n=(r.category||"").toLowerCase();return(r.quantity||0)>100||t.includes("acid")||t.includes("base")||t.includes("toxic")||t.includes("hazardous")||n.includes("dangerous")?"high":t.includes("reagent")||n.includes("chemical")?"medium":"low"}static generatePriorityRecommendations(r){return r.sort((t,n)=>{const i={high:3,medium:2,low:1};return i[n.priority]-i[t.priority]}).slice(0,10).map(t=>({chemicalName:t.name,priority:t.priority,reason:t.reason,suggestedAction:`Create SDS sheet for ${t.name}`,estimatedTimeToCreate:this.estimateCreationTime(t)}))}static estimateCreationTime(r){let n=1;return r.priority==="high"?n=1.5:r.priority==="medium"&&(n=1.2),r.estimatedRisk==="high"&&(n+=.3),Math.round(30*n)}static getSummaryStats(){return Ue(this,null,function*(){const r=yield this.analyzeSDSCoverage(),t=r.missingChemicals.filter(i=>i.priority==="high").length,n=r.priorityRecommendations.reduce((i,l)=>i+l.estimatedTimeToCreate,0);return{totalChemicals:r.totalChemicals,coveragePercentage:r.coveragePercentage,highPriorityMissing:t,estimatedTotalTime:n}})}static saveAnalysisResults(r,t){return Ue(this,null,function*(){const{data:n,error:i}=yield G.from("sds_gap_analysis").insert({facility_id:r,total_chemicals:t.totalChemicals,existing_sds_sheets:t.existingSDSSheets,missing_sds_sheets:t.missingSDSSheets,coverage_percentage:t.coveragePercentage,high_priority_missing:t.missingChemicals.filter(l=>l.priority==="high").length,medium_priority_missing:t.missingChemicals.filter(l=>l.priority==="medium").length,low_priority_missing:t.missingChemicals.filter(l=>l.priority==="low").length,estimated_total_time:t.priorityRecommendations.reduce((l,d)=>l+d.estimatedTimeToCreate,0),compliance_score:t.coveragePercentage}).select().single();if(i)throw new Error("Failed to save gap analysis");if(t.priorityRecommendations.length>0){const l=t.priorityRecommendations.map(o=>{const a=t.missingChemicals.find(u=>u.name===o.chemicalName);return{facility_id:r,gap_analysis_id:n.id,chemical_name:o.chemicalName,category:(a==null?void 0:a.category)||"unknown",manufacturer:a==null?void 0:a.manufacturer,priority:o.priority,risk_level:(a==null?void 0:a.estimatedRisk)||"medium",reason:o.reason,suggested_action:o.suggestedAction,estimated_time_to_create:o.estimatedTimeToCreate,ai_confidence_score:.8,ai_reasoning:"AI analysis based on inventory and existing SDS coverage"}}),{error:d}=yield G.from("sds_chemical_recommendations").insert(l);if(d)throw new Error("Failed to save recommendations")}})}}var hs=(s,r,t)=>new Promise((n,i)=>{var l=a=>{try{o(t.next(a))}catch(u){i(u)}},d=a=>{try{o(t.throw(a))}catch(u){i(u)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((t=t.apply(s,r)).next())});const $r=()=>{const[s,r]=x.useState(null),[t,n]=x.useState(!1),[i,l]=x.useState(null),d=()=>hs(null,null,function*(){n(!0),l(null);try{const a=yield qe.analyzeSDSCoverage();r(a);try{const{data:{user:u}}=yield G.auth.getUser();u&&(yield qe.saveAnalysisResults("your-facility-id",a))}catch(u){console.warn("Failed to save analysis to database:",u)}}catch(a){l(a instanceof Error?a.message:"Failed to analyze SDS coverage"),console.error("SDS analysis error:",a)}finally{n(!1)}}),o=()=>hs(null,null,function*(){try{return yield qe.getSummaryStats()}catch(a){return console.error("Error getting summary stats:",a),null}});return x.useEffect(()=>{d()},[]),{analysis:s,loading:t,error:i,analyzeCoverage:d,getSummaryStats:o}},Rr=()=>{const{analysis:s,loading:r,error:t,analyzeCoverage:n}=$r();if(r)return e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-blue-700",children:"Analyzing your SDS sheet coverage..."})]});if(t)return e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(m,{path:se,size:1.2,className:"text-red-600"}),e.jsx("h3",{className:"text-sm font-medium text-red-900",children:"Analysis Error"})]}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:t}),e.jsxs("button",{onClick:n,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx(m,{path:Qe,size:1,className:"mr-2"}),"Retry Analysis"]})]});if(!s)return e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-gray-600",children:"No analysis data available"})});const{totalChemicals:i,existingSDSSheets:l,missingSDSSheets:d,coveragePercentage:o,missingChemicals:a,priorityRecommendations:u}=s,C=a.filter(p=>p.priority==="high").length,h=a.filter(p=>p.priority==="medium").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(m,{path:V,size:1.2,className:"text-blue-600"}),e.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"Safety Data Sheet (SDS) Compliance Assistant"})]}),e.jsx("p",{className:"text-sm text-blue-700",children:"AI-powered analysis of your chemical inventory vs. SDS sheet coverage"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Chemicals"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i})]}),e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(m,{path:se,size:1.5,className:"text-blue-600"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Coverage"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[o,"%"]})]}),e.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:e.jsx(m,{path:ve,size:1.5,className:"text-green-600"})})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Coverage Breakdown"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Existing SDS Sheets"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:l})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Missing SDS Sheets"}),e.jsx("span",{className:"text-sm font-medium text-red-600",children:d})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"High Priority Missing"}),e.jsx("span",{className:"text-sm font-bold text-red-600",children:C})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Medium Priority Missing"}),e.jsx("span",{className:"text-sm font-bold text-orange-600",children:h})]})]})]})]}),u.length>0&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Priority Recommendations"}),e.jsx("div",{className:"space-y-3",children:u.slice(0,5).map((p,w)=>e.jsxs("div",{className:"border-l-4 border-blue-500 pl-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:p.chemicalName}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${p.priority==="high"?"bg-red-100 text-red-800":p.priority==="medium"?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:[p.priority," priority"]})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:p.reason}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{path:de,size:.8,className:"text-gray-400"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Est. ",p.estimatedTimeToCreate," min to create"]})]})]},w))}),u.length>5&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2 text-center",children:["+",u.length-5," more recommendations"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:n,className:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(m,{path:Qe,size:1,className:"mr-2"}),"Refresh Analysis"]}),e.jsxs("button",{className:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(m,{path:V,size:1,className:"mr-2"}),"Get AI Suggestions"]})]})]})},Lr=({contentType:s,title:r,description:t,content:n,chemicalName:i,casNumber:l,isRequired:d,reviewAnnually:o,onTitleChange:a,onDescriptionChange:u,onContentChange:C,onChemicalNameChange:h,onCasNumberChange:p,onRequiredChange:w,onReviewAnnuallyChange:v})=>{const y=()=>{switch(s.id){case"policy":return Te;case"procedure":return Y;case"sds":return rt;default:return Y}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(m,{path:y(),size:1.5,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s.label}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),e.jsx("input",{id:"title",type:"text",value:r,onChange:j=>a(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:`Enter ${s.label.toLowerCase()} title...`})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"is-required",className:"block text-sm font-medium text-gray-700 mb-2",children:"Required"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"is-required",type:"checkbox",checked:d,onChange:j=>w(j.target.checked),className:"h-4 w-4 text-[#4ECDC4] focus:ring-[#4ECDC4] border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is-required",className:"ml-2 text-sm text-gray-700",children:"Mark as required content"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",rows:3,value:t,onChange:j=>u(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:`Describe this ${s.label.toLowerCase()}...`})]}),s.id==="sds"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"chemical-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Chemical Name"}),e.jsx("input",{id:"chemical-name",type:"text",value:i,onChange:j=>h(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter chemical name..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cas-number",className:"block text-sm font-medium text-gray-700 mb-2",children:"CAS Number"}),e.jsx("input",{id:"cas-number",type:"text",value:l,onChange:j=>p(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter CAS number..."})]})]}),(s.id==="policy"||s.id==="procedure")&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"review-annually",className:"block text-sm font-medium text-gray-700 mb-2",children:"Annual Review"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"review-annually",type:"checkbox",checked:o,onChange:j=>v(j.target.checked),className:"h-4 w-4 text-[#4ECDC4] focus:ring-[#4ECDC4] border-gray-300 rounded"}),e.jsx("label",{htmlFor:"review-annually",className:"ml-2 text-sm text-gray-700",children:"Mark for annual review and updates"})]}),o&&e.jsxs("p",{className:"mt-2 text-xs text-blue-600",children:["This ",s.label.toLowerCase()," will be automatically flagged for annual review and compliance checks."]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),e.jsx("textarea",{id:"content",rows:12,value:n,onChange:j=>C(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent font-mono text-sm",placeholder:`Start writing your ${s.label.toLowerCase()} content...`}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Use markdown formatting for better structure and readability."})]})]})};var Mr=(s,r,t)=>new Promise((n,i)=>{var l=a=>{try{o(t.next(a))}catch(u){i(u)}},d=a=>{try{o(t.throw(a))}catch(u){i(u)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((t=t.apply(s,r)).next())});const zr=({pdfFile:s,onFileSelect:r,onUpload:t,isUploading:n,facilityId:i})=>{const l=x.useRef(null),d=u=>{var C;const h=(C=u.target.files)==null?void 0:C[0];if(h&&h.type==="application/pdf"){if(h.size>10*1024*1024){alert("File size must be less than 10MB");return}r(h)}else h&&alert("Please select a PDF file")},o=()=>{r(null),l.current&&(l.current.value="")},a=()=>Mr(null,null,function*(){s&&(yield t(s))});return i?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{path:De,size:1.2,className:"text-blue-600"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"PDF Upload"})]}),s?e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{path:De,size:1.5,className:"text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(s.size/(1024*1024)).toFixed(2)," MB"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:a,disabled:n,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm",children:[e.jsx(m,{path:at,size:.8}),n?"Uploading...":"Upload"]}),e.jsx("button",{onClick:o,className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Remove file",children:e.jsx(m,{path:Q,size:.8})})]})]})}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[e.jsx("input",{ref:l,type:"file",accept:".pdf",onChange:d,className:"hidden"}),e.jsxs("button",{onClick:()=>{var u;return(u=l.current)==null?void 0:u.click()},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(m,{path:U,size:.8}),"Select PDF File"]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Maximum file size: 10MB. Only PDF files are supported."})]})]}):e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{path:De,size:1.2,className:"text-yellow-600"}),e.jsx("p",{className:"text-sm text-yellow-800",children:"No facility ID available. Please ensure you are assigned to a facility."})]})})},Ur=({onTranscriptUpdate:s,isRecording:r,onRecordingChange:t})=>{const n=x.useRef(null),i=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert("Speech recognition is not supported in this browser. Please use Chrome or Edge.");return}const o=window.SpeechRecognition||window.webkitSpeechRecognition,a=new o;a.continuous=!0,a.interimResults=!0,a.lang="en-US",a.addEventListener("start",()=>{t(!0)}),a.onresult=u=>{let C="";for(let h=u.resultIndex;h<u.results.length;h++){const p=u.results[h][0].transcript;u.results[h].isFinal&&(C+=p)}C&&s(C)},a.onerror=u=>{console.error("Speech recognition error:",u.error),t(!1),u.error==="no-speech"&&alert("No speech detected. Please try again.")},a.onend=()=>{t(!1)},n.current=a,a.start()},l=()=>{n.current&&(n.current.stop(),n.current=null),t(!1)},d=()=>{r?l():i()};return x.useEffect(()=>()=>{n.current&&n.current.stop()},[]),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{path:He,size:1.2,className:"text-blue-600"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Voice Recording"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:d,className:`inline-flex items-center gap-2 px-4 py-2 rounded-md transition-colors ${r?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[e.jsx(m,{path:r?Os:He,size:.8}),r?"Stop Recording":"Start Recording"]}),r&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-red-600 font-medium",children:"Recording..."})]})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:[e.jsx("strong",{children:"How it works:"}),' Click "Start Recording" and speak clearly. Your speech will be automatically transcribed and added to the content field. Click "Stop Recording" when finished.']}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.jsx("strong",{children:"Note:"})," Speech recognition works best in quiet environments with clear pronunciation."]})]})]})},qr=({onInsertTable:s,onClose:r})=>{const[t,n]=x.useState([["","",""],["","",""],["","",""]]),[i,l]=x.useState(["Column 1","Column 2","Column 3"]),d=()=>{l(w=>[...w,`Column ${w.length+1}`]),n(w=>w.map(v=>[...v,""]))},o=w=>{i.length>1&&(l(v=>v.filter((y,j)=>j!==w)),n(v=>v.map(y=>y.filter((j,g)=>g!==w))))},a=()=>{n(w=>[...w,new Array(i.length).fill("")])},u=w=>{t.length>1&&n(v=>v.filter((y,j)=>j!==w))},C=(w,v,y)=>{const j=[...t];j[w][v]=y,n(j)},h=(w,v)=>{const y=[...i];y[w]=v,l(y)},p=()=>{let w=`

`;w+="| "+i.join(" | ")+` |
`,w+="|"+i.map(()=>"---").join("|")+`|
`,t.forEach(v=>{w+="| "+v.map(y=>y||" ").join(" | ")+` |
`}),w+=`
`,s(w),r()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg shadow-lg max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{path:ks,size:1.2,className:"text-blue-600"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Table Builder"})]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(m,{path:U,size:1.5,className:"rotate-45"})})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("button",{onClick:d,className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(m,{path:U,size:.8}),"Add Column"]}),e.jsxs("button",{onClick:a,className:"inline-flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm",children:[e.jsx(m,{path:U,size:.8}),"Add Row"]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden mb-6",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:e.jsx("h4",{className:"font-medium text-gray-900",children:"Table Preview"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:i.map((w,v)=>e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:w,onChange:y=>h(v,y.target.value),className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.length>1&&e.jsx("button",{onClick:()=>o(v),className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Remove column",children:e.jsx(m,{path:Ze,size:.8})})]})},v))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((w,v)=>e.jsxs("tr",{children:[w.map((y,j)=>e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:e.jsx("input",{type:"text",value:y,onChange:g=>C(v,j,g.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter content..."})},j)),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-500",children:t.length>1&&e.jsx("button",{onClick:()=>u(v),className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Remove row",children:e.jsx(m,{path:Ze,size:.8})})})]},v))})]})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"How to use:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"â€¢ Edit column headers to describe your data"}),e.jsx("li",{children:"â€¢ Fill in table cells with your content"}),e.jsx("li",{children:"â€¢ Add or remove columns and rows as needed"}),e.jsx("li",{children:'â€¢ Click "Insert Table" to add it to your content'})]})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:"Cancel"}),e.jsx("button",{onClick:p,className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] border border-transparent rounded-md hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:"Insert Table"})]})]})})},Fr=({tags:s,onTagsChange:r,content:t,title:n})=>{const[i,l]=x.useState(""),d=x.useMemo(()=>{const h=[],p=(t+" "+n).toLowerCase();return p.includes("safety")&&!s.includes("safety")&&h.push("safety"),p.includes("compliance")&&!s.includes("compliance")&&h.push("compliance"),p.includes("training")&&!s.includes("training")&&h.push("training"),p.includes("procedure")&&!s.includes("procedure")&&h.push("procedure"),p.includes("policy")&&!s.includes("policy")&&h.push("policy"),p.includes("chemical")&&!s.includes("chemical")&&h.push("chemical"),p.includes("hazard")&&!s.includes("hazard")&&h.push("hazard"),p.includes("emergency")&&!s.includes("emergency")&&h.push("emergency"),p.includes("ppe")&&!s.includes("ppe")&&h.push("ppe"),p.includes("equipment")&&!s.includes("equipment")&&h.push("equipment"),p.includes("maintenance")&&!s.includes("maintenance")&&h.push("maintenance"),p.includes("cleaning")&&!s.includes("cleaning")&&h.push("cleaning"),p.includes("disposal")&&!s.includes("disposal")&&h.push("disposal"),p.includes("storage")&&!s.includes("storage")&&h.push("storage"),p.includes("transport")&&!s.includes("transport")&&h.push("transport"),p.includes("inspection")&&!s.includes("inspection")&&h.push("inspection"),p.includes("testing")&&!s.includes("testing")&&h.push("testing"),p.includes("calibration")&&!s.includes("calibration")&&h.push("calibration"),p.includes("documentation")&&!s.includes("documentation")&&h.push("documentation"),p.includes("reporting")&&!s.includes("reporting")&&h.push("reporting"),p.includes("incident")&&!s.includes("incident")&&h.push("incident"),p.includes("investigation")&&!s.includes("investigation")&&h.push("investigation"),p.includes("corrective")&&!s.includes("corrective")&&h.push("corrective"),p.includes("preventive")&&!s.includes("preventive")&&h.push("preventive"),p.includes("risk")&&!s.includes("risk")&&h.push("risk"),p.includes("assessment")&&!s.includes("assessment")&&h.push("assessment"),p.includes("monitoring")&&!s.includes("monitoring")&&h.push("monitoring"),p.includes("supply")&&!s.includes("supply")&&h.push("supply"),p.includes("admin")&&!s.includes("admin")&&h.push("admin"),[...new Set(h)].sort()},[t,n,s]),o=h=>{const p=h.toLowerCase();return!(["stuff","things","random","important","good","useful","new","updated","recent","document","file","content","info","data","item","stuff","thing","random","misc","other","general","basic","simple","easy"].includes(p)||h.length<2||p==="policy"||p==="procedure"||p==="course")},a=h=>{h&&!s.includes(h)&&o(h)&&r([...s,h])},u=h=>{r(s.filter((p,w)=>w!==h))},C=()=>{const h=i.trim();h&&!s.includes(h)&&(o(h)?(r([...s,h]),l("")):alert('Please use a more specific and meaningful tag. Avoid generic terms like "stuff", "things", or "important".'))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{path:Be,size:1.2,className:"text-blue-600"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Smart Tagging"})]}),s.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((h,p)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[h,e.jsx("button",{onClick:()=>u(p),className:"ml-1 text-blue-600 hover:text-blue-800 transition-colors",title:"Remove tag",children:e.jsx(m,{path:Q,size:.8})})]},p))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i,onChange:h=>l(h.target.value),onKeyPress:h=>{h.key==="Enter"&&C()},placeholder:"Add a new tag...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent text-sm"}),e.jsx("button",{onClick:C,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm",children:e.jsx(m,{path:U,size:.8})})]}),d.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{path:Ve,size:1,className:"text-yellow-500"}),e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Suggested Tags"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map((h,p)=>e.jsxs("button",{onClick:()=>a(h),className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm hover:bg-yellow-200 transition-colors",children:["+ ",h]},p))}),e.jsx("p",{className:"text-xs text-gray-500",children:"These tags are automatically suggested based on your content. Click to add them."})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-900 mb-2",children:"Tag Guidelines:"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:'â€¢ Use specific, descriptive terms (e.g., "chemical-safety" not "stuff")'}),e.jsx("li",{children:'â€¢ Avoid generic words like "important", "good", or "new"'}),e.jsx("li",{children:"â€¢ Tags should help others find and categorize your content"}),e.jsx("li",{children:"â€¢ Use 2-3 words maximum per tag"})]})]})]})};var Br=Object.defineProperty,Gr=Object.defineProperties,Vr=Object.getOwnPropertyDescriptors,gs=Object.getOwnPropertySymbols,Hr=Object.prototype.hasOwnProperty,Yr=Object.prototype.propertyIsEnumerable,fs=(s,r,t)=>r in s?Br(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,Ce=(s,r)=>{for(var t in r||(r={}))Hr.call(r,t)&&fs(s,t,r[t]);if(gs)for(var t of gs(r))Yr.call(r,t)&&fs(s,t,r[t]);return s},we=(s,r)=>Gr(s,Vr(r));const Se={COURSES:"courses",POLICIES:"policies",PROCEDURES:"procedures",SDS_SHEETS:"sds_sheets"},_e={COURSES:"id, title, description, difficulty, estimated_duration",POLICIES:"id, title, description, policy_type",PROCEDURES:"id, title, description, difficulty",SDS_SHEETS:"id, chemical_name, description, hazard_level"},$={COURSE:"course",POLICY:"policy",PROCEDURE:"procedure",SDS:"sds",ALL:"all"},he={[$.ALL]:"All Types",[$.COURSE]:"Courses",[$.POLICY]:"Policies",[$.PROCEDURE]:"Procedures",[$.SDS]:"SDS Sheets"},ce={[$.COURSE]:"bg-green-100 text-green-800",[$.POLICY]:"bg-blue-100 text-blue-800",[$.PROCEDURE]:"bg-purple-100 text-purple-800",[$.SDS]:"bg-orange-100 text-orange-800"},Wr=[{id:1,name:"Foundation",description:"Essential concepts and basics",items:[],order:1},{id:2,name:"Core Learning",description:"Main concepts and practical applications",items:[],order:2},{id:3,name:"Advanced Topics",description:"Complex scenarios and best practices",items:[],order:3}],I={TITLE:"Learning Pathway Builder",AVAILABLE_CONTENT_TITLE:"Available Content",AVAILABLE_CONTENT_DESCRIPTION:"Select content to add to your pathway",PATHWAY_TITLE:"Your Learning Pathway",PATHWAY_DESCRIPTION:"Organized into logical sections for better learning flow",SEARCH_PLACEHOLDER:"Search content...",ADD_BUTTON:"Add",ADD_SECTION_BUTTON:"Add Section",SMART_ORGANIZE_BUTTON:"Smart Organize",ORGANIZING_BUTTON:"Organizing...",NO_ITEMS_MESSAGE:"No items in your pathway yet",NO_ITEMS_INSTRUCTION:"Select content from the left panel to get started",NO_ITEMS_IN_SECTION:"No items in this section",ADD_CONTENT_INSTRUCTION:"Add content from the left panel",NO_CONTENT_FOUND:"No content found matching your criteria",NO_CONTENT_AVAILABLE:"No content available",LOADING_MESSAGE:"Loading available content...",ADD_SECTION_MODAL_TITLE:"Add New Section",SECTION_NAME_LABEL:"Section Name",SECTION_NAME_PLACEHOLDER:"Enter section name...",CANCEL_BUTTON:"Cancel",ADD_SECTION_CONFIRM:"Add Section",SMART_ORGANIZE_MODAL_TITLE:"Smart Organize",SMART_ORGANIZE_DESCRIPTION:"This will reorganize your pathway content automatically using AI. Your current organization will be replaced with an optimized structure.",SMART_ORGANIZE_CONFIRM:"Do you want to continue?",CONTINUE_BUTTON:"Continue",EDIT_SECTION_PROMPT:"Edit section name:"},Kr={SMART_ORGANIZE_DELAY:2e3},Fe={CONTENT_TYPE_FILTER:"all",NEW_SECTION_DESCRIPTION:"",EMPTY_ITEMS_ARRAY:[]},ee={DIFFICULTY_BADGE:"bg-gray-100 text-gray-800",SECTION_NUMBER:"bg-blue-600 text-white",ITEM_NUMBER:"bg-blue-500 text-white",MOVE_UP:"â†‘",MOVE_DOWN:"â†“",EDIT:"âœï¸"},Ee={COURSE:s=>{var r;return we(Ce({},s),{id:s.id,title:s.title,description:(r=s.data)==null?void 0:r.description,difficulty:s.difficulty,estimated_duration:s.estimated_duration,type:$.COURSE,displayTitle:s.title})},POLICY:s=>{var r;return we(Ce({},s),{id:s.id,title:s.title,description:(r=s.data)==null?void 0:r.description,policy_type:s.policy_type,type:$.POLICY,displayTitle:s.title})},PROCEDURE:s=>{var r;return we(Ce({},s),{id:s.id,title:s.title,description:(r=s.data)==null?void 0:r.description,difficulty:s.difficulty,type:$.PROCEDURE,displayTitle:s.title})},SDS:s=>{var r;return we(Ce({},s),{id:s.id,title:s.chemical_name||s.title,chemical_name:s.chemical_name,description:(r=s.data)==null?void 0:r.description,hazard_level:s.hazard_level,type:$.SDS,displayTitle:s.chemical_name||s.title})}};var Qr=Object.defineProperty,Zr=Object.defineProperties,Xr=Object.getOwnPropertyDescriptors,bs=Object.getOwnPropertySymbols,Jr=Object.prototype.hasOwnProperty,ea=Object.prototype.propertyIsEnumerable,ys=(s,r,t)=>r in s?Qr(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,sa=(s,r)=>{for(var t in r||(r={}))Jr.call(r,t)&&ys(s,t,r[t]);if(bs)for(var t of bs(r))ea.call(r,t)&&ys(s,t,r[t]);return s},ta=(s,r)=>Zr(s,Xr(r));const ra=({pathwaySections:s,selectedPathwayItems:r,onPathwayChange:t,movePathwayItem:n,removeFromPathway:i,removeSection:l})=>e.jsx(e.Fragment,{children:s.length===0&&r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(m,{path:Y,size:3,className:"mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-sm",children:I.NO_ITEMS_MESSAGE}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:I.NO_ITEMS_INSTRUCTION})]}):s.length>0?e.jsx("div",{className:"space-y-6",children:s.map(d=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`inline-flex items-center justify-center w-6 h-6 ${ee.SECTION_NUMBER} text-xs font-medium rounded-full`,children:d.order}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900",children:d.name}),d.description&&e.jsx("p",{className:"text-xs text-gray-600",children:d.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{const o=prompt(I.EDIT_SECTION_PROMPT,d.name);if(o!=null&&o.trim()){const a=s.map(u=>u.id===d.id?ta(sa({},u),{name:o.trim()}):u);t(a,r)}},className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:"Edit section",children:ee.EDIT}),e.jsx("button",{onClick:()=>l(d.id),className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Remove section",children:e.jsx(m,{path:Q,size:.8})})]})]})}),e.jsx("div",{className:"p-3 space-y-2",children:d.items.length===0?e.jsxs("div",{className:"text-center py-4 text-gray-400",children:[e.jsx("p",{className:"text-sm",children:I.NO_ITEMS_IN_SECTION}),e.jsx("p",{className:"text-xs",children:I.ADD_CONTENT_INSTRUCTION})]}):r.filter(o=>d.items.includes(o.pathwayId)).map((o,a)=>e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:`inline-flex items-center justify-center w-5 h-5 ${ee.ITEM_NUMBER} text-xs font-medium rounded-full`,children:a+1}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${ce[o.type]||ce[$.SDS]}`,children:o.type.charAt(0).toUpperCase()+o.type.slice(1)})]}),e.jsx("h6",{className:"font-medium text-gray-900",children:o.displayTitle}),o.data&&typeof o.data=="object"&&"description"in o.data&&typeof o.data.description=="string"&&e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:o.data.description})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-3",children:[e.jsx("button",{onClick:()=>n(o.pathwayId,"up"),disabled:a===0,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:ee.MOVE_UP}),e.jsx("button",{onClick:()=>n(o.pathwayId,"down"),disabled:a===d.items.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:ee.MOVE_DOWN}),e.jsx("button",{onClick:()=>i(o.pathwayId),className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Remove from pathway",children:e.jsx(m,{path:Q,size:.8})})]})]})},o.pathwayId))})]},d.id))}):e.jsx("div",{className:"space-y-3",children:r.map((d,o)=>e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:`inline-flex items-center justify-center w-6 h-6 ${ee.SECTION_NUMBER} text-xs font-medium rounded-full`,children:d.order}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${ce[d.type]||ce[$.SDS]}`,children:d.type.charAt(0).toUpperCase()+d.type.slice(1)})]}),e.jsx("h6",{className:"font-medium text-gray-900",children:d.displayTitle}),d.data&&typeof d.data=="object"&&"description"in d.data&&typeof d.data.description=="string"&&e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:d.data.description})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-3",children:[e.jsx("button",{onClick:()=>n(d.pathwayId,"up"),disabled:o===0,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:ee.MOVE_UP}),e.jsx("button",{onClick:()=>n(d.pathwayId,"down"),disabled:o===r.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:ee.MOVE_DOWN}),e.jsx("button",{onClick:()=>i(d.pathwayId),className:"p-1 text-red-400 hover:text-red-600 transition-colors",title:"Remove from pathway",children:e.jsx(m,{path:Q,size:.8})})]})]})},d.pathwayId))})}),aa=({addSection:s,organizePathwaySmartly:r,selectedPathwayItemsLength:t,isOrganizing:n})=>e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:I.PATHWAY_TITLE}),e.jsx("p",{className:"text-sm text-gray-600",children:I.PATHWAY_DESCRIPTION})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:s,className:"inline-flex items-center px-3 py-1.5 border border-blue-300 text-xs font-medium rounded-md text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx(m,{path:U,size:.8,className:"mr-1"}),I.ADD_SECTION_BUTTON]}),e.jsxs("button",{onClick:r,disabled:t===0||n,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx(m,{path:V,size:.8,className:"mr-1"}),n?I.ORGANIZING_BUTTON:I.SMART_ORGANIZE_BUTTON]})]})]})});var na=Object.defineProperty,ia=Object.defineProperties,la=Object.getOwnPropertyDescriptors,vs=Object.getOwnPropertySymbols,oa=Object.prototype.hasOwnProperty,ca=Object.prototype.propertyIsEnumerable,js=(s,r,t)=>r in s?na(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,le=(s,r)=>{for(var t in r||(r={}))oa.call(r,t)&&js(s,t,r[t]);if(vs)for(var t of vs(r))ca.call(r,t)&&js(s,t,r[t]);return s},oe=(s,r)=>ia(s,la(r)),da=(s,r,t)=>new Promise((n,i)=>{var l=a=>{try{o(t.next(a))}catch(u){i(u)}},d=a=>{try{o(t.throw(a))}catch(u){i(u)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((t=t.apply(s,r)).next())});const ua=({contentType:s,onPathwayChange:r,pathwaySections:t,selectedPathwayItems:n})=>{const[i,l]=x.useState([]),[d,o]=x.useState(!1),[a,u]=x.useState(""),[C,h]=x.useState(Fe.CONTENT_TYPE_FILTER),[p,w]=x.useState(!1),[v,y]=x.useState(!1),[j,g]=x.useState(!1),[b,N]=x.useState(""),f=x.useCallback(()=>da(null,null,function*(){if(s.id==="pathway"){o(!0);try{const[S,M,T,A]=yield Promise.all([G.from(Se.COURSES).select(_e.COURSES).eq("is_published",!0),G.from(Se.POLICIES).select(_e.POLICIES).eq("is_published",!0),G.from(Se.PROCEDURES).select(_e.PROCEDURES).eq("is_published",!0),G.from(Se.SDS_SHEETS).select(_e.SDS_SHEETS).eq("is_published",!0)]);if(!S.data||!M.data||!T.data||!A.data){l([]);return}const H=[...(S.data||[]).map(B=>Ee.COURSE(B)),...(M.data||[]).map(B=>Ee.POLICY(B)),...(T.data||[]).map(B=>Ee.PROCEDURE(B)),...(A.data||[]).map(B=>Ee.SDS(B))];l(H)}catch(S){console.error("Error fetching available content:",S)}finally{o(!1)}}}),[s.id]);x.useEffect(()=>{f()},[f]);const c=()=>i.filter(S=>{const M=S.displayTitle.toLowerCase().includes(a.toLowerCase())||S.data&&typeof S.data=="object"&&"description"in S.data&&typeof S.data.description=="string"&&S.data.description||"".toLowerCase().includes(a.toLowerCase()),T=C===$.ALL||S.type===C;return M&&T}),_=S=>{if(t.length>0){const M=t[0],T=oe(le({},S),{pathwayId:Date.now()+Math.random(),order:(M.items.length||0)+1,sectionId:M.id}),A=[...n,T],H=t.map(B=>B.id===M.id?oe(le({},B),{items:[...B.items,T.pathwayId]}):B);r(H,A)}else{const M=oe(le({},S),{pathwayId:Date.now()+Math.random(),order:n.length+1});r(t,[...n,M])}},E=S=>{const M=n.filter(A=>A.pathwayId!==S),T=t.map(A=>oe(le({},A),{items:A.items.filter(H=>H!==S)}));r(T,M)},P=(S,M)=>{const T=[...n],A=T.findIndex(H=>H.pathwayId===S);M==="up"&&A>0?[T[A],T[A-1]]=[T[A-1],T[A]]:M==="down"&&A<T.length-1&&([T[A],T[A+1]]=[T[A+1],T[A]]),T.forEach((H,B)=>{H.order=B+1}),r(t,T)},O=()=>{y(!0)},L=()=>{if(b.trim()){const S={id:Date.now(),name:b.trim(),description:Fe.NEW_SECTION_DESCRIPTION,items:[...Fe.EMPTY_ITEMS_ARRAY],order:t.length+1};r([...t,S],n),N(""),y(!1)}},R=S=>{const M=t.filter(T=>T.id!==S);r(M,n)},te=()=>{g(!0)},W=()=>{w(!0),setTimeout(()=>{const S=Wr.map(T=>oe(le({},T),{items:[...T.items]})),M=n.map((T,A)=>{const H=Math.floor(A/n.length*3);return oe(le({},T),{sectionId:S[H].id,order:A+1})});S.forEach(T=>{T.items=M.filter(A=>A.sectionId===T.id).map(A=>A.pathwayId)}),r(S,M),w(!1),g(!1)},Kr.SMART_ORGANIZE_DELAY)};return s.id!=="pathway"?null:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{path:Y,size:1.2,className:"text-blue-600"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:I.TITLE})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:I.AVAILABLE_CONTENT_TITLE}),e.jsx("p",{className:"text-sm text-gray-600",children:I.AVAILABLE_CONTENT_DESCRIPTION})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",placeholder:I.SEARCH_PLACEHOLDER,value:a,onChange:S=>u(S.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("select",{value:C,onChange:S=>h(S.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:$.ALL,children:he[$.ALL]}),e.jsx("option",{value:$.COURSE,children:he[$.COURSE]}),e.jsx("option",{value:$.POLICY,children:he[$.POLICY]}),e.jsx("option",{value:$.PROCEDURE,children:he[$.PROCEDURE]}),e.jsx("option",{value:$.SDS,children:he[$.SDS]})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:d?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:I.LOADING_MESSAGE})]}):c().length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:a||C!==$.ALL?I.NO_CONTENT_FOUND:I.NO_CONTENT_AVAILABLE}):e.jsx("div",{className:"divide-y divide-gray-200",children:c().map(S=>e.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${ce[S.type]||ce[$.SDS]}`,children:S.type.charAt(0).toUpperCase()+S.type.slice(1)}),S.difficulty&&e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${ee.DIFFICULTY_BADGE}`,children:S.difficulty})]}),e.jsx("h5",{className:"font-medium text-gray-900 truncate",children:S.displayTitle}),S.data&&typeof S.data=="object"&&"description"in S.data&&typeof S.data.description=="string"&&e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:S.data.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[S.estimated_duration&&e.jsxs("span",{children:["â±ï¸ ",S.estimated_duration," min"]}),S.hazard_level&&e.jsxs("span",{children:["âš ï¸ Level ",S.hazard_level]})]})]}),e.jsxs("button",{onClick:()=>_(S),className:"ml-3 flex-shrink-0 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(m,{path:U,size:.8,className:"mr-1"}),I.ADD_BUTTON]})]})},`${S.type}-${S.id}`))})})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsx(aa,{addSection:O,organizePathwaySmartly:te,selectedPathwayItemsLength:n.length,isOrganizing:p}),e.jsx("div",{className:"p-4",children:e.jsx(ra,{pathwaySections:t,selectedPathwayItems:n,onPathwayChange:r,movePathwayItem:P,removeFromPathway:E,removeSection:R})})]})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg shadow-lg max-w-md w-full mx-4",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:I.ADD_SECTION_MODAL_TITLE})}),e.jsxs("div",{className:"p-6",children:[e.jsx("label",{htmlFor:"section-name-input",className:"block text-sm font-medium text-gray-700 mb-2",children:I.SECTION_NAME_LABEL}),e.jsx("input",{id:"section-name-input",type:"text",value:b,onChange:S=>N(S.target.value),placeholder:I.SECTION_NAME_PLACEHOLDER,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",onKeyPress:S=>{S.key==="Enter"&&L()}})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{y(!1),N("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:I.CANCEL_BUTTON}),e.jsx("button",{onClick:L,disabled:!b.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] border border-transparent rounded-md hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4] disabled:opacity-50 disabled:cursor-not-allowed",children:I.ADD_SECTION_CONFIRM})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg shadow-lg max-w-md w-full mx-4",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:I.SMART_ORGANIZE_MODAL_TITLE})}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-sm text-gray-600",children:I.SMART_ORGANIZE_DESCRIPTION}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:I.SMART_ORGANIZE_CONFIRM})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:I.CANCEL_BUTTON}),e.jsx("button",{onClick:W,className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] border border-transparent rounded-md hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:I.CONTINUE_BUTTON})]})]})})]})};var ge=(s,r,t)=>new Promise((n,i)=>{var l=a=>{try{o(t.next(a))}catch(u){i(u)}},d=a=>{try{o(t.throw(a))}catch(u){i(u)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,d);o((t=t.apply(s,r)).next())});const ma=({contentType:s})=>{const{state:r}=X(),{setActiveTab:t}=ae(),{activeTab:n}=r,{currentUser:i}=ot(),[l,d]=x.useState(""),[o,a]=x.useState(""),[u,C]=x.useState(""),[h,p]=x.useState(""),[w,v]=x.useState(""),[y,j]=x.useState(!1),[g,b]=x.useState(!1),[N,f]=x.useState(null),[c,_]=x.useState(!1),[E,P]=x.useState(!1),[O,L]=x.useState(!1),[R,te]=x.useState([]),[W,S]=x.useState([]),[M,T]=x.useState([]),A=x.useCallback(()=>ge(null,null,function*(){if(!(!(i!=null&&i.facility_id)||!l.trim()))try{const z={title:`Annual Review Required: ${l}`,description:`This ${s.id==="procedure"?"procedure":"policy"} "${l}" is marked for annual review and updates. Please review the content, verify accuracy, and update as needed to maintain compliance and best practices.`,category:"compliance",difficulty:"medium",estimatedDuration:45,impact:"high",effort:"medium",points:150,aiReasoning:`${s.id==="procedure"?"Procedure":"Policy"} "${l}" requires annual review to ensure content accuracy, regulatory compliance, and alignment with current best practices.`,prerequisites:["Access to content","Understanding of current regulations"],expectedOutcomes:["Content reviewed and updated","Regulatory compliance verified","Best practices alignment confirmed","Documentation updated with review date"],complianceDeadline:new Date(Date.now()+31536e6).toISOString(),facilityId:i.facility_id,assignedTo:i.id,status:"pending",priority:"high",tags:["compliance","annual-review","regulatory"]},{data:q,error:Z}=yield G.from("ai_challenge_completions").insert(z).select().single();if(Z){console.error("Error creating annual review challenge:",Z);return}console.log("Annual review challenge created:",q)}catch(z){console.error("Error creating annual review challenge:",z)}}),[i==null?void 0:i.facility_id,i==null?void 0:i.id,l,s.id]);x.useEffect(()=>{g&&l.trim()&&A()},[g,l,A]);const H=z=>ge(null,null,function*(){_(!0);try{const q=i==null?void 0:i.facility_id;if(!q)throw new Error("No facility ID available. Please ensure you are assigned to a facility.");const Z=`sds-sheets/${Date.now()}-${z.name}`,{error:je}=yield G.storage.from("documents").upload(Z,z);if(je)throw new Error(`Upload failed: ${je.message}`);const{data:{publicUrl:Bs}}=G.storage.from("documents").getPublicUrl(Z),Gs={facility_id:q,title:l||`SDS Sheet - ${h||"Unknown Chemical"}`,description:o,content:u,chemical_name:h,cas_number:w,pdf_file_path:Bs,pdf_file_size:z.size,pdf_uploaded_at:new Date().toISOString(),status:"draft",priority:"medium",risk_level:"medium"},{error:We}=yield G.from("sds_sheets").insert(Gs).select().single();if(We)throw new Error(`Database save failed: ${We.message}`);alert("PDF uploaded and saved successfully!")}catch(q){console.error("Upload failed:",q),alert(`Upload failed: ${q instanceof Error?q.message:"Unknown error"}`)}finally{_(!1)}}),B=z=>{const q=document.getElementById("content-main-tab");if(q){const Z=q.selectionStart,je=u.substring(0,Z)+z+u.substring(Z);C(je),L(!1),setTimeout(()=>{q.focus(),q.setSelectionRange(Z+z.length,Z+z.length)},0)}},Ms=z=>{C(q=>q+(q?" ":"")+z)},zs=(z,q)=>{T(z),S(q)},Us=()=>ge(null,null,function*(){console.log("Saving policy:",{title:l,description:o,content:u,tags:R})}),qs=()=>ge(null,null,function*(){console.log("Saving procedure:",{title:l,description:o,content:u,tags:R})}),Fs=()=>ge(null,null,function*(){console.log("Saving pathway:",{pathwaySections:M,selectedPathwayItems:W})});return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:["content","pathway","ai"].map(z=>e.jsx("button",{onClick:()=>t(z),className:`py-2 px-1 border-b-2 font-medium text-sm capitalize ${n===z?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:z},z))})}),n==="content"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(Lr,{contentType:s,title:l,description:o,content:u,chemicalName:h,casNumber:w,isRequired:y,reviewAnnually:g,onTitleChange:d,onDescriptionChange:a,onContentChange:C,onChemicalNameChange:p,onCasNumberChange:v,onRequiredChange:j,onReviewAnnuallyChange:b}),s.id==="sds"&&e.jsx(zr,{pdfFile:N,onFileSelect:f,onUpload:H,isUploading:c,facilityId:i==null?void 0:i.facility_id}),e.jsx(Ur,{onTranscriptUpdate:Ms,isRecording:E,onRecordingChange:P}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{path:ks,size:1.2,className:"text-blue-600"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Table Builder"})]}),e.jsxs("button",{onClick:()=>L(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(m,{path:U,size:.8}),"Create Table"]})]}),e.jsx(Fr,{tags:R,onTagsChange:te,content:u,title:l})]}),n==="pathway"&&e.jsx(ua,{contentType:s,onPathwayChange:zs,pathwaySections:M,selectedPathwayItems:W}),n==="ai"&&e.jsx("div",{className:"space-y-4",children:s.id==="sms"?e.jsx(Rr,{}):e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(m,{path:V,size:1.2,className:"text-blue-600"}),e.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"AI Assistant"})]}),e.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Get AI-powered suggestions to improve your content, identify gaps, and enhance learning outcomes."}),e.jsxs("button",{className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(m,{path:V,size:1,className:"mr-2"}),"Get AI Suggestions"]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:[e.jsx(m,{path:Pe,size:1,className:"mr-2"}),"Preview"]}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",onClick:s.id==="pathway"?Fs:s.id==="policy"?Us:qs,children:[e.jsx(m,{path:As,size:1,className:"mr-2"}),s.id==="pathway"?"Save Pathway":"Save Draft"]})]}),e.jsxs("button",{className:"inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(m,{path:ye,size:1,className:"mr-2"}),s.id==="pathway"?"Publish Pathway":"Publish to Library"]})]}),O&&e.jsx(qr,{onInsertTable:B,onClose:()=>L(!1)})]})},pa=x.memo(({title:s,description:r,content:t,onTitleChange:n,onDescriptionChange:i,onContentChange:l})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content-title-tab",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx("input",{id:"content-title-tab",type:"text",value:s,onChange:d=>n(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter content title..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content-description-tab",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{id:"content-description-tab",rows:2,value:r,onChange:d=>i(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter content description..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content-main-tab",className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),e.jsx("textarea",{id:"content-main-tab",rows:12,value:t,onChange:d=>l(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-transparent",placeholder:"Enter your content here..."})]})]}));pa.displayName="CommonEditorFields";const xa=x.memo(({onSave:s,onPublish:r,onAIAssistant:t,isSaving:n=!1,isPublishing:i=!1,canPublish:l=!0})=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:s,disabled:n,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4] disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(m,{path:As,size:1,className:"mr-2"}),n?"Saving...":"Save"]}),l&&e.jsxs("button",{onClick:r,disabled:i,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(m,{path:ye,size:1,className:"mr-2"}),i?"Publishing...":"Publish"]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("button",{onClick:t,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:[e.jsx(m,{path:V,size:1,className:"mr-2"}),"AI Assistant"]})})]}));xa.displayName="ContentToolbar";const ha=x.memo(({fontFamily:s,fontSize:r,textColor:t,onFontFamilyChange:n,onFontSizeChange:i,onTextColorChange:l,onReset:d,onBold:o,onItalic:a,onHeading2:u,onHeading3:C,onBulletList:h,onNumberedList:p,onAddNote:w,onAddWarning:v,onAddCheck:y,onInsertLink:j,onShowTableBuilder:g,onAISuggestions:b})=>e.jsxs("div",{className:"bg-gray-50 border-b border-gray-300 p-2 flex flex-wrap items-center gap-1",children:[e.jsxs("select",{value:s,onChange:N=>n(N.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",title:"Font Family",children:[e.jsxs("optgroup",{label:"Modern Sans-Serif",children:[e.jsx("option",{value:"Inter",children:"Inter - Clean & Modern"}),e.jsx("option",{value:"Roboto",children:"Roboto - Google's Design Font"}),e.jsx("option",{value:"Open Sans",children:"Open Sans - Professional & Readable"}),e.jsx("option",{value:"Lato",children:"Lato - Friendly & Approachable"}),e.jsx("option",{value:"Nunito",children:"Nunito - Rounded & Modern"})]}),e.jsxs("optgroup",{label:"Serif & Display",children:[e.jsx("option",{value:"Merriweather",children:"Merriweather - Elegant Serif"}),e.jsx("option",{value:"Playfair Display",children:"Playfair Display - Classic Serif"}),e.jsx("option",{value:"Georgia",children:"Georgia - Web-Safe Serif"})]}),e.jsxs("optgroup",{label:"Specialty",children:[e.jsx("option",{value:"Source Code Pro",children:"Source Code Pro - For Code"}),e.jsx("option",{value:"Courier New",children:"Courier New - Monospace"})]})]}),e.jsxs("select",{value:r,onChange:N=>i(N.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",title:"Font Size",children:[e.jsx("option",{value:"text-xs",children:"Small (12px)"}),e.jsx("option",{value:"text-sm",children:"Regular (14px)"}),e.jsx("option",{value:"text-base",children:"Medium (16px)"}),e.jsx("option",{value:"text-lg",children:"Large (18px)"}),e.jsx("option",{value:"text-xl",children:"Extra Large (20px)"})]}),e.jsxs("select",{value:t,onChange:N=>l(N.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",title:"Text Color",children:[e.jsx("option",{value:"text-gray-900",children:"Default Black"}),e.jsx("option",{value:"text-gray-700",children:"Dark Gray"}),e.jsx("option",{value:"text-blue-600",children:"Professional Blue"}),e.jsx("option",{value:"text-green-600",children:"Success Green"}),e.jsx("option",{value:"text-red-600",children:"Warning Red"}),e.jsx("option",{value:"text-purple-600",children:"Creative Purple"}),e.jsx("option",{value:"text-orange-600",children:"Attention Orange"}),e.jsx("option",{value:"text-indigo-600",children:"Trust Indigo"})]}),e.jsx("button",{onClick:d,className:"px-2 py-1 text-xs text-gray-600 hover:text-gray-800 hover:bg-gray-200 rounded transition-colors",title:"Reset to Default Font",children:"Reset"}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx("button",{onClick:o,className:"p-2 text-sm font-bold text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Bold (Ctrl+B)",children:"B"}),e.jsx("button",{onClick:a,className:"p-2 text-sm italic text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Italic (Ctrl+I)",children:"I"}),e.jsx("button",{onClick:u,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Heading 2",children:"H2"}),e.jsx("button",{onClick:C,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Heading 3",children:"H3"}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx("button",{onClick:h,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Bullet List",children:"â€¢"}),e.jsx("button",{onClick:p,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Numbered List",children:"1."}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx("button",{onClick:w,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Add Note Block",children:"ðŸ“"}),e.jsx("button",{onClick:v,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Add Warning Block",children:"âš ï¸"}),e.jsx("button",{onClick:y,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Add Check Block",children:"âœ…"}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx("button",{onClick:g,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Create Modern Table",children:"ðŸ“Š"}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx("button",{onClick:j,className:"p-2 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:"Insert Link (Ctrl+K)",children:"ðŸ”—"}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx("button",{onClick:b,className:"p-2 text-sm text-purple-700 bg-purple-100 hover:bg-purple-200 rounded transition-colors",title:"Get AI suggestions for improving your text",children:"ðŸ¤–"}),e.jsx("button",{onClick:()=>{},className:"p-2 text-sm text-blue-700 bg-blue-100 hover:bg-blue-200 rounded transition-colors",title:"Preview lesson content",children:"ðŸ‘ï¸"})]}));ha.displayName="TextFormatting";const ga=x.memo(({pdfFile:s,isRecording:r,onPdfFileChange:t,onPdfUpload:n,onVoiceToggle:i,pdfUploading:l=!1,showVoiceRecording:d=!0,showPdfUpload:o=!0})=>{const a=x.useRef(null),u=x.useCallback(h=>{var p;const w=(p=h.target.files)==null?void 0:p[0];w&&w.type==="application/pdf"&&t(w)},[t]),C=x.useCallback(()=>{t(null),a.current&&(a.current.value="")},[t]);return e.jsxs("div",{className:"space-y-4",children:[o&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pdf-upload",className:"block text-sm font-medium text-gray-700 mb-2",children:"PDF Document"}),e.jsx("input",{id:"pdf-upload",ref:a,type:"file",accept:".pdf",onChange:u,className:"hidden"}),s?e.jsx("div",{className:"border border-gray-300 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(m,{path:De,size:1.5,className:"text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(s.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:n,disabled:l,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4] disabled:opacity-50",children:l?"Uploading...":"Upload"}),e.jsx("button",{onClick:C,className:"inline-flex items-center p-1.5 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:e.jsx(m,{path:Q,size:1})})]})]})}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(m,{path:U,size:1.5,className:"mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Upload PDF Document"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Supports PDF files (max 10MB)"}),e.jsxs("button",{onClick:()=>{var h;return(h=a.current)==null?void 0:h.click()},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]",children:[e.jsx(m,{path:U,size:1,className:"mr-2"}),"Select PDF"]})]})]}),d&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"voice-input",className:"block text-sm font-medium text-gray-700 mb-2",children:"Voice Input"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:i,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md ${r?"text-white bg-red-600 hover:bg-red-700":"text-white bg-[#4ECDC4] hover:bg-[#3db8b0]"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4]`,children:[e.jsx(m,{path:r?Os:He,size:1,className:"mr-2"}),r?"Stop Recording":"Start Recording"]}),r&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-red-600",children:"Recording..."})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Use voice input to dictate your content. Click the microphone button to start/stop recording."})]})]})});ga.displayName="MediaUploader";var fa=Object.defineProperty,Ns=Object.getOwnPropertySymbols,ba=Object.prototype.hasOwnProperty,ya=Object.prototype.propertyIsEnumerable,Cs=(s,r,t)=>r in s?fa(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,va=(s,r)=>{for(var t in r||(r={}))ba.call(r,t)&&Cs(s,t,r[t]);if(Ns)for(var t of Ns(r))ya.call(r,t)&&Cs(s,t,r[t]);return s};const ja=x.lazy(()=>Is(()=>import("./PolicyEditor-BW9hTXzf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),Na=x.lazy(()=>Is(()=>Promise.resolve().then(()=>Ir),void 0)),Ca=()=>e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#4ECDC4]"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading editor..."})]}),wa=x.memo(({contentType:s,title:r,description:t,content:n,onTitleChange:i,onDescriptionChange:l,onContentChange:d,onSave:o,onPublish:a,onAIAssistant:u})=>{const C=()=>{const h={title:r,description:t,content:n,onTitleChange:i,onDescriptionChange:l,onContentChange:d,onSave:o,onPublish:a,onAIAssistant:u,contentType:s};switch(s.id){case"policy":return e.jsx(ja,va({},h));case"course":return e.jsx(Na,{});default:return e.jsx("div",{className:"text-center p-8 text-gray-500",children:e.jsxs("p",{children:['Content type "',s.label,'" editor not yet implemented']})})}};return e.jsx(x.Suspense,{fallback:e.jsx(Ca,{}),children:C()})});wa.displayName="LazyContentEditor";const ws=[{id:"course",label:"Course",icon:Ds,description:"Interactive learning modules with assessments"},{id:"policy",label:"Policy",icon:Te,description:"Organizational rules and guidelines"},{id:"procedure",label:"Procedure",icon:nt,description:"Step-by-step operational instructions"},{id:"sms",label:"SDS Sheet",icon:se,description:"Safety data sheets and chemical information"},{id:"pathway",label:"Learning Pathway",icon:Y,description:"Combined learning experiences"}],Sa=()=>{const s=Vs(),{state:r}=X(),{setSelectedContentType:t}=ae(),{selectedContentType:n}=r,[i,l]=x.useState(!1),d=()=>{s("/settings")},o=()=>{if(n==="course")return e.jsx(Ls,{});const a=ws.find(u=>u.id===n);return a?e.jsx(ma,{contentType:a}):null};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:e.jsx("div",{className:"flex items-center space-x-4 mb-4 md:flex-row md:mb-0",children:e.jsxs("button",{onClick:d,className:"inline-flex items-center gap-2 text-sm text-gray-600 hover:text-[#4ECDC4] transition-colors duration-200",children:[e.jsx(m,{path:it,size:.8}),"Back to Settings"]})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-[#5b5b5b] mb-1",children:"Content Builder"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Create and manage content for your library"})]}),e.jsxs("div",{className:"flex bg-white rounded-lg shadow",children:[e.jsx("div",{className:`${i?"w-20":"w-64"} bg-gray-50 border-r border-gray-200 rounded-l-lg transition-all duration-300`,children:e.jsxs("div",{className:`${i?"p-2":"p-4"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:`text-sm font-medium text-gray-900 ${i?"sr-only":""}`,children:"Content Types"}),e.jsx("button",{onClick:()=>l(!i),className:"p-1 text-gray-400 hover:text-gray-600",title:i?"Expand sidebar":"Collapse sidebar",children:e.jsx(m,{path:i?Ts:Ps,size:.8})})]}),e.jsx("div",{className:"space-y-2",children:ws.map(a=>e.jsx("button",{onClick:()=>t(a.id),className:`w-full text-left p-3 rounded-lg transition-colors ${n===a.id?"bg-[#4ECDC4] text-white":"text-[#5b5b5b] hover:bg-gray-100"}`,title:i?a.label:void 0,children:e.jsxs("div",{className:`flex items-center ${i?"justify-center":"space-x-3"}`,children:[e.jsx(m,{path:a.icon,size:i?1.5:1.2,className:`${n===a.id?"text-white":"text-gray-400"}`}),!i&&e.jsx("span",{className:"font-medium",children:a.label})]})},a.id))})]})}),e.jsx("div",{className:"flex-1 p-6 rounded-r-lg",children:o()})]})]})},_a=()=>e.jsx(vt,{children:e.jsx(ct,{children:e.jsx(Sa,{})})}),$a=Object.freeze(Object.defineProperty({__proto__:null,default:_a},Symbol.toStringTag,{value:"Module"}));export{pa as C,ga as M,ha as T,Nt as a,wt as b,Aa as c,Ae as d,qr as e,xa as f,$a as i,Ia as m,jt as p,Ct as s,ka as t,X as u};
