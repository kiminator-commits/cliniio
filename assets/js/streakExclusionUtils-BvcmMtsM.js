import{s as c}from"./login-CtXU169Q.js";import"./utils-DSBVV_PW.js";import"./vendor-DoALFvsH.js";import"./data-73RVSc-N.js";import"./ui-DETUEJ2B.js";var f=(e,t,r)=>new Promise((s,n)=>{var i=o=>{try{u(r.next(o))}catch(a){n(a)}},l=o=>{try{u(r.throw(o))}catch(a){n(a)}},u=o=>o.done?s(o.value):Promise.resolve(o.value).then(i,l);u((r=r.apply(e,t)).next())});function _(e,t){return f(this,null,function*(){try{const r=e.getDay(),n=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][r],{data:i,error:l}=yield c.from("facility_office_hours").select("*").eq("facility_id",t).single();if(l||!i)return r===0||r===6;const u={workingDays:i.working_days,startHour:i.start_hour,endHour:i.end_hour,openHolidays:i.open_holidays};if(!u.workingDays[n])return!0;if(!u.openHolidays){const{data:d,error:h}=yield c.from("office_closures").select("*").eq("facility_id",t).eq("closure_date",e.toISOString().split("T")[0]).eq("closure_type","holiday").single();if(!h&&d)return!0}const{data:a,error:y}=yield c.from("office_closures").select("*").eq("facility_id",t).eq("closure_date",e.toISOString().split("T")[0]).in("closure_type",["custom","maintenance"]).single();return!!(!y&&a)}catch(r){console.error("Error checking streak exclusion:",r);const s=e.getDay();return s===0||s===6}})}function H(e,t){return f(this,null,function*(){const r=new Date(e);for(r.setDate(r.getDate()+1);yield _(r,t);)r.setDate(r.getDate()+1);return r})}function w(e,t){return f(this,null,function*(){try{const{data:r,error:s}=yield c.from("facility_office_hours").select("*").eq("facility_id",t).single();if(s||!r)return!1;const n=e.getHours();return n>=r.start_hour&&n<r.end_hour}catch(r){return console.error("Error checking business hours:",r),!1}})}export{H as getNextWorkingDay,w as isWithinBusinessHours,_ as shouldExcludeDateFromStreak};
