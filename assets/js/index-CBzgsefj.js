import{j as e}from"./utils-DSBVV_PW.js";import{a as g}from"./vendor-DoALFvsH.js";import{u as K,e as W}from"./main-DVBlW6kB.js";import{I as c,C as $,bC as V,ap as F,av as O,bz as J,b$ as G,bB as A,bP as Q,b6 as Z,c0 as P,E as N,c1 as X,q as H,bn as Y,c2 as M,c3 as B,Z as ee,c4 as se,c5 as te,c6 as L,c7 as ae}from"./login-CtXU169Q.js";import"./data-73RVSc-N.js";import"./ui-DETUEJ2B.js";const re=({loading:s,lastUpdated:l,onRefresh:r})=>e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-600",children:"Cliniio Intelligence"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Predictive analytics and strategic insights for clinical operations"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:r,disabled:s,className:`px-4 py-2 rounded-lg transition-colors flex items-center ${s?"bg-gray-400 cursor-not-allowed":"bg-[#4ECDC4] hover:bg-[#3DB8B0] text-white"}`,children:[e.jsx(c,{path:$,size:1.2,className:`mr-2 ${s?"animate-spin":""}`}),s?"Refreshing...":"Refresh"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated:"," ",l?new Date(l).toLocaleString():"Never"]})]})]})});function le({activeTab:s,onTabChange:l}){const r=[{id:"overview",label:"Overview",icon:V},{id:"forecasting",label:"Forecasting",icon:F},{id:"risks",label:"Risk Analysis",icon:O},{id:"actions",label:"Actions",icon:J},{id:"insights",label:"Insights",icon:G},{id:"integrations",label:"Integrations",icon:A}];return e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:r.map(t=>e.jsxs("button",{onClick:()=>l(t.id),style:{padding:"0.5rem 1rem",border:"none",borderRadius:"0.5rem",background:s===t.id?"#eee":"white",cursor:"pointer",boxShadow:s===t.id?"0 2px 4px rgba(0,0,0,0.1)":"none",display:"flex",alignItems:"center",gap:"0.5rem",color:"#374151"},children:[e.jsx(c,{path:t.icon,size:1}),t.label]},t.id))})}function ie({summary:s}){var l,r,t,i,h,n,d;const a=s;function m(){var o;return(o=a==null?void 0:a.risks)==null?void 0:o.some(x=>x.level==="high")}function y(){var o,x;return(x=(o=a==null?void 0:a.actions)==null?void 0:o.filter(R=>R.urgency==="high"))!=null?x:[]}function p(o){switch(o.toLowerCase()){case"critical":return"border-red-500 bg-red-50";case"high":return"border-orange-500 bg-orange-50";case"medium":return"border-yellow-500 bg-yellow-50";case"low":return"border-green-500 bg-green-50";default:return"border-gray-500 bg-gray-50"}}function k(o){switch(o.toLowerCase()){case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}function S(o){}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(c,{path:F,size:1.5,className:"text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Forecasts Active"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(((l=a==null?void 0:a.toolReplacement)==null?void 0:l.length)||0)+(((r=a==null?void 0:a.autoclaveCapacity)==null?void 0:r.length)||0)+(((t=a==null?void 0:a.supplyDepletion)==null?void 0:t.length)||0)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(c,{path:O,size:1.5,className:"text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Risk Level"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 capitalize",children:((i=a==null?void 0:a.auditRisk)==null?void 0:i.riskLevel)||"No data"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(c,{path:Q,size:1.5,className:"text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Monthly Savings"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",(((h=a==null?void 0:a.efficiencyROI)==null?void 0:h.estimatedLaborSavings)||0).toLocaleString()]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(c,{path:Z,size:1.5,className:"text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Training Gaps"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((d=(n=a==null?void 0:a.trainingGaps)==null?void 0:n.usersWithGaps)==null?void 0:d.length)||0})]})]})})]}),m()&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{path:P,size:1.5,className:"text-red-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"High Priority Alerts"}),e.jsxs("p",{className:"text-sm text-red-700 mt-1",children:[y().length," urgent actions require immediate attention"]})]}),e.jsx("button",{onClick:()=>void 0,className:"ml-auto bg-red-100 text-red-800 px-3 py-2 rounded-md text-sm font-medium hover:bg-red-200",children:"View Actions"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Forecasts"}),a!=null&&a.supplyDepletion&&a.supplyDepletion.length>0?e.jsx("div",{className:"space-y-3",children:a.supplyDepletion.slice(0,3).map((o,x)=>e.jsx("div",{className:`p-3 rounded-lg border-l-4 ${p(o.reorderUrgency)}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:o.itemName}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Depletes in"," ",Math.ceil((new Date(o.depletionDate).getTime()-Date.now())/(1e3*60*60*24))," ","days"]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${k(o.reorderUrgency)}`,children:o.reorderUrgency})]})},x))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No supply depletion forecasts available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data will appear here once inventory items are added"})]})]}),a!=null&&a.toolTurnoverUtilization&&a.toolTurnoverUtilization.length>0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:$,size:1.5,className:"text-blue-600 mr-2"}),"Tool Turnover & Utilization"]}),e.jsx("div",{className:"space-y-4",children:a.toolTurnoverUtilization.slice(0,3).map((o,x)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:o.toolName}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Batch: ",o.toolBatchId]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${o.performanceScore>=90?"bg-green-100 text-green-800":o.performanceScore>=80?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["Score: ",o.performanceScore]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Daily Cycles:"}),e.jsx("div",{className:"text-gray-900",children:o.dailyCycleCount})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Turnover Rate:"}),e.jsxs("div",{className:"text-gray-900",children:[o.turnoverRate.toFixed(1),"x/day"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Efficiency:"}),e.jsxs("div",{className:"text-gray-900",children:[o.utilizationEfficiency,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Idle Time:"}),e.jsxs("div",{className:"text-gray-900",children:[o.idleTimePercentage,"%"]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Peak Hours:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:o.peakUsageHours.join(", ")})]}),e.jsxs("div",{className:"text-sm mt-1",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Optimization:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:o.recommendedOptimization})]})]})]},x))})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No tool utilization data available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data will appear here once sterilization cycles are completed"})]})})]})}function ne({summary:s}){const l=t=>{switch(t){case"low":return"border-green-500 bg-green-50";case"medium":return"border-yellow-500 bg-yellow-50";case"high":return"border-orange-500 bg-orange-50";case"critical":return"border-red-500 bg-red-50";default:return"border-gray-500 bg-gray-50"}},r=t=>{switch(t){case"low":return"border-green-500 bg-green-50";case"medium":return"border-yellow-500 bg-yellow-50";case"high":return"border-orange-500 bg-orange-50";case"critical":return"border-red-500 bg-red-50";default:return"border-gray-500 bg-gray-50"}};return s?e.jsxs("div",{className:"space-y-6",children:[s.toolReplacement&&s.toolReplacement.length>0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:F,size:1.5,className:"text-blue-600 mr-2"}),"Tool Replacement Forecasts"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.toolReplacement.map((t,i)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:t.toolName}),e.jsxs("span",{className:"text-sm text-gray-500",children:["ID: ",t.toolBatchId]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Current Lifecycle:"}),e.jsxs("span",{className:"text-sm font-medium",children:[t.currentLifecycle,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"End of Life:"}),e.jsx("span",{className:"text-sm font-medium",children:new Date(t.predictedEndOfLife).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Reorder Date:"}),e.jsx("span",{className:"text-sm font-medium",children:new Date(t.recommendedReorderDate).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Confidence:"}),e.jsxs("span",{className:"text-sm font-medium",children:[Math.round(t.confidence*100),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Estimated Cost:"}),e.jsxs("span",{className:"text-sm font-medium",children:["$",(t.estimatedCost||0).toLocaleString()]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("p",{className:"text-xs text-gray-600",children:["Supplier: ",t.supplierSuggestion]})})]},i))})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No tool replacement forecasts available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data will appear here once sterilization cycles are completed"})]})}),s.autoclaveCapacity&&s.autoclaveCapacity.length>0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:X,size:1.5,className:"text-orange-600 mr-2"}),"Autoclave Capacity Planning"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.autoclaveCapacity.map((t,i)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:["Autoclave ",t.autoclaveId]}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.currentLoadPercentage>90?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:[t.currentLoadPercentage,"% Load"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Queue Length:"}),e.jsxs("span",{className:"text-sm font-medium",children:[t.queueLength," items"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Overload Date:"}),e.jsx("span",{className:"text-sm font-medium",children:new Date(t.predictedOverloadDate).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Recommended Action:"}),e.jsx("span",{className:"text-sm font-medium capitalize",children:t.recommendedAction.replace("_"," ")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Timeline:"}),e.jsx("span",{className:"text-sm font-medium",children:t.timeline})]})]})]},i))})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No autoclave capacity data available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data will appear here once autoclave cycles are completed"})]})}),s.supplyDepletion&&s.supplyDepletion.length>0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:H,size:1.5,className:"text-red-600 mr-2"}),"Supply Depletion Forecasts"]}),e.jsx("div",{className:"space-y-3",children:s.supplyDepletion.map((t,i)=>e.jsx("div",{className:`p-4 rounded-lg border-l-4 ${r(t.reorderUrgency)}`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:t.itemName}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l(t.reorderUrgency)}`,children:t.reorderUrgency})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Current Stock:"}),e.jsx("span",{className:"ml-2 font-medium",children:t.currentStock})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Depletion Date:"}),e.jsx("span",{className:"ml-2 font-medium",children:new Date(t.depletionDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Reorder Date:"}),e.jsx("span",{className:"ml-2 font-medium",children:new Date(t.recommendedReorderDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Cost Trend:"}),e.jsx("span",{className:"ml-2 font-medium capitalize",children:t.costTrend})]})]})]})})},i))})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No supply depletion forecasts available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data will appear here once inventory items are added"})]})})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No forecasting data available"})]})})}function ce({summary:s}){var l,r,t,i,h,n,d,a,m,y,p,k,S,o,x,R,z;const D=f=>{switch(f){case"low":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-orange-100 text-orange-800";case"critical":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return s?e.jsxs("div",{className:"space-y-6",children:[s.auditRisk?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:O,size:1.5,className:"text-red-600 mr-2"}),"Audit Risk Assessment"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-20 h-20 rounded-full ${D(((l=s.auditRisk)==null?void 0:l.riskLevel)||"medium")} mb-3`,children:e.jsx("span",{className:"text-2xl font-bold",children:((r=s.auditRisk)==null?void 0:r.overallRiskScore)||85})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Overall Risk Score"}),e.jsxs("p",{className:`text-sm font-medium capitalize ${D(((t=s.auditRisk)==null?void 0:t.riskLevel)||"medium")}`,children:[((i=s.auditRisk)==null?void 0:i.riskLevel)||"medium"," Risk"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-orange-100 text-orange-600 mb-3",children:e.jsx("span",{className:"text-2xl font-bold",children:((h=s.auditRisk)==null?void 0:h.incompleteCycles)||2})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Incomplete Cycles"}),e.jsx("p",{className:"text-sm text-orange-600",children:"This Week"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-yellow-100 text-yellow-600 mb-3",children:e.jsx("span",{className:"text-2xl font-bold",children:((d=(n=s.auditRisk)==null?void 0:n.riskFactors)==null?void 0:d.length)||2})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Risk Factors"}),e.jsx("p",{className:"text-sm text-yellow-600",children:"Identified"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Risk Factors"}),e.jsx("div",{className:"space-y-3",children:(a=s.auditRisk)!=null&&a.riskFactors&&s.auditRisk.riskFactors.length>0?s.auditRisk.riskFactors.map((f,v)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:f.factor}),e.jsx("p",{className:"text-sm text-gray-600",children:f.description})]}),e.jsxs("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-800",children:["Severity: ",f.severity]})]},v)):e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No risk factors identified"})})]})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No audit risk data available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data will appear here once sterilization cycles are completed"})]})}),s.theftLoss?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:H,size:1.5,className:"text-orange-600 mr-2"}),"Theft & Loss Analysis"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-orange-100 text-orange-600 mb-2",children:e.jsxs("span",{className:"text-xl font-bold",children:[s.theftLoss.estimatedLossPercentage||0,"%"]})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Estimated Loss"}),e.jsxs("p",{className:"text-lg font-bold text-orange-600",children:["$",((m=s.theftLoss.estimatedLossValue)==null?void 0:m.toLocaleString())||"0"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Flagged Items:"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:(y=s.theftLoss)!=null&&y.flaggedItems&&s.theftLoss.flaggedItems.length>0?s.theftLoss.flaggedItems.map((f,v)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(c,{path:P,size:.8,className:"text-orange-500 mr-2"}),f]},v)):e.jsx("li",{className:"text-gray-500",children:"No flagged items"})})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Risk Factors:"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:(p=s.theftLoss)!=null&&p.riskFactors&&s.theftLoss.riskFactors.length>0?s.theftLoss.riskFactors.map((f,v)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(c,{path:N,size:.8,className:"text-blue-500 mr-2"}),f]},v)):e.jsx("li",{className:"text-gray-500",children:"No risk factors identified"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Incident Summary:"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:["Flagged Items:"," ",((S=(k=s.theftLoss)==null?void 0:k.flaggedItems)==null?void 0:S.length)||0]}),e.jsxs("p",{children:["Risk Factors:"," ",((x=(o=s.theftLoss)==null?void 0:o.riskFactors)==null?void 0:x.length)||0]}),e.jsxs("p",{children:["Recommended Actions:"," ",((z=(R=s.theftLoss)==null?void 0:R.recommendedActions)==null?void 0:z.length)||0]})]})]})]})})]})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No theft/loss data available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data will appear here once inventory tracking is implemented"})]})})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No risk analysis data available"})]})})}function de({summary:s,optimizationTips:l=[]}){var r,t;const i=()=>s!=null&&s.actions?s.actions.filter(n=>n.urgency==="high"):[],h=l||[];return s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:P,size:1.5,className:"text-red-600 mr-2"}),"Urgent Actions Required"]}),e.jsxs("div",{className:"space-y-4",children:[i().map((n,d)=>e.jsx("div",{className:"border-l-4 border-red-500 bg-red-50 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-900",children:n.title}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:n.description})]}),e.jsx("button",{className:"bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-red-700",children:"Take Action"})]})},d)),i().length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No urgent actions required at this time"})]})]}),s.trainingGaps?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(c,{path:Y,size:1.5,className:"text-blue-600 mr-2"}),"Training & Knowledge Gaps"]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((r=s.trainingGaps)==null?void 0:r.totalGaps)||3}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Gaps"})]})]}),(t=s.trainingGaps)!=null&&t.usersWithGaps&&s.trainingGaps.usersWithGaps.length>0?e.jsx("div",{className:"space-y-4",children:s.trainingGaps.usersWithGaps.map((n,d)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:n.full_name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:["ID: ",n.userId]}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Training Required"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"font-medium text-gray-700",children:"Knowledge Gaps:"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:n.gaps&&n.gaps.length>0?n.gaps.map((a,m)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(c,{path:M,size:.8,className:"mr-2"}),a]},m)):e.jsx("li",{className:"text-gray-500",children:"No specific gaps identified"})})]})]},d))}):e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No training gaps identified"})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No training data available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Data will appear here once staff assessments are completed"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:B,size:1.5,className:"text-purple-600 mr-2"}),"Optimization Tips"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map((n,d)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:n.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.difficulty==="easy"?"bg-green-100 text-green-800":n.difficulty==="medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:n.difficulty})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:n.description}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Current:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:n.currentState})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Action:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:n.recommendedAction})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Expected:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:n.expectedOutcome})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Effort:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:n.estimatedEffort})]})]})]},d))})]})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No action items data available"})]})})}function oe({summary:s,recommendations:l=[],optimizationTips:r=[],insightsSummary:t}){const i=a=>{switch(a.toLowerCase()){case"high":return"border-red-500 bg-red-50";case"medium":return"border-yellow-500 bg-yellow-50";case"low":return"border-green-500 bg-green-50";default:return"border-gray-500 bg-gray-50"}},h=t||{totalRecommendations:0,criticalItems:0,estimatedSavings:0,estimatedTimeSavings:0},n=l||[],d=r||[];return s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(c,{path:G,size:2,className:"text-blue-600 mr-3"}),e.jsx("h3",{className:"text-xl font-bold text-blue-900",children:"Actionable Insights Summary"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:h.totalRecommendations}),e.jsx("div",{className:"text-sm text-blue-700",children:"Total Recommendations"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:h.criticalItems}),e.jsx("div",{className:"text-sm text-red-700",children:"Critical Items"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",h.estimatedSavings.toLocaleString()]}),e.jsx("div",{className:"text-sm text-green-700",children:"Estimated Savings"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[h.estimatedTimeSavings,"h"]}),e.jsx("div",{className:"text-sm text-purple-700",children:"Time Savings"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:ee,size:1.5,className:"text-green-600 mr-2"}),"Smart Recommendations"]}),e.jsx("div",{className:"space-y-4",children:n.slice(0,5).map((a,m)=>e.jsxs("div",{className:`p-4 rounded-lg border ${i(a.priority)}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:a.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:a.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:["Timeline: ",a.timeline]}),e.jsxs("span",{className:"text-gray-500",children:["Confidence: ",Math.round(a.confidence*100),"%"]}),e.jsxs("span",{className:"text-gray-500",children:["Category: ",a.category]})]}),a.impact.costSavings&&e.jsx("div",{className:"mt-2 text-sm",children:e.jsxs("span",{className:"text-green-600 font-medium",children:["ðŸ’° Potential savings: $",a.impact.costSavings.toLocaleString()]})})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${i(a.priority)}`,children:a.priority})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Action Items:"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:a.actionItems.slice(0,3).map((y,p)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(c,{path:M,size:.8,className:"text-blue-500 mr-2"}),y]},p))})]})]},m))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:B,size:1.5,className:"text-purple-600 mr-2"}),"Optimization Tips"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map((a,m)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:a.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a.difficulty==="easy"?"bg-green-100 text-green-800":a.difficulty==="medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:a.difficulty})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:a.description}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Current:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:a.currentState})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Action:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:a.recommendedAction})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Expected:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:a.expectedOutcome})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Effort:"}),e.jsx("span",{className:"text-gray-600 ml-2",children:a.estimatedEffort})]})]})]},m))})]})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No insights data available"})]})})}function me({summary:s,integrationMetrics:l}){const r={knowledgeHubArticles:24,activeSuppliers:8,recentAuditActions:12,integrationHealth:87,lastSync:new Date().toISOString()},t=l||r;return s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(c,{path:A,size:1.5,className:"text-blue-600 mr-2"}),"Integration Health"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.knowledgeHubArticles}),e.jsx("div",{className:"text-sm text-blue-700",children:"Knowledge Hub Articles"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:t.activeSuppliers}),e.jsx("div",{className:"text-sm text-green-700",children:"Active Suppliers"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:t.recentAuditActions}),e.jsx("div",{className:"text-sm text-purple-700",children:"Recent Audit Actions"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-900",children:[t.integrationHealth,"%"]}),e.jsx("div",{className:"text-sm text-orange-700",children:"Integration Health"})]})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-600",children:["Last sync:"," ",t.lastSync?new Date(t.lastSync).toLocaleString():"Never"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Integration Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center",children:[e.jsx(c,{path:se,size:1.2,className:"mr-2"}),"Sync Knowledge Hub"]}),e.jsxs("button",{className:"bg-gray-400 text-gray-600 px-4 py-2 rounded-lg cursor-not-allowed flex items-center justify-center opacity-60",disabled:!0,children:[e.jsx(c,{path:A,size:1.2,className:"mr-2"}),"Supplier Database Sync",e.jsx("span",{className:"ml-2 text-xs bg-gray-500 text-white px-2 py-1 rounded-full",children:"Coming Soon"})]})]})]})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{path:N,size:2,className:"text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No integration data available"})]})})}var xe=Object.defineProperty,ge=Object.defineProperties,he=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,ue=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,E=(s,l,r)=>l in s?xe(s,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[l]=r,C=(s,l)=>{for(var r in l||(l={}))ue.call(l,r)&&E(s,r,l[r]);if(U)for(var r of U(l))pe.call(l,r)&&E(s,r,l[r]);return s},T=(s,l)=>ge(s,he(l)),_=(s,l,r)=>new Promise((t,i)=>{var h=a=>{try{d(r.next(a))}catch(m){i(m)}},n=a=>{try{d(r.throw(a))}catch(m){i(m)}},d=a=>a.done?t(a.value):Promise.resolve(a.value).then(h,n);d((r=r.apply(s,l)).next())});const q={ttl:300*1e3,maxSize:50};class je{constructor(l=q){this.cache=new Map,this.config=l}set(l,r,t){if(this.cleanup(),this.cache.size>=this.config.maxSize){const i=this.cache.keys().next().value;i&&this.cache.delete(i)}this.cache.set(l,{data:r,timestamp:Date.now(),ttl:t||this.config.ttl})}get(l){const r=this.cache.get(l);return r?Date.now()-r.timestamp>r.ttl?(this.cache.delete(l),null):r.data:null}has(l){const r=this.cache.get(l);return r?Date.now()-r.timestamp>r.ttl?(this.cache.delete(l),!1):!0:!1}clear(){this.cache.clear()}cleanup(){const l=Date.now();for(const[r,t]of this.cache.entries())l-t.timestamp>t.ttl&&this.cache.delete(r)}}const ye=(s={},l)=>{const t=g.useRef(new je(C(C({},q),l))).current,[i,h]=g.useState({summary:null,loading:!1,error:null,updated_at:null,confidence:0}),n=g.useMemo(()=>`forecasting_${JSON.stringify(s||{})}`,[s]),d=g.useMemo(()=>te.getInstance(),[]),a=g.useMemo(()=>t.has(n),[t,n]),m=g.useMemo(()=>i.summary?{toolReplacement:i.summary.toolReplacement||[],autoclaveCapacity:i.summary.autoclaveCapacity||[],inventoryInflation:i.summary.inventoryInflation||[],clinicalStaffing:i.summary.clinicalStaffing||null,adminStaffing:i.summary.adminStaffing||null,theftLoss:i.summary.theftLoss||null,supplyDepletion:i.summary.supplyDepletion||[],toolTurnoverUtilization:i.summary.toolTurnoverUtilization||[],auditRisk:i.summary.auditRisk||null,trainingGaps:i.summary.trainingGaps||null,efficiencyROI:i.summary.efficiencyROI||null}:null,[i.summary]),y=g.useCallback((j=!1)=>_(null,null,function*(){if(!j&&a){const u=t.get(n);if(u){h({summary:u,loading:!1,error:null,updated_at:u.lastUpdated,confidence:u.confidence});return}}h(u=>T(C({},u),{loading:!0,error:null}));try{const u=yield d.getIntelligenceSummary(s,j);t.set(n,u),h({summary:u,loading:!1,error:null,updated_at:u.lastUpdated,confidence:u.confidence})}catch(u){h(b=>T(C({},b),{loading:!1,error:u instanceof Error?u.message:"Failed to fetch intelligence data"}))}}),[s,d,t,n,a]),p=g.useCallback((j,u,b)=>_(null,null,function*(){const w=`${n}_${b}`;if(t.has(w))return t.get(w);try{const I=yield u();return t.set(w,I),I}catch(I){throw console.error(`Error fetching ${j}:`,I),I}}),[t,n]),k=g.useCallback(()=>_(null,null,function*(){return p("tool replacement forecast",()=>d.getToolReplacementForecast(s),"tool_replacement")}),[p,d,s]),S=g.useCallback(()=>_(null,null,function*(){return p("autoclave capacity forecast",()=>d.getAutoclaveCapacityForecast(s),"autoclave_capacity")}),[p,d,s]),o=g.useCallback(()=>_(null,null,function*(){return p("tool turnover utilization",()=>d.getToolTurnoverUtilization(s),"tool_turnover")}),[p,d,s]),x=g.useCallback(()=>_(null,null,function*(){return p("audit risk score",()=>d.getAuditRiskScore(s),"audit_risk")}),[p,d,s]),R=g.useCallback(()=>_(null,null,function*(){return p("supply depletion forecast",()=>d.getSupplyDepletionForecast(s),"supply_depletion")}),[p,d,s]),z=g.useMemo(()=>{if(!m)return!1;const{auditRisk:j,supplyDepletion:u}=m;return(j==null?void 0:j.riskLevel)==="high"||(j==null?void 0:j.riskLevel)==="critical"||u.some(b=>b.reorderUrgency==="critical")},[m]),D=g.useMemo(()=>{var j,u;if(!m)return[];const b=[],w=m.supplyDepletion.filter(I=>I.reorderUrgency==="critical");return w.length>0&&b.push({type:"critical_supply",message:`${w.length} critical supplies need immediate reorder`,items:w}),(((j=m.auditRisk)==null?void 0:j.riskLevel)==="high"||((u=m.auditRisk)==null?void 0:u.riskLevel)==="critical")&&b.push({type:"audit_risk",message:"High audit risk detected - immediate action required",riskScore:m.auditRisk}),b},[m]),f=g.useCallback(()=>{t.clear(),h(j=>T(C({},j),{updated_at:null}))},[t]),v=g.useCallback(()=>_(null,null,function*(){t.clear(),yield y(!0)}),[y,t]);return g.useEffect(()=>{s.facilityId&&y()},[s.facilityId,y]),T(C({},i),{lastUpdated:i.updated_at,individualForecasts:m,isCached:a,cacheKey:n,refreshData:v,clearCache:f,fetchIntelligenceSummary:y,getToolReplacementForecast:k,getAutoclaveCapacityForecast:S,getToolTurnoverUtilization:o,getAuditRiskScore:x,getSupplyDepletionForecast:R,hasHighRiskItems:z,getUrgentActions:D})};var Ne=(s,l,r)=>new Promise((t,i)=>{var h=a=>{try{d(r.next(a))}catch(m){i(m)}},n=a=>{try{d(r.throw(a))}catch(m){i(m)}},d=a=>a.done?t(a.value):Promise.resolve(a.value).then(h,n);d((r=r.apply(s,l)).next())});function Re(){const[s,l]=g.useState("overview"),[r,t]=g.useState([]),[i,h]=g.useState([]),[n,d]=g.useState(null),[a,m]=g.useState([]),[y,p]=g.useState(null),{getCurrentFacilityId:k}=K(),S=k(),o=g.useMemo(()=>({facilityId:S||""}),[S]),{summary:x,loading:R,lastUpdated:z,refreshData:D}=ye(o);g.useEffect(()=>{x&&Ne(null,null,function*(){try{const j=yield L.generateRecommendations(x),u=yield L.generateOptimizationTips(x),b=yield L.generateRiskAlerts(x),w=yield L.getActionableInsights(x);t(j||[]),h(u||[]),m(b||[]),p(w||null),ae.getIntegrationMetrics().then(d)}catch(j){console.error("Error generating insights:",j)}})},[x]);function f(v){switch(v){case"forecasting":return e.jsx(ne,{summary:x});case"risks":return e.jsx(ce,{summary:x});case"actions":return e.jsx(de,{summary:x,recommendations:r,optimizationTips:i});case"insights":return e.jsx(oe,{summary:x,recommendations:r,optimizationTips:i,insightsSummary:y});case"integrations":return e.jsx(me,{summary:x,integrationMetrics:n});case"overview":return e.jsx(ie,{summary:x,actionableInsights:a});default:return null}}return e.jsx(W,{children:e.jsxs("div",{style:{padding:"2rem"},children:[e.jsx(re,{loading:R,lastUpdated:z,onRefresh:D}),e.jsx(le,{activeTab:s,onTabChange:l}),e.jsx("div",{style:{marginTop:"1rem"},children:f(s)})]})})}export{Re as default};
