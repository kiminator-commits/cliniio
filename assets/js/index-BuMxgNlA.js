const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/main-FsBT3Y_8.js","assets/js/utils-DSBVV_PW.js","assets/js/vendor-DoALFvsH.js","assets/js/login-em2Hs6UG.js","assets/js/data-73RVSc-N.js","assets/js/ui-CbhfWbfq.js","assets/js/errors-CsB9ZK3e.js","assets/css/main-DtMVykw2.css"])))=>i.map(i=>d[i]);
import{j as e,A as Ea,m as Yt}from"./utils-DSBVV_PW.js";import{a as h,d as Pa,u as Ta}from"./vendor-DoALFvsH.js";import{F as pt,C as ft,j as ht,k as aa,E as Aa,L as Ia,m as Oa,n as Oe,u as Wt,o as Da,p as Ra,q as ka,d as $a,U as Kt,r as fe,s as as,t as ns,B as is,S as La}from"./main-FsBT3Y_8.js";import{U as na,aw as J,ax as Ma,ay as ia,I as v,at as Fa,O as ls,c as ie,i as za,e as qa,S as Gt,$ as ye,a as Va,a8 as qe,az as lt,aA as Qt,aB as Bt,T as Ut,aC as Ie,b as je,aD as Ga,v as Zt,aE as Ba,a9 as la,aF as Ua,r as De,aG as Re,l as Ht,aH as He,aa as Xt,aI as Ne,aJ as Ha,aK as Ve,aL as Ya,aM as oa,u as Ge,a0 as Be,_ as os,j as Ue,G as Jt,E as es,f as ca,ac as da,ad as ua,a3 as ma,aq as Wa,d as ot,ae as Ka,J as Qa,am as Za,a5 as Ye,Z as pa,aN as Xa,aO as Ja,F as en,aP as tn,aQ as ha,ao as sn,aR as rn,ar as an,M as nn,aS as ln}from"./errors-CsB9ZK3e.js";import{s as E,u as We,f as on,x as cn,M as bt,_ as yt,E as oe}from"./login-em2Hs6UG.js";import{L as dn}from"./ui-CbhfWbfq.js";import{I as un}from"./inventoryTransformers-ChLO0ufi.js";import"./data-73RVSc-N.js";var mn=Object.defineProperty,pn=Object.defineProperties,hn=Object.getOwnPropertyDescriptors,cs=Object.getOwnPropertySymbols,gn=Object.prototype.hasOwnProperty,xn=Object.prototype.propertyIsEnumerable,ds=(r,t,s)=>t in r?mn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,fn=(r,t)=>{for(var s in t||(t={}))gn.call(t,s)&&ds(r,s,t[s]);if(cs)for(var s of cs(t))xn.call(t,s)&&ds(r,s,t[s]);return r},bn=(r,t)=>pn(r,hn(t)),us=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});class yn{static getFacilitySettings(t){return us(this,null,function*(){try{const{data:s,error:a}=yield E.from("facility_settings").select("*").eq("facility_id",t).single();return a?(console.error("Error fetching facility settings:",a),null):s}catch(s){return console.error("Error fetching facility settings:",s),null}})}static updateFacilitySettings(t,s){return us(this,null,function*(){try{const a=bn(fn({},s),{facility_id:t,updated_at:new Date().toISOString()}),{data:n,error:l}=yield E.from("facility_settings").upsert(a,{onConflict:"facility_id"}).select().single();return l?(console.error("Error updating facility settings:",l),null):n}catch(a){return console.error("Error updating facility settings:",a),null}})}}const vn=({activeTab:r,onTabChange:t})=>{const s=[{id:"basic-info",label:"Basic Information",icon:na},{id:"preferences",label:"Preferences",icon:J},{id:"mobile",label:"Mobile Scanner Shortcuts",icon:Ma},{id:"account",label:"Account Management",icon:ia}];return e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:s.map(a=>e.jsxs("button",{onClick:()=>t(a.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${r===a.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(v,{path:a.icon,size:1}),e.jsx("span",{children:a.label})]},a.id))})})})};var jn=Object.defineProperty,Nn=Object.defineProperties,_n=Object.getOwnPropertyDescriptors,ms=Object.getOwnPropertySymbols,Sn=Object.prototype.hasOwnProperty,Cn=Object.prototype.propertyIsEnumerable,ps=(r,t,s)=>t in r?jn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,te=(r,t)=>{for(var s in t||(t={}))Sn.call(t,s)&&ps(r,s,t[s]);if(ms)for(var s of ms(t))Cn.call(t,s)&&ps(r,s,t[s]);return r},se=(r,t)=>Nn(r,_n(t));const wn=({basicInfoForm:r,setBasicInfoForm:t,userData:s,uploadingPhoto:a,uploadProfilePhoto:n,removeProfilePhoto:l})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx("input",{id:"first-name",type:"text",value:r.first_name,onChange:o=>t(c=>se(te({},c),{first_name:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx("input",{id:"last-name",type:"text",value:r.last_name,onChange:o=>t(c=>se(te({},c),{last_name:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{id:"email",type:"email",value:r.email,onChange:o=>t(c=>se(te({},c),{email:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{id:"phone",type:"tel",value:r.phone,onChange:o=>t(c=>se(te({},c),{phone:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsx("input",{id:"department",type:"text",value:r.department,onChange:o=>t(c=>se(te({},c),{department:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"position",className:"block text-sm font-medium text-gray-700 mb-2",children:"Position"}),e.jsx("input",{id:"position",type:"text",value:r.position,onChange:o=>t(c=>se(te({},c),{position:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date-of-birth",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),e.jsx("input",{id:"date-of-birth",type:"date",value:r.date_of_birth,onChange:o=>t(c=>se(te({},c),{date_of_birth:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),e.jsx("textarea",{id:"bio",value:r.bio||"",onChange:o=>t(c=>se(te({},c),{bio:o.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tell us about yourself..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"preferred-language",className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Language"}),e.jsxs("select",{id:"preferred-language",value:r.preferred_language||"en",onChange:o=>t(c=>se(te({},c),{preferred_language:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"}),e.jsx("option",{value:"pt",children:"Portuguese"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"timezone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),e.jsxs("select",{id:"timezone",value:r.timezone||"UTC",onChange:o=>t(c=>se(te({},c),{timezone:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"Eastern Time"}),e.jsx("option",{value:"America/Chicago",children:"Central Time"}),e.jsx("option",{value:"America/Denver",children:"Mountain Time"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time"}),e.jsx("option",{value:"Europe/London",children:"London"}),e.jsx("option",{value:"Europe/Paris",children:"Paris"}),e.jsx("option",{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Profile Picture"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:a?e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#4ECDC4]"})}):s!=null&&s.avatar_url?e.jsx("img",{src:String(s.avatar_url),alt:"Profile",className:"w-20 h-20 rounded-full object-cover"}):e.jsx(v,{path:Fa,size:2,className:"text-gray-400"})}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("input",{type:"file",id:"profile-photo",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:o=>{var c;const i=(c=o.target.files)==null?void 0:c[0];i&&n(i),o.target.value=""},className:"hidden",disabled:a}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm cursor-pointer text-center disabled:opacity-50 disabled:cursor-not-allowed",onClick:o=>{if(a){o.preventDefault();return}document.getElementById("profile-photo").click()},disabled:a,children:a?"Uploading...":"Upload Photo"}),(s==null?void 0:s.avatar_url)&&e.jsx("button",{onClick:l,disabled:a,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Remove Photo"}),e.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG or GIF. Max size 2MB."}),a&&e.jsx("p",{className:"text-xs text-blue-600",children:"Uploading photo..."})]})]})]})]}),Q=({id:r,checked:t,onChange:s,label:a,description:n,disabled:l=!1})=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:a}),n&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n})]}),e.jsxs("label",{htmlFor:r,className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{id:r,type:"checkbox",className:"sr-only peer",checked:t,onChange:o=>s(o.target.checked),disabled:l}),e.jsx("div",{className:`w-11 h-6 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all ${t?"bg-[#4ECDC4] after:translate-x-full":"bg-gray-200"} ${l?"opacity-50 cursor-not-allowed":"cursor-pointer"}`}),e.jsx("span",{className:"sr-only",children:a})]})]});let vt=null;const En=()=>(vt||(vt=new(window.AudioContext||window.webkitAudioContext)),vt),Pn=(r,t=50)=>{const s=En(),a=s.createOscillator(),n=s.createGain();switch(n.gain.value=t/100,a.connect(n),n.connect(s.destination),r){case"gentle-chime":a.frequency.setValueAtTime(800,s.currentTime),a.frequency.setValueAtTime(1e3,s.currentTime+.1),a.frequency.setValueAtTime(1200,s.currentTime+.2),a.type="sine";break;case"medical-alert":a.frequency.setValueAtTime(600,s.currentTime),a.frequency.setValueAtTime(800,s.currentTime+.15),a.type="square";break;case"soft-bell":a.frequency.setValueAtTime(1e3,s.currentTime),a.frequency.setValueAtTime(800,s.currentTime+.2),a.type="sine";break;case"digital-beep":a.frequency.setValueAtTime(1e3,s.currentTime),a.type="square";break;case"success-tone":a.frequency.setValueAtTime(800,s.currentTime),a.frequency.setValueAtTime(1e3,s.currentTime+.1),a.type="sine";break;case"warning-sound":a.frequency.setValueAtTime(400,s.currentTime),a.frequency.setValueAtTime(600,s.currentTime+.1),a.type="sawtooth";break;default:return}a.start(s.currentTime),a.stop(s.currentTime+.3)},Tn=r=>{switch(r){case"short-pulse":return[100];case"double-tap":return[100,50,100];case"long-pulse":return[300];case"pattern":return[100,50,100,50,200];case"off":default:return[]}},ga=r=>{if("vibrate"in navigator){const t=Tn(r);t.length>0&&navigator.vibrate(t)}else console.log("Vibration not supported on this device")},xa=(r,t=50)=>{if(r!=="none")try{Pn(r,t)}catch(s){console.error("Error playing notification sound:",s)}},An=r=>{const{sound:t,volume:s,vibration:a,vibrationEnabled:n}=r.notifications;t&&t!=="none"&&xa(t,s),n&&a&&a!=="off"&&ga(a)};var In=Object.defineProperty,On=Object.defineProperties,Dn=Object.getOwnPropertyDescriptors,hs=Object.getOwnPropertySymbols,Rn=Object.prototype.hasOwnProperty,kn=Object.prototype.propertyIsEnumerable,gs=(r,t,s)=>t in r?In(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,jt=(r,t)=>{for(var s in t||(t={}))Rn.call(t,s)&&gs(r,s,t[s]);if(hs)for(var s of hs(t))kn.call(t,s)&&gs(r,s,t[s]);return r},Nt=(r,t)=>On(r,Dn(t));const $n=({preferences:r,setPreferences:t})=>{const s=(n,l)=>{t(Nt(jt({},r),{[n]:l}))},a=(n,l)=>{t(Nt(jt({},r),{notifications:Nt(jt({},r.notifications),{[n]:l})}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Appearance"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"theme",className:"block text-sm font-medium text-gray-600 mb-2",children:"Theme"}),e.jsxs("select",{id:"theme",value:r.theme,onChange:n=>s("theme",n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"light",children:"Light"}),e.jsx("option",{value:"dark",children:"Dark"}),e.jsx("option",{value:"auto",children:"Auto (System)"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Notifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Q,{id:"push-notifications",checked:r.notifications.push,onChange:n=>a("push",n),label:"Push Notifications (Browser)"}),r.notifications.push&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-3",children:"Notification Sounds"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notification-sound",className:"block text-sm font-medium text-gray-600 mb-2",children:"Default Sound"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{id:"notification-sound",value:r.notifications.sound||"gentle-chime",onChange:n=>a("sound",n.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"gentle-chime",children:"Gentle Chime"}),e.jsx("option",{value:"medical-alert",children:"Medical Alert"}),e.jsx("option",{value:"soft-bell",children:"Soft Bell"}),e.jsx("option",{value:"digital-beep",children:"Digital Beep"}),e.jsx("option",{value:"success-tone",children:"Success Tone"}),e.jsx("option",{value:"warning-sound",children:"Warning Sound"}),e.jsx("option",{value:"none",children:"No Sound"})]}),e.jsx("button",{type:"button",onClick:()=>xa(r.notifications.sound||"gentle-chime",r.notifications.volume||50),className:"px-3 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Preview"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notification-volume",className:"block text-sm font-medium text-gray-600 mb-2",children:"Volume"}),e.jsx("input",{id:"notification-volume",type:"range",min:"0",max:"100",value:r.notifications.volume||50,onChange:n=>a("volume",parseInt(n.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"0%"}),e.jsxs("span",{children:[r.notifications.volume||50,"%"]}),e.jsx("span",{children:"100%"})]})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-3",children:"Vibration (Mobile Devices)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"vibration-pattern",className:"block text-sm font-medium text-gray-600 mb-2",children:"Vibration Pattern"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{id:"vibration-pattern",value:r.notifications.vibration||"short-pulse",onChange:n=>a("vibration",n.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"short-pulse",children:"Short Pulse"}),e.jsx("option",{value:"double-tap",children:"Double Tap"}),e.jsx("option",{value:"long-pulse",children:"Long Pulse"}),e.jsx("option",{value:"pattern",children:"Pattern"}),e.jsx("option",{value:"off",children:"Off"})]}),e.jsx("button",{type:"button",onClick:()=>ga(r.notifications.vibration||"short-pulse"),className:"px-3 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Test"})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(Q,{id:"vibration-enabled",checked:r.notifications.vibrationEnabled!==!1,onChange:n=>a("vibrationEnabled",n),label:"Enable Vibration"})})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4 mt-4",children:e.jsx("button",{type:"button",onClick:()=>An(r),className:"w-full px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors",children:"Test Full Notification"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can customize notification preferences for specific features in each module."})]})]})]})};var Ln=Object.defineProperty,Mn=Object.defineProperties,Fn=Object.getOwnPropertyDescriptors,xs=Object.getOwnPropertySymbols,zn=Object.prototype.hasOwnProperty,qn=Object.prototype.propertyIsEnumerable,fs=(r,t,s)=>t in r?Ln(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,$e=(r,t)=>{for(var s in t||(t={}))zn.call(t,s)&&fs(r,s,t[s]);if(xs)for(var s of xs(t))qn.call(t,s)&&fs(r,s,t[s]);return r},Le=(r,t)=>Mn(r,Fn(t)),bs=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Vn=()=>{const[r,t]=h.useState([{id:"clean-tool",name:"Clean Tool Scan",description:"Scan clean tools ready for use",icon:ls,enabled:!1,shortcutSlot:null},{id:"dirty-tool",name:"Dirty Tool Scan",description:"Scan tools that need sterilization",icon:ls,enabled:!1,shortcutSlot:null},{id:"problem-tool",name:"Problem Tool Scan",description:"Scan tools with issues/repair needs",icon:ie,enabled:!1,shortcutSlot:null},{id:"import-receipt",name:"Import Autoclave Receipt",description:"Import physical autoclave documentation",icon:za,enabled:!1,shortcutSlot:null},{id:"package-tools",name:"Package Tools",description:"Package tools for sterilization",icon:qa,enabled:!1,shortcutSlot:null},{id:"single-scan",name:"Single Scan Mode",description:"Individual tool scanning",icon:Gt,enabled:!1,shortcutSlot:null},{id:"batch-scan",name:"Batch Scan Mode",description:"Multiple tools at once",icon:Gt,enabled:!1,shortcutSlot:null},{id:"add-inventory",name:"Add Inventory",description:"Scan new items to add",icon:ye,enabled:!1,shortcutSlot:null},{id:"use-inventory",name:"Use Inventory",description:"Scan items to remove/consume",icon:Va,enabled:!1,shortcutSlot:null},{id:"scan-room",name:"Scan Room",description:"Scan room barcodes for cleaning",icon:qe,enabled:!1,shortcutSlot:null},{id:"complete-cleaning",name:"Complete Cleaning",description:"Mark room as cleaned",icon:qe,enabled:!1,shortcutSlot:null},{id:"update-status",name:"Update Status",description:"Change room cleaning status",icon:qe,enabled:!1,shortcutSlot:null}]),s=(i,d)=>{if(d&&a().length===0){alert("No mobile shortcuts available. Please disable another workflow first or assign this workflow to an existing shortcut.");return}t(u=>u.map(m=>m.id===i?Le($e({},m),{enabled:d,shortcutSlot:d?m.shortcutSlot:null}):m))},a=()=>{const i=r.filter(u=>u.enabled&&u.shortcutSlot!==null).map(u=>u.shortcutSlot);return["volume-up","volume-down","volume-up-double","volume-down-double","power-double","double-tap","shake","flip"].filter(u=>!i.includes(u))},n=(i,d)=>{d===null&&setTimeout(()=>{t(u=>u.map(m=>m.id===i&&m.shortcutSlot===null?Le($e({},m),{enabled:!1}):m))},5e3),t(u=>u.map(m=>m.shortcutSlot===d&&m.id!==i?Le($e({},m),{shortcutSlot:null}):m.id===i?Le($e({},m),{shortcutSlot:d}):m))},l=i=>{var d;return((d=[{id:"volume-up",label:"Volume Up"},{id:"volume-down",label:"Volume Down"},{id:"volume-up-double",label:"Volume Up (2x)"},{id:"volume-down-double",label:"Volume Down (2x)"},{id:"power-double",label:"Power (2x)"},{id:"double-tap",label:"Double Tap"},{id:"shake",label:"Shake"},{id:"flip",label:"Flip"}].find(m=>m.id===i))==null?void 0:d.label)||i},o=()=>bs(null,null,function*(){try{const{data:{user:i}}=yield E.auth.getUser();if(!i)return;const{data:d,error:u}=yield E.from("users").select("mobile_shortcuts").eq("id",i.id).single();if(u&&u.code!=="PGRST116")return;d!=null&&d.mobile_shortcuts&&typeof d.mobile_shortcuts=="object"&&t(m=>m.map(g=>{const p=d.mobile_shortcuts[g.id];return p?Le($e({},g),{enabled:p.enabled,shortcutSlot:p.shortcut}):g}))}catch(i){}}),c=h.useCallback(()=>bs(null,null,function*(){try{const{data:{user:i}}=yield E.auth.getUser();if(!i)return;const d=r.reduce((m,g)=>(g.enabled&&g.shortcutSlot&&(m[g.id]={enabled:g.enabled,shortcut:g.shortcutSlot}),m),{}),{error:u}=yield E.from("users").update({mobile_shortcuts:d,updated_at:new Date().toISOString()}).eq("id",i.id);u?console.error("Error saving mobile settings:",u):console.log("Mobile settings saved successfully")}catch(i){}}),[r]);return h.useEffect(()=>{setTimeout(()=>{o()},0)},[]),h.useEffect(()=>{r.some(i=>i.enabled)&&c()},[r,c]),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Mobile Scanner Shortcuts"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Configure up to 4 mobile shortcuts for quick access to your most-used scanning workflows."}),e.jsx("div",{className:"space-y-4",children:r.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(v,{path:i.icon,size:1.2,className:"text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:i.name}),e.jsx("p",{className:"text-xs text-gray-500",children:i.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Enable"}),e.jsx(Q,{id:`toggle-${i.id}`,label:`Enable ${i.name}`,checked:i.enabled,onChange:d=>s(i.id,d)})]}),i.enabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("select",{value:i.shortcutSlot||"",onChange:d=>n(i.id,d.target.value?d.target.value:null),className:`px-3 py-1 border rounded text-sm ${i.shortcutSlot?"border-gray-300":"border-red-300 bg-red-50"}`,children:[e.jsx("option",{value:"",children:"Select Shortcut"}),[{id:"volume-up",label:"Volume Up (Single Press)",description:"Press volume up button once"},{id:"volume-down",label:"Volume Down (Single Press)",description:"Press volume down button once"},{id:"volume-up-double",label:"Volume Up (Double Press)",description:"Press volume up button twice quickly"},{id:"volume-down-double",label:"Volume Down (Double Press)",description:"Press volume down button twice quickly"},{id:"power-double",label:"Power Button (Double Press)",description:"Press power button twice quickly"},{id:"double-tap",label:"Double Tap Screen",description:"Tap screen twice quickly"},{id:"shake",label:"Shake Device",description:"Shake your phone"},{id:"flip",label:"Flip Device",description:"Turn phone face down"}].map(d=>e.jsx("option",{value:d.id,disabled:r.some(u=>u.id!==i.id&&u.shortcutSlot===d.id),children:d.label},d.id))]}),!i.shortcutSlot&&e.jsx("p",{className:"text-xs text-red-500",children:"⚠️ Please select a mobile shortcut or this workflow will be disabled in 5 seconds"})]})]})]},i.id))}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h6",{className:"text-sm font-medium text-blue-700 mb-3",children:"Current Shortcuts"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[r.filter(i=>i.enabled&&i.shortcutSlot).map(i=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-2 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(v,{path:i.icon,size:1.2,className:"text-blue-600"})}),e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:i.name}),e.jsx("p",{className:"text-xs text-blue-500",children:l(i.shortcutSlot)})]},i.id)),r.filter(i=>i.enabled&&i.shortcutSlot).length===0&&e.jsxs("div",{className:"col-span-2 md:col-span-4 text-center py-4",children:[e.jsx("p",{className:"text-blue-500 text-sm",children:"No shortcuts configured yet"}),e.jsx("p",{className:"text-blue-400 text-xs",children:"Enable workflows and assign mobile shortcuts above"})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-3",children:"How to Use Mobile Shortcuts"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Enable workflows:"})," Use the toggles for scanning workflows you use frequently"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Assign shortcuts:"})," Choose mobile device actions (volume buttons, double tap, shake, etc.)"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Mobile access:"})," These shortcuts will trigger on your mobile device for quick scanning"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Unique assignments:"})," Each mobile shortcut can only be used by one workflow"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Quick launch:"})," Perform the assigned action to directly open that scanner workflow"]})]})]})]})})};var Gn=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Bn=({userData:r,onPasswordChange:t,onOpenPasswordModal:s,onArchiveAccount:a,passwordError:n,passwordSuccess:l})=>{const[o,c]=h.useState(!1),[i,d]=h.useState(!1),[u,m]=h.useState(""),g=p=>Gn(null,null,function*(){yield t(p),c(!1)}),b=()=>{u.trim()&&(a(),d(!1),m(""))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Account Security"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#4ECDC4] rounded-lg flex items-center justify-center",children:e.jsx(v,{path:lt,size:1,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium text-gray-700",children:"Password"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Last changed:"," ",r!=null&&r.password_changed_at?r.password_changed_at:"Never"]})]})]}),e.jsx("button",{onClick:s,className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Change Password"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"two-factor-toggle",className:"block text-sm font-medium text-gray-700",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Add an extra layer of security to your account"})]}),e.jsx("button",{id:"two-factor-toggle",disabled:!0,className:"px-4 py-2 rounded-md transition-colors text-sm bg-gray-400 text-white cursor-not-allowed opacity-60",title:"Coming Soon",children:"Coming Soon"})]}),e.jsx("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sessions-toggle",className:"block text-sm font-medium text-gray-700",children:"Login Sessions"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Active sessions:"," ",r!=null&&r.active_sessions?r.active_sessions:1]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-4",children:"Account Actions"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(v,{path:Qt,size:1,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium text-orange-700",children:"Archive Account"}),e.jsx("p",{className:"text-sm text-orange-600",children:"Archive your account - data is preserved but access is disabled"})]})]}),e.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-colors text-sm",children:"Archive Account"})]})})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Change Password"}),n&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-red-600 text-sm",children:n})}),l&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsx("p",{className:"text-green-600 text-sm",children:l})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"current-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),e.jsx("input",{id:"current-password",type:"password",placeholder:"Enter your current password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsx("input",{id:"new-password",type:"password",placeholder:"Enter new password (min 8 characters)",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsx("input",{id:"confirm-password",type:"password",placeholder:"Confirm new password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>g({currentPassword:"",newPassword:"",confirmPassword:""}),className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] rounded-md hover:bg-[#38b2ac]",children:"Change Password"})]})]})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-900 mb-4",children:"Archive Account"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Your account will be archived. This means:"}),e.jsxs("ul",{className:"text-sm text-gray-600 mb-4 space-y-1",children:[e.jsx("li",{children:"• Your data will be preserved"}),e.jsx("li",{children:"• You won't be able to access the system"}),e.jsx("li",{children:"• Your account can be restored by administrators"}),e.jsx("li",{children:"• All sessions will be terminated"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"This action can be reversed by contacting support."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"delete-reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for archiving (optional)"}),e.jsx("textarea",{id:"archive-reason",value:u,onChange:p=>m(p.target.value),placeholder:"Please let us know why you're archiving your account...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:b,className:"px-4 py-2 text-sm font-medium text-white bg-orange-600 rounded-md hover:bg-orange-700",children:"Archive Account"})]})]})})]})};var Un=Object.defineProperty,Hn=Object.defineProperties,Yn=Object.getOwnPropertyDescriptors,ys=Object.getOwnPropertySymbols,Wn=Object.prototype.hasOwnProperty,Kn=Object.prototype.propertyIsEnumerable,vs=(r,t,s)=>t in r?Un(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,_t=(r,t)=>{for(var s in t||(t={}))Wn.call(t,s)&&vs(r,s,t[s]);if(ys)for(var s of ys(t))Kn.call(t,s)&&vs(r,s,t[s]);return r},St=(r,t)=>Hn(r,Yn(t)),Qn=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Zn=({isOpen:r,onClose:t,onSubmit:s,error:a,success:n,isPasswordReset:l=!1})=>{const[o,c]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[i,d]=h.useState(!1),[u,m]=h.useState(!1),g=()=>Qn(null,null,function*(){yield s(o),n&&c({currentPassword:"*********",newPassword:"",confirmPassword:""})}),b=()=>{c({currentPassword:"*********",newPassword:"",confirmPassword:""}),t()};return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:l?"Reset Password":"Change Password"}),a&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-red-600 text-sm",children:a})}),n&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsx("p",{className:"text-green-600 text-sm",children:n})}),e.jsxs("div",{className:"space-y-4",children:[!l&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),e.jsx("div",{className:"relative",children:e.jsx("input",{id:"currentPassword",type:"password",placeholder:"Enter your current password",value:o.currentPassword||"*********",onChange:p=>c(St(_t({},o),{currentPassword:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter your current password to verify your identity before changing."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:l?"Choose New Password":"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"newPassword",type:i?"text":"password",placeholder:"Enter new password (min 6 characters)",value:o.newPassword,onChange:p=>c(St(_t({},o),{newPassword:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("button",{type:"button",onClick:()=>d(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(v,{path:i?Bt:Ut,size:1,className:"text-gray-400"})})]}),o.newPassword&&e.jsxs("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Password Requirements:"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[o.newPassword.length>=6?e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}):e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-300"}),e.jsxs("span",{className:`text-xs ${o.newPassword.length>=6?"text-green-700":"text-gray-500"}`,children:["At least 6 characters (",o.newPassword.length,"/6)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[o.newPassword===o.confirmPassword&&o.confirmPassword?e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}):e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-300"}),e.jsx("span",{className:`text-xs ${o.newPassword===o.confirmPassword&&o.confirmPassword?"text-green-700":"text-gray-500"}`,children:"Passwords match"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmPassword",type:u?"text":"password",value:o.confirmPassword,onChange:p=>c(St(_t({},o),{confirmPassword:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(v,{path:u?Bt:Ut,size:1,className:"text-gray-400"})})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:b,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:g,className:"px-4 py-2 text-sm font-medium text-white bg-[#4ECDC4] rounded-md hover:bg-[#38b2ac]",children:l?"Send Reset Email":"Save"})]})]})}):null};var ce=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});class me{static fetchUserData(t){return ce(this,null,function*(){try{const{data:s}=yield E.from("users").select("*").eq("id",t).single();return s||(yield this.createDefaultProfile(t))}catch(s){throw console.error("Error fetching user data:",s),s}})}static createDefaultProfile(t){return ce(this,null,function*(){const{data:s}=yield E.from("users").select("facility_id").eq("id",t).single(),a={id:t,email:"",first_name:"",last_name:"",role:"user",phone:"",department:"",position:"",date_of_birth:"",bio:"",preferred_language:"en",timezone:"UTC",facility_id:(s==null?void 0:s.facility_id)||"550e8400-e29b-41d4-a716-446655440000"},{data:n,error:l}=yield E.from("users").insert(a).select().single();if(l)throw console.error("Error creating default profile:",l),l;return n})}static getActiveSessionsCount(t){return ce(this,null,function*(){const{data:s}=yield E.from("user_sessions").select("id").eq("user_id",t).eq("is_active",!0);return(s==null?void 0:s.length)||0})}static saveProfile(t,s){return ce(this,null,function*(){const{error:a}=yield E.from("users").update({first_name:s.first_name,last_name:s.last_name,email:s.email,phone:s.phone,department:s.department,position:s.position,date_of_birth:s.date_of_birth,bio:s.bio,preferred_language:s.preferred_language,timezone:s.timezone,updated_at:new Date().toISOString()}).eq("id",t);if(a)throw a})}static changePassword(t){return ce(this,null,function*(){const{error:s}=yield E.auth.updateUser({password:t.newPassword});if(s)throw s})}static resetPassword(t){return ce(this,null,function*(){const{error:s}=yield E.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/settings?tab=account&openPasswordModal=true`});if(s)throw s})}static archiveAccount(t){return ce(this,null,function*(){const{error:s}=yield E.from("users").update({status:"archived",archived_at:new Date().toISOString()}).eq("id",t);if(s)throw s})}static uploadProfilePhoto(t,s){return ce(this,null,function*(){const a=s.name.split(".").pop(),n=`${Date.now()}.${a}`,l=`${t}/${n}`,{error:o}=yield E.storage.from("profile-photos").upload(l,s);if(o)throw o;const{data:{publicUrl:c}}=E.storage.from("profile-photos").getPublicUrl(l),{error:i}=yield E.from("users").update({profile_photo_url:c}).eq("id",t);if(i)throw i;return c})}static removeProfilePhoto(t){return ce(this,null,function*(){const{error:s}=yield E.from("users").update({profile_photo_url:null}).eq("id",t);if(s)throw s})}}var Xn=Object.defineProperty,Jn=Object.defineProperties,ei=Object.getOwnPropertyDescriptors,js=Object.getOwnPropertySymbols,ti=Object.prototype.hasOwnProperty,si=Object.prototype.propertyIsEnumerable,Ns=(r,t,s)=>t in r?Xn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,B=(r,t)=>{for(var s in t||(t={}))ti.call(t,s)&&Ns(r,s,t[s]);if(js)for(var s of js(t))si.call(t,s)&&Ns(r,s,t[s]);return r},U=(r,t)=>Jn(r,ei(t)),Se=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const ri=()=>{const{refreshUserData:r}=We(),t=Pa(),[s,a]=h.useState({activeTab:"basic-info",userData:null,loading:!0,saving:!1,saveSuccess:!1,saveError:null,basicInfoForm:{first_name:"",last_name:"",email:"",phone:"",department:"",position:"",date_of_birth:"",bio:"",preferred_language:"en",timezone:"UTC"},preferences:{theme:"light",notifications:{push:!0,sound:"default",volume:50,email:!0,sms:!1,desktop:!0,mobile:!0,weekly_digest:!0,security_alerts:!0,system_updates:!0,maintenance_notices:!0},privacy:{profile_visibility:"public",show_online_status:!0,allow_direct_messages:!0,data_sharing:!1,analytics_tracking:!0},accessibility:{high_contrast:!1,large_text:!1,screen_reader:!1,keyboard_navigation:!0,reduced_motion:!1}},mobileShortcuts:{quick_scan:!0,emergency_contact:!0,voice_commands:!1,gesture_navigation:!0,haptic_feedback:!0,auto_sync:!0,offline_mode:!1,biometric_login:!1},showPasswordModal:!1,isPasswordReset:!1,passwordError:null,passwordSuccess:null});h.useEffect(()=>{const u=new URLSearchParams(t.search),m=u.get("tab"),g=u.get("openPasswordModal");m&&a(b=>U(B({},b),{activeTab:m})),g==="true"&&(a(b=>U(B({},b),{showPasswordModal:!0})),window.history.replaceState({},"","/settings"))},[t.search]);const n=h.useCallback(()=>Se(null,null,function*(){try{a(x=>U(B({},x),{loading:!0}));const{data:{user:u}}=yield E.auth.getUser();if(!u)return;const m=yield me.fetchUserData(u.id),g=yield me.getActiveSessionsCount(u.id);let b=m.first_name||"",p=m.last_name||"";if(!b&&!p&&m.full_name){const x=m.full_name.split(" ");b=x[0]||"",p=x.slice(1).join(" ")||""}const f=m.email||u.email||"";let N=f;if(!f&&u.email){const x=u.email.split("@")[0];if(x.includes(".")){const j=x.split(".");b=j[0]||b,p=j.slice(1).join(" ")||p}N=u.email}const _=U(B({},m),{first_name:b,last_name:p,email:N,active_sessions:g});a(x=>U(B({},x),{userData:_,basicInfoForm:{first_name:b,last_name:p,email:N,phone:m.phone||"",department:m.department||"",position:m.position||"",date_of_birth:m.date_of_birth||"",bio:m.bio||"",preferred_language:m.preferred_language||"en",timezone:m.timezone||"UTC"},loading:!1}))}catch(u){console.error("Error fetching user data:",u),a(m=>U(B({},m),{loading:!1}))}}),[a]);return{state:s,setState:a,fetchUserData:n,handleSave:()=>Se(null,null,function*(){try{a(m=>U(B({},m),{saving:!0,saveError:null}));const{data:{user:u}}=yield E.auth.getUser();if(!u)return;yield me.saveProfile(u.id,s.basicInfoForm),a(m=>U(B({},m),{saving:!1,saveSuccess:!0,saveError:null})),setTimeout(()=>{a(m=>U(B({},m),{saveSuccess:!1}))},3e3),r()}catch(u){a(m=>U(B({},m),{saving:!1,saveError:u instanceof Error?u.message:"Failed to save profile"}))}}),handlePasswordChange:u=>Se(null,null,function*(){try{if(a(m=>U(B({},m),{passwordError:null,passwordSuccess:null})),u.newPassword!==u.confirmPassword){a(m=>U(B({},m),{passwordError:"Passwords do not match"}));return}s.isPasswordReset?(yield me.resetPassword(u.newPassword),a(m=>U(B({},m),{passwordSuccess:"Password reset email sent! Check your inbox.",showPasswordModal:!1}))):(yield me.changePassword(u),a(m=>U(B({},m),{passwordSuccess:"Password changed successfully!",showPasswordModal:!1})))}catch(m){a(g=>U(B({},g),{passwordError:m instanceof Error?m.message:"Failed to change password"}))}}),handleArchiveAccount:()=>Se(null,null,function*(){try{const{data:{user:u}}=yield E.auth.getUser();if(!u)return;yield me.archiveAccount(u.id),yield E.auth.signOut(),window.location.href="/login"}catch(u){console.error("Error archiving account:",u)}}),uploadProfilePhoto:u=>Se(null,null,function*(){try{const{data:{user:m}}=yield E.auth.getUser();if(!m)return;const g=yield me.uploadProfilePhoto(m.id,u);a(b=>U(B({},b),{userData:b.userData?U(B({},b.userData),{profile_photo_url:g}):null})),r()}catch(m){console.error("Error uploading profile photo:",m)}}),removeProfilePhoto:()=>Se(null,null,function*(){try{const{data:{user:u}}=yield E.auth.getUser();if(!u)return;yield me.removeProfilePhoto(u.id),a(m=>U(B({},m),{userData:m.userData?U(B({},m.userData),{profile_photo_url:null}):null})),r()}catch(u){console.error("Error removing profile photo:",u)}})}},fa=h.createContext(void 0),ai=({children:r})=>{const t=ri();return e.jsx(fa.Provider,{value:t,children:r})},ni=()=>{const r=h.useContext(fa);if(r===void 0)throw new Error("useProfileSettingsContext must be used within a ProfileSettingsProvider");return r};var ii=Object.defineProperty,li=Object.defineProperties,oi=Object.getOwnPropertyDescriptors,_s=Object.getOwnPropertySymbols,ci=Object.prototype.hasOwnProperty,di=Object.prototype.propertyIsEnumerable,Ss=(r,t,s)=>t in r?ii(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,re=(r,t)=>{for(var s in t||(t={}))ci.call(t,s)&&Ss(r,s,t[s]);if(_s)for(var s of _s(t))di.call(t,s)&&Ss(r,s,t[s]);return r},pe=(r,t)=>li(r,oi(t));const ui=()=>{const{state:r,setState:t,fetchUserData:s,handleSave:a,handlePasswordChange:n,handleArchiveAccount:l,uploadProfilePhoto:o,removeProfilePhoto:c}=ni();h.useEffect(()=>{s()},[s]);const i=[{id:"quick_scan",label:"Quick Scan",description:"Fast barcode scanning"},{id:"emergency_contact",label:"Emergency Contact",description:"Quick access to emergency"},{id:"voice_commands",label:"Voice Commands",description:"Hands-free operation"},{id:"gesture_navigation",label:"Gesture Navigation",description:"Swipe-based navigation"},{id:"haptic_feedback",label:"Haptic Feedback",description:"Touch vibration feedback"},{id:"auto_sync",label:"Auto Sync",description:"Automatic data synchronization"},{id:"offline_mode",label:"Offline Mode",description:"Work without internet"},{id:"biometric_login",label:"Biometric Login",description:"Fingerprint/Face ID login"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(vn,{activeTab:r.activeTab,onTabChange:d=>t(u=>pe(re({},u),{activeTab:d}))}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[r.activeTab==="basic-info"&&e.jsx(wn,{basicInfoForm:r.basicInfoForm,setBasicInfoForm:d=>t(u=>pe(re({},u),{basicInfoForm:d})),userData:r.userData?{avatar_url:r.userData.profile_photo}:null,uploadingPhoto:r.uploadingPhoto,uploadProfilePhoto:o,removeProfilePhoto:c}),r.activeTab==="preferences"&&e.jsx($n,{preferences:{theme:r.preferences.theme,notifications:{push:r.preferences.notifications.push,sound:r.preferences.notifications.sound,volume:r.preferences.notifications.volume,vibration:"medium",vibrationEnabled:!0}},setPreferences:d=>{t(u=>{var m,g,b;return pe(re({},u),{preferences:pe(re({},u.preferences),{theme:d.theme,notifications:pe(re({},u.preferences.notifications),{push:(m=d.notifications)==null?void 0:m.push,sound:(g=d.notifications)==null?void 0:g.sound,volume:(b=d.notifications)==null?void 0:b.volume})})})})}}),r.activeTab==="mobile"&&e.jsx(Vn,{mobileShortcuts:Object.entries(r.mobileShortcuts).map(([d,u])=>({[d]:u})),setMobileShortcuts:d=>{const u=d.reduce((m,g)=>re(re({},m),g),{});t(m=>pe(re({},m),{mobileShortcuts:u}))},availableShortcuts:i}),r.activeTab==="account"&&e.jsx(Bn,{userData:r.userData,onPasswordChange:n,onOpenPasswordModal:()=>t(d=>pe(re({},d),{showPasswordModal:!0})),onArchiveAccount:l,passwordError:r.passwordError,passwordSuccess:r.passwordSuccess})]}),e.jsx(Zn,{isOpen:r.showPasswordModal,onClose:()=>t(d=>pe(re({},d),{showPasswordModal:!1})),onSubmit:n,error:r.passwordError,success:r.passwordSuccess,isPasswordReset:r.isPasswordReset})]})},mi=()=>e.jsx(ai,{children:e.jsx(ui,{})});var pi=Object.defineProperty,hi=Object.defineProperties,gi=Object.getOwnPropertyDescriptors,Cs=Object.getOwnPropertySymbols,xi=Object.prototype.hasOwnProperty,fi=Object.prototype.propertyIsEnumerable,ws=(r,t,s)=>t in r?pi(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Ke=(r,t)=>{for(var s in t||(t={}))xi.call(t,s)&&ws(r,s,t[s]);if(Cs)for(var s of Cs(t))fi.call(t,s)&&ws(r,s,t[s]);return r},Qe=(r,t)=>hi(r,gi(t)),Ze=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const bi=()=>{const[r,t]=h.useState(null),[s,a]=h.useState([]),[n,l]=h.useState(!0),[o,c]=h.useState(!1),[i,d]=h.useState(!1),[u,m]=h.useState({closure_date:"",closure_type:"holiday",description:"",is_recurring:!1});h.useEffect(()=>{Ze(null,null,function*(){try{const x=yield pt.getCurrentFacilityId();t(x)}catch(x){console.error("Failed to load facility ID:",x)}})},[]);const g=h.useCallback(()=>Ze(null,null,function*(){if(r)try{l(!0);const{data:_,error:x}=yield E.from("office_closures").select("*").eq("facility_id",r).order("closure_date",{ascending:!0});if(x){console.error("Error loading closures:",x);return}a(_.map(j=>{var S;return{id:j.id,closure_date:j.closure_date,closure_type:j.closure_type,description:((S=j.data)==null?void 0:S.description)||"",is_recurring:j.is_recurring}})||[])}catch(_){console.error("Error loading closures:",_)}finally{l(!1)}}),[r]);h.useEffect(()=>{r&&g()},[r,g]);const b=()=>Ze(null,null,function*(){if(!(!r||!u.closure_date))try{c(!0);const{error:_}=yield E.from("office_closures").insert({facility_id:r,closure_date:u.closure_date,closure_type:u.closure_type,description:u.description,is_recurring:u.is_recurring});if(_){console.error("Error adding closure:",_);return}m({closure_date:"",closure_type:"holiday",description:"",is_recurring:!1}),d(!1),g()}catch(_){console.error("Error adding closure:",_)}finally{c(!1)}}),p=_=>Ze(null,null,function*(){try{const{error:x}=yield E.from("office_closures").delete().eq("id",_);if(x){console.error("Error deleting closure:",x);return}g()}catch(x){console.error("Error deleting closure:",x)}}),f=_=>{switch(_){case"holiday":return"Holiday";case"maintenance":return"Maintenance";case"custom":return"Custom";default:return _}},N=_=>{switch(_){case"holiday":return"bg-red-100 text-red-800";case"maintenance":return"bg-yellow-100 text-yellow-800";case"custom":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return n?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-2"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-16 bg-gray-200 rounded"}),e.jsx("div",{className:"h-16 bg-gray-200 rounded"})]})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700",children:"Office Closures & Holidays"}),e.jsx("button",{onClick:()=>d(!i),className:"px-3 py-1 text-sm bg-[#4ECDC4] text-white rounded-md hover:bg-[#45b8b0] transition-colors",children:i?"Cancel":"Add Closure"})]}),i&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"closureDate",className:"block text-xs text-gray-600 mb-1",children:"Date"}),e.jsx("input",{id:"closureDate",type:"date",value:u.closure_date,onChange:_=>m(x=>Qe(Ke({},x),{closure_date:_.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"closureType",className:"block text-xs text-gray-600 mb-1",children:"Type"}),e.jsxs("select",{id:"closureType",value:u.closure_type,onChange:_=>m(x=>Qe(Ke({},x),{closure_type:_.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"holiday",children:"Holiday"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"custom",children:"Custom"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"closureDescription",className:"block text-xs text-gray-600 mb-1",children:"Description"}),e.jsx("input",{id:"closureDescription",type:"text",value:u.description,onChange:_=>m(x=>Qe(Ke({},x),{description:_.target.value})),placeholder:"e.g., Christmas Day, Annual Maintenance",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"recurring",checked:u.is_recurring,onChange:_=>m(x=>Qe(Ke({},x),{is_recurring:_.target.checked})),className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("label",{htmlFor:"recurring",className:"text-sm text-gray-600",children:"Recurring annually"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:b,disabled:o||!u.closure_date,className:"px-3 py-1 text-sm bg-[#4ECDC4] text-white rounded hover:bg-[#45b8b0] disabled:opacity-50 transition-colors",children:o?"Adding...":"Add Closure"}),e.jsx("button",{onClick:()=>d(!1),className:"px-3 py-1 text-sm bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition-colors",children:"Cancel"})]})]}),e.jsx("div",{className:"space-y-2",children:s.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No office closures configured. Add holidays and maintenance days above."}):s.map(_=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N(_.closure_type)}`,children:f(_.closure_type)}),_.is_recurring&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"Recurring"})]}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:new Date(_.closure_date).toLocaleDateString()}),_.description&&e.jsx("div",{className:"text-sm text-gray-600",children:_.description})]}),e.jsx("button",{onClick:()=>p(_.id),className:"ml-2 p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete closure",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},_.id))}),e.jsx("p",{className:"text-xs text-gray-500",children:"Office closures are automatically excluded from streak calculations. Users won't lose their streak on holidays or maintenance days."})]})};var yi=Object.defineProperty,vi=Object.defineProperties,ji=Object.getOwnPropertyDescriptors,Es=Object.getOwnPropertySymbols,Ni=Object.prototype.hasOwnProperty,_i=Object.prototype.propertyIsEnumerable,Ps=(r,t,s)=>t in r?yi(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Xe=(r,t)=>{for(var s in t||(t={}))Ni.call(t,s)&&Ps(r,s,t[s]);if(Es)for(var s of Es(t))_i.call(t,s)&&Ps(r,s,t[s]);return r},Je=(r,t)=>vi(r,ji(t)),Ct=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Si=()=>{const[r,t]=h.useState(null),[s,a]=h.useState(!0),[n,l]=h.useState(!1),[o,c]=h.useState(()=>({workingDays:{monday:!0,tuesday:!0,wednesday:!0,thursday:!0,friday:!0,saturday:!1,sunday:!1},openHolidays:!1,startHour:8,endHour:17}));h.useEffect(()=>{Ct(null,null,function*(){try{const N=yield pt.getCurrentFacilityId();t(N)}catch(N){console.error("Failed to load facility ID:",N)}})},[]);const i=h.useCallback(()=>Ct(null,null,function*(){if(r)try{a(!0);const{data:f,error:N}=yield E.from("facility_office_hours").select("*").eq("facility_id",r).single();if(N&&N.code!=="PGRST116"){console.error("Error loading office hours:",N);return}f&&c({workingDays:f.working_days,startHour:f.start_hour,endHour:f.end_hour,openHolidays:f.open_holidays})}catch(f){console.error("Error loading office hours:",f)}finally{a(!1)}}),[r]);h.useEffect(()=>{r&&i()},[r,i]);const d=f=>Ct(null,null,function*(){if(r)try{l(!0);const{error:N}=yield E.from("facility_office_hours").upsert({facility_id:r,working_days:f.workingDays,start_hour:f.startHour,end_hour:f.endHour,open_holidays:f.openHolidays});if(N){console.error("Error saving office hours:",N);return}localStorage.setItem("officeHoursSettings",JSON.stringify(f))}catch(N){console.error("Error saving office hours:",N)}finally{l(!1)}}),u=f=>{const N=Je(Xe({},o),{workingDays:Je(Xe({},o.workingDays),{[f]:!o.workingDays[f]})});c(N),d(N)},m=()=>{const f=Je(Xe({},o),{openHolidays:!o.openHolidays});c(f),d(f)},g=(f,N)=>{const _=Je(Xe({},o),{[f==="start"?"startHour":"endHour"]:N});c(_),d(_)},b=f=>{const N=f>=12?"PM":"AM";return`${f===0?12:f>12?f-12:f}:00 ${N}`},p=()=>{const f=Object.entries(o.workingDays).filter(([,N])=>N).map(([N])=>N.charAt(0).toUpperCase()+N.slice(1));return f.length===0?"No days selected":f.length===7?"Every day":f.length===5&&!o.workingDays.saturday&&!o.workingDays.sunday?"Monday - Friday":f.join(", ")};return s?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-2",children:"Office Hours & Scheduling"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"These settings affect BI test scheduling, analytics calculations, and streak tracking"}),n&&e.jsx("div",{className:"text-sm text-blue-600 bg-blue-50 px-3 py-2 rounded-md",children:"Saving changes..."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"block text-sm font-medium text-gray-700",children:"Office Days"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(o.workingDays).map(([f,N])=>e.jsx("button",{onClick:()=>u(f),className:`px-3 py-2 text-sm font-medium rounded-md transition-colors ${N?"bg-[#4ECDC4] text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:f.charAt(0).toUpperCase()},f))}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Selected: ",p()]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"block text-sm font-medium text-gray-700",children:"Hours of Operation"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"block text-xs text-gray-500 mb-1",children:"Start Time"}),e.jsx("select",{value:o.startHour,onChange:f=>g("start",parseInt(f.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] text-sm",children:Array.from({length:24},(f,N)=>e.jsx("option",{value:N,children:b(N)},N))})]}),e.jsx("span",{className:"text-gray-500 mt-6",children:"to"}),e.jsxs("div",{children:[e.jsx("div",{className:"block text-xs text-gray-500 mb-1",children:"End Time"}),e.jsx("select",{value:o.endHour,onChange:f=>g("end",parseInt(f.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] text-sm",children:Array.from({length:24},(f,N)=>e.jsx("option",{value:N,children:b(N)},N))})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Operating hours: ",b(o.startHour)," -"," ",b(o.endHour)]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"block text-sm font-medium text-gray-700",children:"Holiday Operations"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:m,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${o.openHolidays?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o.openHolidays?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:"text-sm text-gray-700",children:o.openHolidays?"Open on holidays":"Closed on holidays"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:o.openHolidays?"BI tests and operations will continue on holidays":"BI tests due on holidays will be rescheduled to the next business day"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[e.jsx("h6",{className:"text-sm font-medium text-blue-800 mb-2",children:"Current Schedule Summary"}),e.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[e.jsxs("p",{children:["• Working days: ",p()]}),e.jsxs("p",{children:["• Hours: ",b(o.startHour)," -"," ",b(o.endHour)]}),e.jsxs("p",{children:["• Holidays: ",o.openHolidays?"Open":"Closed"]})]})]}),e.jsx(bi,{})]})},Ci=({users:r,onEditUser:t,onDeleteUser:s,onAddUser:a,billingTierInfo:n})=>{const[l,o]=h.useState(""),[c,i]=h.useState("All Roles"),[d,u]=h.useState(!1),[m,g]=h.useState(""),b=r.filter(p=>{const f=(p.full_name||"").toLowerCase().includes(l.toLowerCase())||p.email.toLowerCase().includes(l.toLowerCase()),N=c==="All Roles"||p.role===c;return f&&N});return e.jsxs("div",{className:"mb-6",children:[e.jsx("h5",{className:"text-md font-medium text-gray-700 mb-3",children:"User Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-md",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Create New User"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Add new staff members to the system"})]}),e.jsx("button",{onClick:a,className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Add User"})]}),n&&n.usersToNextTier<=2&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-amber-800",children:"Billing Tier Warning"}),e.jsxs("div",{className:"mt-1 text-sm text-amber-700",children:[e.jsxs("p",{children:["You are ",n.usersToNextTier," user",n.usersToNextTier===1?"":"s"," away from the next pricing tier (",n.nextTier.name,"). Please review and remove any inactive users to avoid an increase in fees."]}),e.jsxs("p",{className:"mt-1 text-xs",children:["Current: ",n.activeUserCount," active users (",n.currentTier.name,")"]})]})]})]})}),e.jsxs("div",{className:"border border-gray-200 rounded-md overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h6",{className:"text-sm font-medium text-gray-700",children:["Active Users (",b.length,")"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Search users...",value:l,onChange:p=>o(p.target.value),className:"px-3 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),d?e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("input",{type:"text",placeholder:"New role",value:m,onChange:p=>g(p.target.value),className:"px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] w-20"}),e.jsx("button",{onClick:()=>{m.trim()&&(g(""),u(!1))},className:"px-2 py-1 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-xs",children:"Add"}),e.jsx("button",{onClick:()=>{g(""),u(!1)},className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"×"})]}):e.jsxs("select",{value:c,onChange:p=>{p.target.value==="add-new"?u(!0):i(p.target.value)},className:"px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{children:"All Roles"}),e.jsx("option",{children:"Admin"}),e.jsx("option",{children:"Technician"}),e.jsx("option",{children:"Nurse"}),e.jsx("option",{value:"add-new",children:"+ Add New Role"})]})]})]})}),e.jsx("div",{className:"max-h-64 overflow-y-auto scrollbar-hide",children:b.map((p,f)=>e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-blue-600",children:(p.full_name||"Unknown").split(" ").map(N=>N[0]).join("")})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:p.full_name||"Unknown User"}),e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${p.role==="Admin"?"bg-red-100 text-red-800":p.role==="Technician"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:p.role}),e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${p.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:p.status})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsx("span",{children:p.email}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Last login: ",p.lastLogin]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>t(p),className:"p-1 text-gray-400 hover:text-gray-600",title:"Edit user",children:e.jsx(v,{path:Ie,size:.8})}),e.jsx("button",{onClick:()=>s(p),className:"p-1 text-gray-400 hover:text-red-600",title:"Delete user",children:e.jsx(v,{path:Qt,size:.8})})]})]},f))}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Showing ",b.length," of ",r.length," users"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-2 py-1 border border-gray-300 rounded hover:bg-white",children:"Previous"}),e.jsx("button",{className:"px-2 py-1 border border-gray-300 rounded bg-white",children:"1"}),e.jsx("button",{className:"px-2 py-1 border border-gray-300 rounded hover:bg-white",children:"2"}),e.jsx("button",{className:"px-2 py-1 border border-gray-300 rounded hover:bg-white",children:"Next"})]})]})})]})]})]})},wi=({user:r,mode:t})=>{var s,a;return e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),e.jsx("input",{id:"firstName",type:"text",placeholder:"Enter first name",defaultValue:((s=r==null?void 0:r.full_name)==null?void 0:s.split(" ")[0])||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),e.jsx("input",{id:"lastName",type:"text",placeholder:"Enter last name",defaultValue:((a=r==null?void 0:r.full_name)==null?void 0:a.split(" ").slice(1).join(" "))||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),e.jsx("input",{id:"email",type:"email",placeholder:"user@clinic.com",defaultValue:(r==null?void 0:r.email)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),t==="add"&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"An invitation email will be sent to this address"})]})]})]})},Ei=({user:r})=>{const[t,s]=h.useState(!1),[a,n]=h.useState("");return e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Role & Permissions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"userRole",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),t?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{id:"newRoleInput",type:"text",placeholder:"Enter new role name",value:a,onChange:l=>n(l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{a.trim()&&(n(""),s(!1))},className:"px-3 py-1 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-xs",children:"Add Role"}),e.jsx("button",{onClick:()=>{n(""),s(!1)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"Cancel"})]})]}):e.jsxs("select",{id:"userRole",defaultValue:(r==null?void 0:r.role)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"",children:"Select a role"}),e.jsx("option",{value:"Admin",children:"Admin"}),e.jsx("option",{value:"Technician",children:"Technician"}),e.jsx("option",{value:"Nurse",children:"Nurse"}),e.jsx("option",{value:"add-new",children:"+ Add New Role"})]}),!t&&e.jsx("button",{onClick:()=>s(!0),className:"text-xs text-[#4ECDC4] hover:text-[#38b2ac] mt-1",children:"+ Add New Role"})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Module Permissions"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{name:"Inventory Management",key:"inventory"},{name:"Sterilization",key:"sterilization"},{name:"Environmental Cleaning",key:"cleaning"},{name:"Knowledge Hub",key:"knowledge"},{name:"Settings",key:"settings"},{name:"Reports",key:"reports"}].map(l=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",defaultChecked:(r==null?void 0:r.role)==="Admin",className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("span",{className:"text-sm text-gray-700",children:l.name})]},l.key))})]})]})},Pi=()=>{const[r,t]=h.useState(!1),[s,a]=h.useState("");return e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Department Assignment"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"userDepartment",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),r?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{id:"newDepartmentInput",type:"text",placeholder:"Enter new department name",value:s,onChange:n=>a(n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{s.trim()&&(a(""),t(!1))},className:"px-3 py-1 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-xs",children:"Add Department"}),e.jsx("button",{onClick:()=>{a(""),t(!1)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"Cancel"})]})]}):e.jsxs("select",{id:"userDepartment",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"",children:"Select department"}),e.jsx("option",{value:"Sterilization",children:"Sterilization"}),e.jsx("option",{value:"Environmental Cleaning",children:"Environmental Cleaning"}),e.jsx("option",{value:"Inventory",children:"Inventory"}),e.jsx("option",{value:"General",children:"General"}),e.jsx("option",{value:"add-new",children:"+ Add New Department"})]}),!r&&e.jsx("button",{onClick:()=>t(!0),className:"text-xs text-[#4ECDC4] hover:text-[#38b2ac] mt-1",children:"+ Add New Department"})]})})]})},Ti=()=>e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Security Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Force Password Change"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Require user to change password on next login"})]}),e.jsx("button",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-md hover:bg-orange-200 transition-colors text-xs",children:"Force Change"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Session Management"}),e.jsx("p",{className:"text-xs text-gray-500",children:"View and manage active sessions"})]}),e.jsx("button",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors text-xs",children:"View Sessions"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Access Logs"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Monitor login attempts and system access"})]}),e.jsx("button",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 transition-colors text-xs",children:"View Logs"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"IP Restrictions"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Configure allowed IP ranges for this user"})]}),e.jsx("button",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-md hover:bg-green-200 transition-colors text-xs",children:"Manage IPs"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Device Management"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Approve and manage mobile devices"})]}),e.jsx("button",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-md hover:bg-indigo-200 transition-colors text-xs",children:"Manage Devices"})]})]})]}),Ai=({user:r})=>e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Login Security"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Failed Login Attempts"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Account lockout after multiple failed attempts"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"1",max:"10",defaultValue:"5",className:"w-16 px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("span",{className:"text-xs text-gray-500",children:"attempts"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Lockout Duration"}),e.jsx("p",{className:"text-xs text-gray-500",children:"How long to lock account after failed attempts"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"5",max:"1440",defaultValue:"30",className:"w-16 px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("span",{className:"text-xs text-gray-500",children:"minutes"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Session Timeout"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Auto-logout after inactivity"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("select",{className:"px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"15",children:"15 minutes"}),e.jsx("option",{value:"30",selected:!0,children:"30 minutes"}),e.jsx("option",{value:"60",children:"1 hour"}),e.jsx("option",{value:"240",children:"4 hours"}),e.jsx("option",{value:"480",children:"8 hours"})]})})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Audit & Compliance"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Activity Monitoring"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Track user actions and system changes"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"activity-monitoring",defaultChecked:!0,className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("label",{htmlFor:"activity-monitoring",className:"text-xs text-gray-700",children:"Enabled"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Data Export Logs"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Log all data export activities"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"export-logs",defaultChecked:!0,className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("label",{htmlFor:"export-logs",className:"text-xs text-gray-700",children:"Enabled"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Sensitive Data Access"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Require additional verification for sensitive data"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"sensitive-data",defaultChecked:(r==null?void 0:r.role)==="Admin",className:"rounded border-gray-300 text-[#4ECDC4] focus:ring-[#4ECDC4]"}),e.jsx("label",{htmlFor:"sensitive-data",className:"text-xs text-gray-700",children:"Enabled"})]})]})]})]})]}),Ii=({isOpen:r,onClose:t,user:s,mode:a,onSave:n})=>r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto scrollbar-hide",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a==="add"?"Add New User":`Edit: ${(s==null?void 0:s.full_name)||"Unknown User"}`}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:e.jsx(v,{path:je,size:1.2})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(wi,{user:s,mode:a}),e.jsx(Ei,{user:s,mode:a}),e.jsx(Pi,{user:s,mode:a}),e.jsx(Ti,{}),e.jsx(Ai,{user:s,mode:a})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{n({}),t()},className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors",children:a==="add"?"Add User":"Save Changes"})]})]})}):null,Oi=({showDeleteModal:r,selectedUser:t,onCloseDeleteModal:s,onConfirmDelete:a})=>e.jsx(e.Fragment,{children:r&&t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 rounded-lg p-2 mr-3",children:e.jsx(v,{path:Qt,size:1.5,className:"text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete User"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Are you sure you want to delete this user? This action cannot be undone."}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-red-600",children:t==null?void 0:t.name.split(" ").map(n=>n[0]).join("")})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t==null?void 0:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t==null?void 0:t.email}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${(t==null?void 0:t.role)==="Admin"?"bg-red-100 text-red-800":(t==null?void 0:t.role)==="Technician"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:t==null?void 0:t.role}),e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded-full text-xs font-medium ${(t==null?void 0:t.status)==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t==null?void 0:t.status})]})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Delete User"})]})]})})});var Di=Object.defineProperty,Ts=Object.getOwnPropertySymbols,Ri=Object.prototype.hasOwnProperty,ki=Object.prototype.propertyIsEnumerable,As=(r,t,s)=>t in r?Di(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Is=(r,t)=>{for(var s in t||(t={}))Ri.call(t,s)&&As(r,s,t[s]);if(Ts)for(var s of Ts(t))ki.call(t,s)&&As(r,s,t[s]);return r},Ce=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});class $i{constructor(){this.sessionStartTime=Date.now(),this.lastActivityTime=Date.now(),this.inactivityTimer=null,this.sessionTimer=null,this.warningTimer=null,this.isRememberMe=!1,this.config={sessionTimeout:480,inactiveTimeout:30,rememberMeDuration:7},this.loadConfig(),this.setupActivityListeners(),this.startTimers()}loadConfig(){const t=localStorage.getItem("cliniio_session_timeout"),s=localStorage.getItem("cliniio_inactive_timeout"),a=localStorage.getItem("cliniio_remember_me_duration");t&&(this.config.sessionTimeout=parseInt(t)),s&&(this.config.inactiveTimeout=parseInt(s)),a&&(this.config.rememberMeDuration=parseInt(a)),this.isRememberMe=localStorage.getItem("cliniio_remember_me")==="true",this.isRememberMe&&(this.config.sessionTimeout=this.config.rememberMeDuration*24*60)}setupActivityListeners(){["mousedown","mousemove","keypress","scroll","touchstart","click"].forEach(s=>{document.addEventListener(s,()=>this.updateActivity(),{passive:!0})}),document.addEventListener("visibilitychange",()=>{document.hidden?this.pauseTimers():this.resumeTimers()})}updateActivity(){this.lastActivityTime=Date.now(),this.resetInactivityTimer()}startTimers(){this.startSessionTimer(),this.startInactivityTimer()}startSessionTimer(){this.sessionTimer&&clearTimeout(this.sessionTimer);const t=this.config.sessionTimeout*60*1e3,s=Date.now()-this.sessionStartTime,a=Math.max(0,t-s),n=Math.max(0,a-300*1e3);n>0&&(this.warningTimer=setTimeout(()=>{this.showSessionWarning(a)},n)),this.sessionTimer=setTimeout(()=>{this.handleSessionExpired()},a)}startInactivityTimer(){this.inactivityTimer&&clearTimeout(this.inactivityTimer);const t=this.config.inactiveTimeout*60*1e3;this.inactivityTimer=setTimeout(()=>{this.handleInactivityTimeout()},t)}resetInactivityTimer(){this.inactivityTimer&&clearTimeout(this.inactivityTimer),this.startInactivityTimer()}pauseTimers(){this.sessionTimer&&clearTimeout(this.sessionTimer),this.inactivityTimer&&clearTimeout(this.inactivityTimer),this.warningTimer&&clearTimeout(this.warningTimer)}resumeTimers(){this.startTimers()}showSessionWarning(t){var s,a;const n=Math.ceil(t/6e4),l=document.createElement("div");l.id="session-warning",l.className="fixed top-4 right-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4 shadow-lg z-50 max-w-sm",l.innerHTML=`
      <div class="flex items-start">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3">
          <h3 class="text-sm font-medium text-yellow-800">Session Expiring Soon</h3>
          <div class="mt-2 text-sm text-yellow-700">
            <p>Your session will expire in ${n} minute${n!==1?"s":""}.</p>
          </div>
          <div class="mt-4 flex space-x-3">
            <button id="extend-session" class="bg-yellow-50 px-2 py-1 text-xs font-medium text-yellow-800 rounded-md border border-yellow-200 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500">
              Extend Session
            </button>
            <button id="dismiss-warning" class="bg-yellow-50 px-2 py-1 text-xs font-medium text-yellow-800 rounded-md border border-yellow-200 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500">
              Dismiss
            </button>
          </div>
        </div>
      </div>
    `,document.body.appendChild(l),(s=document.getElementById("extend-session"))==null||s.addEventListener("click",()=>{this.extendSession(),l.remove()}),(a=document.getElementById("dismiss-warning"))==null||a.addEventListener("click",()=>{l.remove()}),setTimeout(()=>{l.parentNode&&l.remove()},3e4)}extendSession(){return Ce(this,null,function*(){try{const{data:t,error:s}=yield E.auth.refreshSession();if(s){console.error("Error extending session:",s);return}t.session&&(this.sessionStartTime=Date.now(),this.startTimers(),this.showMessage("Session extended successfully!","success"))}catch(t){console.error("Error extending session:",t),this.showMessage("Failed to extend session. Please log in again.","error")}})}handleSessionExpired(){return Ce(this,null,function*(){console.log("🚨 SESSION EXPIRED - redirecting to login"),this.showMessage("Your session has expired. Please log in again.","error"),setTimeout(()=>Ce(this,null,function*(){yield this.logout()}),2e3)})}handleInactivityTimeout(){return Ce(this,null,function*(){this.showMessage("You have been inactive for too long. Logging out...","warning"),setTimeout(()=>Ce(this,null,function*(){yield this.logout()}),2e3)})}showMessage(t,s){const a={success:"bg-green-50 border-green-200 text-green-800",error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800"},n=document.createElement("div");n.className=`fixed top-4 right-4 ${a[s]} border rounded-lg p-4 shadow-lg z-50 max-w-sm`,n.innerHTML=`
      <div class="flex items-start">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 ${s==="success"?"text-green-400":s==="error"?"text-red-400":"text-yellow-400"}" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3">
          <p class="text-sm font-medium">${t}</p>
        </div>
      </div>
    `,document.body.appendChild(n),setTimeout(()=>{n.parentNode&&n.remove()},5e3)}logout(){return Ce(this,null,function*(){try{yield E.auth.signOut(),window.location.href="/login"}catch(t){console.error("Error during logout:",t),window.location.href="/login"}})}updateConfig(t){this.config=Is(Is({},this.config),t),this.startTimers()}setRememberMe(t){this.isRememberMe=t,localStorage.setItem("cliniio_remember_me",t.toString()),t?this.config.sessionTimeout=this.config.rememberMeDuration*24*60:this.config.sessionTimeout=480,this.startTimers()}getSessionInfo(){const t=Date.now(),s=t-this.sessionStartTime,a=Math.max(0,this.config.sessionTimeout*60*1e3-s),n=t-this.lastActivityTime,l=Math.max(0,this.config.inactiveTimeout*60*1e3-n);return{sessionStartTime:this.sessionStartTime,lastActivityTime:this.lastActivityTime,remainingTime:a,inactiveTimeRemaining:l}}destroy(){this.sessionTimer&&clearTimeout(this.sessionTimer),this.inactivityTimer&&clearTimeout(this.inactivityTimer),this.warningTimer&&clearTimeout(this.warningTimer),["mousedown","mousemove","keypress","scroll","touchstart","click"].forEach(s=>{document.removeEventListener(s,()=>this.updateActivity())})}}const it=new $i,Li=({variant:r="compact",className:t=""})=>{const[s,a]=h.useState(it.getSessionInfo()),[n,l]=h.useState(!1);h.useEffect(()=>{const d=setInterval(()=>{a(it.getSessionInfo())},3e4);return()=>clearInterval(d)},[]);const o=d=>{const u=Math.floor(d/6e4),m=Math.floor(u/60);return m>0?`${m}h ${u%60}m`:`${u}m`},c=d=>d<300*1e3?"text-red-600":d<900*1e3?"text-yellow-600":"text-green-600",i=d=>d<300*1e3?e.jsx(on,{className:"h-4 w-4"}):e.jsx(cn,{className:"h-4 w-4"});return r==="compact"?e.jsxs("div",{className:`flex items-center space-x-2 ${t}`,children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[i(s.remainingTime),e.jsx("span",{className:`text-sm font-medium ${c(s.remainingTime)}`,children:o(s.remainingTime)})]}),e.jsx("button",{onClick:()=>l(!n),className:"text-xs text-gray-500 hover:text-gray-700 underline",children:n?"Hide":"Details"})]}):e.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-4 ${t}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Session Status"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[i(s.remainingTime),e.jsxs("span",{className:`text-sm font-medium ${c(s.remainingTime)}`,children:[o(s.remainingTime)," remaining"]})]})]}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Session started:"}),e.jsx("span",{children:new Date(s.sessionStartTime).toLocaleTimeString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Last activity:"}),e.jsx("span",{children:new Date(s.lastActivityTime).toLocaleTimeString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Inactive timeout:"}),e.jsx("span",{children:o(s.inactiveTimeRemaining)})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsx("button",{onClick:()=>it.extendSession(),className:"w-full px-3 py-2 bg-blue-600 text-white text-xs rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Extend Session"})})]})};var Mi=Object.defineProperty,Fi=Object.defineProperties,zi=Object.getOwnPropertyDescriptors,Os=Object.getOwnPropertySymbols,qi=Object.prototype.hasOwnProperty,Vi=Object.prototype.propertyIsEnumerable,Ds=(r,t,s)=>t in r?Mi(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Gi=(r,t)=>{for(var s in t||(t={}))qi.call(t,s)&&Ds(r,s,t[s]);if(Os)for(var s of Os(t))Vi.call(t,s)&&Ds(r,s,t[s]);return r},Bi=(r,t)=>Fi(r,zi(t)),Rs=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Ui=()=>{const{currentUser:r}=We(),[t,s]=h.useState({sessionTimeout:480,inactiveTimeout:30,rememberMeDuration:7,requireReauthForSensitive:!0,twoFactorEnabled:!1}),[a,n]=h.useState(!1),[l,o]=h.useState(!1),[c,i]=h.useState(null),d=h.useCallback(()=>Rs(null,null,function*(){var g,b;if(r){n(!0);try{const{data:p,error:f}=yield E.from("user_security_settings").select("*").eq("user_id",r.id).single();f&&f.code!=="PGRST116"?console.error("Error loading security settings:",f):p&&s({sessionTimeout:p.session_timeout||480,inactiveTimeout:p.inactive_timeout||30,rememberMeDuration:p.remember_me_duration||7,requireReauthForSensitive:(g=p.require_reauth_for_sensitive)!=null?g:!0,twoFactorEnabled:(b=p.two_factor_enabled)!=null?b:!1})}catch(p){console.error("Error loading security settings:",p)}finally{n(!1)}}}),[r]);h.useEffect(()=>{d()},[d]);const u=()=>Rs(null,null,function*(){if(r){o(!0),i(null);try{const{error:g}=yield E.from("user_security_settings").upsert({user_id:r.id,session_timeout:t.sessionTimeout,inactive_timeout:t.inactiveTimeout,remember_me_duration:t.rememberMeDuration,require_reauth_for_sensitive:t.requireReauthForSensitive,two_factor_enabled:t.twoFactorEnabled,updated_at:new Date().toISOString()});if(g)throw g;i({type:"success",text:"Security settings saved successfully!"}),localStorage.setItem("cliniio_session_timeout",t.sessionTimeout.toString()),localStorage.setItem("cliniio_inactive_timeout",t.inactiveTimeout.toString()),localStorage.setItem("cliniio_remember_me_duration",t.rememberMeDuration.toString()),it.updateConfig({sessionTimeout:t.sessionTimeout,inactiveTimeout:t.inactiveTimeout,rememberMeDuration:t.rememberMeDuration})}catch(g){console.error("Error saving security settings:",g),i({type:"error",text:"Failed to save security settings. Please try again."})}finally{o(!1)}}}),m=(g,b)=>{s(p=>Bi(Gi({},p),{[g]:b}))};return a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(g=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},g))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Security & Sessions"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Configure how long you stay logged in and security preferences for your account."})]}),c&&e.jsx("div",{className:`p-4 rounded-lg ${c.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:c.text}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Session Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"session-timeout",className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Session Duration"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:"session-timeout",type:"number",min:"60",max:"1440",value:t.sessionTimeout,onChange:g=>m("sessionTimeout",parseInt(g.target.value)||480),className:"w-20 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"minutes (1-24 hours)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How long you stay logged in before being automatically logged out"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"inactive-timeout",className:"block text-sm font-medium text-gray-700 mb-2",children:"Inactive Timeout"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:"inactive-timeout",type:"number",min:"5",max:"120",value:t.inactiveTimeout,onChange:g=>m("inactiveTimeout",parseInt(g.target.value)||30),className:"w-20 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"minutes (5-120 minutes)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How long of inactivity before automatic logout"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"remember-me-duration",className:"block text-sm font-medium text-gray-700 mb-2",children:"Remember Me Duration"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:"remember-me-duration",type:"number",min:"1",max:"30",value:t.rememberMeDuration,onChange:g=>m("rememberMeDuration",parseInt(g.target.value)||7),className:"w-20 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"days (1-30 days)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'How long to stay logged in when using "Remember Me"'})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Security Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"require-reauth-toggle",className:"text-sm font-medium text-gray-700",children:"Require Re-authentication for Sensitive Actions"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ask for password confirmation before changing critical settings"})]}),e.jsx("button",{id:"require-reauth-toggle",onClick:()=>m("requireReauthForSensitive",!t.requireReauthForSensitive),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${t.requireReauthForSensitive?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t.requireReauthForSensitive?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"two-factor-toggle",className:"text-sm font-medium text-gray-700",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add an extra layer of security to your account (coming soon)"})]}),e.jsx("button",{id:"two-factor-toggle",disabled:!0,className:"relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 cursor-not-allowed",children:e.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white translate-x-1"})})]})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-4",children:"Current Session"}),e.jsx("div",{className:"text-sm text-blue-800 space-y-2",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Logged in as:"})," ",r==null?void 0:r.email]})}),e.jsx("div",{className:"mt-4",children:e.jsx(Li,{variant:"detailed"})})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:u,disabled:l,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Saving...":"Save Settings"})})]})};var ts=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});function Hi(){return ts(this,null,function*(){const{data:r,error:t}=yield E.from("audit_flags").select("*").eq("resolved",!1).order("created_at",{ascending:!1});if(t)throw t;return r!=null?r:[]})}function Yi(){return ts(this,null,function*(){const{data:r,error:t}=yield E.from("activity_feed").select("id, module, activity_type, activity_description, created_at").order("created_at",{ascending:!1}).limit(50);if(t)throw t;return r!=null?r:[]})}function Wi(){return ts(this,null,function*(){var r;const{data:t,error:s}=yield E.from("activity_feed").select("id, description:activity_description, created_at").eq("activity_type","daily_ai_audit").order("created_at",{ascending:!1}).limit(10);if(s)throw s;return(r=t==null?void 0:t.map(a=>({id:a.id,summary:a.description,created_at:a.created_at})))!=null?r:[]})}const ba=({children:r,variant:t="default",className:s=""})=>{const l=`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${{default:"bg-primary text-primary-foreground",secondary:"bg-secondary text-secondary-foreground",destructive:"bg-destructive text-destructive-foreground",outline:"text-foreground border border-input"}[t]} ${s}`;return e.jsx("span",{className:l,children:r})};var Ki=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});function Qi(){const[r,t]=h.useState([]),[s,a]=h.useState([]),[n,l]=h.useState([]),[o,c]=h.useState(!0);function i(){return Ki(this,null,function*(){c(!0);try{const[d,u,m]=yield Promise.all([Hi(),Yi(),Wi()]);t(d),a(u),l(m)}catch(d){console.error("Failed to load audit dashboard:",d)}finally{c(!1)}})}return h.useEffect(()=>{i()},[]),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Audit & Compliance Dashboard"}),o?e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(dn,{className:"animate-spin w-4 h-4"})," Loading…"]}):e.jsxs(e.Fragment,{children:[e.jsxs(ft,{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-medium mb-2",children:"🚨 Active Compliance Flags"}),r.length===0?e.jsx("p",{className:"text-muted",children:"No active flags 🎉"}):e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"p-2 text-left",children:"Severity"}),e.jsx("th",{className:"p-2 text-left",children:"Description"}),e.jsx("th",{className:"p-2 text-left",children:"Table"}),e.jsx("th",{className:"p-2 text-left",children:"Created At"})]})}),e.jsx("tbody",{children:r.map(d=>e.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[e.jsx("td",{className:"p-2",children:e.jsx(ba,{variant:d.severity==="high"?"destructive":d.severity==="medium"?"secondary":"default",children:d.severity})}),e.jsx("td",{className:"p-2",children:d.description}),e.jsx("td",{className:"p-2",children:d.related_table}),e.jsx("td",{className:"p-2",children:new Date(d.created_at).toLocaleString()})]},d.id))})]})]}),e.jsxs(ft,{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-medium mb-2",children:"📄 Recent AI Audit Summaries"}),n.length===0?e.jsx("p",{className:"text-muted",children:"No AI summaries yet."}):e.jsx("ul",{className:"list-disc list-inside space-y-1",children:n.map(d=>e.jsxs("li",{className:"text-sm",children:[e.jsxs("strong",{children:[new Date(d.created_at).toLocaleDateString(),":"]})," ",d.summary]},d.id))})]}),e.jsxs(ft,{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-medium mb-2",children:"🕓 Recent Activity Logs"}),s.length===0?e.jsx("p",{className:"text-muted",children:"No recent activity."}):e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"p-2 text-left",children:"Type"}),e.jsx("th",{className:"p-2 text-left",children:"Description"}),e.jsx("th",{className:"p-2 text-left",children:"Module"}),e.jsx("th",{className:"p-2 text-left",children:"Timestamp"})]})}),e.jsx("tbody",{children:s.map(d=>e.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[e.jsx("td",{className:"p-2",children:d.activity_type}),e.jsx("td",{className:"p-2",children:d.activity_description}),e.jsx("td",{className:"p-2",children:d.module}),e.jsx("td",{className:"p-2",children:new Date(d.created_at).toLocaleString()})]},d.id))})]})]})]})]})}var Zi=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Xi=()=>{const[r]=h.useState([]),[t,s]=h.useState(!1),[a,n]=h.useState(!1),[l,o]=h.useState(!1),[c,i]=h.useState(null),[d,u]=h.useState("users"),[m,g]=h.useState(0),p=(()=>{const w=r.filter(L=>L.status==="Active").length,D=[{min:0,max:5,name:"0-5 Users"},{min:6,max:15,name:"6-15 Users"},{min:16,max:21,name:"16-21 Users"},{min:22,max:1/0,name:"21+ Users"}],q=D.find(L=>w>=L.min&&w<=L.max),$=D.find(L=>L.min>w);if(!q||!$)return null;const G=$.min-w;return{currentTier:q,nextTier:$,usersToNextTier:G,activeUserCount:w}})();h.useEffect(()=>{function w(){return Zi(this,null,function*(){try{const{count:D,error:q}=yield E.from("audit_flags").select("*",{count:"exact",head:!0}).eq("resolved",!1);!q&&typeof D=="number"&&g(D)}catch(D){console.error("Failed to fetch audit flag count:",D)}})}w()},[]);const f=w=>{i(w),n(!0)},N=w=>{i(w),o(!0)},_=()=>{s(!0)},x=()=>{s(!1),n(!1),o(!1),i(null)},j=w=>{console.log("Saving user:",w),x()},S=()=>{console.log("Deleting user:",c),x()};return e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"System Administration"}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>u("users"),className:`py-2 px-1 border-b-2 font-medium text-sm ${d==="users"?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"User Management"}),e.jsx("button",{onClick:()=>u("security"),className:`py-2 px-1 border-b-2 font-medium text-sm ${d==="security"?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Security & Sessions"}),e.jsxs("button",{onClick:()=>u("audit"),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${d==="audit"?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("span",{children:"Audit & Compliance"}),m>0&&e.jsxs(ba,{variant:"destructive",className:"ml-2",children:["⚠️ ",m]})]})]})})}),d==="users"&&e.jsxs(e.Fragment,{children:[e.jsx(Ci,{users:r,onEditUser:f,onDeleteUser:N,onAddUser:_,billingTierInfo:p}),e.jsx("div",{className:"mb-6 border-t pt-6",children:e.jsx(Si,{})})]}),d==="security"&&e.jsx("div",{children:e.jsx(Ui,{})}),d==="audit"&&e.jsx("div",{children:e.jsx(Qi,{})}),e.jsx(Ii,{isOpen:t||a,onClose:x,onSave:j,user:c,mode:a?"edit":"add"}),e.jsx(Oi,{showDeleteModal:l,selectedUser:c,onCloseDeleteModal:()=>o(!1),onConfirmDelete:S})]})},Ji=()=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Billing & Subscription Settings"}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Current Plan"}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"text-base font-semibold text-blue-900",children:"Professional Plan"}),e.jsx("p",{className:"text-xs text-blue-700",children:"$299/month • 50 users • Full features"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Next billing: Jan 15, 2024"})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"Active"})})]})})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Payment Methods"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-5 bg-blue-600 rounded mr-2 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"VISA"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"•••• •••• •••• 4242"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Expires 12/25"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"inline-block bg-green-100 text-green-800 text-xs px-1 py-0.5 rounded-full",children:"Default"}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-xs",children:"Edit"})]})]}),e.jsx("button",{className:"w-full p-2 border-2 border-dashed border-gray-300 rounded-md text-gray-500 hover:border-gray-400 hover:text-gray-700 transition-colors text-xs",children:"+ Add Payment Method"})]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Billing Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company-name",className:"block text-xs font-medium text-gray-600 mb-1",children:"Company Name"}),e.jsx("input",{id:"company-name",type:"text",defaultValue:"Medical Center Inc.",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tax-id",className:"block text-xs font-medium text-gray-600 mb-1",children:"Tax ID"}),e.jsx("input",{id:"tax-id",type:"text",defaultValue:"12-3456789",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billing-email",className:"block text-xs font-medium text-gray-600 mb-1",children:"Billing Email"}),e.jsx("input",{id:"billing-email",type:"email",defaultValue:"billing@medicalcenter.com",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billing-phone",className:"block text-xs font-medium text-gray-600 mb-1",children:"Phone"}),e.jsx("input",{id:"billing-phone",type:"tel",defaultValue:"+1 (555) 123-4567",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billing-city",className:"block text-xs font-medium text-gray-600 mb-1",children:"City"}),e.jsx("input",{id:"billing-city",type:"text",defaultValue:"New York",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billing-state-zip",className:"block text-xs font-medium text-gray-600 mb-1",children:"State/ZIP"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{id:"billing-state",type:"text",defaultValue:"NY",className:"w-1/2 px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"}),e.jsx("input",{id:"billing-zip",type:"text",defaultValue:"10001",className:"w-1/2 px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]})]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Invoice Settings"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded-md",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Frequency"}),e.jsxs("select",{className:"px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{children:"Monthly"}),e.jsx("option",{children:"Quarterly"}),e.jsx("option",{children:"Annually"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded-md",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Auto-pay"}),e.jsx("input",{type:"checkbox",id:"auto-pay",className:"rounded",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded-md",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Reminders"}),e.jsx("input",{type:"checkbox",id:"payment-reminders",className:"rounded",defaultChecked:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Usage & Limits"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-2 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Users"}),e.jsx("span",{className:"text-xs text-gray-600",children:"35/50"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full",style:{width:"70%"}})})]}),e.jsxs("div",{className:"p-2 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Storage"}),e.jsx("span",{className:"text-xs text-gray-600",children:"2.1/10 GB"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-green-600 h-1.5 rounded-full",style:{width:"21%"}})})]}),e.jsxs("div",{className:"p-2 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"API Calls"}),e.jsx("span",{className:"text-xs text-gray-600",children:"45K/100K"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-yellow-600 h-1.5 rounded-full",style:{width:"45%"}})})]})]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Plan Management"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("button",{className:"p-2 border border-blue-300 bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100 transition-colors text-xs",children:"Upgrade"}),e.jsx("button",{className:"p-2 border border-gray-300 bg-gray-50 text-gray-700 rounded-md hover:bg-gray-100 transition-colors text-xs",children:"Downgrade"}),e.jsx("button",{className:"p-2 border border-red-300 bg-red-50 text-red-700 rounded-md hover:bg-red-100 transition-colors text-xs",children:"Cancel"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors text-sm",children:"Save Changes"})})]});class el{constructor(t){this.facilityId=t}createDefaultSettings(){return{aiEnabled:!0,computerVision:{toolConditionAssessment:!0,barcodeQualityDetection:!0,toolTypeRecognition:!0,cleaningValidation:!0,damageDetection:!0,wearAnalysis:!0,imageRecognition:!0,qualityAssessment:!0},predictiveAnalytics:{cycleOptimization:!0,failurePrediction:!0,efficiencyOptimization:!0,resourcePlanning:!0,maintenancePrediction:!0,qualityPrediction:!0,demandForecasting:!0,costOptimization:!0,seasonalAnalysis:!0},smartWorkflow:{intelligentWorkflowSelection:!0,automatedProblemDetection:!0,smartPhaseTransitions:!0,batchOptimization:!0,toolGrouping:!0,cycleScheduling:!0,smartCategorization:!0,autoClassification:!0,smartFormFilling:!0},qualityAssurance:{biologicalIndicatorAnalysis:!0,complianceMonitoring:!0,auditTrailEnhancement:!0,riskAssessment:!0,qualityMetrics:!0,regulatoryCompliance:!0,smartValidation:!0,errorPrevention:!0},realTimeMonitoring:{anomalyDetection:!0,predictiveMaintenance:!0,qualityDriftDetection:!0,smartNotifications:!0,performanceMonitoring:!0,alertManagement:!0,statusUpdates:!0,emergencyAlerts:!0},analytics:{dataCollection:!0,realTimeUpdates:!0,historicalDataRetention:!0,exportCapabilities:!0,dashboardCustomization:!0,performanceMetrics:!0,efficiencyTracking:!0,costAnalysis:!0},intelligence:{riskAssessment:!0,alertSystem:!0,escalationRules:!0,aiRecommendations:!0,optimizationTips:!0,predictiveInsights:!0,trendAnalysis:!0,forecasting:!0},performance:{accuracyTracking:!0,responseTimeMonitoring:!0,errorRateTracking:!0,qualityMetrics:!0,benchmarkComparison:!0,performanceAlerts:!0,optimizationSuggestions:!0,modelHealthMonitoring:!0},privacy:{dataAnonymization:!0,thirdPartyPermissions:!0,complianceMonitoring:!0,auditTrail:!0,dataRetention:!0,encryption:!0,accessControl:!0,privacyCompliance:!0},integration:{externalServices:!0,apiRateLimiting:!0,webhookEndpoints:!0,dataSharing:!0,healthMonitoring:!0,syncScheduling:!0,backupSystems:!0,crossPlatformSync:!0},userExperience:{aiSuggestions:!0,learningPaths:!0,personalization:!0,accessibility:!0,languagePreferences:!0,notificationPreferences:!0,interfaceCustomization:!0,helpSystem:!0},environmental:{predictiveCleaning:!1,smartScheduling:!1,contaminationPrediction:!1,resourceOptimization:!1,efficiencyAnalytics:!1,smartRoomManagement:!1,automaticPriorityAssignment:!1,riskAssessment:!1,trendAnalysis:!1,predictiveMaintenance:!1,supplyOptimization:!1,staffScheduling:!1,costOptimization:!1,inventoryPrediction:!1,workloadBalancing:!1,qualityAssurance:!1,complianceMonitoring:!1,auditTrailEnhancement:!1,performanceTracking:!1,automatedReporting:!1,realTimeMonitoring:!1,anomalyDetection:!1,smartNotifications:!1,statusUpdates:!1,emergencyAlerts:!1},learning:{personalizedRecommendations:!1,skillGapAnalysis:!1,learningPathOptimization:!1,performancePrediction:!1,adaptiveDifficulty:!1,learningAnalytics:!1,behaviorTracking:!1,progressPrediction:!1,engagementMetrics:!1,retentionAnalysis:!1,learningEfficiency:!1,contentOptimization:!1,assessmentIntelligence:!1,certificationTracking:!1,competencyMapping:!1,learningInsights:!1},aiConfig:{aiConfidenceThreshold:.8,aiDataRetentionDays:365,realTimeProcessingEnabled:!0,batchProcessingEnabled:!0,dataSharingEnabled:!1,localAIProcessingEnabled:!0,encryptedDataTransmission:!0,aiModelTraining:!1},apiKeys:{},facilityId:this.facilityId,aiVersion:"1.0.0",updated_at:new Date().toISOString()}}mergeSettings(t,s,a,n,l){var o,c,i,d,u,m,g,b,p,f,N,_,x,j,S,w,D,q,$,G,L,P;return s&&(t.computerVision.toolConditionAssessment=(o=s.tool_condition_assessment)!=null?o:t.computerVision.toolConditionAssessment,t.computerVision.barcodeQualityDetection=(c=s.barcode_quality_detection)!=null?c:t.computerVision.barcodeQualityDetection,t.computerVision.toolTypeRecognition=(i=s.tool_type_recognition)!=null?i:t.computerVision.toolTypeRecognition,t.predictiveAnalytics.cycleOptimization=(d=s.cycle_optimization)!=null?d:t.predictiveAnalytics.cycleOptimization,t.predictiveAnalytics.failurePrediction=(u=s.failure_prediction)!=null?u:t.predictiveAnalytics.failurePrediction,t.aiConfig.aiConfidenceThreshold=(m=s.ai_confidence_threshold)!=null?m:t.aiConfig.aiConfidenceThreshold,t.aiConfig.aiDataRetentionDays=(g=s.ai_data_retention_days)!=null?g:t.aiConfig.aiDataRetentionDays),a&&(t.computerVision.imageRecognition=(b=a.image_recognition_enabled)!=null?b:t.computerVision.imageRecognition,t.computerVision.qualityAssessment=(p=a.quality_assessment_enabled)!=null?p:t.computerVision.qualityAssessment,t.predictiveAnalytics.demandForecasting=(f=a.demand_forecasting_enabled)!=null?f:t.predictiveAnalytics.demandForecasting,t.predictiveAnalytics.costOptimization=(N=a.cost_optimization_enabled)!=null?N:t.predictiveAnalytics.costOptimization,t.smartWorkflow.smartCategorization=(_=a.smart_categorization_enabled)!=null?_:t.smartWorkflow.smartCategorization),n&&(t.environmental.predictiveCleaning=(x=n.predictive_cleaning_enabled)!=null?x:t.environmental.predictiveCleaning,t.environmental.smartScheduling=(j=n.smart_scheduling)!=null?j:t.environmental.smartScheduling,t.environmental.contaminationPrediction=(S=n.contamination_prediction)!=null?S:t.environmental.contaminationPrediction,t.environmental.resourceOptimization=(w=n.resource_optimization)!=null?w:t.environmental.resourceOptimization,t.environmental.efficiencyAnalytics=(D=n.efficiency_analytics)!=null?D:t.environmental.efficiencyAnalytics),l&&(t.learning.personalizedRecommendations=(q=l.personalized_recommendations)!=null?q:t.learning.personalizedRecommendations,t.learning.skillGapAnalysis=($=l.skill_gap_analysis)!=null?$:t.learning.skillGapAnalysis,t.learning.learningPathOptimization=(G=l.learning_path_optimization)!=null?G:t.learning.learningPathOptimization,t.learning.performancePrediction=(L=l.performance_prediction)!=null?L:t.learning.performancePrediction,t.learning.adaptiveDifficulty=(P=l.adaptive_difficulty)!=null?P:t.learning.adaptiveDifficulty),t}extractSterilizationSettings(t){var s,a,n,l,o,c,i;return{tool_condition_assessment:(s=t.computerVision)==null?void 0:s.toolConditionAssessment,barcode_quality_detection:(a=t.computerVision)==null?void 0:a.barcodeQualityDetection,tool_type_recognition:(n=t.computerVision)==null?void 0:n.toolTypeRecognition,cycle_optimization:(l=t.predictiveAnalytics)==null?void 0:l.cycleOptimization,failure_prediction:(o=t.predictiveAnalytics)==null?void 0:o.failurePrediction,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}extractInventorySettings(t){var s,a,n,l,o,c,i;return{image_recognition_enabled:(s=t.computerVision)==null?void 0:s.imageRecognition,quality_assessment_enabled:(a=t.computerVision)==null?void 0:a.qualityAssessment,demand_forecasting_enabled:(n=t.predictiveAnalytics)==null?void 0:n.demandForecasting,cost_optimization_enabled:(l=t.predictiveAnalytics)==null?void 0:l.costOptimization,smart_categorization_enabled:(o=t.smartWorkflow)==null?void 0:o.smartCategorization,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}extractEnvironmentalSettings(t){var s,a,n,l,o,c,i;return{predictive_cleaning_enabled:(s=t.environmental)==null?void 0:s.predictiveCleaning,smart_scheduling:(a=t.environmental)==null?void 0:a.smartScheduling,contamination_prediction:(n=t.environmental)==null?void 0:n.contaminationPrediction,resource_optimization:(l=t.environmental)==null?void 0:l.resourceOptimization,efficiency_analytics:(o=t.environmental)==null?void 0:o.efficiencyAnalytics,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}extractLearningSettings(t){var s,a,n,l,o,c,i;return{personalized_recommendations:(s=t.learning)==null?void 0:s.personalizedRecommendations,skill_gap_analysis:(a=t.learning)==null?void 0:a.skillGapAnalysis,learning_path_optimization:(n=t.learning)==null?void 0:n.learningPathOptimization,performance_prediction:(l=t.learning)==null?void 0:l.performancePrediction,adaptive_difficulty:(o=t.learning)==null?void 0:o.adaptiveDifficulty,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}}var et=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});class tl{constructor(t){this.facilityId=t,this.sterilizationAI=new ht(t),this.inventoryAI=new aa(t),this.environmentalAI=new Aa(t),this.learningAI=new Ia(t)}loadUnifiedSettings(){return et(this,null,function*(){try{const[t,s,a,n]=yield Promise.all([this.sterilizationAI.loadSettings(),this.inventoryAI.loadSettings(),this.environmentalAI.loadSettings(),this.learningAI.loadSettings()]),l=this.createDefaultSettings();return this.mergeSettings(l,t||void 0,s||void 0,a||void 0,n||void 0)}catch(t){return console.error("Error loading unified AI settings:",t),this.createDefaultSettings()}})}saveUnifiedSettings(t){return et(this,null,function*(){try{const s=this.extractSterilizationSettings(t),a=this.extractInventorySettings(t),n=this.extractEnvironmentalSettings(t),l=this.extractLearningSettings(t),[o,c,i,d]=yield Promise.all([this.sterilizationAI.saveSettings({facility_id:this.facilityId,ai_enabled:!0,ai_version:"1.0",computer_vision_enabled:!!s.tool_condition_assessment||!1,tool_condition_assessment:!!s.tool_condition_assessment||!1,barcode_quality_detection:!!s.barcode_quality_detection||!1,tool_type_recognition:!!s.tool_type_recognition||!1,cleaning_validation:!1,predictive_analytics_enabled:!!s.failure_prediction||!1,cycle_optimization:!!s.cycle_optimization||!1,failure_prediction:!!s.failure_prediction||!1,efficiency_optimization:!1,resource_planning:!1,smart_workflow_enabled:!1,ai_confidence_threshold:Number(s.ai_confidence_threshold)||.8,ai_data_retention_days:Number(s.ai_data_retention_days)||90}),this.inventoryAI.saveSettings(a),this.environmentalAI.saveSettings(n),this.learningAI.saveSettings(l)]);return o&&c&&i&&d}catch(s){return console.error("Error saving unified AI settings:",s),!1}})}applySettings(t){return et(this,null,function*(){try{return yield this.sterilizationAI.initialize(),yield this.environmentalAI.initialize(),yield this.learningAI.initialize(),this.applyFeatureFlags(t),!0}catch(s){return console.error("Error applying AI settings:",s),!1}})}getServiceStatus(){return et(this,null,function*(){try{const[t,s,a]=yield Promise.all([this.sterilizationAI.initialize(),this.environmentalAI.initialize(),this.learningAI.initialize()]);return{sterilization:t,inventory:!1,environmental:s,learning:a}}catch(t){return console.error("Error getting AI service status:",t),{sterilization:!1,inventory:!1,environmental:!1,learning:!1}}})}createDefaultSettings(){return{aiEnabled:!0,computerVision:{toolConditionAssessment:!0,barcodeQualityDetection:!0,toolTypeRecognition:!0,cleaningValidation:!0,damageDetection:!0,wearAnalysis:!0,imageRecognition:!0,qualityAssessment:!0},predictiveAnalytics:{cycleOptimization:!0,failurePrediction:!0,efficiencyOptimization:!0,resourcePlanning:!0,maintenancePrediction:!0,qualityPrediction:!0,demandForecasting:!0,costOptimization:!0,seasonalAnalysis:!0},smartWorkflow:{intelligentWorkflowSelection:!0,automatedProblemDetection:!0,smartPhaseTransitions:!0,batchOptimization:!0,toolGrouping:!0,cycleScheduling:!0,smartCategorization:!0,autoClassification:!0,smartFormFilling:!0},qualityAssurance:{biologicalIndicatorAnalysis:!0,complianceMonitoring:!0,auditTrailEnhancement:!0,riskAssessment:!0,qualityMetrics:!0,regulatoryCompliance:!0,smartValidation:!0,errorPrevention:!0},realTimeMonitoring:{anomalyDetection:!0,predictiveMaintenance:!0,qualityDriftDetection:!0,smartNotifications:!0,performanceMonitoring:!0,alertManagement:!0,statusUpdates:!0,emergencyAlerts:!0},analytics:{dataCollection:!0,realTimeUpdates:!0,historicalDataRetention:!0,exportCapabilities:!0,dashboardCustomization:!0,performanceMetrics:!0,efficiencyTracking:!0,costAnalysis:!0},intelligence:{riskAssessment:!0,alertSystem:!0,escalationRules:!0,aiRecommendations:!0,optimizationTips:!0,predictiveInsights:!0,trendAnalysis:!0,forecasting:!0},performance:{accuracyTracking:!0,responseTimeMonitoring:!0,errorRateTracking:!0,qualityMetrics:!0,benchmarkComparison:!0,performanceAlerts:!0,optimizationSuggestions:!0,modelHealthMonitoring:!0},privacy:{dataAnonymization:!0,thirdPartyPermissions:!0,complianceMonitoring:!0,auditTrail:!0,dataRetention:!0,encryption:!0,accessControl:!0,privacyCompliance:!0},integration:{externalServices:!0,apiRateLimiting:!0,webhookEndpoints:!0,dataSharing:!0,healthMonitoring:!0,syncScheduling:!0,backupSystems:!0,crossPlatformSync:!0},userExperience:{aiSuggestions:!0,learningPaths:!0,personalization:!0,accessibility:!0,languagePreferences:!0,notificationPreferences:!0,interfaceCustomization:!0,helpSystem:!0},environmental:{predictiveCleaning:!1,smartScheduling:!1,contaminationPrediction:!1,resourceOptimization:!1,efficiencyAnalytics:!1,smartRoomManagement:!1,automaticPriorityAssignment:!1,riskAssessment:!1,trendAnalysis:!1,predictiveMaintenance:!1,supplyOptimization:!1,staffScheduling:!1,costOptimization:!1,inventoryPrediction:!1,workloadBalancing:!1,qualityAssurance:!1,complianceMonitoring:!1,auditTrailEnhancement:!1,performanceTracking:!1,automatedReporting:!1,realTimeMonitoring:!1,anomalyDetection:!1,smartNotifications:!1,statusUpdates:!1,emergencyAlerts:!1},learning:{personalizedRecommendations:!1,skillGapAnalysis:!1,learningPathOptimization:!1,performancePrediction:!1,adaptiveDifficulty:!1,learningAnalytics:!1,behaviorTracking:!1,progressPrediction:!1,engagementMetrics:!1,retentionAnalysis:!1,learningEfficiency:!1,contentOptimization:!1,assessmentIntelligence:!1,certificationTracking:!1,competencyMapping:!1,learningInsights:!1},aiConfig:{aiConfidenceThreshold:.8,aiDataRetentionDays:365,realTimeProcessingEnabled:!0,batchProcessingEnabled:!0,dataSharingEnabled:!1,localAIProcessingEnabled:!0,encryptedDataTransmission:!0,aiModelTraining:!1},apiKeys:{},facilityId:this.facilityId,aiVersion:"1.0.0",updated_at:new Date().toISOString()}}mergeSettings(t,s,a,n,l){var o,c,i,d,u,m,g,b,p,f,N,_,x,j,S,w,D,q,$,G,L,P;return s&&(t.computerVision.toolConditionAssessment=(o=!!s.tool_condition_assessment)!=null?o:t.computerVision.toolConditionAssessment,t.computerVision.barcodeQualityDetection=(c=!!s.barcode_quality_detection)!=null?c:t.computerVision.barcodeQualityDetection,t.computerVision.toolTypeRecognition=(i=!!s.tool_type_recognition)!=null?i:t.computerVision.toolTypeRecognition,t.predictiveAnalytics.cycleOptimization=(d=!!s.cycle_optimization)!=null?d:t.predictiveAnalytics.cycleOptimization,t.predictiveAnalytics.failurePrediction=(u=!!s.failure_prediction)!=null?u:t.predictiveAnalytics.failurePrediction,t.aiConfig.aiConfidenceThreshold=(m=Number(s.ai_confidence_threshold))!=null?m:t.aiConfig.aiConfidenceThreshold,t.aiConfig.aiDataRetentionDays=(g=Number(s.ai_data_retention_days))!=null?g:t.aiConfig.aiDataRetentionDays),a&&(t.computerVision.imageRecognition=(b=!!a.image_recognition_enabled)!=null?b:t.computerVision.imageRecognition,t.computerVision.qualityAssessment=(p=!!a.quality_assessment_enabled)!=null?p:t.computerVision.qualityAssessment,t.predictiveAnalytics.demandForecasting=(f=!!a.demand_forecasting_enabled)!=null?f:t.predictiveAnalytics.demandForecasting,t.predictiveAnalytics.costOptimization=(N=!!a.cost_optimization_enabled)!=null?N:t.predictiveAnalytics.costOptimization,t.smartWorkflow.smartCategorization=(_=!!a.smart_categorization_enabled)!=null?_:t.smartWorkflow.smartCategorization),n&&(t.environmental.predictiveCleaning=(x=!!n.predictive_cleaning_enabled)!=null?x:t.environmental.predictiveCleaning,t.environmental.smartScheduling=(j=!!n.smart_scheduling)!=null?j:t.environmental.smartScheduling,t.environmental.contaminationPrediction=(S=!!n.contamination_prediction)!=null?S:t.environmental.contaminationPrediction,t.environmental.resourceOptimization=(w=!!n.resource_optimization)!=null?w:t.environmental.resourceOptimization,t.environmental.efficiencyAnalytics=(D=!!n.efficiency_analytics)!=null?D:t.environmental.efficiencyAnalytics),l&&(t.learning.personalizedRecommendations=(q=!!l.personalized_recommendations)!=null?q:t.learning.personalizedRecommendations,t.learning.skillGapAnalysis=($=!!l.skill_gap_analysis)!=null?$:t.learning.skillGapAnalysis,t.learning.learningPathOptimization=(G=!!l.learning_path_optimization)!=null?G:t.learning.learningPathOptimization,t.learning.performancePrediction=(L=!!l.performance_prediction)!=null?L:t.learning.performancePrediction,t.learning.adaptiveDifficulty=(P=!!l.adaptive_difficulty)!=null?P:t.learning.adaptiveDifficulty),t}extractSterilizationSettings(t){var s,a,n,l,o,c,i;return{tool_condition_assessment:(s=t.computerVision)==null?void 0:s.toolConditionAssessment,barcode_quality_detection:(a=t.computerVision)==null?void 0:a.barcodeQualityDetection,tool_type_recognition:(n=t.computerVision)==null?void 0:n.toolTypeRecognition,cycle_optimization:(l=t.predictiveAnalytics)==null?void 0:l.cycleOptimization,failure_prediction:(o=t.predictiveAnalytics)==null?void 0:o.failurePrediction,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}extractInventorySettings(t){var s,a,n,l,o,c,i;return{image_recognition_enabled:(s=t.computerVision)==null?void 0:s.imageRecognition,quality_assessment_enabled:(a=t.computerVision)==null?void 0:a.qualityAssessment,demand_forecasting_enabled:(n=t.predictiveAnalytics)==null?void 0:n.demandForecasting,cost_optimization_enabled:(l=t.predictiveAnalytics)==null?void 0:l.costOptimization,smart_categorization_enabled:(o=t.smartWorkflow)==null?void 0:o.smartCategorization,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}extractEnvironmentalSettings(t){var s,a,n,l,o,c,i;return{predictive_cleaning_enabled:(s=t.environmental)==null?void 0:s.predictiveCleaning,smart_scheduling:(a=t.environmental)==null?void 0:a.smartScheduling,contamination_prediction:(n=t.environmental)==null?void 0:n.contaminationPrediction,resource_optimization:(l=t.environmental)==null?void 0:l.resourceOptimization,efficiency_analytics:(o=t.environmental)==null?void 0:o.efficiencyAnalytics,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}extractLearningSettings(t){var s,a,n,l,o,c,i;return{personalized_recommendations:(s=t.learning)==null?void 0:s.personalizedRecommendations,skill_gap_analysis:(a=t.learning)==null?void 0:a.skillGapAnalysis,learning_path_optimization:(n=t.learning)==null?void 0:n.learningPathOptimization,performance_prediction:(l=t.learning)==null?void 0:l.performancePrediction,adaptive_difficulty:(o=t.learning)==null?void 0:o.adaptiveDifficulty,ai_confidence_threshold:(c=t.aiConfig)==null?void 0:c.aiConfidenceThreshold,ai_data_retention_days:(i=t.aiConfig)==null?void 0:i.aiDataRetentionDays}}applyFeatureFlags(t){console.log("Applying AI feature flags:",t)}}class sl{constructor(t){this.facilityId=t}isFeatureEnabled(t,s){return t.aiEnabled?this.getNestedValue(t,s)===!0:!1}validateApiKeys(t){const s=[];return t.openaiApiKey&&!this.isValidApiKey(t.openaiApiKey)&&s.push("Invalid OpenAI API key format"),t.googleVisionApiKey&&!this.isValidApiKey(t.googleVisionApiKey)&&s.push("Invalid Google Vision API key format"),t.azureComputerVisionKey&&!this.isValidApiKey(t.azureComputerVisionKey)&&s.push("Invalid Azure Computer Vision API key format"),{isValid:s.length===0,errors:s}}encryptApiKeys(t){return{openaiApiKey:t.openaiApiKey?this.encryptKey(t.openaiApiKey):void 0,googleVisionApiKey:t.googleVisionApiKey?this.encryptKey(t.googleVisionApiKey):void 0,azureComputerVisionKey:t.azureComputerVisionKey?this.encryptKey(t.azureComputerVisionKey):void 0}}decryptApiKeys(t){return{openaiApiKey:t.openaiApiKey?this.decryptKey(t.openaiApiKey):void 0,googleVisionApiKey:t.googleVisionApiKey?this.decryptKey(t.googleVisionApiKey):void 0,azureComputerVisionKey:t.azureComputerVisionKey?this.decryptKey(t.azureComputerVisionKey):void 0}}getRequiredApiKeys(t){const s=[];return(t.computerVision.toolConditionAssessment||t.computerVision.barcodeQualityDetection||t.computerVision.toolTypeRecognition||t.computerVision.imageRecognition||t.computerVision.qualityAssessment)&&s.push("googleVisionApiKey","azureComputerVisionKey"),(t.predictiveAnalytics.failurePrediction||t.predictiveAnalytics.cycleOptimization||t.predictiveAnalytics.demandForecasting)&&s.push("openaiApiKey"),(t.environmental.predictiveCleaning||t.environmental.contaminationPrediction||t.environmental.resourceOptimization)&&s.push("openaiApiKey"),(t.learning.personalizedRecommendations||t.learning.skillGapAnalysis||t.learning.learningPathOptimization)&&s.push("openaiApiKey"),[...new Set(s)]}hasRequiredApiKeys(t){const s=this.getRequiredApiKeys(t),a=Object.keys(t.apiKeys).filter(n=>t.apiKeys[n]);return s.every(n=>a.some(l=>l===n))}isValidApiKey(t){return t&&t.length>10&&!t.includes(" ")}encryptKey(t){return`encrypted_${t}`}decryptKey(t){return t.replace("encrypted_","")}getNestedValue(t,s){return s.split(".").reduce((a,n)=>a==null?void 0:a[n],t)}}var rl=Object.defineProperty,ks=Object.getOwnPropertySymbols,al=Object.prototype.hasOwnProperty,nl=Object.prototype.propertyIsEnumerable,$s=(r,t,s)=>t in r?rl(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,tt=(r,t)=>{for(var s in t||(t={}))al.call(t,s)&&$s(r,s,t[s]);if(ks)for(var s of ks(t))nl.call(t,s)&&$s(r,s,t[s]);return r};class il{constructor(t){this.facilityId=t}applyFeatureFlags(t){console.log("Applying AI feature flags:",t)}toggleFeature(t,s,a){const n=tt({},t);return this.setNestedValue(n,s,a),n}toggleMultipleFeatures(t,s){const a=tt({},t);return Object.entries(s).forEach(([n,l])=>{this.setNestedValue(a,n,l)}),a}enableCategory(t,s){const a=tt({},t);if(typeof a[s]=="object"&&a[s]!==null){const n=a[s];Object.keys(n).forEach(l=>{n[l]=!0})}return a}disableCategory(t,s){const a=tt({},t);if(typeof a[s]=="object"&&a[s]!==null){const n=a[s];Object.keys(n).forEach(l=>{n[l]=!1})}return a}getFeatureStatus(t,s){return this.getNestedValue(t,s)===!0}getCategoryStatus(t,s){if(typeof t[s]!="object"||t[s]===null)return{enabled:0,total:0,percentage:0};const a=t[s],n=Object.values(a),l=n.filter(Boolean).length,o=n.length;return{enabled:l,total:o,percentage:o>0?Math.round(l/o*100):0}}getDisabledFeatures(t){const s=[];return Object.entries(t.computerVision).forEach(([a,n])=>{n||s.push(`computerVision.${a}`)}),Object.entries(t.predictiveAnalytics).forEach(([a,n])=>{n||s.push(`predictiveAnalytics.${a}`)}),Object.entries(t.smartWorkflow).forEach(([a,n])=>{n||s.push(`smartWorkflow.${a}`)}),Object.entries(t.qualityAssurance).forEach(([a,n])=>{n||s.push(`qualityAssurance.${a}`)}),Object.entries(t.realTimeMonitoring).forEach(([a,n])=>{n||s.push(`realTimeMonitoring.${a}`)}),Object.entries(t.analytics).forEach(([a,n])=>{n||s.push(`analytics.${a}`)}),Object.entries(t.intelligence).forEach(([a,n])=>{n||s.push(`intelligence.${a}`)}),Object.entries(t.performance).forEach(([a,n])=>{n||s.push(`performance.${a}`)}),Object.entries(t.privacy).forEach(([a,n])=>{n||s.push(`privacy.${a}`)}),Object.entries(t.integration).forEach(([a,n])=>{n||s.push(`integration.${a}`)}),Object.entries(t.userExperience).forEach(([a,n])=>{n||s.push(`userExperience.${a}`)}),Object.entries(t.environmental).forEach(([a,n])=>{n||s.push(`environmental.${a}`)}),Object.entries(t.learning).forEach(([a,n])=>{n||s.push(`learning.${a}`)}),s}getEnabledFeatures(t){const s=[];return Object.entries(t.computerVision).forEach(([a,n])=>{n&&s.push(`computerVision.${a}`)}),Object.entries(t.predictiveAnalytics).forEach(([a,n])=>{n&&s.push(`predictiveAnalytics.${a}`)}),Object.entries(t.smartWorkflow).forEach(([a,n])=>{n&&s.push(`smartWorkflow.${a}`)}),Object.entries(t.qualityAssurance).forEach(([a,n])=>{n&&s.push(`qualityAssurance.${a}`)}),Object.entries(t.realTimeMonitoring).forEach(([a,n])=>{n&&s.push(`realTimeMonitoring.${a}`)}),Object.entries(t.analytics).forEach(([a,n])=>{n&&s.push(`analytics.${a}`)}),Object.entries(t.intelligence).forEach(([a,n])=>{n&&s.push(`intelligence.${a}`)}),Object.entries(t.performance).forEach(([a,n])=>{n&&s.push(`performance.${a}`)}),Object.entries(t.privacy).forEach(([a,n])=>{n&&s.push(`privacy.${a}`)}),Object.entries(t.integration).forEach(([a,n])=>{n&&s.push(`integration.${a}`)}),Object.entries(t.userExperience).forEach(([a,n])=>{n&&s.push(`userExperience.${a}`)}),Object.entries(t.environmental).forEach(([a,n])=>{n&&s.push(`environmental.${a}`)}),Object.entries(t.learning).forEach(([a,n])=>{n&&s.push(`learning.${a}`)}),s}getNestedValue(t,s){return s.split(".").reduce((a,n)=>a==null?void 0:a[n],t)}setNestedValue(t,s,a){const n=s.split("."),l=n.pop(),o=n.reduce((c,i)=>(i in c||(c[i]={}),c[i]),t);o[l]=a}}var ll=Object.defineProperty,Ls=Object.getOwnPropertySymbols,ol=Object.prototype.hasOwnProperty,cl=Object.prototype.propertyIsEnumerable,Ms=(r,t,s)=>t in r?ll(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,wt=(r,t)=>{for(var s in t||(t={}))ol.call(t,s)&&Ms(r,s,t[s]);if(Ls)for(var s of Ls(t))cl.call(t,s)&&Ms(r,s,t[s]);return r};class dl{constructor(t){this.facilityId=t}optimizePerformanceSettings(t){const s=wt({},t);return s.aiConfig.aiConfidenceThreshold=this.calculateOptimalConfidenceThreshold(t),s.aiConfig.aiDataRetentionDays=this.calculateOptimalDataRetention(t),s.aiConfig.realTimeProcessingEnabled=this.shouldEnableRealTimeProcessing(t),s.aiConfig.batchProcessingEnabled=this.shouldEnableBatchProcessing(t),s.aiConfig.dataSharingEnabled=this.shouldEnableDataSharing(t),s.aiConfig.localAIProcessingEnabled=this.shouldEnableLocalProcessing(t),s.aiConfig.encryptedDataTransmission=this.shouldEnableEncryption(t),s.aiConfig.aiModelTraining=this.shouldEnableModelTraining(t),s}getPerformanceRecommendations(t){const s=[];return t.aiConfig.aiConfidenceThreshold<.7&&s.push({recommendations:["Consider increasing AI confidence threshold to 0.8 or higher for better accuracy"],priority:"medium"}),t.aiConfig.aiDataRetentionDays>365&&s.push({recommendations:["Consider reducing data retention period to improve performance and reduce storage costs"],priority:"low"}),!t.aiConfig.realTimeProcessingEnabled&&!t.aiConfig.batchProcessingEnabled&&s.push({recommendations:["Enable at least one processing mode (real-time or batch) for AI functionality"],priority:"high"}),t.aiConfig.encryptedDataTransmission||s.push({recommendations:["Enable encrypted data transmission for better security"],priority:"high"}),!t.aiConfig.localAIProcessingEnabled&&t.privacy.dataAnonymization&&s.push({recommendations:["Consider enabling local AI processing for better privacy compliance"],priority:"medium"}),s}validatePerformanceSettings(t){const s=[],a=[];return(t.aiConfig.aiConfidenceThreshold<.1||t.aiConfig.aiConfidenceThreshold>1)&&s.push("AI confidence threshold must be between 0.1 and 1.0"),(t.aiConfig.aiDataRetentionDays<1||t.aiConfig.aiDataRetentionDays>2555)&&s.push("AI data retention days must be between 1 and 2555 (7 years)"),!t.aiConfig.realTimeProcessingEnabled&&!t.aiConfig.batchProcessingEnabled&&s.push("At least one processing mode must be enabled"),!t.aiConfig.encryptedDataTransmission&&t.privacy.dataAnonymization&&a.push("Consider enabling encrypted data transmission when using data anonymization"),!t.aiConfig.localAIProcessingEnabled&&t.privacy.privacyCompliance&&a.push("Consider enabling local AI processing for better privacy compliance"),{isValid:s.length===0,errors:s,warnings:a}}getPerformanceMetricsConfig(t){return{accuracyTracking:t.performance.accuracyTracking,responseTimeMonitoring:t.performance.responseTimeMonitoring,errorRateTracking:t.performance.errorRateTracking,qualityMetrics:t.performance.qualityMetrics,benchmarkComparison:t.performance.benchmarkComparison,performanceAlerts:t.performance.performanceAlerts,optimizationSuggestions:t.performance.optimizationSuggestions,modelHealthMonitoring:t.performance.modelHealthMonitoring}}updatePerformanceMetrics(t,s){const a=wt({},t);return Object.entries(s).forEach(([n,l])=>{l!==void 0&&(a.performance[n]=l)}),a}getPerformanceConfig(t){return{aiConfidenceThreshold:t.aiConfig.aiConfidenceThreshold,aiDataRetentionDays:t.aiConfig.aiDataRetentionDays,realTimeProcessingEnabled:t.aiConfig.realTimeProcessingEnabled,batchProcessingEnabled:t.aiConfig.batchProcessingEnabled,dataSharingEnabled:t.aiConfig.dataSharingEnabled,localAIProcessingEnabled:t.aiConfig.localAIProcessingEnabled,encryptedDataTransmission:t.aiConfig.encryptedDataTransmission,aiModelTraining:t.aiConfig.aiModelTraining}}updatePerformanceConfig(t,s){const a=wt({},t);return Object.entries(s).forEach(([n,l])=>{l!==void 0&&(a.aiConfig[n]=l)}),a}calculateOptimalConfidenceThreshold(t){let s=.8;return t.predictiveAnalytics.failurePrediction&&(s=Math.max(s,.9)),t.qualityAssurance.complianceMonitoring&&(s=Math.max(s,.85)),t.realTimeMonitoring.emergencyAlerts&&(s=Math.max(s,.95)),Math.min(s,.99)}calculateOptimalDataRetention(t){let s=365;return t.privacy.complianceMonitoring&&(s=Math.max(s,2555)),t.qualityAssurance.regulatoryCompliance&&(s=Math.max(s,1825)),t.performance.optimizationSuggestions&&(s=Math.min(s,180)),s}shouldEnableRealTimeProcessing(t){return t.realTimeMonitoring.anomalyDetection||t.realTimeMonitoring.emergencyAlerts||t.realTimeMonitoring.smartNotifications||t.analytics.realTimeUpdates}shouldEnableBatchProcessing(t){return t.predictiveAnalytics.demandForecasting||t.predictiveAnalytics.seasonalAnalysis||t.analytics.historicalDataRetention||t.performance.benchmarkComparison}shouldEnableDataSharing(t){return t.privacy.thirdPartyPermissions&&!t.privacy.dataAnonymization}shouldEnableLocalProcessing(t){return t.privacy.dataAnonymization||t.privacy.privacyCompliance||t.privacy.accessControl}shouldEnableEncryption(t){return t.privacy.encryption||t.privacy.privacyCompliance||t.privacy.accessControl}shouldEnableModelTraining(t){return t.analytics.dataCollection&&(t.predictiveAnalytics.failurePrediction||t.predictiveAnalytics.cycleOptimization||t.learning.personalizedRecommendations)}}var he=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});class ul{constructor(t){this.facilityId=t}saveToUnifiedTable(t){return he(this,null,function*(){var s;try{const{data:a,error:n}=yield E.from("ai_settings").upsert({facility_id:this.facilityId,module:"general",settings:t,updated_at:new Date().toISOString()},{onConflict:"facility_id,module"});return n?(console.error("Error saving to unified table:",n),!1):(!n&&a&&(yield Oa({facilityId:this.facilityId,userId:"system",module:"general",action:"UPDATE",details:(s=a[0])!=null?s:{}})),!0)}catch(a){return console.error("Error saving to unified table:",a),!1}})}loadFromUnifiedTable(){return he(this,null,function*(){try{const{data:t,error:s}=yield E.from("ai_settings").select("settings").eq("facility_id",this.facilityId).eq("module","general").single();return s?(s.code==="PGRST116"||console.error("Error loading from unified table:",s),null):t==null?void 0:t.settings}catch(t){return console.error("Error loading from unified table:",t),null}})}deleteFromUnifiedTable(){return he(this,null,function*(){try{const{error:t}=yield E.from("ai_settings").delete().eq("facility_id",this.facilityId).eq("module","general");return t?(console.error("Error deleting from unified table:",t),!1):!0}catch(t){return console.error("Error deleting from unified table:",t),!1}})}settingsExist(){return he(this,null,function*(){try{const{data:t,error:s}=yield E.from("ai_settings").select("facility_id").eq("facility_id",this.facilityId).eq("module","general").single();return s?(s.code==="PGRST116"||console.error("Error checking if settings exist:",s),!1):!!t}catch(t){return console.error("Error checking if settings exist:",t),!1}})}getSettingsMetadata(){return he(this,null,function*(){try{const{data:t,error:s}=yield E.from("ai_settings").select("updated_at, ai_version, created_at").eq("facility_id",this.facilityId).eq("module","general").single();return s?(s.code==="PGRST116"||console.error("Error getting settings metadata:",s),null):{updated_at:(t==null?void 0:t.updated_at)||null,ai_version:(t==null?void 0:t.ai_version)||null,created_at:(t==null?void 0:t.created_at)||null}}catch(t){return console.error("Error getting settings metadata:",t),null}})}backupSettings(t){return he(this,null,function*(){try{const{error:s}=yield E.from("ai_settings_backup").insert({facility_id:this.facilityId,module:"general",settings:t,backup_date:new Date().toISOString(),ai_version:t.aiVersion});return s?(console.error("Error backing up settings:",s),!1):!0}catch(s){return console.error("Error backing up settings:",s),!1}})}restoreSettings(t){return he(this,null,function*(){try{let s=E.from("ai_settings_backup").select("settings").eq("facility_id",this.facilityId).eq("module","general").order("backup_date",{ascending:!1});t&&(s=s.eq("backup_date",t));const{data:a,error:n}=yield s.limit(1).single();return n?(n.code==="PGRST116"||console.error("Error restoring settings:",n),null):a==null?void 0:a.settings}catch(s){return console.error("Error restoring settings:",s),null}})}getAvailableBackups(){return he(this,null,function*(){try{const{data:t,error:s}=yield E.from("ai_settings_backup").select("backup_date, ai_version").eq("facility_id",this.facilityId).eq("module","general").order("backup_date",{ascending:!1});return s?(console.error("Error getting available backups:",s),[]):t||[]}catch(t){return console.error("Error getting available backups:",t),[]}})}exportSettingsToJson(t){return JSON.stringify(t,null,2)}importSettingsFromJson(t){try{const s=JSON.parse(t);if(!s.aiEnabled||!s.facilityId||!s.aiConfig)throw new Error("Invalid settings format");return s}catch(s){return console.error("Error importing settings from JSON:",s),null}}validateSettingsStructure(t){const s=[];if(typeof t!="object"||t===null)return s.push("Settings must be an object"),{isValid:!1,errors:s};const a=t;if(["aiEnabled","computerVision","predictiveAnalytics","smartWorkflow","qualityAssurance","realTimeMonitoring","analytics","intelligence","performance","privacy","integration","userExperience","environmental","learning","aiConfig","apiKeys","facilityId","aiVersion","updated_at"].forEach(l=>{l in a||s.push(`Missing required property: ${l}`)}),a.computerVision&&typeof a.computerVision!="object"&&s.push("computerVision must be an object"),a.predictiveAnalytics&&typeof a.predictiveAnalytics!="object"&&s.push("predictiveAnalytics must be an object"),a.aiConfig&&typeof a.aiConfig!="object"&&s.push("aiConfig must be an object"),a.aiConfig&&typeof a.aiConfig=="object"){const l=a.aiConfig;typeof l.aiConfidenceThreshold!="number"&&s.push("aiConfig.aiConfidenceThreshold must be a number"),typeof l.aiDataRetentionDays!="number"&&s.push("aiConfig.aiDataRetentionDays must be a number")}return{isValid:s.length===0,errors:s}}}var st=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});class ml{constructor(t){this.facilityId=t,this.configProvider=new el(t),this.modelProvider=new tl(t),this.apiKeyProvider=new sl(t),this.toggleProvider=new il(t),this.performanceProvider=new dl(t),this.persistenceProvider=new ul(t)}loadUnifiedSettings(){return st(this,null,function*(){return this.modelProvider.loadUnifiedSettings()})}saveUnifiedSettings(t){return st(this,null,function*(){const s=yield this.modelProvider.saveUnifiedSettings(t),a=yield this.persistenceProvider.saveToUnifiedTable(t);return s&&a})}applySettings(t){return st(this,null,function*(){return this.modelProvider.applySettings(t)})}isFeatureEnabled(t,s){return this.apiKeyProvider.isFeatureEnabled(t,s)}getServiceStatus(){return st(this,null,function*(){return this.modelProvider.getServiceStatus()})}}const pl=()=>{const{getCurrentFacilityId:r}=Oe(),t=r();if(!t)throw new Error("Facility ID not available");return h.useMemo(()=>new ml(t),[t])},y={HEADER:{TITLE:"AI and Analytics Settings",SUBTITLE:"Configure AI features, analytics, and intelligence settings"},BUTTONS:{RESET:"Reset",SAVE:"Save Settings",SAVING:"Saving..."},MESSAGES:{LOADING:"Loading AI settings...",FACILITY_NOT_AVAILABLE:"Facility not available. Please select a facility first.",FAILED_TO_LOAD:"Failed to load AI settings. Please try refreshing the page.",SAVE_SUCCESS:"AI settings saved and applied successfully!",SAVE_ERROR:"Failed to save AI settings",RESET_SUCCESS:"Settings reset to defaults",RESET_ERROR:"Failed to reset settings"},SECTIONS:{AI_SERVICE_STATUS:"AI Service Status",ENABLE_AI_FEATURES:"Enable AI Features",AI_FEATURES:"AI Features",ANALYTICS_CONFIGURATION:"Analytics Configuration",INTELLIGENCE_SETTINGS:"Intelligence Settings",PERFORMANCE_MONITORING:"Performance Monitoring",DATA_PRIVACY_SECURITY:"Data Privacy & Security",INTEGRATION_SETTINGS:"Integration Settings",USER_EXPERIENCE:"User Experience"},FORM_GROUPS:{COMPUTER_VISION:"Computer Vision",PREDICTIVE_ANALYTICS:"Predictive Analytics",SMART_WORKFLOW:"Smart Workflow",DATA_COLLECTION:"Data Collection",REPORTING_EXPORT:"Reporting & Export",RISK_ALERTS:"Risk & Alerts",AI_INSIGHTS:"AI Insights",QUALITY_METRICS:"Quality Metrics",OPTIMIZATION:"Optimization",PRIVACY_CONTROLS:"Privacy Controls",SECURITY_FEATURES:"Security Features",EXTERNAL_SERVICES:"External Services",SYSTEM_HEALTH:"System Health",AI_ASSISTANCE:"AI Assistance",INTERFACE_HELP:"Interface & Help"},TOGGLE_LABELS:{TOOL_CONDITION_ASSESSMENT:"Tool Condition Assessment",BARCODE_QUALITY_DETECTION:"Barcode Quality Detection",DAMAGE_DETECTION:"Damage Detection",CYCLE_OPTIMIZATION:"Cycle Optimization",FAILURE_PREDICTION:"Failure Prediction",EFFICIENCY_OPTIMIZATION:"Efficiency Optimization",INTELLIGENT_WORKFLOW_SELECTION:"Intelligent Workflow Selection",AUTOMATED_PROBLEM_DETECTION:"Automated Problem Detection",DATA_COLLECTION:"Data Collection",REAL_TIME_UPDATES:"Real-time Updates",HISTORICAL_DATA_RETENTION:"Historical Data Retention",EXPORT_CAPABILITIES:"Export Capabilities",DASHBOARD_CUSTOMIZATION:"Dashboard Customization",RISK_ASSESSMENT:"Risk Assessment",ALERT_SYSTEM:"Alert System",ESCALATION_RULES:"Escalation Rules",AI_RECOMMENDATIONS:"AI Recommendations",OPTIMIZATION_TIPS:"Optimization Tips",ACCURACY_TRACKING:"Accuracy Tracking",RESPONSE_TIME_MONITORING:"Response Time Monitoring",ERROR_RATE_TRACKING:"Error Rate Tracking",PERFORMANCE_ALERTS:"Performance Alerts",MODEL_HEALTH_MONITORING:"Model Health Monitoring",DATA_ANONYMIZATION:"Data Anonymization",THIRD_PARTY_PERMISSIONS:"Third-party Permissions",COMPLIANCE_MONITORING:"Compliance Monitoring",ENCRYPTION:"Encryption",ACCESS_CONTROL:"Access Control",EXTERNAL_SERVICES:"External Services",API_RATE_LIMITING:"API Rate Limiting",WEBHOOK_ENDPOINTS:"Webhook Endpoints",HEALTH_MONITORING:"Health Monitoring",SYNC_SCHEDULING:"Sync Scheduling",AI_SUGGESTIONS:"AI Suggestions",LEARNING_PATHS:"Learning Paths",PERSONALIZATION:"Personalization",ACCESSIBILITY_FEATURES:"Accessibility Features",SMART_HELP_SYSTEM:"Smart Help System"},DESCRIPTIONS:{MASTER_AI_TOGGLE:"Master toggle for all AI-powered features across the system",TOOL_CONDITION_ASSESSMENT:"AI-powered tool wear and condition analysis",BARCODE_QUALITY_DETECTION:"Automatic barcode readability assessment",DAMAGE_DETECTION:"AI detection of tool damage and defects",CYCLE_OPTIMIZATION:"AI-powered sterilization cycle optimization",FAILURE_PREDICTION:"Predictive maintenance and failure alerts",EFFICIENCY_OPTIMIZATION:"AI-driven workflow efficiency improvements",INTELLIGENT_WORKFLOW_SELECTION:"AI-powered workflow recommendations",AUTOMATED_PROBLEM_DETECTION:"AI detection of workflow issues",DATA_COLLECTION:"Enable comprehensive data collection",REAL_TIME_UPDATES:"Live analytics and dashboard updates",HISTORICAL_DATA_RETENTION:"Long-term data storage and analysis",EXPORT_CAPABILITIES:"PDF, CSV, and Excel export options",DASHBOARD_CUSTOMIZATION:"Customizable analytics dashboards",RISK_ASSESSMENT:"AI-powered risk analysis and scoring",ALERT_SYSTEM:"Smart notification and alert system",ESCALATION_RULES:"Automatic alert escalation based on priority",AI_RECOMMENDATIONS:"Intelligent recommendations and suggestions",OPTIMIZATION_TIPS:"AI-generated optimization suggestions",ACCURACY_TRACKING:"Monitor AI prediction accuracy",RESPONSE_TIME_MONITORING:"Track AI response times and performance",ERROR_RATE_TRACKING:"Monitor and track error rates",PERFORMANCE_ALERTS:"Alerts for performance issues",MODEL_HEALTH_MONITORING:"AI model performance and health tracking",DATA_ANONYMIZATION:"Automatically anonymize sensitive data",THIRD_PARTY_PERMISSIONS:"Control third-party AI service access",COMPLIANCE_MONITORING:"Monitor regulatory compliance",ENCRYPTION:"End-to-end data encryption",ACCESS_CONTROL:"Role-based access control for AI features",EXTERNAL_SERVICES:"Connect to external AI and analytics services",API_RATE_LIMITING:"Control API usage and rate limits",WEBHOOK_ENDPOINTS:"Enable webhook notifications and integrations",HEALTH_MONITORING:"Monitor integration system health",SYNC_SCHEDULING:"Automated data synchronization",AI_SUGGESTIONS:"Contextual AI-powered suggestions",LEARNING_PATHS:"Personalized AI learning recommendations",PERSONALIZATION:"AI-driven interface personalization",ACCESSIBILITY_FEATURES:"AI-powered accessibility enhancements",SMART_HELP_SYSTEM:"AI-powered contextual help and guidance"},STATUS:{ACTIVE:"Available",INACTIVE:"In Use"}},Fs={MESSAGE_DISPLAY:5e3,RESET_MESSAGE_DISPLAY:3e3},O=({id:r,checked:t,onChange:s,label:a,description:n,disabled:l=!1})=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:a}),n&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n})]}),e.jsxs("label",{htmlFor:r,className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{id:r,type:"checkbox",className:"sr-only peer",checked:t,onChange:o=>s(o.target.checked),disabled:l}),e.jsx("div",{className:`w-11 h-6 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all ${t?"bg-[#4ECDC4] after:translate-x-full":"bg-gray-200"} ${l?"opacity-50 cursor-not-allowed":"cursor-pointer"}`}),e.jsx("span",{className:"sr-only",children:a})]})]}),K=({title:r,children:t})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 border-b border-gray-200 pb-2",children:r}),e.jsx("div",{className:"space-y-4",children:t})]}),hl=({settings:r,updateMasterAI:t,updateComputerVision:s,updatePredictiveAnalytics:a,updateSmartWorkflow:n})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:y.SECTIONS.ENABLE_AI_FEATURES}),e.jsx("p",{className:"text-sm text-gray-500",children:y.DESCRIPTIONS.MASTER_AI_TOGGLE})]}),e.jsx(O,{id:"aiEnabled",checked:r.aiEnabled,onChange:t,label:""})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(v,{path:Ga,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:y.SECTIONS.AI_FEATURES})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:y.FORM_GROUPS.COMPUTER_VISION,children:[e.jsx(O,{id:"toolConditionAssessment",checked:r.computerVision.toolConditionAssessment,onChange:l=>s("toolConditionAssessment",l),label:y.TOGGLE_LABELS.TOOL_CONDITION_ASSESSMENT,description:y.DESCRIPTIONS.TOOL_CONDITION_ASSESSMENT,disabled:!r.aiEnabled}),e.jsx(O,{id:"barcodeQualityDetection",checked:r.computerVision.barcodeQualityDetection,onChange:l=>s("barcodeQualityDetection",l),label:y.TOGGLE_LABELS.BARCODE_QUALITY_DETECTION,description:y.DESCRIPTIONS.BARCODE_QUALITY_DETECTION,disabled:!r.aiEnabled}),e.jsx(O,{id:"damageDetection",checked:r.computerVision.damageDetection,onChange:l=>s("damageDetection",l),label:y.TOGGLE_LABELS.DAMAGE_DETECTION,description:y.DESCRIPTIONS.DAMAGE_DETECTION,disabled:!r.aiEnabled})]}),e.jsxs(K,{title:y.FORM_GROUPS.PREDICTIVE_ANALYTICS,children:[e.jsx(O,{id:"cycleOptimization",checked:r.predictiveAnalytics.cycleOptimization,onChange:l=>a("cycleOptimization",l),label:y.TOGGLE_LABELS.CYCLE_OPTIMIZATION,description:y.DESCRIPTIONS.CYCLE_OPTIMIZATION,disabled:!r.aiEnabled}),e.jsx(O,{id:"failurePrediction",checked:r.predictiveAnalytics.failurePrediction,onChange:l=>a("failurePrediction",l),label:y.TOGGLE_LABELS.FAILURE_PREDICTION,description:y.DESCRIPTIONS.FAILURE_PREDICTION,disabled:!r.aiEnabled}),e.jsx(O,{id:"efficiencyOptimization",checked:r.predictiveAnalytics.efficiencyOptimization,onChange:l=>a("efficiencyOptimization",l),label:y.TOGGLE_LABELS.EFFICIENCY_OPTIMIZATION,description:y.DESCRIPTIONS.EFFICIENCY_OPTIMIZATION,disabled:!r.aiEnabled})]}),e.jsxs(K,{title:y.FORM_GROUPS.SMART_WORKFLOW,children:[e.jsx(O,{id:"intelligentWorkflowSelection",checked:r.smartWorkflow.intelligentWorkflowSelection,onChange:l=>n("intelligentWorkflowSelection",l),label:y.TOGGLE_LABELS.INTELLIGENT_WORKFLOW_SELECTION,description:y.DESCRIPTIONS.INTELLIGENT_WORKFLOW_SELECTION,disabled:!r.aiEnabled}),e.jsx(O,{id:"automatedProblemDetection",checked:r.smartWorkflow.automatedProblemDetection,onChange:l=>n("automatedProblemDetection",l),label:y.TOGGLE_LABELS.AUTOMATED_PROBLEM_DETECTION,description:y.DESCRIPTIONS.AUTOMATED_PROBLEM_DETECTION,disabled:!r.aiEnabled})]})]})]})})]}),gl=({settings:r,updateAnalytics:t})=>e.jsxs(K,{title:y.FORM_GROUPS.REPORTING_EXPORT,children:[e.jsx(O,{id:"exportCapabilities",checked:r.analytics.exportCapabilities,onChange:s=>t("exportCapabilities",s),label:y.TOGGLE_LABELS.EXPORT_CAPABILITIES,description:y.DESCRIPTIONS.EXPORT_CAPABILITIES,disabled:!r.aiEnabled}),e.jsx(O,{id:"dashboardCustomization",checked:r.analytics.dashboardCustomization,onChange:s=>t("dashboardCustomization",s),label:y.TOGGLE_LABELS.DASHBOARD_CUSTOMIZATION,description:y.DESCRIPTIONS.DASHBOARD_CUSTOMIZATION,disabled:!r.aiEnabled})]}),xl=({settings:r,updateAnalytics:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(v,{path:Zt,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:y.SECTIONS.ANALYTICS_CONFIGURATION})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:y.FORM_GROUPS.DATA_COLLECTION,children:[e.jsx(O,{id:"dataCollection",checked:r.analytics.dataCollection,onChange:s=>t("dataCollection",s),label:y.TOGGLE_LABELS.DATA_COLLECTION,description:y.DESCRIPTIONS.DATA_COLLECTION,disabled:!r.aiEnabled}),e.jsx(O,{id:"realTimeUpdates",checked:r.analytics.realTimeUpdates,onChange:s=>t("realTimeUpdates",s),label:y.TOGGLE_LABELS.REAL_TIME_UPDATES,description:y.DESCRIPTIONS.REAL_TIME_UPDATES,disabled:!r.aiEnabled}),e.jsx(O,{id:"historicalDataRetention",checked:r.analytics.historicalDataRetention,onChange:s=>t("historicalDataRetention",s),label:y.TOGGLE_LABELS.HISTORICAL_DATA_RETENTION,description:y.DESCRIPTIONS.HISTORICAL_DATA_RETENTION,disabled:!r.aiEnabled})]}),e.jsx(gl,{settings:r,updateAnalytics:t})]})]}),fl=({settings:r,updatePerformance:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(v,{path:Ba,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:y.SECTIONS.PERFORMANCE_MONITORING})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:y.FORM_GROUPS.QUALITY_METRICS,children:[e.jsx(O,{id:"accuracyTracking",checked:r.performance.accuracyTracking,onChange:s=>t("accuracyTracking",s),label:y.TOGGLE_LABELS.ACCURACY_TRACKING,description:y.DESCRIPTIONS.ACCURACY_TRACKING,disabled:!r.aiEnabled}),e.jsx(O,{id:"responseTimeMonitoring",checked:r.performance.responseTimeMonitoring,onChange:s=>t("responseTimeMonitoring",s),label:y.TOGGLE_LABELS.RESPONSE_TIME_MONITORING,description:y.DESCRIPTIONS.RESPONSE_TIME_MONITORING,disabled:!r.aiEnabled}),e.jsx(O,{id:"errorRateTracking",checked:r.performance.errorRateTracking,onChange:s=>t("errorRateTracking",s),label:y.TOGGLE_LABELS.ERROR_RATE_TRACKING,description:y.DESCRIPTIONS.ERROR_RATE_TRACKING,disabled:!r.aiEnabled})]}),e.jsxs(K,{title:y.FORM_GROUPS.OPTIMIZATION,children:[e.jsx(O,{id:"performanceAlerts",checked:r.performance.performanceAlerts,onChange:s=>t("performanceAlerts",s),label:y.TOGGLE_LABELS.PERFORMANCE_ALERTS,description:y.DESCRIPTIONS.PERFORMANCE_ALERTS,disabled:!r.aiEnabled}),e.jsx(O,{id:"modelHealthMonitoring",checked:r.performance.modelHealthMonitoring,onChange:s=>t("modelHealthMonitoring",s),label:y.TOGGLE_LABELS.MODEL_HEALTH_MONITORING,description:y.DESCRIPTIONS.MODEL_HEALTH_MONITORING,disabled:!r.aiEnabled})]})]})]}),bl=({settings:r,updatePrivacy:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(v,{path:la,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:y.SECTIONS.DATA_PRIVACY_SECURITY})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:y.FORM_GROUPS.PRIVACY_CONTROLS,children:[e.jsx(O,{id:"dataAnonymization",checked:r.privacy.dataAnonymization,onChange:s=>t("dataAnonymization",s),label:y.TOGGLE_LABELS.DATA_ANONYMIZATION,description:y.DESCRIPTIONS.DATA_ANONYMIZATION,disabled:!r.aiEnabled}),e.jsx(O,{id:"thirdPartyPermissions",checked:r.privacy.thirdPartyPermissions,onChange:s=>t("thirdPartyPermissions",s),label:y.TOGGLE_LABELS.THIRD_PARTY_PERMISSIONS,description:y.DESCRIPTIONS.THIRD_PARTY_PERMISSIONS,disabled:!r.aiEnabled}),e.jsx(O,{id:"complianceMonitoring",checked:r.privacy.complianceMonitoring,onChange:s=>t("complianceMonitoring",s),label:y.TOGGLE_LABELS.COMPLIANCE_MONITORING,description:y.DESCRIPTIONS.COMPLIANCE_MONITORING,disabled:!r.aiEnabled})]}),e.jsxs(K,{title:y.FORM_GROUPS.SECURITY_FEATURES,children:[e.jsx(O,{id:"encryption",checked:r.privacy.encryption,onChange:s=>t("encryption",s),label:y.TOGGLE_LABELS.ENCRYPTION,description:y.DESCRIPTIONS.ENCRYPTION,disabled:!r.aiEnabled}),e.jsx(O,{id:"accessControl",checked:r.privacy.accessControl,onChange:s=>t("accessControl",s),label:y.TOGGLE_LABELS.ACCESS_CONTROL,description:y.DESCRIPTIONS.ACCESS_CONTROL,disabled:!r.aiEnabled})]})]})]}),yl=({settings:r,updateIntegration:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(v,{path:Ua,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:y.SECTIONS.INTEGRATION_SETTINGS})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:y.FORM_GROUPS.EXTERNAL_SERVICES,children:[e.jsx(O,{id:"externalServices",checked:r.integration.externalServices,onChange:s=>t("externalServices",s),label:y.TOGGLE_LABELS.EXTERNAL_SERVICES,description:y.DESCRIPTIONS.EXTERNAL_SERVICES,disabled:!r.aiEnabled}),e.jsx(O,{id:"apiRateLimiting",checked:r.integration.apiRateLimiting,onChange:s=>t("apiRateLimiting",s),label:y.TOGGLE_LABELS.API_RATE_LIMITING,description:y.DESCRIPTIONS.API_RATE_LIMITING,disabled:!r.aiEnabled}),e.jsx(O,{id:"webhookEndpoints",checked:r.integration.webhookEndpoints,onChange:s=>t("webhookEndpoints",s),label:y.TOGGLE_LABELS.WEBHOOK_ENDPOINTS,description:y.DESCRIPTIONS.WEBHOOK_ENDPOINTS,disabled:!r.aiEnabled})]}),e.jsxs(K,{title:y.FORM_GROUPS.SYSTEM_HEALTH,children:[e.jsx(O,{id:"healthMonitoring",checked:r.integration.healthMonitoring,onChange:s=>t("healthMonitoring",s),label:y.TOGGLE_LABELS.HEALTH_MONITORING,description:y.DESCRIPTIONS.HEALTH_MONITORING,disabled:!r.aiEnabled}),e.jsx(O,{id:"syncScheduling",checked:r.integration.syncScheduling,onChange:s=>t("syncScheduling",s),label:y.TOGGLE_LABELS.SYNC_SCHEDULING,description:y.DESCRIPTIONS.SYNC_SCHEDULING,disabled:!r.aiEnabled})]})]})]}),vl=({serviceStatus:r})=>e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-800 mb-3",children:y.SECTIONS.AI_SERVICE_STATUS}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(r).map(([t,s])=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{path:s?De:ie,size:1,className:s?"text-green-600":"text-red-500"}),e.jsx("span",{className:"text-sm capitalize",children:t}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${s?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s?y.STATUS.ACTIVE:y.STATUS.INACTIVE})]},t))})]}),jl=({settings:r,updateUserExperience:t})=>e.jsxs(K,{title:y.FORM_GROUPS.INTERFACE_HELP,children:[e.jsx(O,{id:"accessibility",checked:r.userExperience.accessibility,onChange:s=>t("accessibility",s),label:y.TOGGLE_LABELS.ACCESSIBILITY_FEATURES,description:y.DESCRIPTIONS.ACCESSIBILITY_FEATURES,disabled:!r.aiEnabled}),e.jsx(O,{id:"helpSystem",checked:r.userExperience.helpSystem,onChange:s=>t("helpSystem",s),label:y.TOGGLE_LABELS.SMART_HELP_SYSTEM,description:y.DESCRIPTIONS.SMART_HELP_SYSTEM,disabled:!r.aiEnabled})]}),Nl=({settings:r,updateUserExperience:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(v,{path:ia,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:y.SECTIONS.USER_EXPERIENCE})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:y.FORM_GROUPS.AI_ASSISTANCE,children:[e.jsx(O,{id:"aiSuggestions",checked:r.userExperience.aiSuggestions,onChange:s=>t("aiSuggestions",s),label:y.TOGGLE_LABELS.AI_SUGGESTIONS,description:y.DESCRIPTIONS.AI_SUGGESTIONS,disabled:!r.aiEnabled}),e.jsx(O,{id:"learningPaths",checked:r.userExperience.learningPaths,onChange:s=>t("learningPaths",s),label:y.TOGGLE_LABELS.LEARNING_PATHS,description:y.DESCRIPTIONS.LEARNING_PATHS,disabled:!r.aiEnabled}),e.jsx(O,{id:"personalization",checked:r.userExperience.personalization,onChange:s=>t("personalization",s),label:y.TOGGLE_LABELS.PERSONALIZATION,description:y.DESCRIPTIONS.PERSONALIZATION,disabled:!r.aiEnabled})]}),e.jsx(jl,{settings:r,updateUserExperience:t})]})]}),_l=({isSaving:r,onResetToDefaults:t,onSaveSettings:s})=>e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{path:Re,size:1.5,className:"text-[#4ECDC4]"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-semibold text-gray-800",children:y.HEADER.TITLE}),e.jsx("p",{className:"text-sm text-gray-600",children:y.HEADER.SUBTITLE})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(v,{path:Ht,size:1}),y.BUTTONS.RESET]}),e.jsxs("button",{onClick:s,disabled:r,className:"flex items-center gap-2 px-4 py-2 text-sm text-white bg-[#4ECDC4] hover:bg-[#3db8b0] rounded-lg disabled:opacity-50",children:[e.jsx(v,{path:r?Ht:He,size:1,className:r?"animate-spin":""}),r?y.BUTTONS.SAVING:y.BUTTONS.SAVE]})]})]}),Sl=({settings:r,updateIntelligence:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(v,{path:Re,size:1,className:"text-[#4ECDC4]"}),e.jsx("h5",{className:"text-lg font-medium text-gray-800",children:y.SECTIONS.INTELLIGENCE_SETTINGS})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{title:y.FORM_GROUPS.RISK_ALERTS,children:[e.jsx(O,{id:"riskAssessment",checked:r.intelligence.riskAssessment,onChange:s=>t("riskAssessment",s),label:y.TOGGLE_LABELS.RISK_ASSESSMENT,description:y.DESCRIPTIONS.RISK_ASSESSMENT,disabled:!r.aiEnabled}),e.jsx(O,{id:"alertSystem",checked:r.intelligence.alertSystem,onChange:s=>t("alertSystem",s),label:y.TOGGLE_LABELS.ALERT_SYSTEM,description:y.DESCRIPTIONS.ALERT_SYSTEM,disabled:!r.aiEnabled}),e.jsx(O,{id:"escalationRules",checked:r.intelligence.escalationRules,onChange:s=>t("escalationRules",s),label:y.TOGGLE_LABELS.ESCALATION_RULES,description:y.DESCRIPTIONS.ESCALATION_RULES,disabled:!r.aiEnabled})]}),e.jsxs(K,{title:y.FORM_GROUPS.AI_INSIGHTS,children:[e.jsx(O,{id:"aiRecommendations",checked:r.intelligence.aiRecommendations,onChange:s=>t("aiRecommendations",s),label:y.TOGGLE_LABELS.AI_RECOMMENDATIONS,description:y.DESCRIPTIONS.AI_RECOMMENDATIONS,disabled:!r.aiEnabled}),e.jsx(O,{id:"optimizationTips",checked:r.intelligence.optimizationTips,onChange:s=>t("optimizationTips",s),label:y.TOGGLE_LABELS.OPTIMIZATION_TIPS,description:y.DESCRIPTIONS.OPTIMIZATION_TIPS,disabled:!r.aiEnabled})]})]})]});var Cl=Object.defineProperty,wl=Object.defineProperties,El=Object.getOwnPropertyDescriptors,zs=Object.getOwnPropertySymbols,Pl=Object.prototype.hasOwnProperty,Tl=Object.prototype.propertyIsEnumerable,qs=(r,t,s)=>t in r?Cl(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,H=(r,t)=>{for(var s in t||(t={}))Pl.call(t,s)&&qs(r,s,t[s]);if(zs)for(var s of zs(t))Tl.call(t,s)&&qs(r,s,t[s]);return r},Y=(r,t)=>wl(r,El(t)),rt=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Al=()=>{const{getCurrentFacilityId:r}=Oe(),t=r(),s=pl(),[a,n]=h.useState(null),[l,o]=h.useState(!1),[c,i]=h.useState(!1),[d,u]=h.useState(null),[m,g]=h.useState(null),b=h.useCallback(()=>rt(null,null,function*(){if(s){o(!0);try{const P=yield s.loadUnifiedSettings();n(P)}catch(P){console.error("Failed to load AI settings:",P),u({type:"error",text:y.MESSAGES.SAVE_ERROR})}finally{o(!1)}}}),[s]),p=h.useCallback(()=>rt(null,null,function*(){if(s)try{const P=yield s.getServiceStatus();g(P)}catch(P){console.error("Failed to load service status:",P)}}),[s]);h.useEffect(()=>{s&&(b(),p())},[s,b,p]);const f=()=>rt(null,null,function*(){if(!(!s||!a)){i(!0);try{(yield s.saveUnifiedSettings(a))?(yield s.applySettings(a),u({type:"success",text:y.MESSAGES.SAVE_SUCCESS}),setTimeout(()=>u(null),Fs.MESSAGE_DISPLAY),yield p()):u({type:"error",text:y.MESSAGES.SAVE_ERROR})}catch(P){console.error("Failed to save AI settings:",P),u({type:"error",text:y.MESSAGES.SAVE_ERROR})}finally{i(!1)}}}),N=()=>rt(null,null,function*(){if(s)try{const P=yield s.loadUnifiedSettings();n(P),u({type:"success",text:y.MESSAGES.RESET_SUCCESS}),setTimeout(()=>u(null),Fs.RESET_MESSAGE_DISPLAY)}catch(P){console.error("Failed to reset settings:",P),u({type:"error",text:y.MESSAGES.RESET_ERROR})}}),_=(P,M)=>{a&&n(A=>A?Y(H({},A),{computerVision:Y(H({},A.computerVision),{[P]:M})}):null)},x=(P,M)=>{a&&n(A=>A?Y(H({},A),{predictiveAnalytics:Y(H({},A.predictiveAnalytics),{[P]:M})}):null)},j=(P,M)=>{a&&n(A=>A?Y(H({},A),{smartWorkflow:Y(H({},A.smartWorkflow),{[P]:M})}):null)},S=(P,M)=>{a&&n(A=>A?Y(H({},A),{analytics:Y(H({},A.analytics),{[P]:M})}):null)},w=(P,M)=>{a&&n(A=>A?Y(H({},A),{intelligence:Y(H({},A.intelligence),{[P]:M})}):null)},D=(P,M)=>{a&&n(A=>A?Y(H({},A),{performance:Y(H({},A.performance),{[P]:M})}):null)},q=(P,M)=>{a&&n(A=>A?Y(H({},A),{privacy:Y(H({},A.privacy),{[P]:M})}):null)},$=(P,M)=>{a&&n(A=>A?Y(H({},A),{integration:Y(H({},A.integration),{[P]:M})}):null)},G=(P,M)=>{a&&n(A=>A?Y(H({},A),{userExperience:Y(H({},A.userExperience),{[P]:M})}):null)},L=P=>{a&&n(M=>M?Y(H({},M),{aiEnabled:P}):null)};return t?l?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#4ECDC4] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:y.MESSAGES.LOADING})]}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsx(_l,{isSaving:c,onResetToDefaults:N,onSaveSettings:f}),m&&e.jsx(vl,{serviceStatus:m}),d&&e.jsx("div",{className:`p-4 rounded-lg border ${d.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{path:d.type==="success"?De:ie,size:1}),d.text]})}),e.jsx(hl,{settings:a,updateMasterAI:L,updateComputerVision:_,updatePredictiveAnalytics:x,updateSmartWorkflow:j}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(xl,{settings:a,updateAnalytics:S}),e.jsx(Sl,{settings:a,updateIntelligence:w}),e.jsx(fl,{settings:a,updatePerformance:D}),e.jsx(bl,{settings:a,updatePrivacy:q}),e.jsx(yl,{settings:a,updateIntegration:$}),e.jsx(Nl,{settings:a,updateUserExperience:G})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(v,{path:ie,size:2,className:"text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:y.MESSAGES.FAILED_TO_LOAD})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(v,{path:ie,size:2,className:"text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:y.MESSAGES.FACILITY_NOT_AVAILABLE})]})},xe={AI_VERSION:"1.0.0",AI_CONFIDENCE_THRESHOLD:.85,AI_DATA_RETENTION_DAYS:90,ENCRYPTED_DATA_TRANSMISSION:!0},Et={COMPUTER_VISION:[{key:"tool_condition_assessment",label:"Tool Condition Assessment",desc:"AI-powered visual inspection of tool wear and damage"},{key:"barcode_quality_detection",label:"Barcode Quality Detection",desc:"Automated barcode readability assessment"},{key:"tool_type_recognition",label:"Tool Type Recognition",desc:"Automatic tool identification from images"},{key:"cleaning_validation",label:"Cleaning Validation",desc:"Visual verification of cleaning effectiveness"}],PREDICTIVE_ANALYTICS:[{key:"cycle_optimization",label:"Cycle Optimization",desc:"AI-driven sterilization cycle parameter optimization"},{key:"failure_prediction",label:"Failure Prediction",desc:"Predictive maintenance and equipment failure alerts"},{key:"efficiency_optimization",label:"Efficiency Optimization",desc:"Process efficiency analysis and recommendations"},{key:"resource_planning",label:"Resource Planning",desc:"Intelligent resource allocation and scheduling"}],SMART_WORKFLOW:[{key:"intelligent_workflow_selection",label:"Intelligent Workflow Selection",desc:"AI-powered workflow recommendation based on tool type and condition"},{key:"automated_problem_detection",label:"Automated Problem Detection",desc:"Real-time issue identification and alerting"},{key:"smart_phase_transitions",label:"Smart Phase Transitions",desc:"Intelligent sterilization phase management"},{key:"batch_optimization",label:"Batch Optimization",desc:"Optimal tool grouping and batch processing"}]},Il=[{value:"unwrapped",label:"Unwrapped (3 min, 132°C)"},{value:"pouches",label:"Pouches (5 min, 132°C)"},{value:"packs",label:"Packs (30 min, 121°C)"},{value:"handpieces",label:"Handpieces (6 min, 132°C)"},{value:"custom",label:"Custom"}],Ol=[{value:3,label:"3 months"},{value:6,label:"6 months"},{value:12,label:"1 year (recommended)"},{value:18,label:"18 months"},{value:24,label:"2 years"}],Dl=[{value:30,label:"30 days"},{value:60,label:"60 days"},{value:90,label:"90 days (recommended)"},{value:180,label:"180 days"},{value:365,label:"1 year"}],ge={TEMPERATURE:{min:100,max:150},PRESSURE:{min:10,max:30},STERILIZE_TIME:{min:1,max:60},DRY_TIME:{min:10,max:60}},Pt={min:.5,max:1,step:.05},Vs=3e3;var ss=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Rl=r=>ss(null,null,function*(){try{return yield new ht(r).loadSettings()}catch(t){return console.error("Failed to load AI settings:",t),null}}),Gs=(r,t)=>ss(null,null,function*(){try{return yield new ht(r).saveSettings(t)}catch(s){return console.error("Failed to save AI settings:",s),!1}}),kl=r=>ss(null,null,function*(){try{const t={facility_id:r,ai_enabled:!1,ai_version:xe.AI_VERSION,computer_vision_enabled:!1,tool_condition_assessment:!1,barcode_quality_detection:!1,tool_type_recognition:!1,cleaning_validation:!1,predictive_analytics_enabled:!1,cycle_optimization:!1,failure_prediction:!1,efficiency_optimization:!1,resource_planning:!1,smart_workflow_enabled:!1,intelligent_workflow_selection:!1,automated_problem_detection:!1,smart_phase_transitions:!1,batch_optimization:!1,quality_assurance_enabled:!1,biological_indicator_analysis:!1,compliance_monitoring:!1,audit_trail_enhancement:!1,risk_assessment:!1,scanner_intelligence_enabled:!1,multi_format_barcode_support:!1,tool_history_integration:!1,smart_validation:!1,error_prevention:!1,real_time_monitoring_enabled:!1,anomaly_detection:!1,predictive_maintenance:!1,quality_drift_detection:!1,smart_notifications:!1,ai_confidence_threshold:xe.AI_CONFIDENCE_THRESHOLD,ai_data_retention_days:xe.AI_DATA_RETENTION_DAYS,real_time_processing_enabled:!1,batch_processing_enabled:!1,data_sharing_enabled:!1,local_ai_processing_enabled:!1,encrypted_data_transmission:xe.ENCRYPTED_DATA_TRANSMISSION,ai_model_training:!1,auto_optimization_enabled:!1,performance_monitoring:!1,resource_optimization:!1,openai_api_key_encrypted:"",google_vision_api_key_encrypted:"",azure_computer_vision_key_encrypted:""};return yield new ht(r).saveSettings(t)}catch(t){return console.error("Failed to reset AI settings:",t),!1}}),Tt=r=>({facility_id:r,ai_enabled:!1,ai_version:xe.AI_VERSION,computer_vision_enabled:!1,tool_condition_assessment:!1,barcode_quality_detection:!1,tool_type_recognition:!1,cleaning_validation:!1,predictive_analytics_enabled:!1,cycle_optimization:!1,failure_prediction:!1,efficiency_optimization:!1,resource_planning:!1,smart_workflow_enabled:!1,intelligent_workflow_selection:!1,automated_problem_detection:!1,smart_phase_transitions:!1,batch_optimization:!1,quality_assurance_enabled:!1,biological_indicator_analysis:!1,compliance_monitoring:!1,audit_trail_enhancement:!1,risk_assessment:!1,scanner_intelligence_enabled:!1,multi_format_barcode_support:!1,tool_history_integration:!1,smart_validation:!1,error_prevention:!1,real_time_monitoring_enabled:!1,anomaly_detection:!1,predictive_maintenance:!1,quality_drift_detection:!1,smart_notifications:!1,ai_confidence_threshold:xe.AI_CONFIDENCE_THRESHOLD,ai_data_retention_days:xe.AI_DATA_RETENTION_DAYS,real_time_processing_enabled:!1,batch_processing_enabled:!1,data_sharing_enabled:!1,local_ai_processing_enabled:!1,encrypted_data_transmission:xe.ENCRYPTED_DATA_TRANSMISSION,ai_model_training:!1,auto_optimization_enabled:!1,performance_monitoring:!1,resource_optimization:!1,openai_api_key_encrypted:"",google_vision_api_key_encrypted:"",azure_computer_vision_key_encrypted:""}),we=(r,t,s,a)=>{console.log("Setting changed:",{setting:r,oldValue:t,newValue:s,facilityId:a,timestamp:new Date().toISOString()})},$l=(r,t)=>{console.log("Save attempt:",{facilityId:t,timestamp:new Date().toISOString(),settingsCount:Object.keys(r).length,aiEnabled:r.ai_enabled})},At=(r,t,s)=>{console.log("Save result:",{success:r,facilityId:t,timestamp:new Date().toISOString(),error:s||null})},Ll=r=>{console.log("Reset attempt:",{facilityId:r,timestamp:new Date().toISOString()})},It=(r,t,s)=>{console.log("Reset result:",{success:r,facilityId:t,timestamp:new Date().toISOString(),error:s||null})},Ml=(r,t,s)=>{console.log("AI feature toggle:",{feature:r,enabled:t,facilityId:s,timestamp:new Date().toISOString()})},Ee=(r,t,s)=>{console.log("Cycle settings change:",{cycleType:r,changes:t,facilityId:s,timestamp:new Date().toISOString()})},Bs=(r,t,s)=>{console.log("Enforcement toggle:",{type:r,enabled:t,facilityId:s,timestamp:new Date().toISOString()})},Us=(r,t,s)=>{console.log("Receipt settings change:",{setting:r,value:t,facilityId:s,timestamp:new Date().toISOString()})},Fl=()=>{const{enforceCi:r,enforceBi:t,_allowOverrides:s,updateComplianceSettings:a,fetchComplianceSettings:n}=Wt(),[l,o]=h.useState(!1),[c,i]=h.useState(!1),{getCurrentFacilityId:d}=Oe();return h.useEffect(()=>{const u=d();u&&n(u)},[d,n]),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Sterilization Enforcement"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"enforceBI",className:"text-sm font-medium",children:"Biological Indicator Management"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable daily BI test requirements and compliance tracking"})]}),e.jsx("button",{onClick:()=>{const u=d();u&&(Bs("BI",!t,u),a(u,{enforceBi:!t}))},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${t?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t?"translate-x-6":"translate-x-1"}`})})]}),t&&e.jsxs("div",{className:"ml-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"BI tests are being enforced"})]}),e.jsxs("button",{onClick:()=>o(!l),className:"text-xs text-blue-600 hover:text-blue-800",children:[l?"Hide":"Show"," BI test history"]}),l&&e.jsxs("div",{className:"p-3 bg-gray-50 rounded-md text-xs text-gray-600",children:[e.jsx("p",{children:"• Last BI test: 2024-01-15 (PASS)"}),e.jsx("p",{children:"• Next required: 2024-01-16"}),e.jsx("p",{children:"• Tests passed this month: 15"})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Chemical Indicator (CI) Management"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Configure how CI indicators are handled during autoclave cycles."}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"ON:"})," Users must confirm CI strip usage (Y/N selection in workflow)",e.jsx("br",{}),e.jsx("strong",{children:"OFF:"})," Users get a warning but can proceed without CI confirmation"]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:"enforceCI",className:"font-medium",children:"Require CI Confirmation"}),e.jsx("button",{id:"enforceCI",onClick:()=>{const u=d();u&&(Bs("CI",!r,u),a(u,{enforceCi:!r}))},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${r?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r?"translate-x-6":"translate-x-1"}`})})]})]})]})};var zl=Object.defineProperty,ct=Object.getOwnPropertySymbols,ya=Object.prototype.hasOwnProperty,va=Object.prototype.propertyIsEnumerable,Hs=(r,t,s)=>t in r?zl(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,ql=(r,t)=>{for(var s in t||(t={}))ya.call(t,s)&&Hs(r,s,t[s]);if(ct)for(var s of ct(t))va.call(t,s)&&Hs(r,s,t[s]);return r},Vl=(r,t)=>{var s={};for(var a in r)ya.call(r,a)&&t.indexOf(a)<0&&(s[a]=r[a]);if(r!=null&&ct)for(var a of ct(r))t.indexOf(a)<0&&va.call(r,a)&&(s[a]=r[a]);return s};const Ys=r=>{var t=r,{className:s=""}=t,a=Vl(t,["className"]);return e.jsx("input",ql({className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${s}`},a))};var Gl=Object.defineProperty,Bl=Object.defineProperties,Ul=Object.getOwnPropertyDescriptors,dt=Object.getOwnPropertySymbols,ja=Object.prototype.hasOwnProperty,Na=Object.prototype.propertyIsEnumerable,Ws=(r,t,s)=>t in r?Gl(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Hl=(r,t)=>{for(var s in t||(t={}))ja.call(t,s)&&Ws(r,s,t[s]);if(dt)for(var s of dt(t))Na.call(t,s)&&Ws(r,s,t[s]);return r},Yl=(r,t)=>Bl(r,Ul(t)),Wl=(r,t)=>{var s={};for(var a in r)ja.call(r,a)&&t.indexOf(a)<0&&(s[a]=r[a]);if(r!=null&&dt)for(var a of dt(r))t.indexOf(a)<0&&Na.call(r,a)&&(s[a]=r[a]);return s};const Me=r=>{var t=r,{children:s,className:a=""}=t,n=Wl(t,["children","className"]);return e.jsx("label",Yl(Hl({className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${a}`},n),{children:s}))};var Kl=Object.defineProperty,ut=Object.getOwnPropertySymbols,_a=Object.prototype.hasOwnProperty,Sa=Object.prototype.propertyIsEnumerable,Ks=(r,t,s)=>t in r?Kl(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Ql=(r,t)=>{for(var s in t||(t={}))_a.call(t,s)&&Ks(r,s,t[s]);if(ut)for(var s of ut(t))Sa.call(t,s)&&Ks(r,s,t[s]);return r},Zl=(r,t)=>{var s={};for(var a in r)_a.call(r,a)&&t.indexOf(a)<0&&(s[a]=r[a]);if(r!=null&&ut)for(var a of ut(r))t.indexOf(a)<0&&Sa.call(r,a)&&(s[a]=r[a]);return s};const Qs=r=>{var t=r,{className:s="",onCheckedChange:a,onChange:n}=t,l=Zl(t,["className","onCheckedChange","onChange"]);const o=c=>{a&&a(c.target.checked),n&&n(c)};return e.jsx("input",Ql({type:"checkbox",className:`h-4 w-4 text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 border-gray-300 rounded transition-colors duration-200 ${s}`,onChange:o},l))},Xl=({checked:r,onCheckedChange:t,className:s="",disabled:a=!1})=>{const n=()=>{a||t(!r)};return e.jsx("button",{type:"button",role:"switch","aria-checked":r,disabled:a,onClick:n,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${r?"bg-blue-600":"bg-gray-200"} ${a?"opacity-50 cursor-not-allowed":"cursor-pointer"} ${s}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r?"translate-x-6":"translate-x-1"}`})})};var Zs=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Jl=()=>{const{currentUser:r}=We(),[t,s]=h.useState(!0),[a,n]=h.useState(null),[l,o]=h.useState(["pouch","wrap","container","tray"]),[c,i]=h.useState(["small","medium","large","extra-large"]),[d,u]=h.useState(!1),[m,g]=h.useState("PKG-"),[b,p]=h.useState(25);h.useEffect(()=>{Zs(null,null,function*(){try{if(!r)return;const{data:j,error:S}=yield E.from("facility_settings").select("packaging_settings").eq("facility_id",r.facility_id).single();if(S&&console.warn("No existing packaging settings found"),j!=null&&j.packaging_settings){const w=j.packaging_settings;o(D=>w.packageTypes||D),i(D=>w.packageSizes||D),u(!!w.requireReceiptUpload),g(D=>w.batchPrefix||D),p(D=>w.maxToolsPerBatch||D)}n(r.facility_id)}catch(j){console.error("Error loading packaging settings:",j)}finally{s(!1)}})},[r]);const f=()=>Zs(null,null,function*(){if(!a)return;s(!0);const x={packageTypes:l,packageSizes:c,requireReceiptUpload:d,batchPrefix:m,maxToolsPerBatch:b},{error:j}=yield E.from("facility_settings").update({packaging_settings:x}).eq("facility_id",a);j&&console.error("Error saving packaging settings:",j),s(!1)}),N=x=>{o(j=>j.includes(x)?j.filter(S=>S!==x):[...j,x])},_=x=>{i(j=>j.includes(x)?j.filter(S=>S!==x):[...j,x])};return t?e.jsx("p",{className:"text-sm text-gray-500",children:"Loading packaging settings..."}):e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"📦 Packaging Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Me,{className:"font-medium",children:"Available Package Types"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:["pouch","wrap","container","tray"].map(x=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(Qs,{checked:l.includes(x),onCheckedChange:()=>N(x)}),e.jsx("span",{className:"capitalize",children:x})]},x))})]}),e.jsxs("div",{children:[e.jsx(Me,{className:"font-medium",children:"Available Package Sizes"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:["small","medium","large","extra-large"].map(x=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(Qs,{checked:c.includes(x),onCheckedChange:()=>_(x)}),e.jsx("span",{className:"capitalize",children:x})]},x))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Me,{className:"font-medium",children:"Require Receipt Upload"}),e.jsx(Xl,{checked:d,onCheckedChange:u})]}),e.jsxs("div",{children:[e.jsx(Me,{className:"font-medium",children:"Batch Code Prefix"}),e.jsx(Ys,{value:m,onChange:x=>g(x.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(Me,{className:"font-medium",children:"Max Tools per Batch"}),e.jsx(Ys,{type:"number",value:b,onChange:x=>p(parseInt(x.target.value,10)),className:"mt-1"})]}),e.jsx("button",{onClick:f,className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Save Settings"})]})]})},eo=()=>{const{cycleSettings:r,defaultCycleType:t,allowCustomCycles:s,setDefaultCycleType:a,setAllowCustomCycles:n,updateCycleSettings:l,resetCycleSettings:o}=Wt(),[c,i]=h.useState(null),{getCurrentFacilityId:d}=Oe();return e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Autoclave Cycle Customization"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"defaultCycle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Cycle Type"}),e.jsx("select",{id:"defaultCycle",value:t,onChange:u=>{const m=d();m&&Ee("defaultCycleType",{cycleType:u.target.value},m),a(u.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",children:Il.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This cycle type will be selected by default for new sterilization runs"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"allowCustomCycles",className:"text-sm font-medium",children:"Allow Custom Cycle Parameters"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable users to modify temperature, pressure, and timing for special cases"})]}),e.jsx("button",{id:"allowCustomCycles",onClick:()=>{const u=d();u&&Ee("allowCustomCycles",{enabled:!s},u),n(!s)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${s?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Cycle Presets"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(r).map(([u,m])=>{const g=m;return e.jsxs("div",{className:"border border-gray-200 rounded-md p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"text-sm font-medium",children:g.name}),u==="custom"&&s&&e.jsx("button",{onClick:()=>i(c===u?null:u),className:"text-xs text-blue-600 hover:text-blue-800",children:c===u?"Save":"Edit"})]}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("p",{children:["Temperature: ",g.temperature,"°C"]}),e.jsxs("p",{children:["Pressure: ",g.pressure," PSI"]}),e.jsxs("p",{children:["Sterilize Time: ",g.sterilizeTime," min"]}),e.jsxs("p",{children:["Dry Time: ",g.dryTime," min"]}),e.jsxs("p",{children:["Total Time: ",g.totalTime," min"]})]}),u==="custom"&&s&&c===u&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customTemperature",className:"text-xs text-gray-500",children:"Temperature (°C)"}),e.jsx("input",{id:"customTemperature",type:"number",value:g.temperature,onChange:b=>{const p=d();p&&Ee("custom",{temperature:Number(b.target.value)},p),l("custom",{temperature:Number(b.target.value)})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:ge.TEMPERATURE.min,max:ge.TEMPERATURE.max})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customPressure",className:"text-xs text-gray-500",children:"Pressure (PSI)"}),e.jsx("input",{id:"customPressure",type:"number",value:g.pressure,onChange:b=>{const p=d();p&&Ee("custom",{pressure:Number(b.target.value)},p),l("custom",{pressure:Number(b.target.value)})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:ge.PRESSURE.min,max:ge.PRESSURE.max})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customSterilizeTime",className:"text-xs text-gray-500",children:"Sterilize (min)"}),e.jsx("input",{id:"customSterilizeTime",type:"number",value:g.sterilizeTime,onChange:b=>{const p=d();p&&Ee("custom",{sterilizeTime:Number(b.target.value)},p),l("custom",{sterilizeTime:Number(b.target.value)})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:ge.STERILIZE_TIME.min,max:ge.STERILIZE_TIME.max})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customDryTime",className:"text-xs text-gray-500",children:"Dry (min)"}),e.jsx("input",{id:"customDryTime",type:"number",value:g.dryTime,onChange:b=>{const p=d();p&&Ee("custom",{dryTime:Number(b.target.value)},p),l("custom",{dryTime:Number(b.target.value)})},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded",min:ge.DRY_TIME.min,max:ge.DRY_TIME.max})]})]})]})]},u)})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:o,className:"px-4 py-2 text-sm text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:"Reset to Defaults"})})]})]})},to=()=>{const{autoclaveReceiptSettings:r,setAutoclaveHasPrinter:t,setReceiptRetentionMonths:s}=Wt(),{getCurrentFacilityId:a}=Oe();return e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Autoclave Receipt Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"autoclaveHasPrinter",className:"text-sm font-medium",children:"Autoclave Has Printer"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable receipt upload functionality for autoclave cycles"})]}),e.jsx("button",{id:"autoclaveHasPrinter",onClick:()=>{const n=a();n&&Us("autoclaveHasPrinter",!r.autoclaveHasPrinter,n),t(!r.autoclaveHasPrinter)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 ${r.autoclaveHasPrinter?"bg-[#4ECDC4]":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.autoclaveHasPrinter?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"retentionPeriod",className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Retention Period"}),e.jsx("select",{id:"retentionPeriod",value:r.receiptRetentionMonths,onChange:n=>{const l=a();l&&Us("receiptRetentionMonths",Number(n.target.value),l),s(Number(n.target.value))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4]",children:Ol.map(n=>e.jsx("option",{value:n.value,children:n.label},n.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Receipts will be automatically deleted after this period"})]}),r.autoclaveHasPrinter&&e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-md",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Receipt Management Active"}),e.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[e.jsx("p",{children:"• Users can upload autoclave receipts via camera or file"}),e.jsx("p",{children:"• Receipts are linked to sterilization batch codes"}),e.jsxs("p",{children:["• Automatic cleanup after"," ",r.receiptRetentionMonths," months"]}),e.jsx("p",{children:"• Available for audit and compliance review"})]})]})]})]})};var so=Object.defineProperty,ro=Object.defineProperties,ao=Object.getOwnPropertyDescriptors,Xs=Object.getOwnPropertySymbols,no=Object.prototype.hasOwnProperty,io=Object.prototype.propertyIsEnumerable,Js=(r,t,s)=>t in r?so(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,lo=(r,t)=>{for(var s in t||(t={}))no.call(t,s)&&Js(r,s,t[s]);if(Xs)for(var s of Xs(t))io.call(t,s)&&Js(r,s,t[s]);return r},oo=(r,t)=>ro(r,ao(t)),Ot=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const co=()=>{const{getCurrentFacilityId:r}=Oe(),[t,s]=h.useState(()=>{const u=r();return Tt(u||"")}),[a,n]=h.useState(null),[l,o]=h.useState(!1),c=(u,m)=>{const g=r();g&&Ml(u,m,g),s(b=>oo(lo({},b),{[u]:m}))},i=()=>Ot(null,null,function*(){try{o(!0);const u=r();if(!u){n({type:"error",text:"User facility not found"});return}$l(t,u),(yield Gs(u,t))?(At(!0,u),n({type:"success",text:"AI settings saved successfully!"}),setTimeout(()=>n(null),Vs)):(At(!1,u,"Save operation failed"),n({type:"error",text:"Failed to save AI settings"}))}catch(u){At(!1,r()||"",u instanceof Error?u.message:"Unknown error"),n({type:"error",text:"Failed to save AI settings"})}finally{o(!1)}}),d=()=>Ot(null,null,function*(){try{o(!0);const u=r();if(!u){n({type:"error",text:"User facility not found"});return}Ll(u);const m=Tt(u);s(m),(yield kl(u))?(It(!0,u),n({type:"success",text:"AI settings reset to defaults"}),setTimeout(()=>n(null),Vs)):(It(!1,u,"Reset operation failed"),n({type:"error",text:"Failed to reset AI settings"}))}catch(u){It(!1,r()||"",u instanceof Error?u.message:"Unknown error"),n({type:"error",text:"Failed to reset AI settings"})}finally{o(!1)}});return h.useEffect(()=>{Ot(null,null,function*(){const m=r();if(m)try{const g=yield Rl(m);if(g)s(g);else{const b=Tt(m);s(b),yield Gs(m,b)}}catch(g){console.error("Failed to load AI settings:",g)}})},[r]),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"AI-Powered Sterilization Features"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure intelligent automation and machine learning capabilities"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:d,className:"px-3 py-2 text-sm text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:"Reset"}),e.jsxs("button",{onClick:i,disabled:l,className:"px-4 py-2 text-sm bg-[#4ECDC4] text-white rounded-md hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] disabled:opacity-50",children:[e.jsx(v,{path:He,size:.8,className:"inline mr-1"}),"Save AI Settings"]})]})]}),a&&e.jsx("div",{className:`p-4 rounded-lg border mb-6 ${a.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{path:a.type==="success"?De:ie,size:1,className:"text-current"}),a.text]})}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:Re,size:1.5,className:"text-purple-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-800",children:"Master AI Control"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Enable or disable all AI features globally"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiEnabledToggle",className:"text-sm font-medium text-purple-800",children:"Enable AI Features"}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Master switch for all sterilization AI capabilities"})]}),e.jsx("button",{id:"aiEnabledToggle",onClick:()=>{const u=r();u&&we("ai_enabled",t.ai_enabled,!t.ai_enabled,u),c("ai_enabled",!t.ai_enabled)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 ${t.ai_enabled?"bg-purple-600":"bg-gray-200"}`,"aria-label":`${t.ai_enabled?"Disable":"Enable"} AI Features`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t.ai_enabled?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(v,{path:J,size:1.2,className:"text-blue-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Computer Vision"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Et.COMPUTER_VISION.map(({key:u,label:m,desc:g})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`${u}Toggle`,className:"text-sm font-medium text-gray-700",children:m}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:g})]}),e.jsx("button",{id:`${u}Toggle`,onClick:()=>{const b=r();b&&we(u,t[u],!t[u],b),c(u,!t[u])},disabled:!t.ai_enabled,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 ${t[u]?"bg-blue-600":"bg-gray-200"} ${t.ai_enabled?"":"opacity-50 cursor-not-allowed"}`,"aria-label":`${t[u]?"Disable":"Enable"} ${m}`,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${t[u]?"translate-x-5":"translate-x-1"}`})})]},u))})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(v,{path:Xt,size:1.2,className:"text-green-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Predictive Analytics"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Et.PREDICTIVE_ANALYTICS.map(({key:u,label:m,desc:g})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`${u}Toggle`,className:"text-sm font-medium text-gray-700",children:m}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:g})]}),e.jsx("button",{id:`${u}Toggle`,onClick:()=>{const b=r();b&&we(u,t[u],!t[u],b),c(u,!t[u])},disabled:!t.ai_enabled,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1 ${t[u]?"bg-green-600":"bg-gray-200"} ${t.ai_enabled?"":"opacity-50 cursor-not-allowed"}`,"aria-label":`${t[u]?"Disable":"Enable"} ${m}`,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${t[u]?"translate-x-5":"translate-x-1"}`})})]},u))})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(v,{path:J,size:1.2,className:"text-orange-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Smart Workflow Automation"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Et.SMART_WORKFLOW.map(({key:u,label:m,desc:g})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`${u}Toggle`,className:"text-sm font-medium text-gray-700",children:m}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:g})]}),e.jsx("button",{id:`${u}Toggle`,onClick:()=>{const b=r();b&&we(u,t[u],!t[u],b),c(u,!t[u])},disabled:!t.ai_enabled,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-1 ${t[u]?"bg-orange-600":"bg-gray-200"} ${t.ai_enabled?"":"opacity-50 cursor-not-allowed"}`,"aria-label":`${t[u]?"Disable":"Enable"} ${m}`,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${t[u]?"translate-x-5":"translate-x-1"}`})})]},u))})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(v,{path:Ne,size:1.2,className:"text-purple-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"AI Configuration"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiConfidenceThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Confidence Threshold"}),e.jsx("input",{id:"aiConfidenceThreshold",type:"range",min:Pt.min,max:Pt.max,step:Pt.step,value:t.ai_confidence_threshold||.8,onChange:u=>{const m=r();m&&we("ai_confidence_threshold",t.ai_confidence_threshold,parseFloat(u.target.value),m),c("ai_confidence_threshold",parseFloat(u.target.value))},disabled:!t.ai_enabled,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer disabled:opacity-50"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"50%"}),e.jsxs("span",{children:[Math.round(t.ai_confidence_threshold*100),"%"]}),e.jsx("span",{children:"100%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiDataRetentionDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Retention (Days)"}),e.jsx("select",{id:"aiDataRetentionDays",value:t.ai_data_retention_days||365,onChange:u=>{const m=r();m&&we("ai_data_retention_days",t.ai_data_retention_days,parseInt(u.target.value),m),c("ai_data_retention_days",parseInt(u.target.value))},disabled:!t.ai_enabled,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] disabled:opacity-50",children:Dl.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))})]})]})})]})]})]})};function uo(){return e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsx(Fl,{}),e.jsx("div",{className:"mt-6 border-t border-gray-200 pt-6",children:e.jsx(Jl,{})}),e.jsx(eo,{}),e.jsx(to,{}),e.jsx(co,{})]})}const er=({onLaunchBuilder:r})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Content Builder"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Launch Content Builder"}),e.jsxs("button",{onClick:r,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4] transition-colors",children:[e.jsx(v,{path:ye,size:1,className:"mr-2"}),"Launch Builder"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Enable content creation"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"enable-content-creation",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Enable content creation"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Auto-save drafts"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"auto-save-drafts",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Auto-save drafts"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Recent Activity"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Course published"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Sterilization Safety Protocols"})]}),e.jsx("span",{className:"text-xs text-gray-500",children:"2h ago"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Draft saved"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Inventory Management Guide"})]}),e.jsx("span",{className:"text-xs text-gray-500",children:"1d ago"})]})]})]})]}),mo=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Publishing Workflow"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Require approval before publishing"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"require-approval",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Require approval before publishing"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Auto-publish to Library"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"auto-publish-library",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all"}),e.jsx("span",{className:"sr-only",children:"Auto-publish to Library"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Notify reviewers on submission"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"notify-reviewers",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Notify reviewers on submission"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Approval Roles"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Content Manager"}),e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Primary"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Department Head"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Secondary"})]})]})]})]}),po=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Content Workflow"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Enable draft review workflow"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"enable-draft-review",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Enable draft review workflow"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Auto-save drafts every 5 minutes"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"auto-save-drafts-5min",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Auto-save drafts every 5 minutes"})]})]})]})]})}),ho=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"AI Content Suggestions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Enable AI suggestions"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"enable-ai-suggestions",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Enable AI suggestions"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Suggest based on content gaps"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"suggest-content-gaps",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Suggest based on content gaps"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Analyze user search patterns"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"analyze-search-patterns",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Analyze user search patterns"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"AI Configuration"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confidence-threshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Suggestion Confidence Threshold"}),e.jsxs("select",{id:"confidence-threshold",defaultValue:"0.8",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"0.7",children:"70% - Balanced"}),e.jsx("option",{value:"0.8",children:"80% - Recommended"}),e.jsx("option",{value:"0.9",children:"90% - High Quality"})]})]})})]})]}),go=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Media Upload Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Max file size per upload"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"50 MB"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Auto-compress images"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"auto-compress-images",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Auto-compress images"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Generate thumbnails"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"generate-thumbnails",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-[#4ECDC4] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:translate-x-full"}),e.jsx("span",{className:"sr-only",children:"Generate thumbnails"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Supported File Types"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-green-800 mb-2",children:"Images"}),e.jsx("p",{className:"text-xs text-green-700",children:"JPEG, PNG, GIF, WebP, HEIC"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-800 mb-2",children:"Videos"}),e.jsx("p",{className:"text-xs text-blue-700",children:"MP4, WebM, MOV, AVI"})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-purple-800 mb-2",children:"Audio"}),e.jsx("p",{className:"text-xs text-purple-700",children:"MP3, WAV, AAC, OGG"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-800 mb-2",children:"Documents"}),e.jsx("p",{className:"text-xs text-gray-700",children:"PDF, Word, PowerPoint, Excel"})]})]})]})]}),xo=()=>{const r=Ta(),[t,s]=h.useState("builder"),a=()=>{r("/content-builder")},n=[{id:"builder",label:"Content Builder",icon:Ie},{id:"publishing",label:"Publishing",icon:Ha},{id:"workflow",label:"Workflow",icon:Ie},{id:"ai",label:"AI Suggestions",icon:Ve},{id:"media",label:"Media Settings",icon:Ya}],l=()=>{switch(t){case"builder":return e.jsx(er,{onLaunchBuilder:a});case"publishing":return e.jsx(mo,{});case"workflow":return e.jsx(po,{});case"ai":return e.jsx(ho,{});case"media":return e.jsx(go,{});default:return e.jsx(er,{onLaunchBuilder:a})}};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:n.map(o=>e.jsxs("button",{onClick:()=>s(o.id),className:`${t===o.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[e.jsx(v,{path:o.icon,size:1,className:"mr-2"}),o.label]},o.id))})}),e.jsx("div",{className:"py-4",children:l()})]})})},V=({id:r,checked:t,onChange:s,label:a,description:n})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm text-gray-700",children:a}),n&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n})]}),e.jsxs("label",{htmlFor:r,className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:r,className:"sr-only peer",checked:t,onChange:l=>s(l.target.checked)}),e.jsx("div",{className:`w-11 h-6 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#4ECDC4]/20 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all ${t?"bg-[#4ECDC4] after:translate-x-full":"bg-gray-200"}`}),e.jsx("span",{className:"sr-only",children:a})]})]}),le=({title:r,children:t})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:r}),e.jsx("div",{className:"space-y-3",children:t})]});var fo=Object.defineProperty,bo=Object.defineProperties,yo=Object.getOwnPropertyDescriptors,tr=Object.getOwnPropertySymbols,vo=Object.prototype.hasOwnProperty,jo=Object.prototype.propertyIsEnumerable,sr=(r,t,s)=>t in r?fo(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,No=(r,t)=>{for(var s in t||(t={}))vo.call(t,s)&&sr(r,s,t[s]);if(tr)for(var s of tr(t))jo.call(t,s)&&sr(r,s,t[s]);return r},_o=(r,t)=>bo(r,yo(t));const So=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(_o(No({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:J,size:1.5,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-800",children:"General Learning Settings"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Basic configuration for learning and training modules"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(le,{title:"Core Features",children:[e.jsx(V,{id:"enable-learning-paths",checked:r.enableLearningPaths,onChange:a=>s("enableLearningPaths",a),label:"Enable Learning Paths"}),e.jsx(V,{id:"enable-certifications",checked:r.enableCertifications,onChange:a=>s("enableCertifications",a),label:"Enable Certifications"}),e.jsx(V,{id:"enable-progress-tracking",checked:r.enableProgressTracking,onChange:a=>s("enableProgressTracking",a),label:"Enable Progress Tracking"}),e.jsx(V,{id:"enable-social-learning",checked:r.enableSocialLearning,onChange:a=>s("enableSocialLearning",a),label:"Enable Social Learning"})]}),e.jsxs(le,{title:"Content Management",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"default-content-type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Content Type"}),e.jsxs("select",{id:"default-content-type",value:r.defaultContentType,onChange:a=>s("defaultContentType",a.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"course",children:"Course"}),e.jsx("option",{value:"procedure",children:"Procedure"}),e.jsx("option",{value:"policy",children:"Policy"}),e.jsx("option",{value:"learning_pathway",children:"Learning Pathway"})]})]}),e.jsx(V,{id:"enable-content-rating",checked:r.enableContentRating,onChange:a=>s("enableContentRating",a),label:"Enable Content Rating"}),e.jsx(V,{id:"require-content-approval",checked:r.requireContentApproval,onChange:a=>s("requireContentApproval",a),label:"Require Content Approval"})]})]})]})})};var Co=Object.defineProperty,wo=Object.defineProperties,Eo=Object.getOwnPropertyDescriptors,rr=Object.getOwnPropertySymbols,Po=Object.prototype.hasOwnProperty,To=Object.prototype.propertyIsEnumerable,ar=(r,t,s)=>t in r?Co(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Ao=(r,t)=>{for(var s in t||(t={}))Po.call(t,s)&&ar(r,s,t[s]);if(rr)for(var s of rr(t))To.call(t,s)&&ar(r,s,t[s]);return r},Io=(r,t)=>wo(r,Eo(t));const Oo=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(Io(Ao({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:Re,size:1.5,className:"text-purple-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-800",children:"AI Learning Features"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Configure AI-powered learning capabilities"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(le,{title:"AI Learning Features",children:[e.jsx(V,{id:"personalized-recommendations",checked:r.personalizedRecommendations,onChange:a=>s("personalizedRecommendations",a),label:"Personalized Recommendations"}),e.jsx(V,{id:"skill-gap-analysis",checked:r.skillGapAnalysis,onChange:a=>s("skillGapAnalysis",a),label:"Skill Gap Analysis"}),e.jsx(V,{id:"learning-path-optimization",checked:r.learningPathOptimization,onChange:a=>s("learningPathOptimization",a),label:"Learning Path Optimization"}),e.jsx(V,{id:"adaptive-difficulty",checked:r.adaptiveDifficulty,onChange:a=>s("adaptiveDifficulty",a),label:"Adaptive Difficulty"})]}),e.jsxs(le,{title:"AI Configuration",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ai-confidence-threshold",className:"block text-sm font-medium text-gray-700 mb-1",children:"AI Confidence Threshold"}),e.jsx("input",{id:"ai-confidence-threshold",type:"range",min:"0.1",max:"1",step:"0.1",value:r.aiConfidenceThreshold,onChange:a=>s("aiConfidenceThreshold",parseFloat(a.target.value)),className:"w-full"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(r.aiConfidenceThreshold*100),"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"recommendation-limit",className:"block text-sm font-medium text-gray-700 mb-1",children:"Recommendation Limit"}),e.jsx("input",{id:"recommendation-limit",type:"number",min:"1",max:"20",value:r.recommendationLimit,onChange:a=>s("recommendationLimit",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"data-retention-days",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Retention (Days)"}),e.jsx("input",{id:"data-retention-days",type:"number",min:"30",max:"1095",value:r.dataRetentionDays,onChange:a=>s("dataRetentionDays",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]})]})]})]})})};var Do=Object.defineProperty,Ro=Object.defineProperties,ko=Object.getOwnPropertyDescriptors,nr=Object.getOwnPropertySymbols,$o=Object.prototype.hasOwnProperty,Lo=Object.prototype.propertyIsEnumerable,ir=(r,t,s)=>t in r?Do(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Mo=(r,t)=>{for(var s in t||(t={}))$o.call(t,s)&&ir(r,s,t[s]);if(nr)for(var s of nr(t))Lo.call(t,s)&&ir(r,s,t[s]);return r},Fo=(r,t)=>Ro(r,ko(t));const zo=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(Fo(Mo({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:oa,size:1.5,className:"text-green-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-green-800",children:"Certification Management"}),e.jsx("p",{className:"text-sm text-green-700",children:"Configure certification and compliance tracking"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(le,{title:"Certification Features",children:[e.jsx(V,{id:"enable-auto-certification",checked:r.enableAutoCertification,onChange:a=>s("enableAutoCertification",a),label:"Enable Auto-Certification"}),e.jsx(V,{id:"require-re-certification",checked:r.requireReCertification,onChange:a=>s("requireReCertification",a),label:"Require Re-Certification"}),e.jsx(V,{id:"enable-certification-templates",checked:r.enableCertificationTemplates,onChange:a=>s("enableCertificationTemplates",a),label:"Enable Certification Templates"})]}),e.jsxs(le,{title:"Assessment Settings",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"passing-score-threshold",className:"block text-sm font-medium text-gray-700 mb-1",children:"Passing Score Threshold"}),e.jsx("input",{id:"passing-score-threshold",type:"number",min:"50",max:"100",value:r.passingScoreThreshold,onChange:a=>s("passingScoreThreshold",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"max-assessment-attempts",className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Assessment Attempts"}),e.jsx("input",{id:"max-assessment-attempts",type:"number",min:"1",max:"10",value:r.maxAssessmentAttempts,onChange:a=>s("maxAssessmentAttempts",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"certification-expiry-days",className:"block text-sm font-medium text-gray-700 mb-1",children:"Certification Expiry (Days)"}),e.jsx("input",{id:"certification-expiry-days",type:"number",min:"30",max:"1095",value:r.certificationExpiryDays,onChange:a=>s("certificationExpiryDays",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-[#4ECDC4] focus:ring-[#4ECDC4]"})]})]})]})]})})};var qo=Object.defineProperty,Vo=Object.defineProperties,Go=Object.getOwnPropertyDescriptors,lr=Object.getOwnPropertySymbols,Bo=Object.prototype.hasOwnProperty,Uo=Object.prototype.propertyIsEnumerable,or=(r,t,s)=>t in r?qo(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Ho=(r,t)=>{for(var s in t||(t={}))Bo.call(t,s)&&or(r,s,t[s]);if(lr)for(var s of lr(t))Uo.call(t,s)&&or(r,s,t[s]);return r},Yo=(r,t)=>Vo(r,Go(t));const Wo=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(Yo(Ho({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:Ge,size:1.5,className:"text-orange-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-orange-800",children:"Learning Path Configuration"}),e.jsx("p",{className:"text-sm text-orange-700",children:"Configure learning paths and progress tracking"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(le,{title:"Path Features",children:[e.jsx(V,{id:"enable-custom-paths",checked:r.enableCustomPaths,onChange:a=>s("enableCustomPaths",a),label:"Enable Custom Learning Paths"}),e.jsx(V,{id:"enable-prerequisites",checked:r.enablePrerequisites,onChange:a=>s("enablePrerequisites",a),label:"Enable Prerequisites"}),e.jsx(V,{id:"enable-branching",checked:r.enableBranching,onChange:a=>s("enableBranching",a),label:"Enable Branching Paths"}),e.jsx(V,{id:"adaptive-path-generation",checked:r.adaptivePathGeneration,onChange:a=>s("adaptivePathGeneration",a),label:"AI Adaptive Path Generation"})]}),e.jsxs(le,{title:"Progress & Gamification",children:[e.jsx(V,{id:"enable-milestones",checked:r.enableMilestones,onChange:a=>s("enableMilestones",a),label:"Enable Learning Milestones"}),e.jsx(V,{id:"enable-progress-gamification",checked:r.enableProgressGamification,onChange:a=>s("enableProgressGamification",a),label:"Enable Progress Gamification"}),e.jsx(V,{id:"enable-learning-streaks",checked:r.enableLearningStreaks,onChange:a=>s("enableLearningStreaks",a),label:"Enable Learning Streaks"}),e.jsx(V,{id:"enable-achievement-badges",checked:r.enableAchievementBadges,onChange:a=>s("enableAchievementBadges",a),label:"Enable Achievement Badges"})]})]})]})})};var Ko=Object.defineProperty,Qo=Object.defineProperties,Zo=Object.getOwnPropertyDescriptors,cr=Object.getOwnPropertySymbols,Xo=Object.prototype.hasOwnProperty,Jo=Object.prototype.propertyIsEnumerable,dr=(r,t,s)=>t in r?Ko(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,ec=(r,t)=>{for(var s in t||(t={}))Xo.call(t,s)&&dr(r,s,t[s]);if(cr)for(var s of cr(t))Jo.call(t,s)&&dr(r,s,t[s]);return r},tc=(r,t)=>Qo(r,Zo(t));const sc=({aiSettings:r,onAiSettingsChange:t})=>{const s=(a,n)=>{t(tc(ec({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:Ne,size:1.5,className:"text-gray-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Advanced Configuration"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Advanced settings for power users"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(le,{title:"Data & Privacy",children:[e.jsx(V,{id:"data-sharing-enabled",checked:r.dataSharingEnabled,onChange:a=>s("dataSharingEnabled",a),label:"Enable Data Sharing for AI Training"}),e.jsx(V,{id:"local-ai-processing-enabled",checked:r.localAIProcessingEnabled,onChange:a=>s("localAIProcessingEnabled",a),label:"Local AI Processing"}),e.jsx(V,{id:"encrypted-data-transmission",checked:r.encryptedDataTransmission,onChange:a=>s("encryptedDataTransmission",a),label:"Encrypted Data Transmission"})]}),e.jsx(le,{title:"System Information",children:e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"AI Model Version:"})," ",r.modelVersion]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Data Retention:"})," ",r.dataRetentionDays," days"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Confidence Threshold:"})," ",Math.round(r.aiConfidenceThreshold*100),"%"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Recommendation Limit:"})," ",r.recommendationLimit," items"]})]})})]})]})})},rc=()=>{const[r,t]=h.useState({aiEnabled:!0,personalizedRecommendations:!0,skillGapAnalysis:!0,learningPathOptimization:!0,performancePrediction:!0,adaptiveDifficulty:!0,learningAnalyticsEnabled:!0,behaviorTracking:!0,progressPrediction:!0,engagementMetrics:!0,retentionAnalysis:!0,aiConfidenceThreshold:.8,recommendationLimit:5,dataRetentionDays:365,modelVersion:"v1.0",dataSharingEnabled:!1,localAIProcessingEnabled:!0,encryptedDataTransmission:!0,aiModelTraining:!1}),[s,a]=h.useState({enableLearningPaths:!0,enableCertifications:!0,enableProgressTracking:!0,enableSocialLearning:!1,defaultContentType:"course",enableContentRating:!0,enableComments:!0,requireContentApproval:!0,showLearningRecommendations:!0,enableLearningReminders:!0,adaptiveInterface:!0,mobileLearningEnabled:!0}),[n,l]=h.useState({enableAutoCertification:!0,certificationExpiryDays:365,requireReCertification:!0,enableCertificationTemplates:!0,complianceTrackingEnabled:!0,regulatoryUpdatesEnabled:!0,auditTrailEnabled:!0,complianceReportingEnabled:!0,enableAssessments:!0,passingScoreThreshold:80,maxAssessmentAttempts:3,enableRetakes:!0}),[o,c]=h.useState({enableCustomPaths:!0,enablePrerequisites:!0,enableBranching:!0,adaptivePathGeneration:!0,enableMilestones:!0,enableProgressGamification:!0,enableLearningStreaks:!0,enableAchievementBadges:!0,estimatedCompletionTracking:!0,enableStudyScheduling:!0,optimalStudyTimeRecommendations:!0,enableLearningReminders:!0});return{aiSettings:r,setAiSettings:t,generalSettings:s,setGeneralSettings:a,certificationSettings:n,setCertificationSettings:l,learningPathSettings:o,setLearningPathSettings:c}};var ac=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const nc=()=>{const[r,t]=h.useState("general"),[s,a]=h.useState(!1),[n,l]=h.useState(null),{aiSettings:o,setAiSettings:c,generalSettings:i,setGeneralSettings:d,certificationSettings:u,setCertificationSettings:m,learningPathSettings:g,setLearningPathSettings:b}=rc(),p=[{id:"general",label:"General Settings",icon:J},{id:"ai",label:"AI & Analytics",icon:Re},{id:"certifications",label:"Certifications",icon:oa},{id:"learning-paths",label:"Learning Paths",icon:Ge},{id:"advanced",label:"Advanced",icon:Ne}],f=()=>ac(null,null,function*(){try{a(!0),l(null),l({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>l(null),3e3)}catch(_){console.error(_),l({type:"error",text:"Failed to save settings. Please try again."})}finally{a(!1)}}),N=()=>{switch(r){case"general":return e.jsx(So,{settings:i,onSettingsChange:d});case"ai":return e.jsx(Oo,{settings:o,onSettingsChange:c});case"certifications":return e.jsx(zo,{settings:u,onSettingsChange:m});case"learning-paths":return e.jsx(Wo,{settings:g,onSettingsChange:b});case"advanced":return e.jsx(sc,{aiSettings:o,onAiSettingsChange:c});default:return null}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Learning & Training Settings"}),e.jsx("p",{className:"text-gray-600",children:"Configure AI-powered learning features and training modules"})]}),e.jsxs("button",{onClick:f,disabled:s,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-[#4ECDC4] hover:bg-[#3db8b0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4ECDC4] disabled:opacity-50",children:[e.jsx(v,{path:He,size:1,className:"mr-2"}),s?"Saving...":"Save Settings"]})]}),n&&e.jsx("div",{className:`rounded-md p-4 ${n.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{path:n.type==="success"?De:ie,size:1.2,className:`mr-2 ${n.type==="success"?"text-green-400":"text-red-400"}`}),n.text]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:p.map(_=>e.jsxs("button",{onClick:()=>t(_.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${r===_.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(v,{path:_.icon,size:1}),e.jsx("span",{children:_.label})]},_.id))})}),e.jsx("div",{className:"tab-content-area",children:N()})]})};var ic=Object.defineProperty,lc=Object.defineProperties,oc=Object.getOwnPropertyDescriptors,ur=Object.getOwnPropertySymbols,cc=Object.prototype.hasOwnProperty,dc=Object.prototype.propertyIsEnumerable,mr=(r,t,s)=>t in r?ic(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,uc=(r,t)=>{for(var s in t||(t={}))cc.call(t,s)&&mr(r,s,t[s]);if(ur)for(var s of ur(t))dc.call(t,s)&&mr(r,s,t[s]);return r},mc=(r,t)=>lc(r,oc(t));const pc={id:"dental",name:"Dental Practice",description:"Statuses optimized for dental offices and clinics",category:"Specialty Care",statuses:[{name:"Pre-Procedure Ready",color:"#16a34a",icon:"check-circle",description:"Dental chair prepared, instruments sterilized, ready for patient",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Post-Procedure Cleaning",color:"#dc2626",icon:"broom",description:"Biohazard cleanup required after dental procedure",requiresVerification:!0,autoTransition:!1,alertLevel:"high"},{name:"Sterilization Cycle",color:"#ca8a04",icon:"progress-clock",description:"Instruments currently in autoclave sterilization cycle",requiresVerification:!1,autoTransition:!0,transitionTo:"Pre-Procedure Ready",alertLevel:"medium"},{name:"Patient in Chair",color:"#3b82f6",icon:"account",description:"Patient currently in dental chair, room occupied",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"X-Ray Room Ready",color:"#8b5cf6",icon:"radiology-box",description:"X-ray room prepared and ready for imaging",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Equipment Maintenance",color:"#ea580c",icon:"wrench",description:"Dental equipment under maintenance or repair",requiresVerification:!1,autoTransition:!1,alertLevel:"medium"}]},hc={id:"primary_care",name:"Primary Care",description:"Statuses for general practice and family medicine",category:"General Practice",statuses:[{name:"Patient Exam Room",color:"#3b82f6",icon:"account",description:"Patient currently in exam room for consultation",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Waiting for Labs",color:"#ca8a04",icon:"progress-clock",description:"Room waiting for lab results or test completion",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Vaccination Ready",color:"#16a34a",icon:"needle",description:"Vaccination station prepared and ready",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Chronic Care Visit",color:"#8b5cf6",icon:"account-clock",description:"Extended visit for chronic condition management",requiresVerification:!1,autoTransition:!1,alertLevel:"medium"},{name:"Wellness Check",color:"#059669",icon:"heart-pulse",description:"Routine physical examination in progress",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Follow-up Visit",color:"#3b82f6",icon:"calendar-check",description:"Follow-up appointment for previous condition",requiresVerification:!1,autoTransition:!1,alertLevel:"low"}]},gc={id:"private_surgery",name:"Private Surgery",description:"Statuses for surgical centers and operating rooms",category:"Surgical",statuses:[{name:"Pre-Op Ready",color:"#16a34a",icon:"check-circle",description:"Pre-operative room prepared for patient",requiresVerification:!0,autoTransition:!1,alertLevel:"medium"},{name:"Surgery in Progress",color:"#dc2626",icon:"scissors-cutting",description:"Active surgery currently in progress",requiresVerification:!1,autoTransition:!1,alertLevel:"critical"},{name:"Post-Op Recovery",color:"#3b82f6",icon:"bed",description:"Post-operative recovery room occupied",requiresVerification:!1,autoTransition:!1,alertLevel:"high"},{name:"Sterile Instruments",color:"#8b5cf6",icon:"package-variant",description:"Surgical instruments sterilized and ready",requiresVerification:!0,autoTransition:!1,alertLevel:"medium"},{name:"Anesthesia Ready",color:"#ca8a04",icon:"gas-cylinder",description:"Anesthesia equipment prepared and ready",requiresVerification:!0,autoTransition:!1,alertLevel:"high"},{name:"Surgical Suite Clean",color:"#16a34a",icon:"broom",description:"Surgical suite cleaned and sanitized post-procedure",requiresVerification:!0,autoTransition:!1,alertLevel:"medium"}]},xc={id:"emergency_room",name:"Emergency Room",description:"Statuses for emergency departments and urgent care",category:"Emergency",statuses:[{name:"Trauma Bay Ready",color:"#16a34a",icon:"ambulance",description:"Trauma bay prepared for emergency patient",requiresVerification:!1,autoTransition:!1,alertLevel:"critical"},{name:"Code Blue",color:"#dc2626",icon:"alert-circle",description:"Cardiac arrest or medical emergency in progress",requiresVerification:!1,autoTransition:!1,alertLevel:"critical"},{name:"Isolation Room",color:"#ea580c",icon:"shield-lock",description:"Isolation room for infectious disease patients",requiresVerification:!0,autoTransition:!1,alertLevel:"high"},{name:"Waiting for Specialist",color:"#ca8a04",icon:"account-clock",description:"Patient waiting for specialist consultation",requiresVerification:!1,autoTransition:!1,alertLevel:"medium"},{name:"Discharge Pending",color:"#8b5cf6",icon:"exit-to-app",description:"Patient ready for discharge, paperwork pending",requiresVerification:!1,autoTransition:!1,alertLevel:"low"}]},fc={id:"laboratory",name:"Laboratory",description:"Statuses for medical laboratories and testing facilities",category:"Diagnostic",statuses:[{name:"Sample Processing",color:"#ca8a04",icon:"test-tube",description:"Laboratory samples currently being processed",requiresVerification:!1,autoTransition:!1,alertLevel:"medium"},{name:"Equipment Calibration",color:"#ea580c",icon:"wrench",description:"Laboratory equipment under calibration",requiresVerification:!1,autoTransition:!1,alertLevel:"medium"},{name:"Quality Control",color:"#8b5cf6",icon:"clipboard-check",description:"Quality control testing in progress",requiresVerification:!0,autoTransition:!1,alertLevel:"high"},{name:"Results Ready",color:"#16a34a",icon:"file-document",description:"Test results completed and ready for review",requiresVerification:!1,autoTransition:!1,alertLevel:"low"},{name:"Hazardous Materials",color:"#dc2626",icon:"biohazard",description:"Hazardous materials handling in progress",requiresVerification:!0,autoTransition:!1,alertLevel:"critical"}]},Ca=[pc,hc,gc,xc,fc];function mt(r){return Ca.find(t=>t.id===r)}function pr(r){return r.statuses.map(t=>mc(uc({},t),{id:t.name.toLowerCase().replace(/\s+/g,"_"),isDefault:!1,isCore:!1,isPublished:!1}))}function bc(r,t){const s=[];for(const a of r.statuses)for(const n of t){if(a.name.toLowerCase()===n.name.toLowerCase()){s.push({bundleStatus:a.name,existingStatus:n.name,similarity:1});continue}const l=a.name.toLowerCase().split(/\s+/),o=n.name.toLowerCase().split(/\s+/),c=l.filter(i=>o.includes(i));if(c.length>0){const i=c.length/Math.max(l.length,o.length);i>=.5&&s.push({bundleStatus:a.name,existingStatus:n.name,similarity:i})}}return s.sort((a,n)=>n.similarity-a.similarity)}const yc=({rooms:r,onEditRoom:t,onDeleteRoom:s,onToggleActive:a})=>e.jsx("div",{className:"space-y-2",children:r.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:n.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[n.department," • ",n.floor]}),n.barcode&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Barcode: ",n.barcode]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>a(n.id,n.isActive),className:`px-3 py-1 text-sm rounded-md transition-colors ${n.isActive?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"}`,children:n.isActive?"Active":"Inactive"}),e.jsx("button",{onClick:()=>t(n),className:"p-1 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:e.jsx(v,{path:Ie,size:.8})}),e.jsx("button",{onClick:()=>s(n.id),className:"p-1 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:e.jsx(v,{path:Be,size:.8})})]})]},n.id))}),vc=()=>{const r=["OR001","ICU101","SUP001","ER001","LAB001","RAD001","PHY001","ADM001"];return r[Math.floor(Math.random()*r.length)]||"OR001"};var jc=Object.defineProperty,Nc=Object.defineProperties,_c=Object.getOwnPropertyDescriptors,hr=Object.getOwnPropertySymbols,Sc=Object.prototype.hasOwnProperty,Cc=Object.prototype.propertyIsEnumerable,gr=(r,t,s)=>t in r?jc(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,de=(r,t)=>{for(var s in t||(t={}))Sc.call(t,s)&&gr(r,s,t[s]);if(hr)for(var s of hr(t))Cc.call(t,s)&&gr(r,s,t[s]);return r},ue=(r,t)=>Nc(r,_c(t));const wc=({isOpen:r,onClose:t,room:s,mode:a,onSave:n})=>{const[l,o]=h.useState({name:"",department:"",floor:"",barcode:"",gpsCoordinates:null}),{getCurrentLocation:c,latitude:i,longitude:d,accuracy:u,isLoading:m}=Da(),g=["Surgery","Intensive Care","Emergency","Logistics","Administration","Laboratory"];h.useEffect(()=>{setTimeout(s&&a==="edit"?()=>{o({name:s.name||"",department:s.department||"",floor:s.floor||"",barcode:s.barcode||"",gpsCoordinates:s.gpsCoordinates||null})}:()=>{o({name:"",department:"",floor:"",barcode:"",gpsCoordinates:null})},0)},[s,a,r]),h.useEffect(()=>{i&&d&&setTimeout(()=>{o(p=>ue(de({},p),{gpsCoordinates:{latitude:i,longitude:d,accuracy:u||0,lastUpdated:new Date().toISOString()}}))},0)},[i,d,u]);const b=()=>{if(l.name&&l.department&&l.floor){const p=ue(de({},l),{gpsCoordinates:l.gpsCoordinates?ue(de({},l.gpsCoordinates),{lastUpdated:new Date().toISOString()}):void 0});n(p),t()}};return r?e.jsxs("div",{className:"mb-4 p-3 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"text-md font-medium mb-3",children:a==="add"?"Add New Room":"Edit Room"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"room-name",className:"block text-xs font-medium text-gray-700 mb-1",children:"Room Name"}),e.jsx("input",{id:"room-name",type:"text",value:l.name,onChange:p=>o(ue(de({},l),{name:p.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Operating Room 1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"room-barcode",className:"block text-xs font-medium text-gray-700 mb-1",children:"Barcode"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{id:"room-barcode",type:"text",value:l.barcode,onChange:p=>o(ue(de({},l),{barcode:p.target.value})),className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., OR001"}),e.jsxs("button",{type:"button",onClick:()=>o(ue(de({},l),{barcode:vc()})),className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors flex items-center gap-1 text-xs",title:"Generate random barcode",children:[e.jsx(v,{path:Gt,size:.6}),e.jsx("span",{children:"Gen"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"room-department",className:"block text-xs font-medium text-gray-700 mb-1",children:"Department"}),e.jsxs("select",{id:"room-department",value:l.department,onChange:p=>o(ue(de({},l),{department:p.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Department"}),g.map(p=>e.jsx("option",{value:p,children:p},p))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"room-floor",className:"block text-xs font-medium text-gray-700 mb-1",children:"Floor"}),e.jsx("input",{id:"room-floor",type:"text",value:l.floor,onChange:p=>o(ue(de({},l),{floor:p.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 2nd Floor"})]})]}),e.jsxs("div",{className:"mt-4 p-3 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-sm font-medium text-blue-800 flex items-center",children:[e.jsx(v,{path:os,size:.8,className:"mr-1"}),"GPS Coordinates (Optional)"]}),e.jsxs("button",{type:"button",onClick:c,disabled:m,className:"flex items-center px-3 py-1 bg-blue-600 text-white text-xs rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:[e.jsx(v,{path:os,size:.6,className:"mr-1"}),m?"Getting Location...":"Get Current Location"]})]}),l.gpsCoordinates?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm text-blue-700",children:[e.jsx("div",{className:"font-medium",children:"Current GPS Coordinates:"}),e.jsx("div",{className:"font-mono text-xs",children:Ra(l.gpsCoordinates)}),l.gpsCoordinates.accuracy&&e.jsxs("div",{className:"text-xs text-blue-600",children:["Accuracy: ±",Math.round(l.gpsCoordinates.accuracy),"m"]})]}),e.jsx("button",{type:"button",onClick:()=>o(p=>ue(de({},p),{gpsCoordinates:null})),className:"text-xs text-red-600 hover:text-red-800",children:"Remove GPS Coordinates"})]}):e.jsx("div",{className:"text-sm text-blue-600",children:`No GPS coordinates set. Click "Get Current Location" to capture the room's GPS coordinates. This will enable smart location detection for inventory items.`})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs("button",{onClick:b,className:"flex items-center px-3 py-1 bg-[#4ECDC4] text-white text-sm rounded-md hover:bg-[#38b2ac] transition-colors",children:[e.jsx(v,{path:a==="add"?ye:Ue,size:.8,className:"mr-1"}),a==="add"?"Add Room":"Update Room"]}),e.jsxs("button",{onClick:t,className:"flex items-center px-3 py-1 bg-gray-500 text-white text-sm rounded-md hover:bg-gray-600 transition-colors",children:[e.jsx(v,{path:je,size:.8,className:"mr-1"}),"Cancel"]})]})]}):null},Ec=({coreStatuses:r,customStatuses:t,onEditStatus:s,onDeleteStatus:a,onTogglePublishStatus:n,statusCountInfo:l})=>e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Core Status Types (Required)"}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:r.map(o=>e.jsxs("div",{className:"p-2 rounded-lg border bg-white border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-1",style:{backgroundColor:o.color}}),e.jsx("span",{className:"font-medium text-xs",children:o.name}),e.jsx(v,{path:la,size:.4,className:"text-gray-300 ml-1",title:"Core status - always available"})]}),e.jsx("span",{className:"px-1 py-0.5 bg-blue-100 text-blue-600 text-xs rounded",children:"Core"})]}),e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:o.description})]},o.id))}),e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Custom Status Types (Optional)"}),e.jsxs("div",{className:"relative ml-2 tooltip-container",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-bold cursor-help",children:"i"}),e.jsxs("div",{className:"tooltip-content",children:[e.jsx("div",{className:"mb-1 font-medium",children:"💡 Data Integrity Protection"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{children:"• Similar statuses (≥90% match) are blocked"}),e.jsx("div",{children:"• Very similar statuses (≥80% match) show warnings"}),e.jsx("div",{children:"• Smart suggestions help you choose better names"}),e.jsx("div",{children:"• All statuses start as drafts for testing"})]}),e.jsx("div",{className:"tooltip-arrow"})]})]})]}),l&&e.jsxs("div",{className:"text-xs text-gray-500",children:[l.custom,"/",l.maxCustom," custom statuses"]})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Custom statuses start as drafts. Click the eye icon to publish them and make them visible in the cleaning workflow."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-4",children:t.map(o=>e.jsxs("div",{className:`p-3 rounded-lg border ${o.isPublished?"bg-purple-100 border-purple-300":"bg-gray-100 border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:o.color}}),e.jsx("span",{className:"font-medium text-sm",children:o.name}),e.jsx("span",{className:`ml-2 px-1 py-0.5 text-xs rounded ${o.isPublished?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"}`,children:o.isPublished?"Published":"Draft"})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>s(o),className:"p-1 text-purple-600 hover:bg-purple-100 rounded",title:"Edit status",children:e.jsx(v,{path:Ie,size:.6})}),e.jsx("button",{onClick:()=>n(o.id,!o.isPublished),className:`p-1 rounded ${o.isPublished?"text-orange-600 hover:bg-orange-100":"text-green-600 hover:bg-green-100"}`,title:o.isPublished?"Unpublish status":"Publish status",children:e.jsx(v,{path:o.isPublished?Bt:Ut,size:.6})}),e.jsx("button",{onClick:()=>a(o.id),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete status",children:e.jsx(v,{path:Be,size:.6})})]})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:o.description}),e.jsxs("div",{className:"text-xs text-purple-600",children:[o.requiresVerification&&e.jsx("span",{className:"mr-2",children:"✓ Verification"}),o.autoTransition&&e.jsx("span",{className:"mr-2",children:"✓ Auto Transition"}),o.alertLevel&&o.alertLevel!=="low"&&e.jsxs("span",{className:"mr-2",children:["⚠ ",o.alertLevel]})]})]},o.id))})]}),Pc=({customStatuses:r,onLoadBundle:t,onReplaceWithBundle:s})=>{var a;const[n,l]=h.useState(""),[o,c]=h.useState(!1),[i,d]=h.useState([]),u=p=>{l(p);const f=mt(p);if(f){const N=bc(f,r);d(N),c(!0)}},m=()=>{t(n),l(""),c(!1),d([])},g=()=>{s(n),l(""),c(!1),d([])},b=()=>{l(""),c(!1),d([])};return e.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-green-800 mb-2",children:"🚀 Quick Setup: Pre-configured Status Bundles"}),e.jsx("p",{className:"text-xs text-green-700 mb-3",children:"Select a bundle to quickly add relevant statuses for your healthcare specialty. All statuses start as drafts."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 mb-3",children:Ca.map(p=>e.jsxs("button",{onClick:()=>u(p.id),className:`p-2 text-left rounded border transition-colors ${n===p.id?"bg-green-100 border-green-400 text-green-800":"bg-white border-green-200 hover:bg-green-50 text-green-700"}`,children:[e.jsx("div",{className:"font-medium text-xs",children:p.name}),e.jsx("div",{className:"text-xs opacity-75",children:p.description}),e.jsxs("div",{className:"text-xs opacity-60",children:[p.statuses.length," statuses"]})]},p.id))}),o&&n&&e.jsxs("div",{className:"mt-3 p-3 bg-white border border-green-300 rounded",children:[e.jsxs("h6",{className:"text-sm font-medium text-green-800 mb-2",children:["Bundle Preview: ",(a=mt(n))==null?void 0:a.name]}),i.length>0&&e.jsxs("div",{className:"mb-3 p-2 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsxs("p",{className:"text-xs text-yellow-800 mb-1",children:["⚠️ Found ",i.length," similar statuses:"]}),e.jsx("ul",{className:"text-xs text-yellow-700 space-y-1",children:i.slice(0,3).map((p,f)=>e.jsxs("li",{children:['• "',p.bundleStatus,'" similar to "',p.existingStatus,'"']},f))})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:m,className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700",children:"Add New Statuses Only"}),e.jsx("button",{onClick:g,className:"px-3 py-1 text-xs bg-orange-600 text-white rounded hover:bg-orange-700",children:"Replace All Custom Statuses"}),e.jsx("button",{onClick:b,className:"px-3 py-1 text-xs bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"})]})]})]})};var Tc=Object.defineProperty,Ac=Object.defineProperties,Ic=Object.getOwnPropertyDescriptors,xr=Object.getOwnPropertySymbols,Oc=Object.prototype.hasOwnProperty,Dc=Object.prototype.propertyIsEnumerable,fr=(r,t,s)=>t in r?Tc(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Rc=(r,t)=>{for(var s in t||(t={}))Oc.call(t,s)&&fr(r,s,t[s]);if(xr)for(var s of xr(t))Dc.call(t,s)&&fr(r,s,t[s]);return r},kc=(r,t)=>Ac(r,Ic(t)),$c=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const br=[{name:"check-circle",label:"Check Circle",path:"mdiCheckCircle"},{name:"exclamation-triangle",label:"Warning",path:"mdiExclamationTriangle"},{name:"pause-circle",label:"Pause",path:"mdiPauseCircle"},{name:"clock",label:"Clock",path:"mdiClock"},{name:"shield",label:"Shield",path:"mdiShield"},{name:"wrench",label:"Wrench",path:"mdiWrench"},{name:"heart",label:"Heart",path:"mdiHeart"},{name:"star",label:"Star",path:"mdiStar"},{name:"flag",label:"Flag",path:"mdiFlag"},{name:"home",label:"Home",path:"mdiHome"}],Lc=[{name:"Green",value:"#16a34a",bgClass:"bg-green-100",textClass:"text-green-600"},{name:"Red",value:"#dc2626",bgClass:"bg-red-100",textClass:"text-red-600"},{name:"Yellow",value:"#ca8a04",bgClass:"bg-yellow-100",textClass:"text-yellow-600"},{name:"Blue",value:"#3b82f6",bgClass:"bg-blue-100",textClass:"text-blue-600"},{name:"Purple",value:"#9333ea",bgClass:"bg-purple-100",textClass:"text-purple-600"},{name:"Orange",value:"#ea580c",bgClass:"bg-orange-100",textClass:"text-orange-600"},{name:"Gray",value:"#6b7280",bgClass:"bg-gray-100",textClass:"text-gray-600"},{name:"Pink",value:"#ec4899",bgClass:"bg-pink-100",textClass:"text-pink-600"}],Mc=({isOpen:r,onClose:t,onSave:s,existingStatuses:a})=>{var n;const[l,o]=h.useState({name:"",description:"",icon:"check-circle",color:"#16a34a"}),[c,i]=h.useState(!1),[d,u]=h.useState([]),m=(p,f)=>{o(N=>kc(Rc({},N),{[p]:f})),u([])},g=()=>{const p=[];return l.name.trim()||p.push("Status name is required"),l.name.trim().split(/\s+/).length>1&&p.push("Status name must be 1 word only"),l.name.trim().length<2&&p.push("Status name must be at least 2 characters"),l.name.trim().length>20&&p.push("Status name must be less than 20 characters"),a.map(_=>_.name.toLowerCase()).includes(l.name.toLowerCase())&&p.push("A status with this name already exists"),/^[a-zA-Z0-9]+$/.test(l.name.trim())||p.push("Status name can only contain letters and numbers"),u(p),p.length===0},b=()=>$c(null,null,function*(){if(g()){i(!0);try{yield s({name:l.name.trim(),description:l.description.trim()||`${l.name.trim()} status`,icon:l.icon,color:l.color,isDefault:!1,isCore:!1,isPublished:!0,category:"custom",requiresVerification:!1,autoTransition:!1,alertLevel:"low"}),o({name:"",description:"",icon:"check-circle",color:"#16a34a"}),t()}catch(p){console.error("Error saving status:",p),u(["Failed to save status. Please try again."])}finally{i(!1)}}});return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Custom Status"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:e.jsx(v,{path:je,size:1.2})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status Name *"}),e.jsx("input",{type:"text",value:l.name,onChange:p=>m("name",p.target.value),placeholder:"e.g., Clean, Dirty, Maintenance",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",maxLength:20}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"One word only, letters and numbers"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{value:l.description,onChange:p=>m("description",p.target.value),placeholder:"Brief description of this status",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",rows:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:br.map(p=>e.jsx("button",{onClick:()=>m("icon",p.name),className:`p-2 rounded-md border-2 transition-colors ${l.icon===p.name?"border-[#4ECDC4] bg-[#4ECDC4]/10":"border-gray-200 hover:border-gray-300"}`,title:p.label,children:e.jsx(v,{path:p.path,size:1,className:l.icon===p.name?"text-[#4ECDC4]":"text-gray-600"})},p.name))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:Lc.map(p=>e.jsx("button",{onClick:()=>m("color",p.value),className:`p-3 rounded-md border-2 transition-colors ${l.color===p.value?"border-gray-400":"border-gray-200 hover:border-gray-300"}`,title:p.name,children:e.jsx("div",{className:`w-full h-6 rounded ${p.bgClass} flex items-center justify-center`,children:e.jsx(v,{path:Ue,size:.8,className:p.textClass})})},p.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview"}),e.jsx("div",{className:"p-3 border border-gray-200 rounded-md bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center",style:{backgroundColor:`${l.color}20`},children:e.jsx(v,{path:((n=br.find(p=>p.name===l.icon))==null?void 0:n.path)||"mdiCheckCircle",size:.8,color:l.color})}),e.jsx("span",{className:"font-medium text-gray-800",children:l.name||"Status Name"})]})})]}),d.length>0&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:e.jsx("ul",{className:"text-sm text-red-600 space-y-1",children:d.map((p,f)=>e.jsxs("li",{children:["• ",p]},f))})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:b,disabled:c||!l.name.trim(),className:`px-4 py-2 rounded-md transition-colors ${c||!l.name.trim()?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-[#4ECDC4] text-white hover:bg-[#3db8b0]"}`,children:c?"Creating...":"Create Status"})]})]})]})}):null};var Fc=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const zc=()=>{const{rooms:r,addRoom:t,updateRoom:s,deleteRoom:a}=ka(),{getCoreStatusTypes:n,getCustomStatusTypes:l,addStatusType:o,deleteStatusType:c,publishStatusType:i,unpublishStatusType:d,getStatusCountInfo:u,canAddCustomStatus:m}=$a(),g=n(),b=l(),[p,f]=h.useState(!1),[N,_]=h.useState(null),[x,j]=h.useState(!1),[S,w]=h.useState(!1),[D,q]=h.useState(!1),$=I=>{t({name:I.name||"",department:I.department||"",floor:I.floor||"",barcode:I.barcode||"",isActive:!0}),f(!1)},G=I=>{N&&(s(N.id,I),_(null))},L=I=>{_(I)},P=()=>{f(!1),_(null)},M=(I,z)=>{s(I,{isActive:!z})},A=I=>{a(I)},C=()=>{},F=I=>{c(I)},R=(I,z)=>{z?i(I):d(I)},k=I=>Fc(null,null,function*(){try{yield o(I),q(!1)}catch(z){throw console.error("Error creating status:",z),z}}),Z=I=>{const z=mt(I);if(!z)return;const W=pr(z),ee=b.map(ke=>ke.name.toLowerCase());W.filter(ke=>!ee.includes(ke.name.toLowerCase())).forEach(ke=>{o(ke)})},_e=I=>{const z=mt(I);if(!z)return;b.forEach(ee=>{c(ee.id)}),pr(z).forEach(ee=>{o(ee)})};return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>j(!x),className:"flex items-center text-xl font-semibold text-gray-800 hover:text-gray-600 transition-colors",children:[e.jsx(v,{path:x?Jt:es,size:1.2,className:"mr-2"}),"Room Management",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",r.filter(I=>I.isActive).length," active)"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>w(!S),className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[e.jsx(v,{path:J,size:1,className:"mr-2"}),"Status Types"]}),e.jsxs("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors",children:[e.jsx(v,{path:ye,size:1,className:"mr-2"}),"Add Room"]})]})]}),S&&e.jsxs("div",{className:"mb-6 p-4 border border-purple-200 rounded-lg bg-purple-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-purple-800",children:"Custom Status Types"}),e.jsx("div",{className:"text-sm text-purple-600 mt-1",children:(()=>{const I=u();return`${I.custom}/${I.maxCustom} custom statuses used (${I.total}/8 total)`})()})]}),e.jsxs("button",{onClick:()=>q(!0),disabled:!m(),className:`flex items-center px-3 py-1 rounded-md transition-colors text-sm ${m()?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:m()?"Add a new custom status":"Maximum of 4 custom statuses reached",children:[e.jsx(v,{path:ye,size:.8,className:"mr-1"}),"Add Custom Status"]})]}),e.jsx(Pc,{customStatuses:b,onLoadBundle:Z,onReplaceWithBundle:_e}),e.jsx(Ec,{coreStatuses:g,customStatuses:b,onEditStatus:C,onDeleteStatus:F,onTogglePublishStatus:R,statusCountInfo:u()})]}),e.jsx(wc,{isOpen:p||!!N,onClose:P,room:N,mode:p?"add":"edit",onSave:p?$:G}),x&&e.jsx(yc,{rooms:r,onEditRoom:L,onDeleteRoom:A,onToggleActive:M}),e.jsx(Mc,{isOpen:D,onClose:()=>q(!1),onSave:k,existingStatuses:[...g,...b]})]})},qc={title:"",category:"setup",autoSchedule:!1,scheduleFrequency:"weekly",scheduleDay:"monday",scheduleTime:"09:00",schedulePriority:"medium",schedulePoints:50,scheduleDuration:30,triggerRoomStatus:!1,triggerStaffSchedule:!1,triggerAdminDecision:!1};var Vc=Object.defineProperty,Gc=Object.defineProperties,Bc=Object.getOwnPropertyDescriptors,yr=Object.getOwnPropertySymbols,Uc=Object.prototype.hasOwnProperty,Hc=Object.prototype.propertyIsEnumerable,vr=(r,t,s)=>t in r?Vc(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Yc=(r,t)=>{for(var s in t||(t={}))Uc.call(t,s)&&vr(r,s,t[s]);if(yr)for(var s of yr(t))Hc.call(t,s)&&vr(r,s,t[s]);return r},Wc=(r,t)=>Gc(r,Bc(t)),jr=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Kc=(r,t)=>{const[s,a]=h.useState(qc),[n,l]=h.useState(!1),[o,c]=h.useState(!1),[i,d]=h.useState([]);h.useEffect(()=>{r?a({title:r.title,category:r.category,autoSchedule:r.autoSchedule||!1,scheduleFrequency:r.scheduleFrequency||"weekly",scheduleDay:r.scheduleDay||"monday",scheduleTime:r.scheduleTime||"09:00",schedulePriority:r.schedulePriority||"medium",schedulePoints:r.schedulePoints||50,scheduleDuration:r.scheduleDuration||30,triggerRoomStatus:r.triggerRoomStatus||!1,triggerStaffSchedule:r.triggerStaffSchedule||!1,triggerAdminDecision:r.triggerAdminDecision||!1}):t&&a({title:"",category:"setup",autoSchedule:!1,scheduleFrequency:"weekly",scheduleDay:"monday",scheduleTime:"09:00",schedulePriority:"medium",schedulePoints:50,scheduleDuration:30,triggerRoomStatus:!1,triggerStaffSchedule:!1,triggerAdminDecision:!1})},[r,t]);const u=()=>jr(null,null,function*(){c(!0);try{try{const p=yield Kt.askAI(`Generate 8 checklist title suggestions for the ${s.category} category. Each title should be descriptive and follow healthcare facility naming conventions.`,`Category: ${s.category}`),f=g(p);d(f),l(!0)}catch(p){console.warn("AI service failed, using fallback suggestions:",p);const f=yield b(s.category);d(f),l(!0)}}catch(p){console.error("Error generating AI suggestions:",p);const f=yield b(s.category);d(f),l(!0)}finally{c(!1)}}),m=p=>{a(f=>Wc(Yc({},f),{title:p})),l(!1)},g=p=>{try{const f=p.match(/\[[\s\S]*\]/);if(f){const x=JSON.parse(f[0]);if(Array.isArray(x))return x.map(j=>typeof j=="string"?j:j.title||j.name||j.suggestion||"Untitled Checklist")}const N=p.split(`
`).filter(x=>x.trim()),_=[];for(const x of N)if(x.match(/^\d+\./)){const j=x.replace(/^\d+\.\s*/,"").trim();j&&_.push(j)}else x.trim()&&!x.toLowerCase().includes("category")&&!x.toLowerCase().includes("suggestions")&&_.push(x.trim());return _.length>0?_:["AI-generated checklist","Custom checklist","Professional checklist"]}catch(f){return console.error("Error parsing AI response:",f),["AI-generated checklist","Custom checklist","Professional checklist"]}},b=p=>jr(null,null,function*(){return yield new Promise(N=>setTimeout(N,1e3)),{setup:["Treatment Room Setup Checklist","Surgical Suite Preparation","Examination Room Setup","Emergency Room Preparation","Laboratory Setup Protocol","Radiology Room Setup","Pharmacy Setup Checklist","Reception Area Setup"],patient:["Patient Room Cleaning Protocol","Isolation Room Procedures","Post-Procedure Room Cleanup","Patient Equipment Sanitization","Bedside Supply Restocking","Patient Safety Equipment Check","Infection Control Protocol","Patient Comfort Items Setup"],weekly:["Weekly Deep Cleaning Protocol","Equipment Maintenance Schedule","Supply Inventory Audit","Safety Equipment Inspection","Emergency Equipment Check","Compliance Documentation Review","Staff Training Verification","Quality Assurance Audit"],public:["Waiting Room Maintenance","Lobby Cleaning Protocol","Restroom Sanitization","Common Area Disinfection","Public Equipment Cleaning","Visitor Area Maintenance","Cafeteria Cleaning Protocol","Parking Area Maintenance"],deep:["Post-Contamination Deep Clean","Equipment Sterilization Protocol","Ventilation System Cleaning","Structural Disinfection","Biohazard Cleanup Protocol","Emergency Response Cleanup","Infection Outbreak Response","Facility-Wide Sanitization"]}[p]||[]});return{checklistFormData:s,showAIChecklistSuggestions:n,isGeneratingSuggestions:o,aiChecklistSuggestions:i,setChecklistFormData:a,setShowAIChecklistSuggestions:l,generateAIChecklistSuggestions:u,applyAIChecklistSuggestion:m}},Qc=[{id:"setup",title:"Setup/Take Down",icon:ca,color:"#FF6B6B"},{id:"patient",title:"Per Patient",icon:da,color:"#4ECDC4"},{id:"weekly",title:"Weekly",icon:ua,color:"#45B7D1"},{id:"public",title:"Public Spaces",icon:ma,color:"#96CEB4"},{id:"deep",title:"Deep Clean",icon:qe,color:"#FF9F1C"}];var Zc=Object.defineProperty,Xc=Object.defineProperties,Jc=Object.getOwnPropertyDescriptors,Nr=Object.getOwnPropertySymbols,ed=Object.prototype.hasOwnProperty,td=Object.prototype.propertyIsEnumerable,_r=(r,t,s)=>t in r?Zc(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Sr=(r,t)=>{for(var s in t||(t={}))ed.call(t,s)&&_r(r,s,t[s]);if(Nr)for(var s of Nr(t))td.call(t,s)&&_r(r,s,t[s]);return r},Cr=(r,t)=>Xc(r,Jc(t));const sd=({checklistFormData:r,setChecklistFormData:t,showAIChecklistSuggestions:s,isGeneratingSuggestions:a,aiChecklistSuggestions:n,onGenerateAISuggestions:l,onApplyAISuggestion:o,onCloseAISuggestions:c})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"checklist-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Checklist Title"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{id:"checklist-title",type:"text",value:r.title,onChange:i=>t(Cr(Sr({},r),{title:i.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",placeholder:"e.g., Treatment Room Setup"}),e.jsxs("button",{onClick:l,disabled:a,className:"flex items-center px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:bg-gray-400 transition-colors",title:"Get AI suggestions for checklist titles",children:[e.jsx(v,{path:Wa,size:.8,className:"mr-1"}),a?"...":"AI"]})]}),s&&e.jsxs("div",{className:"mt-3 p-3 border border-purple-200 rounded-lg bg-purple-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h5",{className:"text-sm font-medium text-purple-800 flex items-center",children:[e.jsx(v,{path:Ve,size:.8,className:"mr-1"}),"AI Suggestions"]}),e.jsx("button",{onClick:c,className:"text-purple-600 hover:text-purple-800",children:e.jsx(v,{path:je,size:.8})})]}),e.jsx("div",{className:"space-y-2",children:n.map((i,d)=>e.jsx("button",{onClick:()=>o(i),className:"w-full text-left p-2 text-sm text-purple-700 hover:bg-purple-100 rounded-md transition-colors",children:i},d))})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"checklist-category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsx("select",{id:"checklist-category",value:r.category,onChange:i=>t(Cr(Sr({},r),{category:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:Qc.map(i=>e.jsx("option",{value:i.id,children:i.title},i.id))})]})]});var rd=Object.defineProperty,ad=Object.defineProperties,nd=Object.getOwnPropertyDescriptors,wr=Object.getOwnPropertySymbols,id=Object.prototype.hasOwnProperty,ld=Object.prototype.propertyIsEnumerable,Er=(r,t,s)=>t in r?rd(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,ae=(r,t)=>{for(var s in t||(t={}))id.call(t,s)&&Er(r,s,t[s]);if(wr)for(var s of wr(t))ld.call(t,s)&&Er(r,s,t[s]);return r},ne=(r,t)=>ad(r,nd(t));const od=({checklistFormData:r,setChecklistFormData:t})=>e.jsxs("div",{className:"mt-6 p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-md font-medium text-blue-800 flex items-center",children:[e.jsx(v,{path:ot,size:1,className:"mr-2"}),"Scheduling Configuration"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.autoSchedule||!1,onChange:s=>t(ne(ae({},r),{autoSchedule:s.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm text-blue-700",children:"Enable Auto-Scheduling"})]})]}),r.autoSchedule&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schedule-frequency",className:"block text-sm font-medium text-blue-700 mb-1",children:"Frequency"}),e.jsxs("select",{id:"schedule-frequency",value:r.scheduleFrequency||"weekly",onChange:s=>t(ne(ae({},r),{scheduleFrequency:s.target.value})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"per_patient",children:"Per Patient"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"bi_weekly",children:"Bi-Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),(r.scheduleFrequency==="weekly"||r.scheduleFrequency==="bi_weekly"||r.scheduleFrequency==="monthly")&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schedule-day",className:"block text-sm font-medium text-blue-700 mb-1",children:"Schedule Day"}),e.jsxs("select",{id:"schedule-day",value:r.scheduleDay||"monday",onChange:s=>t(ne(ae({},r),{scheduleDay:s.target.value})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"monday",children:"Monday"}),e.jsx("option",{value:"tuesday",children:"Tuesday"}),e.jsx("option",{value:"wednesday",children:"Wednesday"}),e.jsx("option",{value:"thursday",children:"Thursday"}),e.jsx("option",{value:"friday",children:"Friday"}),e.jsx("option",{value:"saturday",children:"Saturday"}),e.jsx("option",{value:"sunday",children:"Sunday"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schedule-time",className:"block text-sm font-medium text-blue-700 mb-1",children:"Schedule Time"}),e.jsx("input",{id:"schedule-time",type:"time",value:r.scheduleTime||"09:00",onChange:s=>t(ne(ae({},r),{scheduleTime:s.target.value})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schedule-priority",className:"block text-sm font-medium text-blue-700 mb-1",children:"Priority"}),e.jsxs("select",{id:"schedule-priority",value:r.schedulePriority||"medium",onChange:s=>t(ne(ae({},r),{schedulePriority:s.target.value})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schedule-points",className:"block text-sm font-medium text-blue-700 mb-1",children:"Points"}),e.jsx("input",{id:"schedule-points",type:"number",value:r.schedulePoints||50,onChange:s=>t(ne(ae({},r),{schedulePoints:parseInt(s.target.value)})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schedule-duration",className:"block text-sm font-medium text-blue-700 mb-1",children:"Duration (minutes)"}),e.jsx("input",{id:"schedule-duration",type:"number",value:r.scheduleDuration||30,onChange:s=>t(ne(ae({},r),{scheduleDuration:parseInt(s.target.value)})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-700 mb-2",children:"Trigger Conditions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.triggerRoomStatus||!1,onChange:s=>t(ne(ae({},r),{triggerRoomStatus:s.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm text-blue-700",children:"Trigger on room status change"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.triggerStaffSchedule||!1,onChange:s=>t(ne(ae({},r),{triggerStaffSchedule:s.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm text-blue-700",children:"Trigger based on staff availability"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.triggerAdminDecision||!1,onChange:s=>t(ne(ae({},r),{triggerAdminDecision:s.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm text-blue-700",children:"Require admin approval"})]})]})]})]})]}),cd=({selectedChecklist:r,onSaveDraft:t,onPublish:s,isValid:a=!0})=>e.jsxs("div",{className:"flex justify-end mt-4 space-x-3",children:[e.jsxs("button",{onClick:t,disabled:!a,className:`flex items-center px-6 py-2 rounded-lg font-semibold text-lg ${a?"bg-gray-500 text-white hover:bg-gray-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(v,{path:Ue,size:1,className:"mr-2"}),"Save Draft"]}),r&&e.jsxs("button",{onClick:s,disabled:!a,className:`flex items-center px-6 py-2 rounded-lg font-semibold text-lg ${a?"bg-[#4ECDC4] text-white hover:bg-[#3db8b0]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(v,{path:Ue,size:1,className:"mr-2"}),"Publish"]})]}),dd=({selectedChecklist:r,isAddingChecklist:t,onSaveDraft:s,onPublish:a})=>{const{checklistFormData:n,showAIChecklistSuggestions:l,isGeneratingSuggestions:o,aiChecklistSuggestions:c,setChecklistFormData:i,setShowAIChecklistSuggestions:d,generateAIChecklistSuggestions:u,applyAIChecklistSuggestion:m}=Kc(r,t),g=()=>{n.title&&n.category&&s(n)},b=()=>{n.title&&n.category&&(s(n),a())},p=n.title.trim()!==""&&n.category!==null;return e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsx("h4",{className:"text-md font-medium mb-3",children:"Checklist Details"}),e.jsx(sd,{checklistFormData:n,setChecklistFormData:i,showAIChecklistSuggestions:l,isGeneratingSuggestions:o,aiChecklistSuggestions:c,onGenerateAISuggestions:u,onApplyAISuggestion:m,onCloseAISuggestions:()=>d(!1)}),e.jsx(od,{checklistFormData:n,setChecklistFormData:i}),e.jsx(cd,{selectedChecklist:r,onSaveDraft:g,onPublish:b,isValid:p})]})},ud=[{id:"setup",title:"Setup/Take Down",icon:ca,color:"#FF6B6B"},{id:"patient",title:"Per Patient",icon:da,color:"#4ECDC4"},{id:"weekly",title:"Weekly",icon:ua,color:"#45B7D1"},{id:"public",title:"Public Spaces",icon:ma,color:"#96CEB4"},{id:"deep",title:"Deep Clean",icon:qe,color:"#FF9F1C"}],md=({checklists:r,onEditChecklist:t,onDeleteChecklist:s})=>{const[a,n]=h.useState(new Set(["setup"])),l=o=>{n(c=>{const i=new Set(c);return i.has(o)?i.delete(o):i.add(o),i})};return e.jsx("div",{className:"space-y-6",children:ud.map(o=>{const c=r.filter(m=>m.category===o.id),i=c.filter(m=>m.status==="published"),d=c.filter(m=>m.status==="draft"),u=a.has(o.id);return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("button",{onClick:()=>l(o.id),className:"flex items-center w-full text-left hover:bg-gray-50 p-2 -m-2 rounded-md transition-colors",children:[e.jsx(v,{path:o.icon,size:1.2,color:o.color,className:"mr-2"}),e.jsx("h3",{className:"text-lg font-medium text-gray-800",children:o.title}),e.jsxs("span",{className:"ml-2 px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:[i.length," published, ",d.length," ","draft"]}),e.jsx(v,{path:u?Jt:es,size:1,className:"ml-auto text-gray-400"})]}),u&&e.jsx(e.Fragment,{children:c.length===0?e.jsx("p",{className:"text-gray-500 text-sm italic mt-4",children:"No checklists created yet."}):e.jsxs("div",{className:"space-y-3 mt-4",children:[i.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Published Checklists"}),i.map(m=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:m.title}),e.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[m.items.length," item",m.items.length!==1?"s":""]}),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${m.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:m.status==="published"?"Published":"Draft"}),m.autoSchedule&&e.jsxs("span",{className:"ml-2 px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full flex items-center",children:[e.jsx(v,{path:ot,size:.7,className:"mr-1"}),"Auto-Scheduled"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>t(m),className:"px-3 py-1 text-sm text-[#4ECDC4] hover:bg-[#4ECDC4] hover:text-white rounded-md transition-colors",children:"Edit & Manage"}),e.jsx("button",{onClick:()=>s(m.id),className:"p-1 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:e.jsx(v,{path:Be,size:.8})})]})]})},m.id))]}),d.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Draft Checklists"}),d.map(m=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:m.title}),e.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[m.items.length," item",m.items.length!==1?"s":""]}),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${m.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:m.status==="published"?"Published":"Draft"}),m.autoSchedule&&e.jsxs("span",{className:"ml-2 px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full flex items-center",children:[e.jsx(v,{path:ot,size:.7,className:"mr-1"}),"Auto-Scheduled"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>t(m),className:"px-3 py-1 text-sm text-[#4ECDC4] hover:bg-[#4ECDC4] hover:text-white rounded-md transition-colors",children:"Edit & Manage"}),e.jsx("button",{onClick:()=>s(m.id),className:"p-1 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:e.jsx(v,{path:Be,size:.8})})]})]})},m.id))]})]})})]},o.id)})})},pd=r=>{const t=r.data&&typeof r.data=="object"&&r.data!==null?r.data.expiration:null;if(!t&&!r.expiryDate)return null;const s=new Date(String(t||r.expiryDate||"")),a=new Date,n=new Date;return n.setDate(a.getDate()+30),s<a?{status:"expired",color:"text-red-600",bgColor:"bg-red-50"}:s<=n?{status:"expiring-soon",color:"text-orange-600",bgColor:"bg-orange-50"}:{status:"valid",color:"text-green-600",bgColor:"bg-green-50"}},hd=r=>new Date(r).toLocaleDateString(),Dt=(r,t)=>({searchQuery:r.trim()||void 0,category:t.category||void 0,manufacturer:t.manufacturer||void 0,supplier:t.supplier||void 0,reorder_point:t.reorder_point?parseInt(t.reorder_point):void 0,expiryDate:t.expiryDate||void 0,sortBy:t.sortBy,sortDirection:t.sortDirection}),Pr=()=>({category:"",location:"",status:"",manufacturer:"",supplier:"",reorder_point:"",expiryDate:"",sortBy:"name",sortDirection:"asc"});var X=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Rt=()=>X(null,null,function*(){return yield pt.getCurrentFacilityId()}),kt=(r,t=0)=>typeof r=="number"&&!isNaN(r)?r:t,Tr=(r,t="Unknown")=>typeof r=="string"&&r.trim()!==""?r:t,$t=r=>r instanceof Error?r.message:typeof r=="string"?r:"An unknown error occurred";class Pe{static getItemsFromSupabase(t,s){return X(this,null,function*(){try{const a=s||(yield Rt()),n=bt(a),l=fe.getFilterSummary(t);if(!fe.validateFilters(t))throw new Error("Invalid filter parameters");const o=yield fe.applyFiltersToTable(n,"inventory_items",t),{data:c,error:i,count:d}=yield o.eq("facility_id",a).order("created_at",{ascending:!1});if(i)throw console.error("Error fetching items from Supabase:",i),i;return{data:(c==null?void 0:c.map(m=>un.transformFromSupabase(m)))||[],error:null,count:d||0}}catch(a){throw console.error("Failed to fetch items from Supabase:",a),a}})}static getItemByIdFromSupabase(t){return X(this,null,function*(){try{return yield as.getItemById(t)}catch(s){return console.error("Error fetching item by ID:",s),null}})}static createItemInSupabase(t){return X(this,null,function*(){try{const{createItem:s}=yield yt(()=>import("./main-FsBT3Y_8.js").then(n=>n.a0),__vite__mapDeps([0,1,2,3,4,5,6,7]));return yield s(t)}catch(s){throw console.error("Error creating item:",s),new Error(`Failed to create item: ${$t(s)}`)}})}static updateItemInSupabase(t,s){return X(this,null,function*(){try{const{updateItem:a}=yield yt(()=>import("./main-FsBT3Y_8.js").then(l=>l.a0),__vite__mapDeps([0,1,2,3,4,5,6,7]));return yield a(t,s)}catch(a){throw console.error("Error updating item:",a),new Error(`Failed to update item: ${$t(a)}`)}})}static deleteItemFromSupabase(t){return X(this,null,function*(){try{const{deleteItem:s}=yield yt(()=>import("./main-FsBT3Y_8.js").then(a=>a.a0),__vite__mapDeps([0,1,2,3,4,5,6,7]));yield s(t)}catch(s){throw new Error(`Failed to delete item: ${$t(s)}`)}})}static getCategories(t){return X(this,null,function*(){try{const s=t||(yield Rt()),a=bt(s),l=yield(yield fe.applyFiltersToCategories(a,"inventory_items")).eq("facility_id",s);if(!l)throw console.error("❌ Error fetching categories"),new Error("Failed to fetch categories");return fe.extractUniqueValues(l.data,"category").sort()}catch(s){return console.error("Error fetching categories:",s),[]}})}static getCategoriesFromSupabase(){return X(this,null,function*(){return this.getCategories()})}static getLocations(t){return X(this,null,function*(){try{const s=t||(yield Rt()),a=bt(s),l=yield(yield fe.applyFiltersToLocations(a,"inventory_items")).eq("facility_id",s);if(!l)throw console.error("❌ Error fetching locations"),new Error("Failed to fetch locations");return fe.extractUniqueValues(l.data,"location").sort()}catch(s){return console.error("Error fetching locations:",s),[]}})}static getLocationsFromSupabase(){return X(this,null,function*(){return this.getLocations()})}static getInventoryStatsFromSupabase(){return X(this,null,function*(){try{const t=yield as.getItems(),s=t.length,a=t.filter(o=>o.status==="active").length,n=t.reduce((o,c)=>o+kt(c.unit_cost),0),l={};return t.forEach(o=>{const c=Tr(o.category);l[c]=(l[c]||0)+1}),{totalItems:s,activeItems:a,totalValue:n,categories:l}}catch(t){return console.error("Error fetching inventory stats:",t),{totalItems:0,activeItems:0,totalValue:0,categories:{}}}})}static calculateTotalValue(t){try{return t.reduce((a,n)=>{const l=kt(n.unit_cost),o=kt(n.quantity,1);return a+l*o},0)}catch(s){return console.error("Error calculating total value:",s),0}}static getCategoryBreakdown(t){try{const s={};return t.forEach(a=>{const n=Tr(a.category);s[n]=(s[n]||0)+1}),s}catch(s){return console.error("Error calculating category breakdown:",s),{}}}}var gd=Object.defineProperty,xd=Object.defineProperties,fd=Object.getOwnPropertyDescriptors,Ar=Object.getOwnPropertySymbols,bd=Object.prototype.hasOwnProperty,yd=Object.prototype.propertyIsEnumerable,Ir=(r,t,s)=>t in r?gd(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Or=(r,t)=>{for(var s in t||(t={}))bd.call(t,s)&&Ir(r,s,t[s]);if(Ar)for(var s of Ar(t))yd.call(t,s)&&Ir(r,s,t[s]);return r},vd=(r,t)=>xd(r,fd(t)),Te=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});class jd{searchInventoryItems(t){return Te(this,null,function*(){try{const s=vd(Or(Or({search:t.searchQuery,category:t.category},t.manufacturer&&{search:`${t.searchQuery||""} ${t.manufacturer}`.trim()}),t.supplier&&{search:`${t.searchQuery||""} ${t.supplier}`.trim()}),{minQuantity:t.reorder_point}),a=yield Pe.getItemsFromSupabase(s);if(a.error)return console.error("Error fetching inventory items:",a.error),[];let n=a.data||[];if(t.manufacturer&&!t.searchQuery&&(n=n.filter(l=>(l.data&&typeof l.data=="object"&&l.data!==null?l.data.manufacturer:null)===t.manufacturer)),t.supplier&&!t.searchQuery&&(n=n.filter(l=>(l.data&&typeof l.data=="object"&&l.data!==null?l.data.supplier:null)===t.supplier)),t.expiryDate){const l=new Date,o=new Date;o.setDate(l.getDate()+30),n=n.filter(c=>{const i=c.data&&typeof c.data=="object"&&c.data!==null?c.data.expiration:null;if(!i&&!c.expiration_date)return!1;const d=new Date(String(i||c.expiration_date||""));switch(t.expiryDate){case"expired":return d<l;case"expiring-soon":return d>=l&&d<=o;case"valid":return d>o;default:return!0}})}return t.sortBy&&n.sort((l,o)=>{let c,i;switch(t.sortBy){case"name":c=l.name||"",i=o.name||"";break;case"category":c=l.category||"",i=o.category||"";break;case"quantity":c=l.quantity||0,i=o.quantity||0;break;case"expiration":{const d=l.data&&typeof l.data=="object"&&l.data!==null?l.data.expiration:null,u=o.data&&typeof o.data=="object"&&o.data!==null?o.data.expiration:null;c=new Date(String(d||l.expiration_date||"")),i=new Date(String(u||o.expiration_date||""));break}case"unit_cost":c=l.unit_cost||0,i=o.unit_cost||0;break;default:return 0}return t.sortDirection==="desc"?c>i?-1:c<i?1:0:c<i?-1:c>i?1:0}),n}catch(s){return console.error("Error in searchInventoryItems:",s),[]}})}getCategories(){return Te(this,null,function*(){try{const t=yield Pe.getItemsFromSupabase();return t.error?(console.error("Error fetching categories:",t.error),[]):Array.from(new Set((t.data||[]).map(a=>a.category).filter(a=>!!a))).sort()}catch(t){return console.error("Error in getCategories:",t),[]}})}getManufacturers(){return Te(this,null,function*(){try{const t=yield Pe.getItemsFromSupabase();return t.error?(console.error("Error fetching manufacturers:",t.error),[]):Array.from(new Set((t.data||[]).map(a=>a.data&&typeof a.data=="object"&&a.data!==null?a.data.manufacturer:null).filter(a=>!!a))).sort()}catch(t){return console.error("Error in getManufacturers:",t),[]}})}getSuppliers(){return Te(this,null,function*(){try{const t=yield Pe.getItemsFromSupabase();return t.error?(console.error("Error fetching suppliers:",t.error),[]):Array.from(new Set((t.data||[]).map(a=>a.data&&typeof a.data=="object"&&a.data!==null?a.data.supplier:null).filter(a=>!!a))).sort()}catch(t){return console.error("Error in getSuppliers:",t),[]}})}getLocations(){return Te(this,null,function*(){try{const t=yield Pe.getItemsFromSupabase();return t.error?(console.error("Error fetching locations:",t.error),[]):Array.from(new Set((t.data||[]).map(a=>a.location).filter(a=>!!a))).sort()}catch(t){return console.error("Error in getLocations:",t),[]}})}getStatuses(){return Te(this,null,function*(){try{const t=yield Pe.getItemsFromSupabase();return t.error?(console.error("Error fetching statuses:",t.error),[]):Array.from(new Set((t.data||[]).map(a=>a.status).filter(a=>!!a))).sort()}catch(t){return console.error("Error in getStatuses:",t),[]}})}}const be=new jd;var Lt=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Nd=()=>{const[r,t]=h.useState([]),[s,a]=h.useState(!1),[n,l]=h.useState(null),[o,c]=h.useState([]),[i,d]=h.useState([]),[u,m]=h.useState([]),[g,b]=h.useState([]),[p,f]=h.useState([]);h.useEffect(()=>{Lt(null,null,function*(){try{const[j,S,w,D,q]=yield Promise.all([be.getCategories(),be.getLocations(),be.getStatuses(),be.getManufacturers(),be.getSuppliers()]);c(j),d(S),m(w),b(D),f(q)}catch(j){l(j instanceof Error?j.message:"Failed to load filter options")}})},[]);const N=h.useCallback(x=>Lt(null,null,function*(){a(!0),l(null);try{const j=yield be.searchInventoryItems(x);t(j)}catch(j){l(j instanceof Error?j.message:"Failed to search inventory")}finally{a(!1)}}),[]),_=h.useCallback(()=>Lt(null,null,function*(){a(!0),l(null);try{const x=yield be.searchInventoryItems({});t(x)}catch(x){l(x instanceof Error?x.message:"Failed to clear search")}finally{a(!1)}}),[]);return{inventoryItems:r,isLoading:s,error:n,categories:o,locations:i,statuses:u,manufacturers:g,suppliers:p,searchInventory:N,clearSearch:_}},_d=({isOpen:r,selectedItems:t=[],onSelectItems:s,onClose:a})=>{const{inventoryItems:n,isLoading:l,error:o,categories:c,locations:i,statuses:d,searchInventory:u,clearSearch:m}=Nd(),[g,b]=h.useState(""),[p,f]=h.useState(!1),[N,_]=h.useState(Pr()),[x,j]=h.useState(t);return h.useEffect(()=>{if(!r)return;const $=setTimeout(()=>{if(g.trim()||Object.values(N).some(G=>G!=="")){const G=Dt(g,N);u(G)}},300);return()=>clearTimeout($)},[g,N,r,u]),h.useEffect(()=>{if(r){m(),j(t);const $=Dt(g,N);u($)}},[r,t,m,u,g,N]),h.useEffect(()=>{j(t)},[t]),{searchQuery:g,showFilters:p,filters:N,localSelectedItems:x,inventoryItems:n,isLoading:l,error:o,categories:c,locations:i,statuses:d,setSearchQuery:b,setShowFilters:f,setFilters:_,handleClearFilters:()=>{_(Pr()),b(""),m().then(()=>{setTimeout(()=>{u({})},100)})},handleItemToggle:$=>{const G=x.some(L=>L.id===$.id);j(G?L=>L.filter(P=>P.id!==$.id):L=>[...L,$])},handleConfirmSelection:()=>{s(x),a()},handleSearch:()=>{const $=Dt(g,N);u($)}}},Sd=({onClose:r})=>e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Search Inventory Items"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Select items for your checklist with advanced filtering"})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(v,{path:je,size:1.5})})]}),Cd=({searchQuery:r,onSearchChange:t,onSearch:s})=>{const a=n=>{n.key==="Enter"&&s()};return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(v,{path:Ka,size:1,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search items...",value:r,onChange:n=>t(n.target.value),onKeyPress:a,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]"})]}),e.jsx("button",{onClick:s,className:"w-full mt-2 px-4 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3db8b0] transition-colors",children:"Search"})]})};var wd=Object.defineProperty,Ed=Object.defineProperties,Pd=Object.getOwnPropertyDescriptors,Dr=Object.getOwnPropertySymbols,Td=Object.prototype.hasOwnProperty,Ad=Object.prototype.propertyIsEnumerable,Rr=(r,t,s)=>t in r?wd(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Id=(r,t)=>{for(var s in t||(t={}))Td.call(t,s)&&Rr(r,s,t[s]);if(Dr)for(var s of Dr(t))Ad.call(t,s)&&Rr(r,s,t[s]);return r},Od=(r,t)=>Ed(r,Pd(t));const Dd=({filters:r,onFiltersChange:t,onClearFilters:s,categories:a,showFilters:n,onToggleFilters:l})=>{const o=(c,i)=>{t(Od(Id({},r),{[c]:i}))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("button",{onClick:l,className:"flex items-center space-x-2 text-gray-700 hover:text-gray-900",children:[e.jsx(v,{path:Qa,size:1}),e.jsx("span",{children:"Filters"}),e.jsx(v,{path:Za,size:1,className:`transform transition-transform ${n?"rotate-180":""}`})]})}),e.jsx(Ea,{children:n&&e.jsxs(Yt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"space-y-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{id:"category-filter",value:r.category,onChange:c=>o("category",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"",children:"All Categories"}),a.map(c=>e.jsx("option",{value:c,children:c},c))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"min-quantity-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Quantity"}),e.jsx("input",{id:"min-quantity-filter",type:"number",value:r.reorder_point,onChange:c=>o("reorder_point",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"max-quantity-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Quantity"}),e.jsx("input",{id:"max-quantity-filter",type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",placeholder:"∞"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"expiry-status-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Status"}),e.jsxs("select",{id:"expiry-status-filter",value:r.expiryDate,onChange:c=>o("expiryDate",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"",children:"All Items"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"expiring-soon",children:"Expiring Soon (30 days)"}),e.jsx("option",{value:"valid",children:"Valid"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sort-by-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),e.jsxs("select",{id:"sort-by-filter",value:r.sortBy,onChange:c=>o("sortBy",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"category",children:"Category"}),e.jsx("option",{value:"quantity",children:"Quantity"}),e.jsx("option",{value:"expiration",children:"Expiration"}),e.jsx("option",{value:"unit_cost",children:"Unit Cost"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sort-direction-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Direction"}),e.jsxs("select",{id:"sort-direction-filter",value:r.sortDirection,onChange:c=>o("sortDirection",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:[e.jsx("option",{value:"asc",children:"Ascending"}),e.jsx("option",{value:"desc",children:"Descending"})]})]})]}),e.jsx("button",{onClick:s,className:"w-full px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Clear Filters"})]})})]})},Rd=({selectedItems:r})=>e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Selected Items"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r.length," item",r.length!==1?"s":""," ","selected"]}),r.length>0&&e.jsxs("div",{className:"mt-2 space-y-1",children:[r.slice(0,3).map(t=>e.jsx("div",{className:"text-xs text-gray-600 truncate",children:t.name},t.id)),r.length>3&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",r.length-3," more"]})]})]}),kd=({item:r,isSelected:t,onToggle:s})=>{const a=pd(r),n=l=>{var o;return(o=r.data)==null?void 0:o[l]};return e.jsx(Yt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`border rounded-lg p-4 cursor-pointer transition-all ${t?"border-[#4ECDC4] bg-[#4ECDC4]/5":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>s(r),children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:r.name}),t&&e.jsx("span",{className:"px-2 py-1 text-xs bg-[#4ECDC4] text-white rounded-full",children:"Selected"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(v,{path:Ye,size:.8}),e.jsx("span",{children:r.category})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(v,{path:pa,size:.8}),e.jsx("span",{children:r.location})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"font-medium",children:"Quantity:"}),e.jsxs("span",{children:[r.quantity||0," ",String(n("unit")||"units")]})]})]}),e.jsxs("div",{className:"space-y-1",children:[n("manufacturer")?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(v,{path:Xa,size:.8}),e.jsx("span",{children:String(n("manufacturer"))})]}):null,n("supplier")?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(v,{path:Ja,size:.8}),e.jsx("span",{children:String(n("supplier"))})]}):null,n("expiration")||r.expiryDate?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(v,{path:ot,size:.8}),e.jsxs("span",{children:["Expires:"," ",hd(String(n("expiration")||r.expiryDate||""))]})]}):null]})]}),a&&e.jsxs("div",{className:`mt-2 inline-block px-2 py-1 text-xs rounded-full ${a.bgColor} ${a.color}`,children:[a.status==="expired"&&"Expired",a.status==="expiring-soon"&&"Expiring Soon",a.status==="valid"&&"Valid"]})]})})})},$d=({inventoryItems:r,selectedItems:t,onItemToggle:s,isLoading:a,error:n})=>e.jsxs("div",{className:"w-2/3 p-6 overflow-y-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Search Results"}),e.jsx("p",{className:"text-sm text-gray-600",children:a?"Searching...":`${r.length} items found`})]})}),n&&e.jsxs("div",{className:"flex items-center space-x-2 text-red-500 mb-4",children:[e.jsx(v,{path:ie,size:1}),e.jsx("span",{children:n})]}),a&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{path:en,size:1,className:"animate-spin text-[#4ECDC4]"}),e.jsx("span",{className:"text-gray-600",children:"Searching inventory..."})]})}),!a&&!n&&e.jsx("div",{className:"space-y-3",children:r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v,{path:Ye,size:3,className:"mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No items found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search criteria."})]}):r.map(l=>{const o=t.some(c=>c.id===l.id);return e.jsx(kd,{item:l,isSelected:o,onToggle:s},l.id)})})]}),Ld=({isOpen:r,onClose:t,onSelectItems:s,selectedItems:a=[]})=>{const{searchQuery:n,showFilters:l,filters:o,localSelectedItems:c,inventoryItems:i,isLoading:d,error:u,categories:m,locations:g,statuses:b,setSearchQuery:p,setShowFilters:f,setFilters:N,handleClearFilters:_,handleItemToggle:x,handleConfirmSelection:j,handleSearch:S}=_d({isOpen:r,selectedItems:a,onSelectItems:s,onClose:t});return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(Yt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[e.jsx(Sd,{onClose:t}),e.jsxs("div",{className:"flex h-[calc(90vh-140px)]",children:[e.jsxs("div",{className:"w-1/3 border-r border-gray-200 p-6 overflow-y-auto",children:[e.jsx(Cd,{searchQuery:n,onSearchChange:p,onSearch:S}),e.jsx(Dd,{filters:o,onFiltersChange:N,onClearFilters:_,categories:m,locations:g,statuses:b,showFilters:l,onToggleFilters:()=>f(!l)}),e.jsx(Rd,{selectedItems:c})]}),e.jsx($d,{inventoryItems:i,selectedItems:c,onItemToggle:x,isLoading:d,error:u})]}),e.jsx("div",{className:"flex justify-end p-6 border-t border-gray-200",children:e.jsxs("button",{onClick:j,disabled:c.length===0,className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-lg hover:bg-[#3db8b0] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Confirm Selection (",c.length,")"]})})]})}):null};var Md=Object.defineProperty,Fd=Object.defineProperties,zd=Object.getOwnPropertyDescriptors,kr=Object.getOwnPropertySymbols,qd=Object.prototype.hasOwnProperty,Vd=Object.prototype.propertyIsEnumerable,$r=(r,t,s)=>t in r?Md(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Fe=(r,t)=>{for(var s in t||(t={}))qd.call(t,s)&&$r(r,s,t[s]);if(kr)for(var s of kr(t))Vd.call(t,s)&&$r(r,s,t[s]);return r},ze=(r,t)=>Fd(r,zd(t)),Lr=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Gd=({selectedChecklist:r,onAddItem:t,onUpdateItem:s,onDeleteItem:a,onGenerateAIItemSuggestions:n,showAIItemSuggestions:l,isGeneratingSuggestions:o,aiItemSuggestions:c,onApplyAIItemSuggestion:i,onCloseAISuggestions:d,showSuccessMessage:u})=>{const[m,g]=h.useState(!1),[b,p]=h.useState([]),[f,N]=h.useState(!1),[_,x]=h.useState(null),[j,S]=h.useState({title:"",instructions:"",inventoryItemIds:[],sdsId:""}),[w,D]=h.useState(!1),q=()=>{j.title&&j.instructions&&r&&(t({title:j.title,instructions:j.instructions,requiredInventory:b.map(C=>({id:C.id,name:C.name||"",required:1,available:C.quantity||0,used:0,unit:"unit"})),sdsId:j.sdsId||void 0}),S({title:"",instructions:"",inventoryItemIds:[],sdsId:""}),p([]),N(!1))},$=C=>{j.title&&j.instructions&&r&&(s(C,{title:j.title,instructions:j.instructions,requiredInventory:b.map(F=>({id:F.id,name:F.name||"",required:1,available:F.quantity||0,used:0,unit:"unit"})),sdsId:j.sdsId||void 0}),S({title:"",instructions:"",inventoryItemIds:[],sdsId:""}),p([]),x(null))},G=C=>{var F;x(C.id),S({title:C.title,instructions:C.instructions,inventoryItemIds:((F=C.requiredInventory)==null?void 0:F.map(k=>k.id))||[],sdsId:C.sdsId||""});const R=(C.requiredInventory||[]).map(k=>({id:k.id,facility_id:null,name:k.name,quantity:k.available,data:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),reorder_point:null,expiration_date:null,unit_cost:null,category:null,status:null,location:null,supplier:null,cost:null,vendor:null,warranty:null,maintenance_schedule:null,next_due:null,service_provider:null,assigned_to:null,notes:null,tool_id:null,supply_id:null,equipment_id:null,hardware_id:null,p2_status:null,serial_number:null,manufacturer:null,image_url:null,tags:null,favorite:null,tracked:null,barcode:null,sku:null,description:null,current_phase:null,is_active:null,unit:null,expiration:null,purchase_date:null,last_serviced:null,last_updated:null}));p(R)},L=C=>{p(C)},P=(C,F)=>Lr(null,null,function*(){if(C.trim()){D(!0);try{try{const R=yield Kt.askAI(`Generate detailed instructions for checklist item "${C}" in the ${F||(r==null?void 0:r.category)} category. Provide step-by-step instructions that are clear and actionable.`,`Category: ${F||(r==null?void 0:r.category)}, Title: ${C}`);S(k=>ze(Fe({},k),{instructions:R}))}catch(R){console.warn("AI service failed, using fallback description:",R);const k=yield A(C,F||(r==null?void 0:r.category));S(Z=>ze(Fe({},Z),{instructions:k}))}}catch(R){console.error("Error generating AI description:",R),S(k=>ze(Fe({},k),{instructions:`Complete ${C.toLowerCase()} following established procedures and safety protocols.`}))}finally{D(!1)}}}),M=C=>{if(S(F=>ze(Fe({},F),{title:C})),C.length>=5&&!j.instructions){const F=setTimeout(()=>{P(C)},1e3);return()=>clearTimeout(F)}return()=>{}},A=(C,F)=>Lr(null,null,function*(){return yield new Promise(k=>setTimeout(k,800)),{setup:`Perform ${C.toLowerCase()} according to facility protocols. Ensure all equipment is properly prepared and safety measures are in place.`,patient:`Complete ${C.toLowerCase()} with patient safety as the priority. Follow infection control protocols and maintain patient privacy.`,weekly:`Conduct thorough ${C.toLowerCase()} as part of weekly maintenance schedule. Document all activities and report any issues.`,public:`Execute ${C.toLowerCase()} in public areas following facility standards. Maintain professional appearance and ensure accessibility.`,deep:`Perform intensive ${C.toLowerCase()} using specialized equipment and procedures. Follow all safety protocols and containment measures.`}[F]||`Complete ${C.toLowerCase()} following established procedures and safety protocols.`});return e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-md font-medium",children:"Checklist Items"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:n,disabled:o,className:"flex items-center px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:bg-gray-400 transition-colors",title:"Get AI suggestions for checklist items",children:[e.jsx(v,{path:tn,size:.8,className:"mr-1"}),o?"Generating...":"AI Suggestions"]}),e.jsxs("button",{onClick:()=>{N(!0),x(null),S({title:"",instructions:"",inventoryItemIds:[],sdsId:""}),p([])},className:"flex items-center px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors",children:[e.jsx(v,{path:ye,size:1,className:"mr-2"}),"Add Item"]})]})]}),l&&e.jsxs("div",{className:"mb-4 p-4 border border-purple-200 rounded-lg bg-purple-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h5",{className:"text-sm font-medium text-purple-800 flex items-center",children:[e.jsx(v,{path:Ve,size:.8,className:"mr-1"}),"AI Item Suggestions"]}),e.jsx("button",{onClick:d,className:"text-purple-600 hover:text-purple-800",children:e.jsx(v,{path:je,size:.8})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:c.map((C,F)=>e.jsxs("div",{className:"border border-purple-200 rounded-lg p-3 bg-white",children:[e.jsx("h6",{className:"font-medium text-purple-800 mb-1",children:C.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:C.instructions}),C.suggestedInventory.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Suggested: "}),e.jsx("span",{className:"text-xs text-purple-600",children:C.suggestedInventory.join(", ")})]}),e.jsx("button",{onClick:()=>i(C),className:"w-full px-3 py-1 text-sm bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors",children:"Use This Item"})]},F))})]}),u&&e.jsx("div",{className:"mb-4 p-3 border border-green-200 rounded-lg bg-green-50",children:e.jsxs("div",{className:"flex items-center text-green-800",children:[e.jsx(v,{path:Ue,size:.8,className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:u})]})}),e.jsxs("div",{className:"space-y-3 mb-4",children:[r.items.map(C=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-3 bg-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-gray-800",children:C.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C.instructions}),C.requiredInventory&&C.requiredInventory.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Required: "}),C.requiredInventory.map(F=>F.name).join(", ")]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-3",children:[e.jsx("button",{onClick:()=>G(C),className:"p-1 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:e.jsx(v,{path:Ie,size:.8})}),e.jsx("button",{onClick:()=>a(C.id),className:"p-1 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:e.jsx(v,{path:Be,size:.8})})]})]})},C.id)),r.items.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:'No items added yet. Click "Add Item" to get started.'})]}),f&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[e.jsx("h5",{className:"font-medium mb-3",children:_?"Edit Item":"Add New Item"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"item-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Title"}),e.jsx("input",{id:"item-title",type:"text",value:j.title,onChange:C=>M(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",placeholder:"e.g., Clean and sanitize surfaces"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center",children:["Instructions",w&&e.jsxs("span",{className:"ml-2 text-xs text-blue-600 flex items-center",children:[e.jsx(v,{path:Ve,size:.6,className:"mr-1 animate-pulse"}),"AI generating..."]})]}),j.title&&!w&&e.jsxs("button",{type:"button",onClick:()=>P(j.title),className:"text-xs text-blue-600 hover:text-blue-800 flex items-center",title:"Generate AI description",children:[e.jsx(v,{path:Ve,size:.6,className:"mr-1"}),"AI Generate"]})]}),e.jsx("textarea",{value:j.instructions,onChange:C=>S(ze(Fe({},j),{instructions:C.target.value})),className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] ${w?"bg-blue-50 border-blue-200":""}`,rows:3,placeholder:w?"AI is generating instructions...":"Detailed instructions for this task...",disabled:w})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"inventory-select",className:"block text-sm font-medium text-gray-700 mb-1",children:"Required Inventory"}),e.jsx("button",{id:"inventory-select",onClick:()=>g(!0),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-left focus:outline-none focus:ring-2 focus:ring-[#4ECDC4]",children:b.length>0?`${b.length} item(s) selected`:"Click to select required inventory items"}),b.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:b.map(C=>e.jsxs("div",{className:"text-sm text-gray-600",children:["• ",C.name]},C.id))})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{N(!1),x(null),S({title:"",instructions:"",inventoryItemIds:[],sdsId:""}),p([])},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{onClick:()=>_?$(_):q(),className:"px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac]",children:_?"Update Item":"Add Item"})]})]})]}),e.jsx(Ld,{isOpen:m,onClose:()=>g(!1),onSelectItems:L,selectedItems:b})]})};var Bd=Object.defineProperty,Ud=Object.defineProperties,Hd=Object.getOwnPropertyDescriptors,Mr=Object.getOwnPropertySymbols,Yd=Object.prototype.hasOwnProperty,Wd=Object.prototype.propertyIsEnumerable,Fr=(r,t,s)=>t in r?Bd(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Kd=(r,t)=>{for(var s in t||(t={}))Yd.call(t,s)&&Fr(r,s,t[s]);if(Mr)for(var s of Mr(t))Wd.call(t,s)&&Fr(r,s,t[s]);return r},Qd=(r,t)=>Ud(r,Hd(t)),zr=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Zd=()=>{const{checklists:r,updateChecklist:t,deleteChecklist:s,publishChecklist:a,addItemToChecklist:n,updateChecklistItem:l,deleteChecklistItem:o}=ns(),[c,i]=h.useState(!1),[d,u]=h.useState(null),[m,g]=h.useState(!1),b=R=>{if(d)t(d.id,R);else{const{addChecklist:k}=ns.getState();k(Qd(Kd({},R),{title:R.title||"New Checklist",items:[],status:"draft"}))}u(null),i(!1)},p=()=>{d&&(a(d.id),u(null))},f=R=>{u(R)},N=()=>{i(!1),u(null)},_=R=>{if(d){n(d.id,R);const k=r.find(Z=>Z.id===d.id);k&&u(k)}},x=(R,k)=>{d&&l(d.id,R,k)},j=R=>{d&&o(d.id,R)},[S,w]=h.useState(!1),[D,q]=h.useState(!1),[$,G]=h.useState([]),[L,P]=h.useState(null),M=()=>zr(null,null,function*(){if(d){q(!0);try{try{const R=yield Kt.askAI(`Generate 5-7 detailed checklist items for "${d.title}" in the ${d.category} category. Each item should include title, detailed instructions, and suggested inventory requirements.`,`Category: ${d.category}, Title: ${d.title}`),k=C(R);G(k),w(!0)}catch(R){console.warn("AI service failed, using fallback suggestions:",R);const k=yield F(d.category);G(k),w(!0)}}catch(R){console.error("Error generating AI item suggestions:",R);const k=yield F(d.category);G(k),w(!0)}finally{q(!1)}}}),A=R=>{if(!d)return;n(d.id,{title:R.title,instructions:R.instructions,requiredInventory:[],sdsId:void 0});const k=r.find(Z=>Z.id===d.id);k&&u(k),w(!1),P(`✅ Added "${R.title}" to checklist`),setTimeout(()=>P(null),3e3)},C=R=>{try{const k=R.match(/\[[\s\S]*\]/);if(k){const z=JSON.parse(k[0]);if(Array.isArray(z))return z.map(W=>{var ee;return{title:W.title||W.name||"Untitled Item",instructions:W.instructions||((ee=W.data)==null?void 0:ee.description)||W.steps||"No instructions provided",suggestedInventory:Array.isArray(W.suggestedInventory)?W.suggestedInventory:Array.isArray(W.inventory)?W.inventory:Array.isArray(W.requirements)?W.requirements:[]}})}const Z=R.split(`
`).filter(z=>z.trim()),_e=[];let I=null;for(const z of Z)if(z.match(/^\d+\./))I&&_e.push(I),I={title:z.replace(/^\d+\.\s*/,"").trim(),instructions:"",suggestedInventory:[]};else if(I&&z.trim())if(z.toLowerCase().includes("inventory")||z.toLowerCase().includes("supplies")){const W=z.match(/[^:]+:\s*(.+)/);W&&(I.suggestedInventory=W[1].split(",").map(ee=>ee.trim()))}else I.instructions+=(I.instructions?" ":"")+z.trim();return I&&_e.push(I),_e.length>0?_e:[{title:"AI-generated item",instructions:R.substring(0,200)+"...",suggestedInventory:[]}]}catch(k){return console.error("Error parsing AI response:",k),[{title:"AI-generated item",instructions:R.substring(0,200)+"...",suggestedInventory:[]}]}},F=R=>zr(null,null,function*(){return yield new Promise(Z=>setTimeout(Z,1500)),[{title:"Surface Disinfection",instructions:"Use EPA-approved disinfectant wipes. Clean all high-touch surfaces including door handles, light switches, and equipment controls. Allow 3-5 minutes contact time for proper disinfection.",suggestedInventory:["Disinfectant Wipes","Nitrile Gloves","Safety Goggles"]},{title:"Equipment Sanitization",instructions:"Clean all medical equipment with appropriate cleaning agents. Pay special attention to patient contact surfaces. Verify equipment is operational after cleaning.",suggestedInventory:["Equipment Cleaning Solution","Microfiber Cloths","Alcohol Wipes"]},{title:"Supply Restocking",instructions:"Check all supply levels and restock as needed. Verify expiration dates on all items. Ensure emergency supplies are readily accessible.",suggestedInventory:["Various Medical Supplies","Storage Containers","Labeling Materials"]},{title:"Safety Equipment Check",instructions:"Verify all safety equipment is present and functional. Test emergency systems and alarms. Check fire extinguishers and emergency exits.",suggestedInventory:["Safety Equipment","Testing Tools","Documentation Forms"]},{title:"Quality Control Verification",instructions:"Perform final quality control check. Verify all cleaning standards have been met. Document completion and any issues found.",suggestedInventory:["Quality Control Checklist","Documentation Forms","Camera for Documentation"]}]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>g(!m),className:"flex items-center text-xl font-semibold text-gray-800 hover:text-gray-600 transition-colors",children:[e.jsx(v,{path:m?Jt:es,size:1.2,className:"mr-2"}),"Checklist Management",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",r.length," total)"]})]}),e.jsxs("button",{onClick:()=>{i(!0),u(null)},className:"flex items-center px-4 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#38b2ac] transition-colors",children:[e.jsx(v,{path:ye,size:1,className:"mr-2"}),"Add Checklist"]})]}),m&&e.jsx(md,{checklists:r,onEditChecklist:f,onDeleteChecklist:s})]}),(d||c)&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto scrollbar-hide",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800",children:c?"Add New Checklist":`Edit: ${d==null?void 0:d.title}`}),e.jsx("button",{onClick:N,className:"p-1 text-gray-500 hover:text-gray-700",children:e.jsx(v,{path:je,size:1.2})})]}),e.jsx(dd,{selectedChecklist:d,isAddingChecklist:c,onCancel:N,onSaveDraft:b,onPublish:p}),d&&e.jsx(Gd,{selectedChecklist:d,onAddItem:_,onUpdateItem:x,onDeleteItem:j,onGenerateAIItemSuggestions:M,showAIItemSuggestions:S,isGeneratingSuggestions:D,aiItemSuggestions:$,onApplyAIItemSuggestion:A,onCloseAISuggestions:()=>w(!1),showSuccessMessage:L})]})})]})},Xd={aiEnabled:!1,predictiveCleaningEnabled:!1,smartScheduling:!1,contaminationPrediction:!1,resourceOptimization:!1,efficiencyAnalytics:!1,smartRoomManagementEnabled:!1,automaticPriorityAssignment:!1,riskAssessment:!1,trendAnalysis:!1,predictiveMaintenance:!1,supplyOptimizationEnabled:!1,staffScheduling:!1,costOptimization:!1,inventoryPrediction:!1,workloadBalancing:!1,qualityAssuranceEnabled:!1,complianceMonitoring:!1,auditTrailEnhancement:!1,performanceTracking:!1,automatedReporting:!1,realTimeMonitoringEnabled:!1,anomalyDetection:!1,smartNotifications:!1,statusUpdates:!1,emergencyAlerts:!1,aiConfidenceThreshold:.85,aiDataRetentionDays:90,realTimeProcessingEnabled:!1,batchProcessingEnabled:!1,dataSharingEnabled:!1,localAIProcessingEnabled:!1,encryptedDataTransmission:!0,aiModelTraining:!1},Jd={defaultCleaningDuration:45,qualityScoreThreshold:8,contaminationLevels:["low","medium","high","critical"],cleaningTypes:["routine","deep","emergency","post_procedure"],autoSchedulingEnabled:!1,bufferTimeMinutes:15,maxConcurrentCleanings:3,weekendCleaningEnabled:!0,complianceTrackingEnabled:!0,auditLogRetentionDays:365,regulatoryReportingEnabled:!1,certificationTracking:!1},eu={emailNotificationsEnabled:!0,dailySummaryEnabled:!0,urgentAlertsEnabled:!0,completionNotificationsEnabled:!1,inAppNotificationsEnabled:!0,pushNotificationsEnabled:!1,soundEnabled:!0,adminNotificationsEnabled:!0,staffNotificationsEnabled:!1,supervisorNotificationsEnabled:!0},T={defaultCleaningDuration:{min:15,max:180},qualityScoreThreshold:{min:1,max:10},bufferTimeMinutes:{min:0,max:60},maxConcurrentCleanings:{min:1,max:10},auditLogRetentionDays:{min:30,max:2555},aiConfidenceThreshold:{min:.1,max:1,step:.05},aiDataRetentionDays:{min:30,max:1095}},tu=[{id:"general",label:"General",icon:J},{id:"ai",label:"AI & Analytics",icon:Zt},{id:"protocols",label:"Cleaning Protocols",icon:Ge},{id:"rooms",label:"Room Management",icon:lt},{id:"checklists",label:"Checklists",icon:Ge},{id:"notifications",label:"Notifications",icon:ha},{id:"compliance",label:"Compliance",icon:lt},{id:"advanced",label:"Advanced",icon:Ne}],qr={email:[{key:"emailNotificationsEnabled",label:"Enable Email Notifications"},{key:"dailySummaryEnabled",label:"Daily Summary Reports"},{key:"urgentAlertsEnabled",label:"Urgent Alerts"},{key:"completionNotificationsEnabled",label:"Task Completion Notifications"}],inApp:[{key:"inAppNotificationsEnabled",label:"Enable In-App Notifications"},{key:"pushNotificationsEnabled",label:"Push Notifications"},{key:"soundEnabled",label:"Sound Alerts"}]},su=3e3,ru=r=>{const t=[];return(r.aiConfidenceThreshold<T.aiConfidenceThreshold.min||r.aiConfidenceThreshold>T.aiConfidenceThreshold.max)&&t.push(`AI confidence threshold must be between ${T.aiConfidenceThreshold.min} and ${T.aiConfidenceThreshold.max}`),(r.aiDataRetentionDays<T.aiDataRetentionDays.min||r.aiDataRetentionDays>T.aiDataRetentionDays.max)&&t.push(`AI data retention days must be between ${T.aiDataRetentionDays.min} and ${T.aiDataRetentionDays.max}`),t},au=r=>{const t=[];return(r.defaultCleaningDuration<T.defaultCleaningDuration.min||r.defaultCleaningDuration>T.defaultCleaningDuration.max)&&t.push(`Default cleaning duration must be between ${T.defaultCleaningDuration.min} and ${T.defaultCleaningDuration.max} minutes`),(r.qualityScoreThreshold<T.qualityScoreThreshold.min||r.qualityScoreThreshold>T.qualityScoreThreshold.max)&&t.push(`Quality score threshold must be between ${T.qualityScoreThreshold.min} and ${T.qualityScoreThreshold.max}`),(r.bufferTimeMinutes<T.bufferTimeMinutes.min||r.bufferTimeMinutes>T.bufferTimeMinutes.max)&&t.push(`Buffer time must be between ${T.bufferTimeMinutes.min} and ${T.bufferTimeMinutes.max} minutes`),(r.maxConcurrentCleanings<T.maxConcurrentCleanings.min||r.maxConcurrentCleanings>T.maxConcurrentCleanings.max)&&t.push(`Max concurrent cleanings must be between ${T.maxConcurrentCleanings.min} and ${T.maxConcurrentCleanings.max}`),(r.auditLogRetentionDays<T.auditLogRetentionDays.min||r.auditLogRetentionDays>T.auditLogRetentionDays.max)&&t.push(`Audit log retention days must be between ${T.auditLogRetentionDays.min} and ${T.auditLogRetentionDays.max}`),t},nu=r=>{const t=[];return!r.emailNotificationsEnabled&&!r.inAppNotificationsEnabled&&t.push("At least one notification method must be enabled"),t},iu=(r,t,s)=>[...ru(r),...au(t),...nu(s)],lu=(r,t,s)=>{const a=iu(r,t,s);return{isValid:a.length===0,errors:a}};var ou=Object.defineProperty,cu=Object.defineProperties,du=Object.getOwnPropertyDescriptors,Vr=Object.getOwnPropertySymbols,uu=Object.prototype.hasOwnProperty,mu=Object.prototype.propertyIsEnumerable,Gr=(r,t,s)=>t in r?ou(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Mt=(r,t)=>{for(var s in t||(t={}))uu.call(t,s)&&Gr(r,s,t[s]);if(Vr)for(var s of Vr(t))mu.call(t,s)&&Gr(r,s,t[s]);return r},pu=(r,t)=>cu(r,du(t)),gt=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const wa={settings:"/api/environmental-cleaning/settings",aiSettings:"/api/environmental-cleaning/ai-settings",testSync:"/api/environmental-cleaning/test-sync",resetDefaults:"/api/environmental-cleaning/reset-defaults"},Ft={timeout:3e4,retries:3,headers:{"Content-Type":"application/json"}},rs=(r,t,...s)=>gt(null,[r,t,...s],function*(a,n,l=Ft.retries){try{const o=new AbortController,c=setTimeout(()=>o.abort(),Ft.timeout),i=yield fetch(a,pu(Mt({},n),{signal:o.signal,headers:Mt(Mt({},Ft.headers),n.headers)}));if(clearTimeout(c),!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return yield i.json()}catch(o){if(l>0&&o instanceof Error&&o.name==="AbortError")return rs(a,n,l-1);throw o}}),hu=r=>gt(null,null,function*(){try{const t=yield rs(wa.settings,{method:"POST",body:JSON.stringify(r)});if(!t.success)throw new Error(t.error||"Failed to save settings")}catch(t){throw console.error("Error saving environmental cleaning settings:",t),new Error("Failed to save settings. Please try again.")}}),gu=r=>gt(null,null,function*(){try{const t=yield rs(wa.aiSettings,{method:"POST",body:JSON.stringify(r)});if(!t.success)throw new Error(t.error||"Failed to save AI settings")}catch(t){throw console.error("Error saving AI settings:",t),new Error("Failed to save AI settings. Please try again.")}}),xu=(r,t,s)=>gt(null,null,function*(){try{r.aiEnabled&&(yield gu({aiSettings:r})),yield hu({protocols:t,notifications:s})}catch(a){throw console.error("Error saving all settings:",a),a}}),fu=({protocolSettings:r,onProtocolSettingChange:t})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:J,size:1.5,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-800",children:"General Settings"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Basic configuration for environmental cleaning"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"defaultCleaningDuration",className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Cleaning Duration (minutes)"}),e.jsx("input",{id:"defaultCleaningDuration",type:"number",value:r.defaultCleaningDuration,onChange:s=>t("defaultCleaningDuration",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:T.defaultCleaningDuration.min,max:T.defaultCleaningDuration.max})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"qualityScoreThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Quality Score Threshold"}),e.jsx("input",{id:"qualityScoreThreshold",type:"number",value:r.qualityScoreThreshold,onChange:s=>t("qualityScoreThreshold",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:T.qualityScoreThreshold.min,max:T.qualityScoreThreshold.max})]})]})]})}),bu=()=>e.jsx("div",{children:"Test"}),yu=({protocolSettings:r,onProtocolSettingChange:t})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:Ge,size:1.5,className:"text-green-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-green-800",children:"Cleaning Protocols"}),e.jsx("p",{className:"text-sm text-green-700",children:"Configure cleaning procedures and standards"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bufferTimeMinutes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Buffer Time (minutes)"}),e.jsx("input",{id:"bufferTimeMinutes",type:"number",value:r.bufferTimeMinutes,onChange:s=>t("bufferTimeMinutes",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",min:T.bufferTimeMinutes.min,max:T.bufferTimeMinutes.max})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"maxConcurrentCleanings",className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Concurrent Cleanings"}),e.jsx("input",{id:"maxConcurrentCleanings",type:"number",value:r.maxConcurrentCleanings,onChange:s=>t("maxConcurrentCleanings",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",min:T.maxConcurrentCleanings.min,max:T.maxConcurrentCleanings.max})]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"autoSchedulingEnabled",className:"text-sm font-medium text-gray-700",children:"Auto Scheduling"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable automatic cleaning schedule generation"})]}),e.jsx("button",{id:"autoSchedulingEnabled",onClick:()=>t("autoSchedulingEnabled",!r.autoSchedulingEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 ${r.autoSchedulingEnabled?"bg-green-600":"bg-gray-200"}`,"aria-label":"Auto Scheduling",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.autoSchedulingEnabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"weekendCleaningEnabled",className:"text-sm font-medium text-gray-700",children:"Weekend Cleaning"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Allow cleaning tasks on weekends"})]}),e.jsx("button",{id:"weekendCleaningEnabled",onClick:()=>t("weekendCleaningEnabled",!r.weekendCleaningEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 ${r.weekendCleaningEnabled?"bg-green-600":"bg-gray-200"}`,"aria-label":"Weekend Cleaning",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.weekendCleaningEnabled?"translate-x-6":"translate-x-1"}`})})]})]})]})}),vu=({notificationSettings:r,onNotificationSettingChange:t})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:ha,size:1.5,className:"text-yellow-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-yellow-800",children:"Notification Settings"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Configure how and when you receive notifications"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Email Notifications"}),e.jsx("div",{className:"space-y-3",children:qr.email.map(({key:s,label:a})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:s,className:"text-sm text-gray-700",children:a}),e.jsx("button",{id:s,onClick:()=>t(s,!r[s]),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-1 ${r[s]?"bg-yellow-600":"bg-gray-200"}`,"aria-label":a,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${r[s]?"translate-x-5":"translate-x-1"}`})})]},s))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"In-App Notifications"}),e.jsx("div",{className:"space-y-3",children:qr.inApp.map(({key:s,label:a})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:s,className:"text-sm text-gray-700",children:a}),e.jsx("button",{id:s,onClick:()=>t(s,!r[s]),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-1 ${r[s]?"bg-yellow-600":"bg-gray-200"}`,"aria-label":a,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${r[s]?"translate-x-5":"translate-x-1"}`})})]},s))})]})]})]})}),ju=({protocolSettings:r,onProtocolSettingChange:t})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:lt,size:1.5,className:"text-red-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-red-800",children:"Compliance & Audit"}),e.jsx("p",{className:"text-sm text-red-700",children:"Configure compliance tracking and reporting"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"complianceTrackingEnabled",className:"text-sm font-medium text-gray-700",children:"Compliance Tracking"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Track regulatory compliance automatically"})]}),e.jsx("button",{id:"complianceTrackingEnabled",onClick:()=>t("complianceTrackingEnabled",!r.complianceTrackingEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 ${r.complianceTrackingEnabled?"bg-red-600":"bg-gray-200"}`,"aria-label":"Compliance Tracking",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.complianceTrackingEnabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"auditLogRetentionDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Audit Log Retention (days)"}),e.jsx("input",{id:"auditLogRetentionDays",type:"number",value:r.auditLogRetentionDays,onChange:s=>t("auditLogRetentionDays",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",min:T.auditLogRetentionDays.min,max:T.auditLogRetentionDays.max})]})]})]})}),Nu=({aiSettings:r,onAISettingChange:t})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{path:Ne,size:1.5,className:"text-gray-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Advanced Settings"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Advanced configuration and system settings"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiConfidenceThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Confidence Threshold"}),e.jsx("input",{id:"aiConfidenceThreshold",type:"number",value:r.aiConfidenceThreshold,onChange:s=>t("aiConfidenceThreshold",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500",min:T.aiConfidenceThreshold.min,max:T.aiConfidenceThreshold.max,step:T.aiConfidenceThreshold.step}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum confidence for AI predictions"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiDataRetentionDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Retention (days)"}),e.jsx("input",{id:"aiDataRetentionDays",type:"number",value:r.aiDataRetentionDays,onChange:s=>t("aiDataRetentionDays",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500",min:T.aiDataRetentionDays.min,max:T.aiDataRetentionDays.max}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How long to keep AI training data"})]})]})]})});var _u=Object.defineProperty,Su=Object.defineProperties,Cu=Object.getOwnPropertyDescriptors,Br=Object.getOwnPropertySymbols,wu=Object.prototype.hasOwnProperty,Eu=Object.prototype.propertyIsEnumerable,Ur=(r,t,s)=>t in r?_u(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,zt=(r,t)=>{for(var s in t||(t={}))wu.call(t,s)&&Ur(r,s,t[s]);if(Br)for(var s of Br(t))Eu.call(t,s)&&Ur(r,s,t[s]);return r},qt=(r,t)=>Su(r,Cu(t)),Pu=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Tu=()=>{const[r,t]=h.useState(Xd),[s,a]=h.useState(Jd),[n,l]=h.useState(eu),[o,c]=h.useState(null),[i,d]=h.useState(!1);return{aiSettings:r,protocolSettings:s,notificationSettings:n,message:o,isLoading:i,handleAISettingChange:(f,N)=>{t(_=>qt(zt({},_),{[f]:N}))},handleProtocolSettingChange:(f,N)=>{a(_=>qt(zt({},_),{[f]:N}))},handleNotificationSettingChange:(f,N)=>{l(_=>qt(zt({},_),{[f]:N}))},handleSaveSettings:()=>Pu(null,null,function*(){try{d(!0),c(null);const f=lu(r,s,n);if(!f.isValid){c({type:"error",text:f.errors[0]||"Validation failed"});return}yield xu(r,s,n),c({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>c(null),su)}catch(f){console.error(f),c({type:"error",text:"Failed to save settings. Please try again."})}finally{d(!1)}}),clearMessage:()=>c(null)}},Au=()=>{const[r,t]=h.useState("general"),{aiSettings:s,protocolSettings:a,notificationSettings:n,message:l,isLoading:o,handleAISettingChange:c,handleProtocolSettingChange:i,handleNotificationSettingChange:d,handleSaveSettings:u}=Tu(),m=()=>{switch(r){case"general":return e.jsx(fu,{protocolSettings:a,onProtocolSettingChange:i});case"ai":return e.jsx(bu,{});case"protocols":return e.jsx(yu,{protocolSettings:a,onProtocolSettingChange:i});case"rooms":return e.jsx(zc,{});case"checklists":return e.jsx(Zd,{});case"notifications":return e.jsx(vu,{notificationSettings:n,onNotificationSettingChange:d});case"compliance":return e.jsx(ju,{protocolSettings:a,onProtocolSettingChange:i});case"advanced":return e.jsx(Nu,{aiSettings:s,onAISettingChange:c});default:return null}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Environmental Cleaning Settings"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Configure comprehensive settings for environmental cleaning workflows, AI features, protocols, and compliance."})]}),l&&e.jsx("div",{className:`p-4 rounded-lg border ${l.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{path:l.type==="success"?De:ie,size:1,className:"text-current"}),l.text]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:tu.map(g=>e.jsxs("button",{onClick:()=>t(g.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${r===g.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(v,{path:g.icon,size:1}),g.label||g.name]},g.id))})}),e.jsx("div",{className:"min-h-[400px]",children:m()}),e.jsx("div",{className:"flex justify-end pt-6 border-t",children:e.jsxs("button",{onClick:u,disabled:o,className:"px-6 py-2 bg-[#4ECDC4] text-white rounded-md hover:bg-[#45B7AF] focus:outline-none focus:ring-2 focus:ring-[#4ECDC4] focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(v,{path:He,size:1}),o?"Saving...":"Save Settings"]})})]})},ve=({title:r,children:t})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700",children:r}),e.jsx("div",{className:"space-y-3",children:t})]});var Iu=Object.defineProperty,Ou=Object.defineProperties,Du=Object.getOwnPropertyDescriptors,Hr=Object.getOwnPropertySymbols,Ru=Object.prototype.hasOwnProperty,ku=Object.prototype.propertyIsEnumerable,Yr=(r,t,s)=>t in r?Iu(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,$u=(r,t)=>{for(var s in t||(t={}))Ru.call(t,s)&&Yr(r,s,t[s]);if(Hr)for(var s of Hr(t))ku.call(t,s)&&Yr(r,s,t[s]);return r},Lu=(r,t)=>Ou(r,Du(t));const Mu=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(Lu($u({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h5",{className:"text-md font-medium text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(v,{path:J,size:1,className:"text-gray-600"}),"General Settings"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(ve,{title:"Core Features",children:[e.jsx(Q,{id:"autoCalculateTotals",checked:r.autoCalculateTotals,onChange:a=>s("autoCalculateTotals",a),label:"Auto-calculate totals"}),e.jsx(Q,{id:"requireApprovalForAdjustments",checked:r.requireApprovalForAdjustments,onChange:a=>s("requireApprovalForAdjustments",a),label:"Require approval for adjustments"}),e.jsx(Q,{id:"allowNegativeQuantities",checked:r.allowNegativeQuantities,onChange:a=>s("allowNegativeQuantities",a),label:"Allow negative quantities"})]}),e.jsxs(ve,{title:"System Features",children:[e.jsx(Q,{id:"enableRealTimeUpdates",checked:r.enableRealTimeUpdates,onChange:a=>s("enableRealTimeUpdates",a),label:"Enable real-time updates"}),e.jsx(Q,{id:"enableAuditTrails",checked:r.enableAuditTrails,onChange:a=>s("enableAuditTrails",a),label:"Enable audit trails"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"defaultTransactionType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Default transaction type"}),e.jsxs("select",{id:"defaultTransactionType",value:r.defaultTransactionType,onChange:a=>s("defaultTransactionType",a.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"in",children:"In"}),e.jsx("option",{value:"out",children:"Out"}),e.jsx("option",{value:"adjustment",children:"Adjustment"})]})]})]})]})]})})};var Fu=Object.defineProperty,zu=Object.defineProperties,qu=Object.getOwnPropertyDescriptors,Wr=Object.getOwnPropertySymbols,Vu=Object.prototype.hasOwnProperty,Gu=Object.prototype.propertyIsEnumerable,Kr=(r,t,s)=>t in r?Fu(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Bu=(r,t)=>{for(var s in t||(t={}))Vu.call(t,s)&&Kr(r,s,t[s]);if(Wr)for(var s of Wr(t))Gu.call(t,s)&&Kr(r,s,t[s]);return r},Uu=(r,t)=>zu(r,qu(t));const Hu=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(Uu(Bu({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h5",{className:"text-md font-medium text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(v,{path:Ye,size:1,className:"text-gray-600"}),"Stock Management"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(ve,{title:"Stock Thresholds",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lowStockThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Low stock threshold"}),e.jsx("input",{id:"lowStockThreshold",type:"number",value:r.lowStockThreshold,onChange:a=>s("lowStockThreshold",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"criticalStockThreshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Critical stock threshold"}),e.jsx("input",{id:"criticalStockThreshold",type:"number",value:r.criticalStockThreshold,onChange:a=>s("criticalStockThreshold",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:"0"})]})]}),e.jsxs(ve,{title:"Reorder Settings",children:[e.jsx(Q,{id:"autoReorderEnabled",checked:r.autoReorderEnabled,onChange:a=>s("autoReorderEnabled",a),label:"Enable automatic reordering"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reorderBufferDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reorder buffer (days)"}),e.jsx("input",{id:"reorderBufferDays",type:"number",value:r.reorderBufferDays,onChange:a=>s("reorderBufferDays",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:"1",max:"30"})]})]})]})]})})};var Yu=Object.defineProperty,Wu=Object.defineProperties,Ku=Object.getOwnPropertyDescriptors,Qr=Object.getOwnPropertySymbols,Qu=Object.prototype.hasOwnProperty,Zu=Object.prototype.propertyIsEnumerable,Zr=(r,t,s)=>t in r?Yu(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,Xu=(r,t)=>{for(var s in t||(t={}))Qu.call(t,s)&&Zr(r,s,t[s]);if(Qr)for(var s of Qr(t))Zu.call(t,s)&&Zr(r,s,t[s]);return r},Ju=(r,t)=>Wu(r,Ku(t));const em=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(Ju(Xu({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h5",{className:"text-md font-medium text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(v,{path:Ne,size:1,className:"text-gray-600"}),"Categories & Organization"]}),e.jsx("div",{className:"space-y-4",children:e.jsxs(ve,{title:"Organization Features",children:[e.jsx(Q,{id:"enableSubcategories",checked:r.enableSubcategories,onChange:a=>s("enableSubcategories",a),label:"Enable subcategories"}),e.jsx(Q,{id:"enableCustomTags",checked:r.enableCustomTags,onChange:a=>s("enableCustomTags",a),label:"Enable custom tags"}),e.jsx(Q,{id:"requireCategoryAssignment",checked:r.requireCategoryAssignment,onChange:a=>s("requireCategoryAssignment",a),label:"Require category assignment"})]})})]})})};var tm=Object.defineProperty,sm=Object.defineProperties,rm=Object.getOwnPropertyDescriptors,Xr=Object.getOwnPropertySymbols,am=Object.prototype.hasOwnProperty,nm=Object.prototype.propertyIsEnumerable,Jr=(r,t,s)=>t in r?tm(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,im=(r,t)=>{for(var s in t||(t={}))am.call(t,s)&&Jr(r,s,t[s]);if(Xr)for(var s of Xr(t))nm.call(t,s)&&Jr(r,s,t[s]);return r},lm=(r,t)=>sm(r,rm(t));const om=({settings:r,onSettingsChange:t})=>{const s=(a,n)=>{t(lm(im({},r),{[a]:n}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h5",{className:"text-md font-medium text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(v,{path:Xt,size:1,className:"text-gray-600"}),"Reporting & Analytics"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(ve,{title:"Report Generation",children:[e.jsx(Q,{id:"autoGenerateReports",checked:r.autoGenerateReports,onChange:a=>s("autoGenerateReports",a),label:"Auto-generate reports"}),e.jsx(Q,{id:"includeSensitiveData",checked:r.includeSensitiveData,onChange:a=>s("includeSensitiveData",a),label:"Include sensitive data"})]}),e.jsxs(ve,{title:"Report Configuration",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reportRetentionDays",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report retention (days)"}),e.jsx("input",{id:"reportRetentionDays",type:"number",value:r.reportRetentionDays,onChange:a=>s("reportRetentionDays",parseInt(a.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:"30",max:"1095"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reportFormat",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report format"}),e.jsxs("select",{id:"reportFormat",value:r.reportFormat,onChange:a=>s("reportFormat",a.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"PDF",children:"PDF"}),e.jsx("option",{value:"Excel",children:"Excel"}),e.jsx("option",{value:"CSV",children:"CSV"})]})]})]})]})]})})},cm=()=>e.jsx("div",{children:"Test"});var xt=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});function dm(r){return xt(this,null,function*(){const{data:t,error:s}=yield E.from("locations").select("*").eq("facility_id",r).order("name",{ascending:!0});if(s)throw s;return t||[]})}function um(r,t,s,a,n){return xt(this,null,function*(){const{data:l,error:o}=yield E.from("locations").insert([{facility_id:r,name:t,barcode:s,parent_id:a!=null?a:null,capacity:n!=null?n:0}]).select().single();if(o)throw o;return l})}function mm(r,t){return xt(this,null,function*(){const{data:s,error:a}=yield E.from("locations").update({status:t}).eq("id",r).select().single();if(a)throw a;return s})}function pm(r){return xt(this,null,function*(){const{error:t}=yield E.from("locations").delete().eq("id",r);if(t)throw t})}var at=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});function hm(){const[r,t]=h.useState([]),[s,a]=h.useState(!0),[n,l]=h.useState(""),[o,c]=h.useState(""),[i,d]=h.useState(null),[u,m]=h.useState(null),[g,b]=h.useState(""),[p,f]=h.useState(!1);function N(){return at(this,null,function*(){a(!0);try{const S=yield dm(g);t(S)}catch(S){console.error("Failed to fetch locations",S)}finally{a(!1)}})}function _(){return at(this,null,function*(){if(!n||!o)return alert("Name and barcode are required");f(!0);try{yield um(g,n,o,i!=null?i:void 0,u!=null?u:void 0),yield N(),l(""),c(""),m(null)}catch(S){alert("Failed to create location")}finally{f(!1)}})}function x(S){return at(this,null,function*(){if(confirm("Delete this location?"))try{yield pm(S),t(w=>w.filter(D=>D.id!==S))}catch(w){alert("Failed to delete location")}})}function j(S,w){return at(this,null,function*(){try{yield mm(S,w),yield N()}catch(D){alert("Failed to update status")}})}return h.useEffect(()=>{N()},[]),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Location Management"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 space-y-2",children:[e.jsx("h2",{className:"text-lg font-medium",children:"Add New Location"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{className:"form-control",placeholder:"Location Name",value:n,onChange:S=>l(S.target.value)}),e.jsx("input",{className:"form-control",placeholder:"Barcode",value:o,onChange:S=>c(S.target.value)}),e.jsx("input",{className:"form-control",placeholder:"Capacity (optional)",type:"number",value:u!=null?u:"",onChange:S=>m(Number(S.target.value)||null)}),e.jsx(is,{onClick:_,disabled:p,children:p?"Adding...":"Add Location"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsx("h2",{className:"text-lg font-medium mb-2",children:"Existing Locations"}),s?e.jsx("p",{className:"flex items-center gap-2",children:"Loading…"}):r.length===0?e.jsx("p",{className:"text-muted",children:"No locations found."}):e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Name"}),e.jsx("th",{className:"text-left p-2",children:"Barcode"}),e.jsx("th",{className:"text-left p-2",children:"Capacity"}),e.jsx("th",{className:"text-left p-2",children:"Status"}),e.jsx("th",{className:"text-left p-2",children:"Actions"})]})}),e.jsx("tbody",{children:r.map(S=>{var w;return e.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[e.jsx("td",{className:"p-2",children:S.name}),e.jsx("td",{className:"p-2 font-mono",children:S.barcode}),e.jsx("td",{className:"p-2",children:(w=S.capacity)!=null?w:"—"}),e.jsx("td",{className:"p-2",children:e.jsxs("select",{className:"form-select",value:S.status,onChange:D=>j(S.id,D.target.value),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"full",children:"Full"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})}),e.jsx("td",{className:"p-2",children:e.jsx(is,{variant:"danger",size:"sm",onClick:()=>x(S.id),children:"Delete"})})]},S.id)})})]})]})]})}var gm=Object.defineProperty,xm=Object.defineProperties,fm=Object.getOwnPropertyDescriptors,ea=Object.getOwnPropertySymbols,bm=Object.prototype.hasOwnProperty,ym=Object.prototype.propertyIsEnumerable,ta=(r,t,s)=>t in r?gm(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,nt=(r,t)=>{for(var s in t||(t={}))bm.call(t,s)&&ta(r,s,t[s]);if(ea)for(var s of ea(t))ym.call(t,s)&&ta(r,s,t[s]);return r},Vt=(r,t)=>xm(r,fm(t)),Ae=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const vm=()=>{const{currentUser:r}=We(),[t,s]=h.useState(null),[a,n]=h.useState(""),[l,o]=h.useState(!1),[c,i]=h.useState(null),[d,u]=h.useState({autoCalculateTotals:!0,requireApprovalForAdjustments:!0,allowNegativeQuantities:!1,requireReasonForAdjustments:!0,defaultTransactionType:"in",enableRealTimeUpdates:!0,enableAuditTrails:!0,lowStockThreshold:10,criticalStockThreshold:5,autoReorderEnabled:!1,reorderBufferDays:7,enableSubcategories:!0,enableCustomTags:!0,requireCategoryAssignment:!0,autoGenerateReports:!1,reportRetentionDays:365,includeSensitiveData:!1,reportFormat:"PDF",aiEnabled:!1,computerVisionEnabled:!1,smartCategorizationEnabled:!1,predictiveAnalyticsEnabled:!1,aiConfidenceThreshold:.8,autoCategorizationEnabled:!1,smartFormFillingEnabled:!1,maintenancePredictionsEnabled:!1,demandForecastingEnabled:!1,openaiApiKey:"",googleVisionApiKey:"",dataSharingEnabled:!1,localAIProcessingEnabled:!1,aiDataRetentionDays:90});h.useEffect(()=>{Ae(null,null,function*(){try{const j=yield pt.getCurrentFacilityId(),S=new aa(j);i(S),m(S)}catch(j){console.error("Failed to initialize AI service:",j),n("Failed to initialize AI service")}})},[]);const m=x=>Ae(null,null,function*(){try{o(!0);let j=yield x.loadSettings();j||(yield x.initializeSettings(),j=yield x.loadSettings()),s(j)}catch(j){console.error("Error loading AI settings:",j),n("Error loading AI settings")}finally{o(!1)}}),g=(x,j)=>{t&&s(Vt(nt({},t),{[x]:j}))},b=()=>Ae(null,null,function*(){if(!(!c||!t))try{o(!0),(yield c.saveSettings(t))?(n("AI settings saved successfully"),setTimeout(()=>n(""),3e3)):n("Error saving AI settings")}catch(x){console.error("Error saving AI settings:",x),n("Error saving AI settings")}finally{o(!1)}}),p=()=>Ae(null,null,function*(){if(c)try{o(!0),yield c.initializeSettings(),yield m(c),n("AI settings reset to defaults"),setTimeout(()=>n(""),3e3)}catch(x){console.error("Error resetting AI settings:",x),n("Error resetting AI settings")}finally{o(!1)}}),f=h.useCallback(()=>Ae(null,null,function*(){if(r!=null&&r.id){o(!0);try{const x=localStorage.getItem("cliniio_ai_settings");if(x){const j=JSON.parse(x);u(S=>Vt(nt(nt({},S),j),{openaiApiKey:j.openaiApiKey?"••••••••"+j.openaiApiKey.slice(-4):"",googleVisionApiKey:j.googleVisionApiKey?"••••••••"+j.googleVisionApiKey.slice(-4):""}))}}catch(x){console.error("Failed to load inventory settings:",x)}finally{o(!1)}}}),[r==null?void 0:r.id]);return h.useEffect(()=>{f()},[f]),{settings:d,setSettings:u,aiSettings:t,aiMessage:a,isLoading:l,handleInputChange:(x,j)=>{u(S=>Vt(nt({},S),{[x]:j}))},handleAISettingChange:g,handleAISettingsSave:b,handleAISettingsReset:p,saveSettings:()=>Ae(null,null,function*(){if(r!=null&&r.id)try{const x={aiEnabled:d.aiEnabled,computerVisionEnabled:d.computerVisionEnabled,smartCategorizationEnabled:d.smartCategorizationEnabled,predictiveAnalyticsEnabled:d.predictiveAnalyticsEnabled,aiConfidenceThreshold:d.aiConfidenceThreshold,autoCategorizationEnabled:d.autoCategorizationEnabled,smartFormFillingEnabled:d.smartFormFillingEnabled,maintenancePredictionsEnabled:d.maintenancePredictionsEnabled,demandForecastingEnabled:d.demandForecastingEnabled,dataSharingEnabled:d.dataSharingEnabled,localAIProcessingEnabled:d.localAIProcessingEnabled,aiDataRetentionDays:d.aiDataRetentionDays};localStorage.setItem("cliniio_ai_settings",JSON.stringify(x))}catch(x){console.error("Failed to save inventory settings:",x)}}),loadSettings:f}};var jm=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const Nm=()=>{const[r,t]=h.useState("general"),[s,a]=h.useState(!1),[n,l]=h.useState(null),{settings:o,setSettings:c,isLoading:i,saveSettings:d,loadSettings:u}=vm(),m=[{id:"general",label:"General Settings",icon:J},{id:"stock",label:"Stock Management",icon:Ye},{id:"categories",label:"Categories & Tags",icon:Ne},{id:"locations",label:"Location Management",icon:pa},{id:"reporting",label:"Reporting & Analytics",icon:Xt},{id:"ai",label:"AI & Machine Learning",icon:Re}],g=()=>jm(null,null,function*(){try{a(!0),l(null),yield d(),l({type:"success",text:"Settings saved successfully"}),setTimeout(()=>l(null),3e3)}catch(p){console.error(p),l({type:"error",text:"Failed to save settings"})}finally{a(!1)}}),b=()=>{switch(r){case"general":return e.jsx(Mu,{settings:o,onSettingsChange:c});case"stock":return e.jsx(Hu,{settings:o,onSettingsChange:c});case"categories":return e.jsx(em,{settings:o,onSettingsChange:c});case"locations":return e.jsx(hm,{});case"reporting":return e.jsx(om,{settings:o,onSettingsChange:c});case"ai":return e.jsx(cm,{});default:return null}};return i?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading inventory settings..."})]}):e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Inventory Management Settings"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Configure inventory behavior, AI features, and system preferences"}),n&&e.jsx("div",{className:`p-4 rounded-lg border mb-6 ${n.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{path:n.type==="success"?De:ie,size:1,className:"text-current"}),n.text]})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:m.map(p=>e.jsxs("button",{onClick:()=>t(p.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${r===p.id?"border-[#4ECDC4] text-[#4ECDC4]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(v,{path:p.icon,size:1}),e.jsx("span",{children:p.label})]},p.id))})})}),e.jsx("div",{className:"tab-content-area",children:b()}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsxs("button",{onClick:u,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:[e.jsx(v,{path:Ht,size:1,className:"inline mr-2"}),"Reset"]}),e.jsxs("button",{onClick:g,disabled:s,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:[e.jsx(v,{path:He,size:1,className:"inline mr-2"}),s?"Saving...":"Save Settings"]})]})]})};var _m=(r,t,s)=>new Promise((a,n)=>{var l=i=>{try{c(s.next(i))}catch(d){n(d)}},o=i=>{try{c(s.throw(i))}catch(d){n(d)}},c=i=>i.done?a(i.value):Promise.resolve(i.value).then(l,o);c((s=s.apply(r,t)).next())});const sa=[{id:"profile",label:"Profile & Account",icon:na,description:"Manage your admin account information and personal settings."},{id:"system",label:"System Administration",icon:J,description:"Manage users, roles, permissions, and system-wide settings."},{id:"content",label:"Content Management",icon:sn,description:"Create, edit, and manage Knowledge Hub and Library content."},{id:"learning",label:"Learning & Training",icon:rn,description:"Configure training modules, certifications, and learning paths."},{id:"cleaning",label:"Environmental Cleaning",icon:an,description:"Manage room cleaning schedules, protocols, and status."},{id:"inventory",label:"Inventory Management",icon:Ye,description:"Oversee inventory, categories, stock levels, and procurement."},{id:"sterilization",label:"Sterilization",icon:nn,description:"Monitor sterilization cycles, equipment, and compliance."},{id:"system-config",label:"Billing",icon:ln,description:"Manage billing settings, payment methods, and subscription plans."},{id:"analytics",label:"AI and Analytics",icon:Zt,description:"Configure AI features, view system analytics, and generate intelligent reports."}],ra={profile:{bg:"bg-blue-100",icon:"text-blue-700"},system:{bg:"bg-green-100",icon:"text-green-800"},content:{bg:"bg-purple-200",icon:"text-purple-900"},learning:{bg:"bg-yellow-200",icon:"text-yellow-900"},cleaning:{bg:"bg-teal-100",icon:"text-teal-700"},inventory:{bg:"bg-blue-100",icon:"text-blue-700"},sterilization:{bg:"bg-purple-200",icon:"text-purple-900"},"system-config":{bg:"bg-green-100",icon:"text-green-800"},analytics:{bg:"bg-yellow-200",icon:"text-yellow-900"}},Dm=()=>{const[r,t]=h.useState(null),[s,a]=h.useState(null),[n,l]=h.useState(null),{currentUser:o}=We();h.useEffect(()=>{_m(null,null,function*(){if(o!=null&&o.facility_id)try{const u=yield yn.getFacilitySettings(o.facility_id);u&&l(u)}catch(u){console.error("Error loading facility settings:",u)}})},[o==null?void 0:o.facility_id]);const c=d=>{try{a(null),t(u=>u===d?null:d)}catch(u){console.error("Error opening settings card:",u),a(u instanceof Error?u.message:"Failed to open settings")}},i=()=>{const d=[];for(let u=0;u<sa.length;u++){const m=sa[u];d.push(e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>c(m.id),className:`bg-white rounded-xl shadow p-6 border border-gray-100 text-left transition-all duration-200 hover:shadow-md hover:scale-105 focus:outline-none w-full min-h-[180px] flex flex-col justify-between ${r===m.id?"ring-2 ring-[#4ECDC4]":""}`,type:"button",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("span",{className:`${ra[m.id].bg} rounded-md p-2 mr-3`,children:e.jsx(v,{path:m.icon,size:1,className:ra[m.id].icon})}),e.jsx("h3",{className:"text-base font-medium text-gray-700",children:m.label})]}),e.jsx("p",{className:"text-gray-500 text-sm mt-auto",children:m.description})]})},m.id)),r===m.id&&d.push(e.jsxs("div",{className:"col-span-full bg-white border border-gray-200 rounded-xl shadow-lg p-6 animate-fade-in my-2",style:{gridColumn:"1 / -1"},children:[m.id==="profile"&&e.jsx(oe,{children:e.jsx(mi,{})}),m.id==="system"&&e.jsx(oe,{children:e.jsx(Xi,{})}),m.id==="system-config"&&e.jsx(oe,{children:e.jsx(Ji,{})}),m.id==="content"&&e.jsx(oe,{children:e.jsx(xo,{})}),m.id==="learning"&&e.jsx(oe,{children:e.jsx(nc,{})}),m.id==="cleaning"&&e.jsx(oe,{children:e.jsx(Au,{})}),m.id==="inventory"&&e.jsx(oe,{children:e.jsx(Nm,{})}),m.id==="sterilization"&&e.jsx(oe,{children:e.jsx(uo,{})}),m.id==="analytics"&&e.jsx(oe,{children:e.jsx(Al,{})})]},m.id+"-drawer"))}return d};return e.jsx(La,{children:e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("div",{className:"p-4 max-w-7xl w-full mx-auto flex-1 flex flex-col",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-[#5b5b5b] mb-1",children:"Admin Settings"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Configure system-wide settings, manage users, and control application features"})]}),s&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:e.jsxs("p",{className:"text-red-600 text-sm",children:["Error: ",s]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 flex-1",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:i()})})]})})})};export{Dm as default};
