import{g as O}from"./login-em2Hs6UG.js";class M{static transformFromSupabase(t){var a,d,o;const r=t.data||{},e=t.category||r.category||"unknown",n=O("NODE_ENV")==="development"||O("MODE")==="development",s=O("VITE_DEBUG_INVENTORY")==="true";return n&&s&&console.debug("Transforming inventory item:",t),{id:t.id,name:t.name,category:e,location:"",status:"active",updated_at:t.updated_at,quantity:t.quantity,unit_cost:t.unit_cost,reorder_point:t.reorder_point||0,expiration_date:t.expiration_date||"",created_at:t.created_at,facility_id:t.facility_id||"",data:{description:r.description||"",barcode:r.barcode||"",warranty:r.warranty||"",serialNumber:r.serialNumber||"",manufacturer:r.manufacturer||"",lastServiced:r.lastServiced||"",unit:r.unit||"",supplier:r.supplier||"",notes:r.notes||"",tags:r.tags||[],imageUrl:r.imageUrl||"",isActive:(a=r.isActive)!=null?a:!0,tracked:(d=r.tracked)!=null?d:!0,favorite:(o=r.favorite)!=null?o:!1,purchaseDate:r.purchaseDate||"",createdAt:r.createdAt||"",updatedAt:r.updatedAt||"",currentPhase:r.currentPhase||"",sku:r.sku||"",p2Status:r.p2Status||"",toolId:r.toolId||"",supplyId:r.supplyId||"",equipmentId:r.equipmentId||"",hardwareId:r.hardwareId||"",serviceProvider:r.serviceProvider||"",assignedTo:r.assignedTo||""}}}static transformToSupabase(t){const a={name:t.name,category:t.category,quantity:t.quantity||0,unit_cost:t.unit_cost||0,status:t.status||"active"};return t.facility_id&&(a.facility_id=t.facility_id),t.data&&typeof t.data=="object"&&t.data!==null&&"description"in t.data&&typeof t.data.description=="string"&&(a.description=t.data.description),t.location&&(a.location=t.location),t.data&&typeof t.data=="object"&&t.data!==null&&"sku"in t.data&&typeof t.data.sku=="string"&&(a.sku=t.data.sku),t.data&&typeof t.data=="object"&&t.data!==null&&"barcode"in t.data&&typeof t.data.barcode=="string"&&(a.barcode=t.data.barcode),t.data&&typeof t.data=="object"&&t.data!==null&&"manufacturer"in t.data&&typeof t.data.manufacturer=="string"&&(a.manufacturer=t.data.manufacturer),t.data&&typeof t.data=="object"&&t.data!==null&&"serialNumber"in t.data&&typeof t.data.serialNumber=="string"&&(a.serial_number=t.data.serialNumber),t.data&&typeof t.data=="object"&&t.data!==null&&"expiration"in t.data&&typeof t.data.expiration=="string"&&(a.expiration_date=t.data.expiration),t.data&&typeof t.data=="object"&&t.data!==null&&"unit"in t.data&&typeof t.data.unit=="string"&&(a.unit_of_measure=t.data.unit),t.reorder_point!==void 0&&(a.reorder_point=t.reorder_point),t.data&&typeof t.data=="object"&&t.data!==null&&"createdAt"in t.data&&typeof t.data.createdAt=="string"&&(a.created_at=t.data.createdAt),t.data&&typeof t.data=="object"&&t.data!==null&&"updatedAt"in t.data&&typeof t.data.updatedAt=="string"&&(a.updated_at=t.data.updatedAt),a}}class j{static transformForModal(t){return t.map(a=>{var d,o;return{id:a.id||"",name:a.name||"",barcode:((d=a.data)==null?void 0:d.barcode)||a.id||"",currentPhase:a.status||((o=a.data)==null?void 0:o.currentPhase)||"Unknown",category:a.category||""}})}static transformForTable(t){return t.map(a=>{var d,o,r,e;return{id:a.id||"",name:a.name||"",category:a.category||"",location:a.location||"",status:a.status||((d=a.data)==null?void 0:d.currentPhase)||"Unknown",tracked:((o=a.data)==null?void 0:o.tracked)||!1,favorite:((r=a.data)==null?void 0:r.favorite)||!1,lastUpdated:((e=a.data)==null?void 0:e.updatedAt)||""}})}static transformForExport(t){return t.map(a=>{var d,o,r,e,n,s,i,c,p,_,f,v;return{ID:a.id||"",Name:a.name||"",Category:a.category||"",Location:a.location||"",Status:a.status||((d=a.data)==null?void 0:d.currentPhase)||"",Quantity:String(a.quantity||0),Cost:String(a.unit_cost||0),Barcode:((o=a.data)==null?void 0:o.barcode)||"",SerialNumber:((r=a.data)==null?void 0:r.serialNumber)||"",Manufacturer:((e=a.data)==null?void 0:e.manufacturer)||"",SKU:((n=a.data)==null?void 0:n.sku)||"",Description:((s=a.data)==null?void 0:s.description)||"",Warranty:((i=a.data)==null?void 0:i.warranty)||"",LastServiced:((c=a.data)==null?void 0:c.lastServiced)||"",Notes:((p=a.data)==null?void 0:p.notes)||"",Tags:Array.isArray((_=a.data)==null?void 0:_.tags)?a.data.tags.join(", "):"",CreatedAt:((f=a.data)==null?void 0:f.createdAt)||"",UpdatedAt:((v=a.data)==null?void 0:v.updatedAt)||""}})}static transformForSearch(t){return t.map(a=>{var d,o,r;return{id:a.id,name:a.name||"",category:a.category||"",location:a.location||"",status:a.status||((d=a.data)==null?void 0:d.currentPhase)||"",quantity:a.quantity||0,unit_cost:a.unit_cost||0,barcode:((o=a.data)==null?void 0:o.barcode)||void 0,description:(r=a.data)==null?void 0:r.description}})}}var W=Object.defineProperty,Q=Object.defineProperties,G=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,V=(l,t,a)=>t in l?W(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a,C=(l,t)=>{for(var a in t||(t={}))K.call(t,a)&&V(l,a,t[a]);if(E)for(var a of E(t))R.call(t,a)&&V(l,a,t[a]);return l},F=(l,t)=>Q(l,G(t));class g{static createNewItem(t){const a=new Date().toISOString(),d=o=>t.data&&typeof t.data=="object"&&t.data!==null&&o in t.data&&typeof t.data[o]=="string"?t.data[o]:"";return{id:"",facility_id:t.facility_id||"",name:t.name||"",quantity:t.quantity||0,data:{description:d("description"),barcode:d("barcode"),warranty:d("warranty"),serialNumber:d("serialNumber"),manufacturer:d("manufacturer"),lastServiced:d("lastServiced"),unit:d("unit"),supplier:d("supplier"),notes:d("notes"),tags:[],imageUrl:"",isActive:!0,tracked:!0,favorite:!1,purchaseDate:"",createdAt:a,updatedAt:a,currentPhase:"Active",sku:"",p2Status:"",toolId:"",supplyId:"",equipmentId:"",hardwareId:"",serviceProvider:"",assignedTo:""},created_at:a,updated_at:a,reorder_point:t.reorder_point||0,expiration_date:t.expiration_date||"",unit_cost:t.unit_cost||0,category:t.category||"",status:t.status||"Active",location:t.location||"",supplier:t.supplier||"",cost:t.cost||0,vendor:t.vendor||"",warranty:t.warranty||"",maintenance_schedule:t.maintenance_schedule||"",next_due:t.next_due||"",service_provider:t.service_provider||"",assigned_to:t.assigned_to||"",notes:t.notes||"",tool_id:t.tool_id||"",supply_id:t.supply_id||"",equipment_id:t.equipment_id||"",hardware_id:t.hardware_id||"",p2_status:t.p2_status||"",serial_number:t.serial_number||"",manufacturer:t.manufacturer||"",image_url:t.image_url||"",tags:t.tags||[],favorite:t.favorite||!1,tracked:t.tracked||!0,barcode:t.barcode||"",sku:t.sku||"",description:t.description||"",current_phase:t.current_phase||"Active",is_active:t.is_active||!0,unit:t.unit||"",expiration:t.expiration||"",purchase_date:t.purchase_date||"",last_serviced:t.last_serviced||"",last_updated:a}}static updateItemWithTimestamp(t){const a=new Date().toISOString();return F(C({},t),{data:F(C({},t.data&&typeof t.data=="object"&&t.data!==null?t.data:{}),{lastUpdated:a,updatedAt:a})})}static normalizeItemName(t){return t?t.trim().replace(/\s+/g," ").split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()).join(" "):""}static normalizeCategory(t){return t?t.trim().toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""):""}static transformInventoryItem(t){var a;const d=this.normalizeItemName(t.name||""),o=this.normalizeCategory(t.category||""),r=(a=t.data)!=null&&a.expiration?new Date(t.data.expiration):null,e=new Date,n=r?r<e:!1,s=r?Math.ceil((r.getTime()-e.getTime())/(1e3*60*60*24)):null;return F(C({},t),{normalizedName:d,normalizedCategory:o,quantityInStock:t.quantity||0,isExpired:n,daysUntilExpiry:s})}static transformInventoryBatch(t){return t.map(a=>F(C({},a),{normalizedName:this.normalizeItemName(a.name||""),normalizedCategory:this.normalizeCategory(a.category||"")}))}}class L{static transformToCSV(t){if(t.length===0)return"";const a=["Name","Quantity","Category","Status","Expiry Date"],d=t.map(r=>{var e;return[r.name,(r.quantity||1).toString(),r.category,r.status,((e=r.data)==null?void 0:e.expiration)||""]});return[a,...d].map(r=>r.map(e=>`"${e}"`).join(",")).join(`
`)}static transformFromCSV(t){const a=t.trim().split(`
`);if(a.length<2)return[];const d=a[0].split(",").map(r=>r.replace(/"/g,"").trim());return a.slice(1).map(r=>{const e=r.split(",").map(s=>s.replace(/"/g,"").trim()),n={};return d.forEach((s,i)=>{n[s.toLowerCase().replace(/\s+/g,"")]=e[i]||""}),{id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:n.name||"",category:n.category||"",status:n.status||"active",quantity:parseInt(n.quantity)||1,unit_cost:0,reorder_point:0,expiration_date:n.expirydate||"",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),facility_id:"",location:"",data:{description:"",barcode:"",warranty:"",serialNumber:"",manufacturer:"",lastServiced:"",unit:"",supplier:"",notes:"",tags:[],imageUrl:"",isActive:!0,tracked:!1,favorite:!1,purchaseDate:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),currentPhase:"Active",sku:"",p2Status:"",toolId:"",supplyId:"",equipmentId:"",hardwareId:"",serviceProvider:"",assignedTo:""}}})}}class B{static transformForAPI(t){return t.map(a=>{var d,o,r,e,n,s,i,c,p,_,f,v,y,h,b,S,w,A,P,x,N,T,k,q,D;return{id:a.id,name:a.name,category:a.category,status:a.status,quantity:a.quantity,location:a.location,unit_cost:a.unit_cost,reorder_point:a.reorder_point,expiration_date:a.expiration_date,created_at:a.created_at,updated_at:a.updated_at,facility_id:a.facility_id,data:{description:(d=a.data)==null?void 0:d.description,barcode:((o=a.data)==null?void 0:o.barcode)||void 0,serialNumber:(r=a.data)==null?void 0:r.serialNumber,manufacturer:(e=a.data)==null?void 0:e.manufacturer,supplier:(n=a.data)==null?void 0:n.supplier,expiration:(s=a.data)==null?void 0:s.expiration,warranty:(i=a.data)==null?void 0:i.warranty,notes:(c=a.data)==null?void 0:c.notes,tags:(p=a.data)==null?void 0:p.tags,imageUrl:(_=a.data)==null?void 0:_.imageUrl,isActive:(f=a.data)==null?void 0:f.isActive,tracked:(v=a.data)==null?void 0:v.tracked,favorite:(y=a.data)==null?void 0:y.favorite,purchaseDate:(h=a.data)==null?void 0:h.purchaseDate,lastServiced:(b=a.data)==null?void 0:b.lastServiced,unit:(S=a.data)==null?void 0:S.unit,currentPhase:(w=a.data)==null?void 0:w.currentPhase,sku:(A=a.data)==null?void 0:A.sku,p2Status:(P=a.data)==null?void 0:P.p2Status,toolId:(x=a.data)==null?void 0:x.toolId,supplyId:(N=a.data)==null?void 0:N.supplyId,equipmentId:(T=a.data)==null?void 0:T.equipmentId,hardwareId:(k=a.data)==null?void 0:k.hardwareId,serviceProvider:(q=a.data)==null?void 0:q.serviceProvider,assignedTo:(D=a.data)==null?void 0:D.assignedTo}}})}static transformFromAPI(t){return t.map(a=>{var d,o,r,e,n,s,i,c,p,_,f,v,y,h,b,S,w,A,P,x,N,T,k,q,D,U,z;return{id:a.id,name:a.name,category:a.category,location:a.location,status:a.status,updated_at:a.updated_at,quantity:a.quantity,unit_cost:a.unit_cost,reorder_point:a.reorder_point,expiration_date:a.expiration_date,created_at:a.created_at,facility_id:a.facility_id,data:{description:(d=a.data)==null?void 0:d.description,barcode:(o=a.data)==null?void 0:o.barcode,warranty:(r=a.data)==null?void 0:r.warranty,serialNumber:(e=a.data)==null?void 0:e.serialNumber,expiration:(n=a.data)==null?void 0:n.expiration,manufacturer:(s=a.data)==null?void 0:s.manufacturer,lastServiced:(i=a.data)==null?void 0:i.lastServiced,unit:(c=a.data)==null?void 0:c.unit,supplier:(p=a.data)==null?void 0:p.supplier,notes:(_=a.data)==null?void 0:_.notes,tags:(f=a.data)==null?void 0:f.tags,imageUrl:(v=a.data)==null?void 0:v.imageUrl,isActive:(y=a.data)==null?void 0:y.isActive,tracked:(h=a.data)==null?void 0:h.tracked,favorite:(b=a.data)==null?void 0:b.favorite,purchaseDate:(S=a.data)==null?void 0:S.purchaseDate,createdAt:(w=a.data)==null?void 0:w.createdAt,updatedAt:(A=a.data)==null?void 0:A.updatedAt,currentPhase:(P=a.data)==null?void 0:P.currentPhase,sku:(x=a.data)==null?void 0:x.sku,p2Status:(N=a.data)==null?void 0:N.p2Status,toolId:(T=a.data)==null?void 0:T.toolId,supplyId:(k=a.data)==null?void 0:k.supplyId,equipmentId:(q=a.data)==null?void 0:q.equipmentId,hardwareId:(D=a.data)==null?void 0:D.hardwareId,serviceProvider:(U=a.data)==null?void 0:U.serviceProvider,assignedTo:(z=a.data)==null?void 0:z.assignedTo}}})}}class u{}u.transformFromSupabase=M.transformFromSupabase;u.transformToSupabase=M.transformToSupabase;u.transformForModal=j.transformForModal;u.transformForTable=j.transformForTable;u.transformForExport=j.transformForExport;u.transformForSearch=j.transformForSearch;u.createNewItem=g.createNewItem;u.updateItemWithTimestamp=g.updateItemWithTimestamp;u.normalizeItemName=g.normalizeItemName;u.normalizeCategory=g.normalizeCategory;u.transformInventoryItem=g.transformInventoryItem;u.transformInventoryBatch=g.transformInventoryBatch;u.transformToCSV=L.transformToCSV;u.transformFromCSV=L.transformFromCSV;u.transformForAPI=B.transformForAPI;u.transformFromAPI=B.transformFromAPI;export{u as I};
